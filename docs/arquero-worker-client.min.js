!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).aq={})}(this,(function(t){"use strict";var e={};function r(t,e,r){return e<=t&&t<=r}function i(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}e.SIZEOF_SHORT=2,e.SIZEOF_INT=4,e.FILE_IDENTIFIER_LENGTH=4,e.Encoding={UTF8_BYTES:1,UTF16_STRING:2},e.int32=new Int32Array(2),e.float32=new Float32Array(e.int32.buffer),e.float64=new Float64Array(e.int32.buffer),e.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],e.Long=function(t,e){this.low=0|t,this.high=0|e},e.Long.create=function(t,r){return 0==t&&0==r?e.Long.ZERO:new e.Long(t,r)},e.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},e.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},e.Long.ZERO=new e.Long(0,0),e.Builder=function(t){if(t)r=t;else var r=1024;this.bb=e.ByteBuffer.allocate(r),this.space=r,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},e.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},e.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},e.Builder.prototype.dataBuffer=function(){return this.bb},e.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},e.Builder.prototype.prep=function(t,r){t>this.minalign&&(this.minalign=t);for(var i=1+~(this.bb.capacity()-this.space+r)&t-1;this.space<i+t+r;){var n=this.bb.capacity();this.bb=e.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-n}this.pad(i)},e.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},e.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},e.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},e.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},e.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},e.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},e.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},e.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},e.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},e.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},e.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},e.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},e.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},e.Builder.prototype.addFieldInt8=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt8(e),this.slot(t))},e.Builder.prototype.addFieldInt16=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt16(e),this.slot(t))},e.Builder.prototype.addFieldInt32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt32(e),this.slot(t))},e.Builder.prototype.addFieldInt64=function(t,e,r){!this.force_defaults&&e.equals(r)||(this.addInt64(e),this.slot(t))},e.Builder.prototype.addFieldFloat32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat32(e),this.slot(t))},e.Builder.prototype.addFieldFloat64=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat64(e),this.slot(t))},e.Builder.prototype.addFieldOffset=function(t,e,r){(this.force_defaults||e!=r)&&(this.addOffset(e),this.slot(t))},e.Builder.prototype.addFieldStruct=function(t,e,r){e!=r&&(this.nested(e),this.slot(t))},e.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},e.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},e.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},e.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},e.Builder.growByteBuffer=function(t){var r=t.capacity();if(3221225472&r)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var i=r<<1,n=e.ByteBuffer.allocate(i);return n.setPosition(i-r),n.bytes().set(t.bytes(),i-r),n},e.Builder.prototype.addOffset=function(t){this.prep(e.SIZEOF_INT,0),this.writeInt32(this.offset()-t+e.SIZEOF_INT)},e.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},e.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),r=this.vtable_in_use-1;r>=0&&0==this.vtable[r];r--);for(var i=r+1;r>=0;r--)this.addInt16(0!=this.vtable[r]?t-this.vtable[r]:0);this.addInt16(t-this.object_start);var n=(i+2)*e.SIZEOF_SHORT;this.addInt16(n);var s=0,a=this.space;t:for(r=0;r<this.vtables.length;r++){var o=this.bb.capacity()-this.vtables[r];if(n==this.bb.readInt16(o)){for(var c=e.SIZEOF_SHORT;c<n;c+=e.SIZEOF_SHORT)if(this.bb.readInt16(a+c)!=this.bb.readInt16(o+c))continue t;s=this.vtables[r];break}}return s?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,s-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},e.Builder.prototype.finish=function(t,r){if(r){var i=r;if(this.prep(this.minalign,e.SIZEOF_INT+e.FILE_IDENTIFIER_LENGTH),i.length!=e.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+e.FILE_IDENTIFIER_LENGTH);for(var n=e.FILE_IDENTIFIER_LENGTH-1;n>=0;n--)this.writeInt8(i.charCodeAt(n))}this.prep(this.minalign,e.SIZEOF_INT),this.addOffset(t),this.bb.setPosition(this.space)},e.Builder.prototype.requiredField=function(t,e){var r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(0!=this.bb.readInt16(i+e)))throw new Error("FlatBuffers: field "+e+" must be set")},e.Builder.prototype.startVector=function(t,r,i){this.notNested(),this.vector_num_elems=r,this.prep(e.SIZEOF_INT,t*r),this.prep(i,t*r)},e.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},e.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var r=0;r<t.length;){var i,n=t.charCodeAt(r++);if(n<55296||n>=56320)i=n;else i=(n<<10)+t.charCodeAt(r++)+-56613888;i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(63&i|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);r=0;for(var s=this.space,a=this.bb.bytes();r<e.length;r++)a[s++]=e[r];return this.endVector()},e.Builder.prototype.createLong=function(t,r){return e.Long.create(t,r)},e.ByteBuffer=function(t){this.bytes_=t,this.position_=0},e.ByteBuffer.allocate=function(t){return new e.ByteBuffer(new Uint8Array(t))},e.ByteBuffer.prototype.clear=function(){this.position_=0},e.ByteBuffer.prototype.bytes=function(){return this.bytes_},e.ByteBuffer.prototype.position=function(){return this.position_},e.ByteBuffer.prototype.setPosition=function(t){this.position_=t},e.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},e.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},e.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},e.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},e.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},e.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},e.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},e.ByteBuffer.prototype.readInt64=function(t){return new e.Long(this.readInt32(t),this.readInt32(t+4))},e.ByteBuffer.prototype.readUint64=function(t){return new e.Long(this.readUint32(t),this.readUint32(t+4))},e.ByteBuffer.prototype.readFloat32=function(t){return e.int32[0]=this.readInt32(t),e.float32[0]},e.ByteBuffer.prototype.readFloat64=function(t){return e.int32[e.isLittleEndian?0:1]=this.readInt32(t),e.int32[e.isLittleEndian?1:0]=this.readInt32(t+4),e.float64[0]},e.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},e.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},e.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},e.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},e.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},e.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},e.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},e.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},e.ByteBuffer.prototype.writeFloat32=function(t,r){e.float32[0]=r,this.writeInt32(t,e.int32[0])},e.ByteBuffer.prototype.writeFloat64=function(t,r){e.float64[0]=r,this.writeInt32(t,e.int32[e.isLittleEndian?0:1]),this.writeInt32(t+4,e.int32[e.isLittleEndian?1:0])},e.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+e.SIZEOF_INT+e.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",r=0;r<e.FILE_IDENTIFIER_LENGTH;r++)t+=String.fromCharCode(this.readInt8(this.position_+e.SIZEOF_INT+r));return t},e.ByteBuffer.prototype.__offset=function(t,e){var r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0},e.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},e.ByteBuffer.prototype.__string=function(t,r){t+=this.readInt32(t);var i=this.readInt32(t),n="",s=0;if(t+=e.SIZEOF_INT,r===e.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+i);for(;s<i;){var a,o=this.readUint8(t+s++);if(o<192)a=o;else{var c=this.readUint8(t+s++);if(o<224)a=(31&o)<<6|63&c;else{var u=this.readUint8(t+s++);if(o<240)a=(15&o)<<12|(63&c)<<6|63&u;else a=(7&o)<<18|(63&c)<<12|(63&u)<<6|63&this.readUint8(t+s++)}}a<65536?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296+(a>>10),56320+(1023&a)))}return n},e.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},e.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+e.SIZEOF_INT},e.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},e.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=e.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+e.FILE_IDENTIFIER_LENGTH);for(var r=0;r<e.FILE_IDENTIFIER_LENGTH;r++)if(t.charCodeAt(r)!=this.readInt8(this.position_+e.SIZEOF_INT+r))return!1;return!0},e.ByteBuffer.prototype.createLong=function(t,r){return e.Long.create(t,r)};function n(t){this.tokens=[].slice.call(t)}n.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var s=-1;function a(t,e){if(t)throw TypeError("Decoder error");return e||65533}var o="utf-8";function c(t,e){if(!(this instanceof c))return new c(t,e);if((t=void 0!==t?String(t).toLowerCase():o)!==o)throw new Error("Encoding not supported. Only utf-8 is supported");e=i(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function u(t,e){if(!(this instanceof u))return new u(t,e);if((t=void 0!==t?String(t).toLowerCase():o)!==o)throw new Error("Encoding not supported. Only utf-8 is supported");e=i(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function h(t){var e=t.fatal,i=0,n=0,o=0,c=128,u=191;this.handler=function(t,h){if(-1===h&&0!==o)return o=0,a(e);if(-1===h)return s;if(0===o){if(r(h,0,127))return h;if(r(h,194,223))o=1,i=h-192;else if(r(h,224,239))224===h&&(c=160),237===h&&(u=159),o=2,i=h-224;else{if(!r(h,240,244))return a(e);240===h&&(c=144),244===h&&(u=143),o=3,i=h-240}return i<<=6*o,null}if(!r(h,c,u))return i=o=n=0,c=128,u=191,t.prepend(h),a(e);if(c=128,u=191,i+=h-128<<6*(o-(n+=1)),n!==o)return null;var l=i;return i=o=n=0,l}}function l(t){t.fatal;this.handler=function(t,e){if(-1===e)return s;if(r(e,0,127))return e;var i,n;r(e,128,2047)?(i=1,n=192):r(e,2048,65535)?(i=2,n=224):r(e,65536,1114111)&&(i=3,n=240);for(var a=[(e>>6*i)+n];i>0;){var o=e>>6*(i-1);a.push(128|63&o),i-=1}return a}}c.prototype={decode:function(t,e){var r;r="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=i(e),this._streaming||(this._decoder=new h({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var a,o=new n(r),c=[];!o.endOfStream()&&(a=this._decoder.handler(o,o.read()))!==s;)null!==a&&(Array.isArray(a)?c.push.apply(c,a):c.push(a));if(!this._streaming){do{if((a=this._decoder.handler(o,o.read()))===s)break;null!==a&&(Array.isArray(a)?c.push.apply(c,a):c.push(a))}while(!o.endOfStream());this._decoder=null}return c.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===c[0]?(this._BOMseen=!0,c.shift()):this._BOMseen=!0)),function(t){for(var e="",r=0;r<t.length;++r){var i=t[r];i<=65535?e+=String.fromCharCode(i):(i-=65536,e+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return e}(c)}},u.prototype={encode:function(t,e){t=t?String(t):"",e=i(e),this._streaming||(this._encoder=new l(this._options)),this._streaming=Boolean(e.stream);for(var r,a=[],o=new n(function(t){for(var e=String(t),r=e.length,i=0,n=[];i<r;){var s=e.charCodeAt(i);if(s<55296||s>57343)n.push(s);else if(56320<=s&&s<=57343)n.push(65533);else if(55296<=s&&s<=56319)if(i===r-1)n.push(65533);else{var a=t.charCodeAt(i+1);if(56320<=a&&a<=57343){var o=1023&s,c=1023&a;n.push(65536+(o<<10)+c),i+=1}else n.push(65533)}i+=1}return n}(t));!o.endOfStream()&&(r=this._encoder.handler(o,o.read()))!==s;)Array.isArray(r)?a.push.apply(a,r):a.push(r);if(!this._streaming){for(;(r=this._encoder.handler(o,o.read()))!==s;)Array.isArray(r)?a.push.apply(a,r):a.push(r);this._encoder=null}return new Uint8Array(a)}};const p="function"==typeof Buffer?Buffer:null,d="function"==typeof TextDecoder&&"function"==typeof TextEncoder,f=(t=>{if(d||!p){const e=new t("utf-8");return t=>e.decode(t)}return t=>{const{buffer:e,byteOffset:r,length:i}=W(t);return p.from(e,r,i).toString()}})("undefined"!=typeof TextDecoder?TextDecoder:c),y=(t=>{if(d||!p){const e=new t;return t=>e.encode(t)}return(t="")=>W(p.from(t,"utf8"))})("undefined"!=typeof TextEncoder?TextEncoder:u),m=Object.freeze({done:!0,value:void 0});class b{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class g{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class _ extends g{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}get closed(){return this._closedPromise}async cancel(t){await this.return(t)}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(m);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return J.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return J.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}async throw(t){return await this.abort(t),m}async return(t){return await this.close(),m}async read(t){return(await this.next(t,"read")).value}async peek(t){return(await this.next(t,"peek")).value}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((t,e)=>{this.resolvers.push({resolve:t,reject:e})})):Promise.resolve(m)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error(`${this} is closed`)}}const[v,w]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!=typeof BigInt?[BigInt,!0]:[e,!1]})(),[x,I]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!=typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),[S,T]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!=typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),A=t=>"boolean"==typeof t,E=t=>"function"==typeof t,B=t=>null!=t&&Object(t)===t,k=t=>B(t)&&E(t.then),L=t=>B(t)&&E(t[Symbol.iterator]),C=t=>B(t)&&E(t[Symbol.asyncIterator]),D=t=>B(t)&&B(t.schema),M=t=>B(t)&&"done"in t&&"value"in t,O=t=>B(t)&&E(t.stat)&&(t=>"number"==typeof t)(t.fd),N=t=>B(t)&&F(t.body),F=t=>B(t)&&E(t.cancel)&&E(t.getReader)&&!(t instanceof g),U=t=>B(t)&&E(t.read)&&E(t.pipe)&&A(t.readable)&&!(t instanceof g);var V=e.ByteBuffer;const P="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function R(t,e,r=0,i=e.byteLength){const n=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,n),a=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,n));return s.set(a,r),t}function j(t,e){let r,i,n,s=function(t){let e,r,i,n,s=t[0]?[t[0]]:[];for(let a,o,c=0,u=0,h=t.length;++c<h;)a=s[u],o=t[c],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset?o&&(s[++u]=o):(({byteOffset:e,byteLength:i}=a),({byteOffset:r,byteLength:n}=o),e+i<r||r+n<e?o&&(s[++u]=o):s[u]=new Uint8Array(a.buffer,e,r-e+n));return s}(t),a=s.reduce(((t,e)=>t+e.byteLength),0),o=0,c=-1,u=Math.min(e||1/0,a);for(let t=s.length;++c<t;){if(r=s[c],i=r.subarray(0,Math.min(r.length,u-o)),u<=o+i.length){i.length<r.length?s[c]=r.subarray(i.length):i.length===r.length&&c++,n?R(n,i,o):n=i;break}R(n||(n=new Uint8Array(u)),i,o),o+=i.length}return[n||new Uint8Array(0),s.slice(c),a-(n?n.byteLength:0)]}function z(t,e){let r=M(e)?e.value:e;return r instanceof t?t===Uint8Array?new t(r.buffer,r.byteOffset,r.byteLength):r:r?("string"==typeof r&&(r=y(r)),r instanceof ArrayBuffer||r instanceof P?new t(r):r instanceof V?z(t,r.bytes()):ArrayBuffer.isView(r)?r.byteLength<=0?new t(0):new t(r.buffer,r.byteOffset,r.byteLength/t.BYTES_PER_ELEMENT):t.from(r)):new t(0)}const $=t=>z(Int32Array,t),W=t=>z(Uint8Array,t),H=t=>(t.next(),t);const q=t=>function*(t,e){const r=function*(t){yield t},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof P?r(e):L(e)?e:r(e);return yield*H(function*(e){let r=null;do{r=e.next(yield z(t,r))}while(!r.done)}(i[Symbol.iterator]())),new t}(Uint8Array,t);async function*Y(t,e){if(k(e))return yield*Y(t,await e);const r=async function*(t){yield await t},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof P?r(e):L(e)?async function*(t){yield*H(function*(t){let e=null;do{e=t.next(yield e&&e.value)}while(!e.done)}(t[Symbol.iterator]()))}(e):C(e)?e:r(e);return yield*H(async function*(e){let r=null;do{r=await e.next(yield z(t,r))}while(!r.done)}(i[Symbol.asyncIterator]())),new t}const G=t=>Y(Uint8Array,t);function K(t,e,r){if(0!==t){r=r.slice(0,e+1);for(let i=-1;++i<=e;)r[i]+=t}return r}var J={fromIterable:t=>Q(function*(t){let e,r,i,n,s=!1,a=[],o=0;function c(){return"peek"===i?j(a,n)[0]:([r,a,o]=j(a,n),r)}({cmd:i,size:n}=yield null);let u=q(t)[Symbol.iterator]();try{do{if(({done:e,value:r}=isNaN(n-o)?u.next(void 0):u.next(n-o)),!e&&r.byteLength>0&&(a.push(r),o+=r.byteLength),e||n<=o)do{({cmd:i,size:n}=yield c())}while(n<o)}while(!e)}catch(t){(s=!0)&&"function"==typeof u.throw&&u.throw(t)}finally{!1===s&&"function"==typeof u.return&&u.return(null)}return null}(t)),fromAsyncIterable:t=>Q(async function*(t){let e,r,i,n,s=!1,a=[],o=0;function c(){return"peek"===i?j(a,n)[0]:([r,a,o]=j(a,n),r)}({cmd:i,size:n}=yield null);let u=G(t)[Symbol.asyncIterator]();try{do{if(({done:e,value:r}=isNaN(n-o)?await u.next(void 0):await u.next(n-o)),!e&&r.byteLength>0&&(a.push(r),o+=r.byteLength),e||n<=o)do{({cmd:i,size:n}=yield c())}while(n<o)}while(!e)}catch(t){(s=!0)&&"function"==typeof u.throw&&await u.throw(t)}finally{!1===s&&"function"==typeof u.return&&await u.return(new Uint8Array(0))}return null}(t)),fromDOMStream:t=>Q(async function*(t){let e,r,i,n=!1,s=!1,a=[],o=0;function c(){return"peek"===r?j(a,i)[0]:([e,a,o]=j(a,i),e)}({cmd:r,size:i}=yield null);let u=new Z(t);try{do{if(({done:n,value:e}=isNaN(i-o)?await u.read(void 0):await u.read(i-o)),!n&&e.byteLength>0&&(a.push(W(e)),o+=e.byteLength),n||i<=o)do{({cmd:r,size:i}=yield c())}while(i<o)}while(!n)}catch(t){(s=!0)&&await u.cancel(t)}finally{!1===s?await u.cancel():t.locked&&u.releaseLock()}return null}(t)),fromNodeStream:t=>Q(async function*(t){let e,r,i,n=[],s="error",a=!1,o=null,c=0,u=[];function h(){return"peek"===e?j(u,r)[0]:([i,u,c]=j(u,r),i)}if(({cmd:e,size:r}=yield null),t.isTTY)return yield new Uint8Array(0),null;try{n[0]=tt(t,"end"),n[1]=tt(t,"error");do{if(n[2]=tt(t,"readable"),[s,o]=await Promise.race(n.map((t=>t[2]))),"error"===s)break;if((a="end"===s)||(isFinite(r-c)?(i=W(t.read(r-c)),i.byteLength<r-c&&(i=W(t.read(void 0)))):i=W(t.read(void 0)),i.byteLength>0&&(u.push(i),c+=i.byteLength)),a||r<=c)do{({cmd:e,size:r}=yield h())}while(r<c)}while(!a)}finally{await l(n,"error"===s?o:null)}return null;function l(e,r){return i=u=null,new Promise((async(i,n)=>{for(const[r,i]of e)t.off(r,i);try{const e=t.destroy;e&&e.call(t,r),r=void 0}catch(t){r=t||r}finally{null!=r?n(r):i()}}))}}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}};const Q=t=>(t.next(),t);class Z{constructor(t){this.source=t,this.byobReader=null,this.defaultReader=null;try{this.supportsBYOB=!!(this.reader=this.getBYOBReader())}catch(t){this.supportsBYOB=!(this.reader=this.getDefaultReader())}}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=this.byobReader=this.defaultReader=null}async cancel(t){const{reader:e,source:r}=this;e&&await e.cancel(t).catch((()=>{})),r&&r.locked&&this.releaseLock()}async read(t){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=this.supportsBYOB&&"number"==typeof t?await this.readFromBYOBReader(t):await this.getDefaultReader().read();return!e.done&&(e.value=W(e)),e}getDefaultReader(){return this.byobReader&&this.releaseLock(),this.defaultReader||(this.defaultReader=this.source.getReader(),this.defaultReader.closed.catch((()=>{}))),this.reader=this.defaultReader}getBYOBReader(){return this.defaultReader&&this.releaseLock(),this.byobReader||(this.byobReader=this.source.getReader({mode:"byob"}),this.byobReader.closed.catch((()=>{}))),this.reader=this.byobReader}async readFromBYOBReader(t){return await X(this.getBYOBReader(),new ArrayBuffer(t),0,t)}}async function X(t,e,r,i){if(r>=i)return{done:!1,value:new Uint8Array(e,0,i)};const{done:n,value:s}=await t.read(new Uint8Array(e,r,i-r));return(r+=s.byteLength)<i&&!n?await X(t,s.buffer,r,i):{done:n,value:new Uint8Array(s.buffer,0,r)}}const tt=(t,e)=>{let r,i=t=>r([e,t]);return[e,i,new Promise((n=>(r=n)&&t.once(e,i)))]};class et{}var rt,it;et.prototype.data=null,function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4"}((i=r.flatbuf||(r.flatbuf={})).MetadataVersion||(i.MetadataVersion={}))}(rt||(rt={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}((i=r.flatbuf||(r.flatbuf={})).UnionMode||(i.UnionMode={}))}(rt||(rt={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}((i=r.flatbuf||(r.flatbuf={})).Precision||(i.Precision={}))}(rt||(rt={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}((i=r.flatbuf||(r.flatbuf={})).DateUnit||(i.DateUnit={}))}(rt||(rt={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}((i=r.flatbuf||(r.flatbuf={})).TimeUnit||(i.TimeUnit={}))}(rt||(rt={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME"}((i=r.flatbuf||(r.flatbuf={})).IntervalUnit||(i.IntervalUnit={}))}(rt||(rt={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"}((i=r.flatbuf||(r.flatbuf={})).Type||(i.Type={}))}(rt||(rt={})),function(t){var e,r,i,n;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),i=r.flatbuf||(r.flatbuf={}),(n=i.Endianness||(i.Endianness={}))[n.Little=0]="Little",n[n.Big=1]="Big"}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return e.startNull(t),e.endNull(t)}}t.Null=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return e.startStruct_(t),e.endStruct_(t)}}t.Struct_=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return e.startList(t),e.endList(t)}}t.List=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeList(t){t.startObject(0)}static endLargeList(t){return t.endObject()}static createLargeList(t){return e.startLargeList(t),e.endLargeList(t)}}t.LargeList=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}listSize(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,r){return e.startFixedSizeList(t),e.addListSize(t,r),e.endFixedSizeList(t)}}t.FixedSizeList=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){let t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,r){return e.startMap(t),e.addKeysSorted(t,r),e.endMap(t)}}t.Map=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}mode(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.UnionMode.Sparse}typeIds(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.UnionMode.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,i){return r.startUnion(t),r.addMode(t,e),r.addTypeIds(t,i),r.endUnion(t)}}e.Union=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){let t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,r,i){return e.startInt(t),e.addBitWidth(t,r),e.addIsSigned(t,i),e.endInt(t)}}t.Int=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}precision(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Precision.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.Precision.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return r.startFloatingPoint(t),r.addPrecision(t,e),r.endFloatingPoint(t)}}e.FloatingPoint=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return e.startUtf8(t),e.endUtf8(t)}}t.Utf8=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return e.startBinary(t),e.endBinary(t)}}t.Binary=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeUtf8(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return e.startLargeUtf8(t),e.endLargeUtf8(t)}}t.LargeUtf8=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return e.startLargeBinary(t),e.endLargeBinary(t)}}t.LargeBinary=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,r){return e.startFixedSizeBinary(t),e.addByteWidth(t,r),e.endFixedSizeBinary(t)}}t.FixedSizeBinary=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return e.startBool(t),e.endBool(t)}}t.Bool=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}precision(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}static startDecimal(t){t.startObject(2)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static endDecimal(t){return t.endObject()}static createDecimal(t,r,i){return e.startDecimal(t),e.addPrecision(t,r),e.addScale(t,i),e.endDecimal(t)}}t.Decimal=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.DateUnit.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.DateUnit.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return r.startDate(t),r.addUnit(t,e),r.endDate(t)}}e.Date=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.MILLISECOND}bitWidth(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,i){return r.startTime(t),r.addUnit(t,e),r.addBitWidth(t,i),r.endTime(t)}}e.Time=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.SECOND}timezone(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.TimeUnit.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,i){return r.startTimestamp(t),r.addUnit(t,e),r.addTimezone(t,i),r.endTimestamp(t)}}e.Timestamp=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return r.startInterval(t),r.addUnit(t,e),r.endInterval(t)}}e.Interval=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDuration(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,e){return r.startDuration(t),r.addUnit(t,e),r.endDuration(t)}}e.Duration=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}key(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,r,i){return e.startKeyValue(t),e.addKey(t,r),e.addValue(t,i),e.endKeyValue(t)}}t.KeyValue=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(e){let r=this.bb.__offset(this.bb_pos,6);return r?(e||new t.apache.arrow.flatbuf.Int).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isOrdered(){let t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryEncoding(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryEncoding(t){return t.endObject()}static createDictionaryEncoding(t,e,i,n){return r.startDictionaryEncoding(t),r.addId(t,e),r.addIndexType(t,i),r.addIsOrdered(t,n),r.endDictionaryEncoding(t)}}e.DictionaryEncoding=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){let t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.Type.NONE}type(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(e){let r=this.bb.__offset(this.bb_pos,12);return r?(e||new t.apache.arrow.flatbuf.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}children(e,r){let i=this.bb.__offset(this.bb_pos,14);return i?(r||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}childrenLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(e,r){let i=this.bb.__offset(this.bb_pos,16);return i?(r||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(e,r){e.addFieldInt8(2,r,t.apache.arrow.flatbuf.Type.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}static createField(t,e,i,n,s,a,o,c){return r.startField(t),r.addName(t,e),r.addNullable(t,i),r.addTypeType(t,n),r.addType(t,s),r.addDictionary(t,a),r.addChildren(t,o),r.addCustomMetadata(t,c),r.endField(t)}}e.Field=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).Buffer=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static createBuffer(t,e,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(e),t.offset()}}}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}endianness(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Endianness.Little}fields(e,r){let i=this.bb.__offset(this.bb_pos,6);return i?(r||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}fieldsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(e,r){let i=this.bb.__offset(this.bb_pos,8);return i?(r||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(3)}static addEndianness(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.Endianness.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static createSchema(t,e,i,n){return r.startSchema(t),r.addEndianness(t,e),r.addFields(t,i),r.addCustomMetadata(t,n),r.endSchema(t)}}e.Schema=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(rt||(rt={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).Schema=rt.apache.arrow.flatbuf.Schema}(it||(it={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}((i=r.flatbuf||(r.flatbuf={})).MessageHeader||(i.MessageHeader={}))}(it||(it={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).FieldNode=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static createFieldNode(t,e,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(e),t.offset()}}}(it||(it={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}length(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(e,r){let i=this.bb.__offset(this.bb_pos,6);return i?(r||new t.apache.arrow.flatbuf.FieldNode).__init(this.bb.__vector(this.bb_pos+i)+16*e,this.bb):null}nodesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){let r=this.bb.__offset(this.bb_pos,8);return r?(e||new rt.apache.arrow.flatbuf.Buffer).__init(this.bb.__vector(this.bb_pos+r)+16*t,this.bb):null}buffersLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startRecordBatch(t){t.startObject(3)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static endRecordBatch(t){return t.endObject()}static createRecordBatch(t,e,i,n){return r.startRecordBatch(t),r.addLength(t,e),r.addNodes(t,i),r.addBuffers(t,n),r.endRecordBatch(t)}}e.RecordBatch=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(it||(it={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(e){let r=this.bb.__offset(this.bb_pos,6);return r?(e||new t.apache.arrow.flatbuf.RecordBatch).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isDelta(){let t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}static createDictionaryBatch(t,e,i,n){return r.startDictionaryBatch(t),r.addId(t,e),r.addData(t,i),r.addIsDelta(t,n),r.endDictionaryBatch(t)}}e.DictionaryBatch=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(it||(it={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):rt.apache.arrow.flatbuf.MetadataVersion.V1}headerType(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.MessageHeader.NONE}header(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){let r=this.bb.__offset(this.bb_pos,12);return r?(e||new rt.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,rt.apache.arrow.flatbuf.MetadataVersion.V1)}static addHeaderType(e,r){e.addFieldInt8(1,r,t.apache.arrow.flatbuf.MessageHeader.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static createMessage(t,e,i,n,s,a){return r.startMessage(t),r.addVersion(t,e),r.addHeaderType(t,i),r.addHeader(t,n),r.addBodyLength(t,s),r.addCustomMetadata(t,a),r.endMessage(t)}}e.Message=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(it||(it={}));rt.apache.arrow.flatbuf.Type;var nt,st=rt.apache.arrow.flatbuf.DateUnit,at=rt.apache.arrow.flatbuf.TimeUnit,ot=rt.apache.arrow.flatbuf.Precision,ct=rt.apache.arrow.flatbuf.UnionMode,ut=rt.apache.arrow.flatbuf.IntervalUnit,ht=it.apache.arrow.flatbuf.MessageHeader,lt=rt.apache.arrow.flatbuf.MetadataVersion;function pt(t,e,r,i){return 0!=(r&1<<i)}function dt(t,e,r,i){return(r&1<<i)>>i}function ft(t,e,r){const i=r.byteLength+7&-8;if(t>0||r.byteLength<i){const n=new Uint8Array(i);return n.set(t%8==0?r.subarray(t>>3):yt(mt(r,t,e,null,pt)).subarray(0,i)),n}return r}function yt(t){let e=[],r=0,i=0,n=0;for(const s of t)s&&(n|=1<<i),8==++i&&(e[r++]=n,n=i=0);(0===r||i>0)&&(e[r++]=n);let s=new Uint8Array(e.length+7&-8);return s.set(e),s}function*mt(t,e,r,i,n){let s=e%8,a=e>>3,o=0,c=r;for(;c>0;s=0){let e=t[a++];do{yield n(i,o++,e,s)}while(--c>0&&++s<8)}}function bt(t,e,r){if(r-e<=0)return 0;if(r-e<8){let i=0;for(const n of mt(t,e,r-e,t,dt))i+=n;return i}const i=r>>3<<3,n=e+(e%8==0?0:8-e%8);return bt(t,e,n)+bt(t,i,r)+function(t,e,r){let i=0,n=0|e;const s=new DataView(t.buffer,t.byteOffset,t.byteLength),a=void 0===r?t.byteLength:n+r;for(;a-n>=4;)i+=gt(s.getUint32(n)),n+=4;for(;a-n>=2;)i+=gt(s.getUint16(n)),n+=2;for(;a-n>=1;)i+=gt(s.getUint8(n)),n+=1;return i}(t,n>>3,i-n>>3)}function gt(t){let e=0|t;return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(t.Type||(t.Type={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(nt||(nt={}));class _t{visitMany(t,...e){return t.map(((t,r)=>this.visit(t,...e.map((t=>t[r])))))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(e,r=!0){return function(e,r,i=!0){let n=null,s=t.Type.NONE;r instanceof ve||r instanceof et?s=vt(r.type):r instanceof Dt?s=vt(r):"number"!=typeof(s=r)&&(s=t.Type[r]);switch(s){case t.Type.Null:n=e.visitNull;break;case t.Type.Bool:n=e.visitBool;break;case t.Type.Int:n=e.visitInt;break;case t.Type.Int8:n=e.visitInt8||e.visitInt;break;case t.Type.Int16:n=e.visitInt16||e.visitInt;break;case t.Type.Int32:n=e.visitInt32||e.visitInt;break;case t.Type.Int64:n=e.visitInt64||e.visitInt;break;case t.Type.Uint8:n=e.visitUint8||e.visitInt;break;case t.Type.Uint16:n=e.visitUint16||e.visitInt;break;case t.Type.Uint32:n=e.visitUint32||e.visitInt;break;case t.Type.Uint64:n=e.visitUint64||e.visitInt;break;case t.Type.Float:n=e.visitFloat;break;case t.Type.Float16:n=e.visitFloat16||e.visitFloat;break;case t.Type.Float32:n=e.visitFloat32||e.visitFloat;break;case t.Type.Float64:n=e.visitFloat64||e.visitFloat;break;case t.Type.Utf8:n=e.visitUtf8;break;case t.Type.Binary:n=e.visitBinary;break;case t.Type.FixedSizeBinary:n=e.visitFixedSizeBinary;break;case t.Type.Date:n=e.visitDate;break;case t.Type.DateDay:n=e.visitDateDay||e.visitDate;break;case t.Type.DateMillisecond:n=e.visitDateMillisecond||e.visitDate;break;case t.Type.Timestamp:n=e.visitTimestamp;break;case t.Type.TimestampSecond:n=e.visitTimestampSecond||e.visitTimestamp;break;case t.Type.TimestampMillisecond:n=e.visitTimestampMillisecond||e.visitTimestamp;break;case t.Type.TimestampMicrosecond:n=e.visitTimestampMicrosecond||e.visitTimestamp;break;case t.Type.TimestampNanosecond:n=e.visitTimestampNanosecond||e.visitTimestamp;break;case t.Type.Time:n=e.visitTime;break;case t.Type.TimeSecond:n=e.visitTimeSecond||e.visitTime;break;case t.Type.TimeMillisecond:n=e.visitTimeMillisecond||e.visitTime;break;case t.Type.TimeMicrosecond:n=e.visitTimeMicrosecond||e.visitTime;break;case t.Type.TimeNanosecond:n=e.visitTimeNanosecond||e.visitTime;break;case t.Type.Decimal:n=e.visitDecimal;break;case t.Type.List:n=e.visitList;break;case t.Type.Struct:n=e.visitStruct;break;case t.Type.Union:n=e.visitUnion;break;case t.Type.DenseUnion:n=e.visitDenseUnion||e.visitUnion;break;case t.Type.SparseUnion:n=e.visitSparseUnion||e.visitUnion;break;case t.Type.Dictionary:n=e.visitDictionary;break;case t.Type.Interval:n=e.visitInterval;break;case t.Type.IntervalDayTime:n=e.visitIntervalDayTime||e.visitInterval;break;case t.Type.IntervalYearMonth:n=e.visitIntervalYearMonth||e.visitInterval;break;case t.Type.FixedSizeList:n=e.visitFixedSizeList;break;case t.Type.Map:n=e.visitMap}if("function"==typeof n)return n;if(!i)return()=>null;throw new Error(`Unrecognized type '${t.Type[s]}'`)}(this,e,r)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function vt(e){switch(e.typeId){case t.Type.Null:return t.Type.Null;case t.Type.Int:const{bitWidth:r,isSigned:i}=e;switch(r){case 8:return i?t.Type.Int8:t.Type.Uint8;case 16:return i?t.Type.Int16:t.Type.Uint16;case 32:return i?t.Type.Int32:t.Type.Uint32;case 64:return i?t.Type.Int64:t.Type.Uint64}return t.Type.Int;case t.Type.Float:switch(e.precision){case ot.HALF:return t.Type.Float16;case ot.SINGLE:return t.Type.Float32;case ot.DOUBLE:return t.Type.Float64}return t.Type.Float;case t.Type.Binary:return t.Type.Binary;case t.Type.Utf8:return t.Type.Utf8;case t.Type.Bool:return t.Type.Bool;case t.Type.Decimal:return t.Type.Decimal;case t.Type.Time:switch(e.unit){case at.SECOND:return t.Type.TimeSecond;case at.MILLISECOND:return t.Type.TimeMillisecond;case at.MICROSECOND:return t.Type.TimeMicrosecond;case at.NANOSECOND:return t.Type.TimeNanosecond}return t.Type.Time;case t.Type.Timestamp:switch(e.unit){case at.SECOND:return t.Type.TimestampSecond;case at.MILLISECOND:return t.Type.TimestampMillisecond;case at.MICROSECOND:return t.Type.TimestampMicrosecond;case at.NANOSECOND:return t.Type.TimestampNanosecond}return t.Type.Timestamp;case t.Type.Date:switch(e.unit){case st.DAY:return t.Type.DateDay;case st.MILLISECOND:return t.Type.DateMillisecond}return t.Type.Date;case t.Type.Interval:switch(e.unit){case ut.DAY_TIME:return t.Type.IntervalDayTime;case ut.YEAR_MONTH:return t.Type.IntervalYearMonth}return t.Type.Interval;case t.Type.Map:return t.Type.Map;case t.Type.List:return t.Type.List;case t.Type.Struct:return t.Type.Struct;case t.Type.Union:switch(e.mode){case ct.Dense:return t.Type.DenseUnion;case ct.Sparse:return t.Type.SparseUnion}return t.Type.Union;case t.Type.FixedSizeBinary:return t.Type.FixedSizeBinary;case t.Type.FixedSizeList:return t.Type.FixedSizeList;case t.Type.Dictionary:return t.Type.Dictionary}throw new Error(`Unrecognized type '${t.Type[e.typeId]}'`)}_t.prototype.visitInt8=null,_t.prototype.visitInt16=null,_t.prototype.visitInt32=null,_t.prototype.visitInt64=null,_t.prototype.visitUint8=null,_t.prototype.visitUint16=null,_t.prototype.visitUint32=null,_t.prototype.visitUint64=null,_t.prototype.visitFloat16=null,_t.prototype.visitFloat32=null,_t.prototype.visitFloat64=null,_t.prototype.visitDateDay=null,_t.prototype.visitDateMillisecond=null,_t.prototype.visitTimestampSecond=null,_t.prototype.visitTimestampMillisecond=null,_t.prototype.visitTimestampMicrosecond=null,_t.prototype.visitTimestampNanosecond=null,_t.prototype.visitTimeSecond=null,_t.prototype.visitTimeMillisecond=null,_t.prototype.visitTimeMicrosecond=null,_t.prototype.visitTimeNanosecond=null,_t.prototype.visitDenseUnion=null,_t.prototype.visitSparseUnion=null,_t.prototype.visitIntervalDayTime=null,_t.prototype.visitIntervalYearMonth=null;class wt extends _t{compareSchemas(t,e){return t===e||e instanceof t.constructor&&Ct.compareFields(t.fields,e.fields)}compareFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,r)=>Ct.compareField(t,e[r])))}compareField(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&Ct.visit(t.type,e.type)}}function xt(t,e){return e instanceof t.constructor}function It(t,e){return t===e||xt(t,e)}function St(t,e){return t===e||xt(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function Tt(t,e){return t===e||xt(t,e)&&t.precision===e.precision}function At(t,e){return t===e||xt(t,e)&&t.unit===e.unit}function Et(t,e){return t===e||xt(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function Bt(t,e){return t===e||xt(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function kt(t,e){return t===e||xt(t,e)&&t.mode===e.mode&&t.typeIds.every(((t,r)=>t===e.typeIds[r]))&&Ct.compareFields(t.children,e.children)}function Lt(t,e){return t===e||xt(t,e)&&t.unit===e.unit}wt.prototype.visitNull=It,wt.prototype.visitBool=It,wt.prototype.visitInt=St,wt.prototype.visitInt8=St,wt.prototype.visitInt16=St,wt.prototype.visitInt32=St,wt.prototype.visitInt64=St,wt.prototype.visitUint8=St,wt.prototype.visitUint16=St,wt.prototype.visitUint32=St,wt.prototype.visitUint64=St,wt.prototype.visitFloat=Tt,wt.prototype.visitFloat16=Tt,wt.prototype.visitFloat32=Tt,wt.prototype.visitFloat64=Tt,wt.prototype.visitUtf8=It,wt.prototype.visitBinary=It,wt.prototype.visitFixedSizeBinary=function(t,e){return t===e||xt(t,e)&&t.byteWidth===e.byteWidth},wt.prototype.visitDate=At,wt.prototype.visitDateDay=At,wt.prototype.visitDateMillisecond=At,wt.prototype.visitTimestamp=Et,wt.prototype.visitTimestampSecond=Et,wt.prototype.visitTimestampMillisecond=Et,wt.prototype.visitTimestampMicrosecond=Et,wt.prototype.visitTimestampNanosecond=Et,wt.prototype.visitTime=Bt,wt.prototype.visitTimeSecond=Bt,wt.prototype.visitTimeMillisecond=Bt,wt.prototype.visitTimeMicrosecond=Bt,wt.prototype.visitTimeNanosecond=Bt,wt.prototype.visitDecimal=It,wt.prototype.visitList=function(t,e){return t===e||xt(t,e)&&t.children.length===e.children.length&&Ct.compareFields(t.children,e.children)},wt.prototype.visitStruct=function(t,e){return t===e||xt(t,e)&&t.children.length===e.children.length&&Ct.compareFields(t.children,e.children)},wt.prototype.visitUnion=kt,wt.prototype.visitDenseUnion=kt,wt.prototype.visitSparseUnion=kt,wt.prototype.visitDictionary=function(t,e){return t===e||xt(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&Ct.visit(t.indices,e.indices)&&Ct.visit(t.dictionary,e.dictionary)},wt.prototype.visitInterval=Lt,wt.prototype.visitIntervalDayTime=Lt,wt.prototype.visitIntervalYearMonth=Lt,wt.prototype.visitFixedSizeList=function(t,e){return t===e||xt(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&Ct.compareFields(t.children,e.children)},wt.prototype.visitMap=function(t,e){return t===e||xt(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&Ct.compareFields(t.children,e.children)};const Ct=new wt;class Dt{static isNull(e){return e&&e.typeId===t.Type.Null}static isInt(e){return e&&e.typeId===t.Type.Int}static isFloat(e){return e&&e.typeId===t.Type.Float}static isBinary(e){return e&&e.typeId===t.Type.Binary}static isUtf8(e){return e&&e.typeId===t.Type.Utf8}static isBool(e){return e&&e.typeId===t.Type.Bool}static isDecimal(e){return e&&e.typeId===t.Type.Decimal}static isDate(e){return e&&e.typeId===t.Type.Date}static isTime(e){return e&&e.typeId===t.Type.Time}static isTimestamp(e){return e&&e.typeId===t.Type.Timestamp}static isInterval(e){return e&&e.typeId===t.Type.Interval}static isList(e){return e&&e.typeId===t.Type.List}static isStruct(e){return e&&e.typeId===t.Type.Struct}static isUnion(e){return e&&e.typeId===t.Type.Union}static isFixedSizeBinary(e){return e&&e.typeId===t.Type.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===t.Type.FixedSizeList}static isMap(e){return e&&e.typeId===t.Type.Map}static isDictionary(e){return e&&e.typeId===t.Type.Dictionary}get typeId(){return t.Type.NONE}compareTo(t){return Ct.visit(this,t)}}var Mt;Dt[Symbol.toStringTag]=((Mt=Dt.prototype).children=null,Mt.ArrayType=Array,Mt[Symbol.toStringTag]="DataType");class Ot extends Dt{toString(){return"Null"}get typeId(){return t.Type.Null}}Ot[Symbol.toStringTag]=(t=>t[Symbol.toStringTag]="Null")(Ot.prototype);class Nt extends Dt{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return t.Type.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:case 64:return this.isSigned?Int32Array:Uint32Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Nt[Symbol.toStringTag]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Nt.prototype);class Ft extends Nt{constructor(){super(!0,8)}}class Ut extends Nt{constructor(){super(!0,16)}}class Vt extends Nt{constructor(){super(!0,32)}}class Pt extends Nt{constructor(){super(!0,64)}}class Rt extends Nt{constructor(){super(!1,8)}}class jt extends Nt{constructor(){super(!1,16)}}class zt extends Nt{constructor(){super(!1,32)}}class $t extends Nt{constructor(){super(!1,64)}}Object.defineProperty(Ft.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(Ut.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(Vt.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(Pt.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(Rt.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(jt.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(zt.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty($t.prototype,"ArrayType",{value:Uint32Array});class Wt extends Dt{constructor(t){super(),this.precision=t}get typeId(){return t.Type.Float}get ArrayType(){switch(this.precision){case ot.HALF:return Uint16Array;case ot.SINGLE:return Float32Array;case ot.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Wt[Symbol.toStringTag]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(Wt.prototype);class Ht extends Wt{constructor(){super(ot.HALF)}}class qt extends Wt{constructor(){super(ot.SINGLE)}}class Yt extends Wt{constructor(){super(ot.DOUBLE)}}Object.defineProperty(Ht.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(qt.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(Yt.prototype,"ArrayType",{value:Float64Array});class Gt extends Dt{constructor(){super()}get typeId(){return t.Type.Binary}toString(){return"Binary"}}Gt[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(Gt.prototype);class Kt extends Dt{constructor(){super()}get typeId(){return t.Type.Utf8}toString(){return"Utf8"}}Kt[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(Kt.prototype);class Jt extends Dt{constructor(){super()}get typeId(){return t.Type.Bool}toString(){return"Bool"}}Jt[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(Jt.prototype);class Qt extends Dt{constructor(t,e){super(),this.scale=t,this.precision=e}get typeId(){return t.Type.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}Qt[Symbol.toStringTag]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(Qt.prototype);class Zt extends Dt{constructor(t){super(),this.unit=t}get typeId(){return t.Type.Date}toString(){return`Date${32*(this.unit+1)}<${st[this.unit]}>`}}Zt[Symbol.toStringTag]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(Zt.prototype);class Xt extends Zt{constructor(){super(st.DAY)}}class te extends Zt{constructor(){super(st.MILLISECOND)}}class ee extends Dt{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return t.Type.Time}toString(){return`Time${this.bitWidth}<${at[this.unit]}>`}}ee[Symbol.toStringTag]=(t=>(t.unit=null,t.bitWidth=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Time"))(ee.prototype);class re extends ee{constructor(){super(at.SECOND,32)}}class ie extends ee{constructor(){super(at.MILLISECOND,32)}}class ne extends ee{constructor(){super(at.MICROSECOND,64)}}class se extends ee{constructor(){super(at.NANOSECOND,64)}}class ae extends Dt{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return t.Type.Timestamp}toString(){return`Timestamp<${at[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}ae[Symbol.toStringTag]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(ae.prototype);class oe extends Dt{constructor(t){super(),this.unit=t}get typeId(){return t.Type.Interval}toString(){return`Interval<${ut[this.unit]}>`}}oe[Symbol.toStringTag]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(oe.prototype);class ce extends oe{constructor(){super(ut.DAY_TIME)}}class ue extends oe{constructor(){super(ut.YEAR_MONTH)}}class he extends Dt{constructor(t){super(),this.children=[t]}get typeId(){return t.Type.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}he[Symbol.toStringTag]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(he.prototype);class le extends Dt{constructor(t){super(),this.children=t}get typeId(){return t.Type.Struct}toString(){return`Struct<{${this.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}le[Symbol.toStringTag]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(le.prototype);class pe extends Dt{constructor(t,e,r){super(),this.mode=t,this.children=r,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce(((t,e,r)=>(t[e]=r)&&t||t),Object.create(null))}get typeId(){return t.Type.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map((t=>`${t.type}`)).join(" | ")}>`}}pe[Symbol.toStringTag]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(pe.prototype);class de extends Dt{constructor(t){super(),this.byteWidth=t}get typeId(){return t.Type.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}de[Symbol.toStringTag]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(de.prototype);class fe extends Dt{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return t.Type.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}fe[Symbol.toStringTag]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(fe.prototype);class ye extends Dt{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return t.Type.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}toString(){return`Map<{${this.children[0].type.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}ye[Symbol.toStringTag]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(ye.prototype);const me=(be=-1,()=>++be);var be;class ge extends Dt{constructor(t,e,r,i){super(),this.indices=e,this.dictionary=t,this.isOrdered=i||!1,this.id=null==r?me():"number"==typeof r?r:r.low}get typeId(){return t.Type.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function _e(e){let r=e;switch(e.typeId){case t.Type.Decimal:return 4;case t.Type.Timestamp:return 2;case t.Type.Date:case t.Type.Interval:return 1+r.unit;case t.Type.Int:case t.Type.Time:return+(r.bitWidth>32)+1;case t.Type.FixedSizeList:return r.listSize;case t.Type.FixedSizeBinary:return r.byteWidth;default:return 1}}ge[Symbol.toStringTag]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(ge.prototype);class ve{constructor(t,e,r,i,n,s,a){let o;this.type=t,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1)),this.childData=(s||[]).map((t=>t instanceof ve?t:t.data)),n instanceof ve?(this.stride=n.stride,this.values=n.values,this.typeIds=n.typeIds,this.nullBitmap=n.nullBitmap,this.valueOffsets=n.valueOffsets):(this.stride=_e(t),n&&((o=n[0])&&(this.valueOffsets=o),(o=n[1])&&(this.values=o),(o=n[2])&&(this.nullBitmap=o),(o=n[3])&&(this.typeIds=o)))}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0,{valueOffsets:e,values:r,nullBitmap:i,typeIds:n}=this;return e&&(t+=e.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),n&&(t+=n.byteLength),this.childData.reduce(((t,e)=>t+e.byteLength),t)}get nullCount(){let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-bt(t,this.offset,this.offset+this.length)),e}clone(t,e=this.offset,r=this.length,i=this._nullCount,n=this,s=this.childData){return new ve(t,e,r,i,n,s,this.dictionary)}slice(t,e){const{stride:r,typeId:i,childData:n}=this,s=+(0===this._nullCount)-1,a=16===i?r:1,o=this._sliceBuffers(t,e,r,i);return this.clone(this.type,this.offset+t,e,s,o,!n.length||this.valueOffsets?n:this._sliceChildren(n,a*t,a*e))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===t.Type.Null)return this.clone(this.type,0,e,0);const{length:r,nullCount:i}=this,n=new Uint8Array((e+63&-64)>>3).fill(255,0,r>>3);n[r>>3]=(1<<r-(-8&r))-1,i>0&&n.set(ft(this.offset,r,this.nullBitmap),0);const s=this.buffers;return s[nt.VALIDITY]=n,this.clone(this.type,0,e,i+(e-r),s)}_sliceBuffers(t,e,r,i){let n,{buffers:s}=this;return(n=s[nt.TYPE])&&(s[nt.TYPE]=n.subarray(t,t+e)),(n=s[nt.OFFSET])&&(s[nt.OFFSET]=n.subarray(t,t+e+1))||(n=s[nt.DATA])&&(s[nt.DATA]=6===i?n:n.subarray(r*t,r*(t+e))),s}_sliceChildren(t,e,r){return t.map((t=>t.slice(e,r)))}static new(e,r,i,n,s,a,o){switch(s instanceof ve?s=s.buffers:s||(s=[]),e.typeId){case t.Type.Null:return ve.Null(e,r,i);case t.Type.Int:return ve.Int(e,r,i,n||0,s[nt.VALIDITY],s[nt.DATA]||[]);case t.Type.Dictionary:return ve.Dictionary(e,r,i,n||0,s[nt.VALIDITY],s[nt.DATA]||[],o);case t.Type.Float:return ve.Float(e,r,i,n||0,s[nt.VALIDITY],s[nt.DATA]||[]);case t.Type.Bool:return ve.Bool(e,r,i,n||0,s[nt.VALIDITY],s[nt.DATA]||[]);case t.Type.Decimal:return ve.Decimal(e,r,i,n||0,s[nt.VALIDITY],s[nt.DATA]||[]);case t.Type.Date:return ve.Date(e,r,i,n||0,s[nt.VALIDITY],s[nt.DATA]||[]);case t.Type.Time:return ve.Time(e,r,i,n||0,s[nt.VALIDITY],s[nt.DATA]||[]);case t.Type.Timestamp:return ve.Timestamp(e,r,i,n||0,s[nt.VALIDITY],s[nt.DATA]||[]);case t.Type.Interval:return ve.Interval(e,r,i,n||0,s[nt.VALIDITY],s[nt.DATA]||[]);case t.Type.FixedSizeBinary:return ve.FixedSizeBinary(e,r,i,n||0,s[nt.VALIDITY],s[nt.DATA]||[]);case t.Type.Binary:return ve.Binary(e,r,i,n||0,s[nt.VALIDITY],s[nt.OFFSET]||[],s[nt.DATA]||[]);case t.Type.Utf8:return ve.Utf8(e,r,i,n||0,s[nt.VALIDITY],s[nt.OFFSET]||[],s[nt.DATA]||[]);case t.Type.List:return ve.List(e,r,i,n||0,s[nt.VALIDITY],s[nt.OFFSET]||[],(a||[])[0]);case t.Type.FixedSizeList:return ve.FixedSizeList(e,r,i,n||0,s[nt.VALIDITY],(a||[])[0]);case t.Type.Struct:return ve.Struct(e,r,i,n||0,s[nt.VALIDITY],a||[]);case t.Type.Map:return ve.Map(e,r,i,n||0,s[nt.VALIDITY],s[nt.OFFSET]||[],(a||[])[0]);case t.Type.Union:return ve.Union(e,r,i,n||0,s[nt.VALIDITY],s[nt.TYPE]||[],s[nt.OFFSET]||a,a)}throw new Error(`Unrecognized typeId ${e.typeId}`)}static Null(t,e,r){return new ve(t,e,r,0)}static Int(t,e,r,i,n,s){return new ve(t,e,r,i,[void 0,z(t.ArrayType,s),W(n)])}static Dictionary(t,e,r,i,n,s,a){return new ve(t,e,r,i,[void 0,z(t.indices.ArrayType,s),W(n)],[],a)}static Float(t,e,r,i,n,s){return new ve(t,e,r,i,[void 0,z(t.ArrayType,s),W(n)])}static Bool(t,e,r,i,n,s){return new ve(t,e,r,i,[void 0,z(t.ArrayType,s),W(n)])}static Decimal(t,e,r,i,n,s){return new ve(t,e,r,i,[void 0,z(t.ArrayType,s),W(n)])}static Date(t,e,r,i,n,s){return new ve(t,e,r,i,[void 0,z(t.ArrayType,s),W(n)])}static Time(t,e,r,i,n,s){return new ve(t,e,r,i,[void 0,z(t.ArrayType,s),W(n)])}static Timestamp(t,e,r,i,n,s){return new ve(t,e,r,i,[void 0,z(t.ArrayType,s),W(n)])}static Interval(t,e,r,i,n,s){return new ve(t,e,r,i,[void 0,z(t.ArrayType,s),W(n)])}static FixedSizeBinary(t,e,r,i,n,s){return new ve(t,e,r,i,[void 0,z(t.ArrayType,s),W(n)])}static Binary(t,e,r,i,n,s,a){return new ve(t,e,r,i,[$(s),W(a),W(n)])}static Utf8(t,e,r,i,n,s,a){return new ve(t,e,r,i,[$(s),W(a),W(n)])}static List(t,e,r,i,n,s,a){return new ve(t,e,r,i,[$(s),void 0,W(n)],[a])}static FixedSizeList(t,e,r,i,n,s){return new ve(t,e,r,i,[void 0,void 0,W(n)],[s])}static Struct(t,e,r,i,n,s){return new ve(t,e,r,i,[void 0,void 0,W(n)],s)}static Map(t,e,r,i,n,s,a){return new ve(t,e,r,i,[$(s),void 0,W(n)],[a])}static Union(t,e,r,i,n,s,a,o){const c=[void 0,void 0,W(n),z(t.ArrayType,s)];return t.mode===ct.Sparse?new ve(t,e,r,i,c,a):(c[nt.OFFSET]=$(a),new ve(t,e,r,i,c,o))}}ve.prototype.childData=Object.freeze([]);function we(t){if(null===t)return"null";if(undefined===t)return"undefined";switch(typeof t){case"number":case"bigint":return`${t}`;case"string":return`"${t}"`}return"function"==typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t)}function xe(t){if(!t||t.length<=0)return function(t){return!0};let e="",r=t.filter((t=>t==t));return r.length>0&&(e=`\n    switch (x) {${r.map((t=>`\n        case ${function(t){if("bigint"!=typeof t)return we(t);if(w)return`${we(t)}n`;return`"${we(t)}"`}(t)}:`)).join("")}\n            return false;\n    }`),t.length!==r.length&&(e=`if (x !== x) return false;\n${e}`),new Function("x",`${e}\nreturn true;`)}const Ie=(t,e)=>(t*e+63&-64||64)/e;class Se{constructor(t,e=1){this.buffer=t,this.stride=e,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=t.length/e|0)}get byteLength(){return this.length*this.stride*this.BYTES_PER_ELEMENT|0}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,e){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const e=this.stride,r=this.length*e,i=this.buffer.length;r>=i&&this._resize(Ie(0===i?1*r:2*r,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=Ie(t*this.stride,this.BYTES_PER_ELEMENT);const e=((t,e=0)=>t.length>=e?t.subarray(0,e):R(new t.constructor(e),t,0))(this.buffer,t);return this.clear(),e}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=R(new this.ArrayType(t),this.buffer)}}Se.prototype.offset=0;class Te extends Se{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,e){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=e,this}}class Ae extends Te{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,e){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,n=t%8,s=r[i]>>n&1;return e?0===s&&(r[i]|=1<<n,++this.numValid):1===s&&(r[i]&=~(1<<n),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class Ee extends Te{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,e){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+e,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}class Be extends Se{get ArrayType64(){return this._ArrayType64||(this._ArrayType64=this.buffer instanceof Int32Array?x:S)}set(t,e){switch(this.reserve(t-this.length+1),typeof e){case"bigint":this.buffer64[t]=e;break;case"number":this.buffer[t*this.stride]=e;break;default:this.buffer.set(e,t*this.stride)}return this}_resize(t){const e=super._resize(t),r=e.byteLength/(this.BYTES_PER_ELEMENT*this.stride);return w&&(this.buffer64=new this.ArrayType64(e.buffer,e.byteOffset,r)),e}}class ke{constructor({type:t,nullValues:e}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=e,this.stride=_e(t),this._nulls=new Ae,e&&e.length>0&&(this._isValid=xe(e))}static new(t){}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}static throughIterable(t){return function(t){const{queueingStrategy:e="count"}=t,{highWaterMark:r=("bytes"!==e?1e3:16384)}=t,i="bytes"!==e?"length":"byteLength";return function*(e){let n=0,s=ke.new(t);for(const t of e)s.append(t)[i]>=r&&++n&&(yield s.toVector());(s.finish().length>0||0===n)&&(yield s.toVector())}}(t)}static throughAsyncIterable(t){return function(t){const{queueingStrategy:e="count"}=t,{highWaterMark:r=("bytes"!==e?1e3:16384)}=t,i="bytes"!==e?"length":"byteLength";return async function*(e){let n=0,s=ke.new(t);for await(const t of e)s.append(t)[i]>=r&&++n&&(yield s.toVector());(s.finish().length>0||0===n)&&(yield s.toVector())}}(t)}toVector(){return et.new(this.flush())}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),this._typeIds&&(t+=this._typeIds.byteLength),this.children.reduce(((t,e)=>t+e.byteLength),t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce(((t,e)=>t+e.reservedByteLength),t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,e){return this.setValid(t,this.isValid(e))&&this.setValue(t,e),this}setValue(t,e){this._setValue(this,t,e)}setValid(t,e){return this.length=this._nulls.set(t,+e).length,e}addChild(t,e=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){const t=[],e=this._values,r=this._offsets,i=this._typeIds,{length:n,nullCount:s}=this;i?(t[nt.TYPE]=i.flush(n),r&&(t[nt.OFFSET]=r.flush(n))):r?(e&&(t[nt.DATA]=e.flush(r.last())),t[nt.OFFSET]=r.flush(n)):e&&(t[nt.DATA]=e.flush(n)),s>0&&(t[nt.VALIDITY]=this._nulls.flush(n));const a=ve.new(this.type,0,n,s,t,this.children.map((t=>t.flush())));return this.clear(),a}finish(){return this.finished=!0,this.children.forEach((t=>t.finish())),this}clear(){return this.length=0,this._offsets&&this._offsets.clear(),this._values&&this._values.clear(),this._nulls&&this._nulls.clear(),this._typeIds&&this._typeIds.clear(),this.children.forEach((t=>t.clear())),this}}ke.prototype.length=1,ke.prototype.stride=1,ke.prototype.children=null,ke.prototype.finished=!1,ke.prototype.nullValues=null,ke.prototype._isValid=()=>!0;class Le extends ke{constructor(t){super(t),this._values=new Te(new this.ArrayType(0),this.stride)}setValue(t,e){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,e)}}class Ce extends ke{constructor(t){super(t),this._pendingLength=0,this._offsets=new Ee}setValue(t,e){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=e.length,r.set(t,e)}setValid(t,e){return!!super.setValid(t,e)||((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,e=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,e),this}}class De extends ke{constructor(t){super(t),this._values=new Ae}setValue(t,e){this._values.set(t,+e)}}class Me extends ke{setValue(t,e){}setValid(t,e){return this.length=Math.max(t+1,this.length),e}}class Oe extends Le{}class Ne extends Oe{}class Fe extends Oe{}class Ue extends Le{}class Ve extends ke{constructor({type:t,nullValues:e,dictionaryHashFunction:r}){super({type:new ge(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=ke.new({type:this.type.indices,nullValues:e}),this.dictionary=ke.new({type:this.type.dictionary,nullValues:null}),"function"==typeof r&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,e){const r=this.indices;return e=r.setValid(t,e),this.length=r.length,e}setValue(t,e){let r=this._keysToIndices,i=this.valueToKey(e),n=r[i];return void 0===n&&(r[i]=n=this._dictionaryOffset+this.dictionary.append(e).length-1),this.indices.setValue(t,n)}flush(){const t=this.type,e=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=e?e.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return"string"==typeof t?t:`${t}`}}class Pe extends Le{}const Re=new Float64Array(1),je=new Uint32Array(Re.buffer);function ze(t){if(t!=t)return 32256;Re[0]=t;let e=(2147483648&je[1])>>16&65535,r=2146435072&je[1],i=0;return r>=1089470464?je[0]>0?r=31744:(r=(2080374784&r)>>16,i=(1048575&je[1])>>10):r<=1056964608?(i=1048576+(1048575&je[1]),i=1048576+(i<<(r>>20)-998)>>21,r=0):(r=r-1056964608>>10,i=512+(1048575&je[1])>>10),e|r|65535&i}class $e extends Le{}class We extends $e{setValue(t,e){this._values.set(t,ze(e))}}class He extends $e{setValue(t,e){this._values.set(t,e)}}class qe extends $e{setValue(t,e){this._values.set(t,e)}}const Ye=Symbol.for("isArrowBigNum");function Ge(t,...e){return 0===e.length?Object.setPrototypeOf(z(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}function Ke(...t){return Ge.apply(this,t)}function Je(...t){return Ge.apply(this,t)}function Qe(...t){return Ge.apply(this,t)}function Ze(t){let e,r,{buffer:i,byteOffset:n,length:s,signed:a}=t,o=new Int32Array(i,n,s),c=0,u=0,h=o.length;for(;u<h;)r=o[u++],e=o[u++],a||(e>>>=0),c+=(r>>>0)+e*u**32;return c}let Xe,tr;function er(t){let e="",r=new Uint32Array(2),i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),n=new Uint32Array((i=new Uint16Array(i).reverse()).buffer),s=-1,a=i.length-1;do{for(r[0]=i[s=0];s<a;)i[s++]=r[1]=r[0]/10,r[0]=(r[0]-10*r[1]<<16)+i[s];i[s]=r[1]=r[0]/10,r[0]=r[0]-10*r[1],e=`${r[0]}${e}`}while(n[0]||n[1]||n[2]||n[3]);return e||"0"}Ge.prototype[Ye]=!0,Ge.prototype.toJSON=function(){return`"${Xe(this)}"`},Ge.prototype.valueOf=function(){return Ze(this)},Ge.prototype.toString=function(){return Xe(this)},Ge.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return Ze(this);case"string":return Xe(this);case"default":return tr(this)}return Xe(this)},Object.setPrototypeOf(Ke.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(Je.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(Qe.prototype,Object.create(Uint32Array.prototype)),Object.assign(Ke.prototype,Ge.prototype,{constructor:Ke,signed:!0,TypedArray:Int32Array,BigIntArray:x}),Object.assign(Je.prototype,Ge.prototype,{constructor:Je,signed:!1,TypedArray:Uint32Array,BigIntArray:S}),Object.assign(Qe.prototype,Ge.prototype,{constructor:Qe,signed:!0,TypedArray:Uint32Array,BigIntArray:S}),w?(tr=t=>8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:er(t),Xe=t=>8===t.byteLength?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:er(t)):(Xe=er,tr=Xe);class rr{static new(t,e){switch(e){case!0:return new Ke(t);case!1:return new Je(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case x:return new Ke(t)}return 16===t.byteLength?new Qe(t):new Je(t)}static signed(t){return new Ke(t)}static unsigned(t){return new Je(t)}static decimal(t){return new Qe(t)}constructor(t,e){return rr.new(t,e)}}class ir extends Le{setValue(t,e){this._values.set(t,e)}}class nr extends ir{}class sr extends ir{}class ar extends ir{}class or extends ir{constructor(t){t.nullValues&&(t.nullValues=t.nullValues.map(pr)),super(t),this._values=new Be(new Int32Array(0),2)}get values64(){return this._values.buffer64}isValid(t){return super.isValid(pr(t))}}class cr extends ir{}class ur extends ir{}class hr extends ir{}class lr extends ir{constructor(t){t.nullValues&&(t.nullValues=t.nullValues.map(pr)),super(t),this._values=new Be(new Uint32Array(0),2)}get values64(){return this._values.buffer64}isValid(t){return super.isValid(pr(t))}}const pr=(dr={BigIntArray:x},t=>(ArrayBuffer.isView(t)&&(dr.buffer=t.buffer,dr.byteOffset=t.byteOffset,dr.byteLength=t.byteLength,t=tr(dr),dr.buffer=null),t));var dr;class fr extends Le{}class yr extends fr{}class mr extends fr{}class br extends fr{}class gr extends fr{}class _r extends Le{}class vr extends _r{}class wr extends _r{}class xr extends _r{}class Ir extends _r{}class Sr extends Le{}class Tr extends Sr{}class Ar extends Sr{}class Er extends Ce{constructor(t){super(t),this._values=new Se(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,W(e))}_flushPending(t,e){const r=this._offsets,i=this._values.reserve(e).buffer;let n,s=0,a=0,o=0;for([s,n]of t)void 0===n?r.set(s,0):(a=n.length,i.set(n,o),r.set(s,a),o+=a)}}class Br extends Ce{constructor(t){super(t),this._values=new Se(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,y(e))}_flushPending(t,e){}}Br.prototype._flushPending=Er.prototype._flushPending;class kr{get length(){return this._values.length}get(t){return this._values[t]}clear(){return this._values=null,this}bind(t){return t instanceof et?t:(this._values=t,this)}}const Lr=Symbol.for("parent"),Cr=Symbol.for("rowIndex"),Dr=Symbol.for("keyToIdx"),Mr=Symbol.for("idxToVal"),Or=Symbol.for("nodejs.util.inspect.custom");class Nr{constructor(t,e){this[Lr]=t,this.size=e}entries(){return this[Symbol.iterator]()}has(t){return void 0!==this.get(t)}get(t){let e;if(null!=t){const r=this[Dr]||(this[Dr]=new Map);let i=r.get(t);if(void 0!==i){const t=this[Mr]||(this[Mr]=new Array(this.size));void 0!==(e=t[i])||(t[i]=e=this.getValue(i))}else if((i=this.getIndex(t))>-1){r.set(t,i);const n=this[Mr]||(this[Mr]=new Array(this.size));void 0!==(e=n[i])||(n[i]=e=this.getValue(i))}}return e}set(t,e){if(null!=t){const r=this[Dr]||(this[Dr]=new Map);let i=r.get(t);if(void 0===i&&r.set(t,i=this.getIndex(t)),i>-1){(this[Mr]||(this[Mr]=new Array(this.size)))[i]=this.setValue(i,e)}}return this}clear(){throw new Error(`Clearing ${this[Symbol.toStringTag]} not supported.`)}delete(t){throw new Error(`Deleting ${this[Symbol.toStringTag]} values not supported.`)}*[Symbol.iterator](){const t=this.keys(),e=this.values(),r=this[Dr]||(this[Dr]=new Map),i=this[Mr]||(this[Mr]=new Array(this.size));for(let n,s,a,o,c=0;!(a=t.next()).done&&!(o=e.next()).done;++c)n=a.value,s=o.value,i[c]=s,r.has(n)||r.set(n,c),yield[n,s]}forEach(t,e){const r=this.keys(),i=this.values(),n=void 0===e?t:(r,i,n)=>t.call(e,r,i,n),s=this[Dr]||(this[Dr]=new Map),a=this[Mr]||(this[Mr]=new Array(this.size));for(let t,e,o,c,u=0;!(o=r.next()).done&&!(c=i.next()).done;++u)t=o.value,e=c.value,a[u]=e,s.has(t)||s.set(t,u),n(e,t,this)}toArray(){return[...this.values()]}toJSON(){const t={};return this.forEach(((e,r)=>t[r]=e)),t}inspect(){return this.toString()}[Or](){return this.toString()}toString(){const t=[];return this.forEach(((e,r)=>{r=we(r),e=we(e),t.push(`${r}: ${e}`)})),`{ ${t.join(", ")} }`}}Nr[Symbol.toStringTag]=(t=>(Object.defineProperties(t,{size:{writable:!0,enumerable:!1,configurable:!1,value:0},[Lr]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Cr]:{writable:!0,enumerable:!1,configurable:!1,value:-1}}),t[Symbol.toStringTag]="Row"))(Nr.prototype);class Fr extends Nr{constructor(t){return super(t,t.length),Pr(this)}keys(){return this[Lr].getChildAt(0)[Symbol.iterator]()}values(){return this[Lr].getChildAt(1)[Symbol.iterator]()}getKey(t){return this[Lr].getChildAt(0).get(t)}getIndex(t){return this[Lr].getChildAt(0).indexOf(t)}getValue(t){return this[Lr].getChildAt(1).get(t)}setValue(t,e){this[Lr].getChildAt(1).set(t,e)}}class Ur extends Nr{constructor(t){return super(t,t.type.children.length),Vr(this)}*keys(){for(const t of this[Lr].type.children)yield t.name}*values(){for(const t of this[Lr].type.children)yield this[t.name]}getKey(t){return this[Lr].type.children[t].name}getIndex(t){return this[Lr].type.children.findIndex((e=>e.name===t))}getValue(t){return this[Lr].getChildAt(t).get(this[Cr])}setValue(t,e){return this[Lr].getChildAt(t).set(this[Cr],e)}}Object.setPrototypeOf(Nr.prototype,Map.prototype);const Vr=(()=>{const t={enumerable:!0,configurable:!1,get:null,set:null};return e=>{let r=-1,i=e[Dr]||(e[Dr]=new Map);const n=t=>function(){return this.get(t)},s=t=>function(e){return this.set(t,e)};for(const a of e.keys())i.set(a,++r),t.get=n(a),t.set=s(a),e.hasOwnProperty(a)||(t.enumerable=!0,Object.defineProperty(e,a,t)),e.hasOwnProperty(r)||(t.enumerable=!1,Object.defineProperty(e,r,t));return t.get=t.set=null,e}})(),Pr=(()=>{if("undefined"==typeof Proxy)return Vr;const t=Nr.prototype.has,e=Nr.prototype.get,r=Nr.prototype.set,i=Nr.prototype.getKey,n={isExtensible:()=>!1,deleteProperty:()=>!1,preventExtensions:()=>!0,ownKeys:t=>[...t.keys()].map((t=>`${t}`)),has(t,e){switch(e){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Lr:case Cr:case Mr:case Dr:case Or:return!0}return"number"!=typeof e||t.has(e)||(e=t.getKey(e)),t.has(e)},get(r,n,s){switch(n){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Lr:case Cr:case Mr:case Dr:case Or:return Reflect.get(r,n,s)}return"number"!=typeof n||t.call(s,n)||(n=i.call(s,n)),e.call(s,n)},set(e,n,s,a){switch(n){case Lr:case Cr:case Mr:case Dr:return Reflect.set(e,n,s,a);case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:return!1}return"number"!=typeof n||t.call(a,n)||(n=i.call(a,n)),!!t.call(a,n)&&!!r.call(a,n,s)}};return t=>new Proxy(t,n)})();let Rr;function jr(t,e,r,i){let{length:n=0}=t,s="number"!=typeof e?0:e,a="number"!=typeof r?n:r;return s<0&&(s=(s%n+n)%n),a<0&&(a=(a%n+n)%n),a<s&&(Rr=s,s=a,a=Rr),a>n&&(a=n),i?i(t,s,a):[s,a]}const zr=w?v(0):0,$r=t=>t!=t;function Wr(t){let e=typeof t;if("object"!==e||null===t)return $r(t)?$r:"bigint"!==e?e=>e===t:e=>zr+e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&function(t,e){let r=0,i=t.length;if(i!==e.length)return!1;if(i>0)do{if(t[r]!==e[r])return!1}while(++r<i);return!0}(t,e):t instanceof Map?function(t){let e=-1;const r=[];return t.forEach((t=>r[++e]=Wr(t))),Hr(r)}(t):Array.isArray(t)?function(t){const e=[];for(let r=-1,i=t.length;++r<i;)e[r]=Wr(t[r]);return Hr(e)}(t):t instanceof et?function(t){const e=[];for(let r=-1,i=t.length;++r<i;)e[r]=Wr(t.get(r));return Hr(e)}(t):function(t){const e=Object.keys(t);if(0===e.length)return()=>!1;const r=[];for(let i=-1,n=e.length;++i<n;)r[i]=Wr(t[e[i]]);return Hr(r,e)}(t)}function Hr(t,e){return r=>{if(!r||"object"!=typeof r)return!1;switch(r.constructor){case Array:return function(t,e){const r=t.length;if(e.length!==r)return!1;for(let i=-1;++i<r;)if(!t[i](e[i]))return!1;return!0}(t,r);case Map:case Fr:case Ur:return qr(t,r,r.keys());case Object:case void 0:return qr(t,r,e||Object.keys(r))}return r instanceof et&&function(t,e){const r=t.length;if(e.length!==r)return!1;for(let i=-1;++i<r;)if(!t[i](e.get(i)))return!1;return!0}(t,r)}}function qr(t,e,r){const i=r[Symbol.iterator](),n=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let a=0,o=t.length,c=s.next(),u=i.next(),h=n.next();for(;a<o&&!u.done&&!h.done&&!c.done&&(u.value===h.value&&t[a](c.value));++a,u=i.next(),h=n.next(),c=s.next());return!!(a===o&&u.done&&h.done&&c.done)||(i.return&&i.return(),n.return&&n.return(),s.return&&s.return(),!1)}class Yr extends et{constructor(t,e=[],r=function(t){let e=new Uint32Array((t||[]).length+1),r=e[0]=0,i=e.length;for(let n=0;++n<i;)e[n]=r+=t[n-1].length;return e}(e)){super(),this._nullCount=-1,this._type=t,this._chunks=e,this._chunkOffsets=r,this._length=r[r.length-1],this._numChildren=(this._type.children||[]).length}static flatten(...t){return ei(et,t)}static concat(...t){const e=Yr.flatten(...t);return new Yr(e[0].type,e)}get type(){return this._type}get length(){return this._length}get chunks(){return this._chunks}get typeId(){return this._type.typeId}get VectorName(){return`Chunked<${this._type}>`}get data(){return this._chunks[0]?this._chunks[0].data:null}get ArrayType(){return this._type.ArrayType}get numChildren(){return this._numChildren}get stride(){return this._chunks[0]?this._chunks[0].stride:1}get byteLength(){return this._chunks.reduce(((t,e)=>t+e.byteLength),0)}get nullCount(){let t=this._nullCount;return t<0&&(this._nullCount=t=this._chunks.reduce(((t,{nullCount:e})=>t+e),0)),t}get indices(){if(Dt.isDictionary(this._type)){if(!this._indices){const t=this._chunks;this._indices=1===t.length?t[0].indices:Yr.concat(...t.map((t=>t.indices)))}return this._indices}return null}get dictionary(){return Dt.isDictionary(this._type)?this._chunks[this._chunks.length-1].data.dictionary:null}*[Symbol.iterator](){for(const t of this._chunks)yield*t}clone(t=this._chunks){return new Yr(this._type,t)}concat(...t){return this.clone(Yr.flatten(this,...t))}slice(t,e){return jr(this,t,e,this._sliceInternal)}getChildAt(t){if(t<0||t>=this._numChildren)return null;let e,r,i,n=this._children||(this._children=[]);return(e=n[t])?e:(r=(this._type.children||[])[t])&&(i=this._chunks.map((e=>e.getChildAt(t))).filter((t=>null!=t)),i.length>0)?n[t]=new Yr(r.type,i):null}search(t,e){let r=t,i=this._chunkOffsets,n=i.length-1;if(r<0)return null;if(r>=i[n])return null;if(n<=1)return e?e(this,0,r):[0,r];let s=0,a=0,o=0;do{if(s+1===n)return e?e(this,s,r-a):[s,r-a];o=s+(n-s)/2|0,r>=i[o]?s=o:n=o}while(r<i[n]&&r>=(a=i[s]));return null}isValid(t){return!!this.search(t,this.isValidInternal)}get(t){return this.search(t,this.getInternal)}set(t,e){this.search(t,(({chunks:t},r,i)=>t[r].set(i,e)))}indexOf(t,e){return e&&"number"==typeof e?this.search(e,((e,r,i)=>this.indexOfInternal(e,r,i,t))):this.indexOfInternal(this,0,Math.max(0,e||0),t)}toArray(){const{chunks:t}=this,e=t.length;let r=this._type.ArrayType;if(e<=0)return new r(0);if(e<=1)return t[0].toArray();let i=0,n=new Array(e);for(let r=-1;++r<e;)i+=(n[r]=t[r].toArray()).length;r!==n[0].constructor&&(r=n[0].constructor);let s=new r(i),a=r===Array?Kr:Gr;for(let t=-1,r=0;++t<e;)r=a(n[t],s,r);return s}getInternal({_chunks:t},e,r){return t[e].get(r)}isValidInternal({_chunks:t},e,r){return t[e].isValid(r)}indexOfInternal({_chunks:t},e,r,i){let n=e-1,s=t.length,a=r,o=0,c=-1;for(;++n<s;){if(~(c=t[n].indexOf(i,a)))return o+c;a=0,o+=t[n].length}return-1}_sliceInternal(t,e,r){const i=[],{chunks:n,_chunkOffsets:s}=t;for(let t=-1,a=n.length;++t<a;){const a=n[t],o=a.length,c=s[t];if(c>=r)break;if(e>=c+o)continue;if(c>=e&&c+o<=r){i.push(a);continue}const u=Math.max(0,e-c),h=Math.min(r-c,o);i.push(a.slice(u,h))}return t.clone(i)}}const Gr=(t,e,r)=>(e.set(t,r),r+t.length),Kr=(t,e,r)=>{let i=r;for(let r=-1,n=t.length;++r<n;)e[i++]=t[r];return i};class Jr extends Yr{constructor(t,e=[],r){if(e=Yr.flatten(...e),super(t.type,e,r),this._field=t,1===e.length&&!(this instanceof Qr))return new Qr(t,e[0],this._chunkOffsets)}static new(...t){let[e,r,...i]=t;"string"==typeof e||e instanceof ui||(r=e,e="");const n=Yr.flatten(Array.isArray(r)?[...r,...i]:r instanceof et?[r,...i]:[et.new(r,...i)]);if("string"==typeof e){const t=n[0].data.type;e=new ui(e,t,!0)}else!e.nullable&&n.some((({nullCount:t})=>t>0))&&(e=e.clone({nullable:!0}));return new Jr(e,n)}get field(){return this._field}get name(){return this._field.name}get nullable(){return this._field.nullable}get metadata(){return this._field.metadata}clone(t=this._chunks){return new Jr(this._field,t)}getChildAt(t){if(t<0||t>=this.numChildren)return null;let e,r,i,n=this._children||(this._children=[]);return(e=n[t])?e:(r=(this.type.children||[])[t])&&(i=this._chunks.map((e=>e.getChildAt(t))).filter((t=>null!=t)),i.length>0)?n[t]=new Jr(r,i):null}}class Qr extends Jr{constructor(t,e,r){super(t,[e],r),this._chunk=e}search(t,e){return e?e(this,0,t):[0,t]}isValid(t){return this._chunk.isValid(t)}get(t){return this._chunk.get(t)}set(t,e){this._chunk.set(t,e)}indexOf(t,e){return this._chunk.indexOf(t,e)}}const Zr=Array.isArray,Xr=(t,e)=>ii(t,e,[],0),ti=t=>oi(t,[[],[]]),ei=(t,e)=>ni(t,e,[],0),ri=(t,e)=>si(t,e,[],0);function ii(t,e,r,i){let n,s=i,a=-1,o=e.length;for(;++a<o;)Zr(n=e[a])?s=ii(t,n,r,s).length:n instanceof t&&(r[s++]=n);return r}function ni(t,e,r,i){let n,s=i,a=-1,o=e.length;for(;++a<o;)Zr(n=e[a])?s=ni(t,n,r,s).length:n instanceof Yr?s=ni(t,n.chunks,r,s).length:n instanceof t&&(r[s++]=n);return r}function si(t,e,r,i){let n,s=i,a=-1,o=e.length;for(;++a<o;)Zr(n=e[a])?s=si(t,n,r,s).length:n instanceof t?s=ii(et,n.schema.fields.map(((t,e)=>n.getChildAt(e))),r,s).length:n instanceof et&&(r[s++]=n);return r}const ai=(t,[e,r],i)=>(t[0][i]=e,t[1][i]=r,t);function oi(t,e){let r,i;switch(i=t.length){case 0:return e;case 1:if(r=e[0],!t[0])return e;if(Zr(t[0]))return oi(t[0],e);t[0]instanceof ve||t[0]instanceof et||t[0]instanceof Dt||([r,t]=Object.entries(t[0]).reduce(ai,e));break;default:Zr(r=t[i-1])?t=Zr(t[0])?t[0]:t.slice(0,i-1):(t=Zr(t[0])?t[0]:t,r=[])}let n,s,a=-1,o=-1,c=-1,u=t.length,[h,l]=e;for(;++c<u;)s=t[c],s instanceof Jr&&(l[++o]=s)?h[++a]=s.field.clone(r[c],s.type,!0):(({[c]:n=c}=r),s instanceof Dt&&(l[++o]=s)?h[++a]=ui.new(n,s,!0):s&&s.type&&(l[++o]=s)&&(s instanceof ve&&(l[o]=s=et.new(s)),h[++a]=ui.new(n,s.type,!0)));return e}class ci{constructor(t=[],e,r){this.fields=t||[],this.metadata=e||new Map,r||(r=li(t)),this.dictionaries=r}static from(...t){return ci.new(t[0],t[1])}static new(...t){return new ci(ti(t)[0])}get[Symbol.toStringTag](){return"Schema"}toString(){return`Schema<{ ${this.fields.map(((t,e)=>`${e}: ${t}`)).join(", ")} }>`}compareTo(t){return Ct.compareSchemas(this,t)}select(...t){const e=t.reduce(((t,e)=>(t[e]=!0)&&t),Object.create(null));return new ci(this.fields.filter((t=>e[t.name])),this.metadata)}selectAt(...t){return new ci(t.map((t=>this.fields[t])).filter(Boolean),this.metadata)}assign(...t){const e=t[0]instanceof ci?t[0]:new ci(Xr(ui,t)),r=[...this.fields],i=hi(hi(new Map,this.metadata),e.metadata),n=e.fields.filter((t=>{const e=r.findIndex((e=>e.name===t.name));return!~e||(r[e]=t.clone({metadata:hi(hi(new Map,r[e].metadata),t.metadata)}))&&!1})),s=li(n,new Map);return new ci([...r,...n],i,new Map([...this.dictionaries,...s]))}}class ui{constructor(t,e,r=!1,i){this.name=t,this.type=e,this.nullable=r,this.metadata=i||new Map}static new(...t){let[e,r,i,n]=t;return t[0]&&"object"==typeof t[0]&&(({name:e}=t[0]),void 0===r&&(r=t[0].type),void 0===i&&(i=t[0].nullable),void 0===n&&(n=t[0].metadata)),new ui(`${e}`,r,i,n)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}compareTo(t){return Ct.compareField(this,t)}clone(...t){let[e,r,i,n]=t;return t[0]&&"object"==typeof t[0]?({name:e=this.name,type:r=this.type,nullable:i=this.nullable,metadata:n=this.metadata}=t[0]):[e=this.name,r=this.type,i=this.nullable,n=this.metadata]=t,ui.new(e,r,i,n)}}function hi(t,e){return new Map([...t||new Map,...e||new Map])}function li(t,e=new Map){for(let r=-1,i=t.length;++r<i;){const i=t[r].type;if(Dt.isDictionary(i))if(e.has(i.id)){if(e.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(i.id,i.dictionary);i.children&&i.children.length>0&&li(i.children,e)}return e}ci.prototype.fields=null,ci.prototype.metadata=null,ci.prototype.dictionaries=null,ui.prototype.type=null,ui.prototype.name=null,ui.prototype.nullable=null,ui.prototype.metadata=null;class pi extends Ce{constructor(t){super(t),this._run=new kr,this._offsets=new Ee}addChild(t,e="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new he(new ui(e,t.type,!0)),this.numChildren-1}clear(){return this._run.clear(),super.clear()}_flushPending(t){const e=this._run,r=this._offsets,i=this._setValue;let n,s=0;for([s,n]of t)void 0===n?r.set(s,0):(r.set(s,n.length),i(this,s,e.bind(n)))}}class di extends ke{constructor(){super(...arguments),this._run=new kr}setValue(t,e){super.setValue(t,this._run.bind(e))}addChild(t,e="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new fe(this.type.listSize,new ui(e,t.type,!0)),r}clear(){return this._run.clear(),super.clear()}}class fi extends Ce{set(t,e){return super.set(t,e)}setValue(t,e){e=e instanceof Map?e:new Map(Object.entries(e));const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.size),this._pendingLength+=e.size,r.set(t,e)}addChild(t,e=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new ye(new ui(e,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const e=this._offsets,r=this._setValue;t.forEach(((t,i)=>{void 0===t?e.set(i,0):(e.set(i,t.size),r(this,i,t))}))}}class yi extends ke{addChild(t,e=`${this.numChildren}`){const r=this.children.push(t);return this.type=new le([...this.type.children,new ui(e,t.type,!0)]),r}}class mi extends ke{constructor(t){super(t),this._typeIds=new Te(new Int8Array(0),1),"function"==typeof t.valueToChildTypeId&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,e){return this.set(this.length,t,e)}set(t,e,r){return void 0===r&&(r=this._valueToChildTypeId(this,e,t)),this.setValid(t,this.isValid(e))&&this.setValue(t,e,r),this}setValue(t,e,r){this._typeIds.set(t,r),super.setValue(t,e)}addChild(t,e=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:n,typeIds:s}}=this,a=[...i,new ui(e,t.type)];return this.type=new pe(n,[...s,r],a),r}_valueToChildTypeId(t,e,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class bi extends mi{}class gi extends mi{constructor(t){super(t),this._offsets=new Te(new Int32Array(0))}setValue(t,e,r){const i=this.type.typeIdToChildIndex[r];return this._offsets.set(t,this.getChildAt(i).length),super.setValue(t,e,r)}}class _i extends _t{}const vi=(t,e,r)=>{t[e]=r%4294967296|0,t[e+1]=r/4294967296|0},wi=(t,e,r,i)=>{const{[r]:n,[r+1]:s}=e;null!=n&&null!=s&&t.set(i.subarray(0,s-n),n)},xi=({values:t},e,r)=>{((t,e,r)=>{t[e]=r/864e5|0})(t,e,r.valueOf())},Ii=({values:t},e,r)=>{vi(t,2*e,r.valueOf())},Si=({stride:t,values:e},r,i)=>{e[t*r]=i},Ti=({stride:t,values:e},r,i)=>{e[t*r]=ze(i)},Ai=(t,e,r)=>{switch(typeof r){case"bigint":t.values64[e]=r;break;case"number":t.values[e*t.stride]=r;break;default:const i=r,{stride:n,ArrayType:s}=t,a=z(s,i);t.values.set(a.subarray(0,n),n*e)}},Ei=({values:t},e,r)=>vi(t,2*e,r/1e3),Bi=({values:t},e,r)=>vi(t,2*e,r),ki=({values:t},e,r)=>((t,e,r)=>{t[e]=1e3*r%4294967296|0,t[e+1]=1e3*r/4294967296|0})(t,2*e,r),Li=({values:t},e,r)=>((t,e,r)=>{t[e]=1e6*r%4294967296|0,t[e+1]=1e6*r/4294967296|0})(t,2*e,r),Ci=({values:t,stride:e},r,i)=>{t[e*r]=i},Di=({values:t,stride:e},r,i)=>{t[e*r]=i},Mi=({values:t},e,r)=>{t.set(r.subarray(0,2),2*e)},Oi=({values:t},e,r)=>{t.set(r.subarray(0,2),2*e)},Ni=(t,e,r)=>{const i=t.typeIdToChildIndex[t.typeIds[e]],n=t.getChildAt(i);n&&n.set(t.valueOffsets[e],r)},Fi=(t,e,r)=>{const i=t.typeIdToChildIndex[t.typeIds[e]],n=t.getChildAt(i);n&&n.set(e,r)},Ui=({values:t},e,r)=>{t.set(r.subarray(0,2),2*e)},Vi=({values:t},e,r)=>{t[e]=12*r[0]+r[1]%12};_i.prototype.visitBool=({offset:t,values:e},r,i)=>{const n=t+r;i?e[n>>3]|=1<<n%8:e[n>>3]&=~(1<<n%8)},_i.prototype.visitInt=(t,e,r)=>{t.type.bitWidth<64?Si(t,e,r):Ai(t,e,r)},_i.prototype.visitInt8=Si,_i.prototype.visitInt16=Si,_i.prototype.visitInt32=Si,_i.prototype.visitInt64=Ai,_i.prototype.visitUint8=Si,_i.prototype.visitUint16=Si,_i.prototype.visitUint32=Si,_i.prototype.visitUint64=Ai,_i.prototype.visitFloat=(t,e,r)=>{t.type.precision!==ot.HALF?Si(t,e,r):Ti(t,e,r)},_i.prototype.visitFloat16=Ti,_i.prototype.visitFloat32=Si,_i.prototype.visitFloat64=Si,_i.prototype.visitUtf8=({values:t,valueOffsets:e},r,i)=>{wi(t,e,r,y(i))},_i.prototype.visitBinary=({values:t,valueOffsets:e},r,i)=>wi(t,e,r,i),_i.prototype.visitFixedSizeBinary=({stride:t,values:e},r,i)=>{e.set(i.subarray(0,t),t*r)},_i.prototype.visitDate=(t,e,r)=>{t.type.unit===st.DAY?xi(t,e,r):Ii(t,e,r)},_i.prototype.visitDateDay=xi,_i.prototype.visitDateMillisecond=Ii,_i.prototype.visitTimestamp=(t,e,r)=>{switch(t.type.unit){case at.SECOND:return Ei(t,e,r);case at.MILLISECOND:return Bi(t,e,r);case at.MICROSECOND:return ki(t,e,r);case at.NANOSECOND:return Li(t,e,r)}},_i.prototype.visitTimestampSecond=Ei,_i.prototype.visitTimestampMillisecond=Bi,_i.prototype.visitTimestampMicrosecond=ki,_i.prototype.visitTimestampNanosecond=Li,_i.prototype.visitTime=(t,e,r)=>{switch(t.type.unit){case at.SECOND:return Ci(t,e,r);case at.MILLISECOND:return Di(t,e,r);case at.MICROSECOND:return Mi(t,e,r);case at.NANOSECOND:return Oi(t,e,r)}},_i.prototype.visitTimeSecond=Ci,_i.prototype.visitTimeMillisecond=Di,_i.prototype.visitTimeMicrosecond=Mi,_i.prototype.visitTimeNanosecond=Oi,_i.prototype.visitDecimal=({values:t},e,r)=>{t.set(r.subarray(0,4),4*e)},_i.prototype.visitList=(t,e,r)=>{const i=t.getChildAt(0),n=t.valueOffsets;for(let t=-1,s=n[e],a=n[e+1];s<a;)i.set(s++,r.get(++t))},_i.prototype.visitStruct=(t,e,r)=>{const i=r instanceof Map?(n=e,s=r,(t,e,r)=>t&&t.set(n,s.get(e.name))):r instanceof et?((t,e)=>(r,i,n)=>r&&r.set(t,e.get(n)))(e,r):Array.isArray(r)?((t,e)=>(r,i,n)=>r&&r.set(t,e[n]))(e,r):((t,e)=>(r,i,n)=>r&&r.set(t,e[i.name]))(e,r);var n,s;t.type.children.forEach(((e,r)=>i(t.getChildAt(r),e,r)))},_i.prototype.visitUnion=(t,e,r)=>{t.type.mode===ct.Dense?Ni(t,e,r):Fi(t,e,r)},_i.prototype.visitDenseUnion=Ni,_i.prototype.visitSparseUnion=Fi,_i.prototype.visitDictionary=(t,e,r)=>{const i=t.getKey(e);null!==i&&t.setValue(i,r)},_i.prototype.visitInterval=(t,e,r)=>{t.type.unit===ut.DAY_TIME?Ui(t,e,r):Vi(t,e,r)},_i.prototype.visitIntervalDayTime=Ui,_i.prototype.visitIntervalYearMonth=Vi,_i.prototype.visitFixedSizeList=(t,e,r)=>{const i=t.getChildAt(0),{stride:n}=t;for(let t=-1,s=e*n;++t<n;)i.set(s+t,r.get(t))},_i.prototype.visitMap=(t,e,r)=>{const i=t.getChildAt(0),n=t.valueOffsets,s=r instanceof Map?[...r]:Object.entries(r);for(let t=-1,r=n[e],a=n[e+1];r<a;)i.set(r++,s[++t])};const Pi=new _i;const Ri=new class extends _t{visitNull(){return Me}visitBool(){return De}visitInt(){return ir}visitInt8(){return nr}visitInt16(){return sr}visitInt32(){return ar}visitInt64(){return or}visitUint8(){return cr}visitUint16(){return ur}visitUint32(){return hr}visitUint64(){return lr}visitFloat(){return $e}visitFloat16(){return We}visitFloat32(){return He}visitFloat64(){return qe}visitUtf8(){return Br}visitBinary(){return Er}visitFixedSizeBinary(){return Pe}visitDate(){return Oe}visitDateDay(){return Ne}visitDateMillisecond(){return Fe}visitTimestamp(){return _r}visitTimestampSecond(){return vr}visitTimestampMillisecond(){return wr}visitTimestampMicrosecond(){return xr}visitTimestampNanosecond(){return Ir}visitTime(){return fr}visitTimeSecond(){return yr}visitTimeMillisecond(){return mr}visitTimeMicrosecond(){return br}visitTimeNanosecond(){return gr}visitDecimal(){return Ue}visitList(){return pi}visitStruct(){return yi}visitUnion(){return mi}visitDenseUnion(){return gi}visitSparseUnion(){return bi}visitDictionary(){return Ve}visitInterval(){return Sr}visitIntervalDayTime(){return Tr}visitIntervalYearMonth(){return Ar}visitFixedSizeList(){return di}visitMap(){return fi}};var ji;ke.new=function t(e){const r=e.type,i=new(Ri.getVisitFn(r)())(e);if(r.children&&r.children.length>0){const n=e.children||[],s={nullValues:e.nullValues},a=Array.isArray(n)?(t,e)=>n[e]||s:({name:t})=>n[t]||s;r.children.forEach(((e,r)=>{const{type:n}=e,s=a(e,r);i.children.push(t({...s,type:n}))}))}return i},Object.keys(t.Type).map((e=>t.Type[e])).filter((e=>"number"==typeof e&&e!==t.Type.NONE)).forEach((t=>{Ri.visit(t).prototype._setValue=Pi.getVisitFn(t)})),Br.prototype._setValue=Pi.visitBinary,function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):rt.apache.arrow.flatbuf.MetadataVersion.V1}schema(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new rt.apache.arrow.flatbuf.Schema).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(e,r){let i=this.bb.__offset(this.bb_pos,8);return i?(r||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}dictionariesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(e,r){let i=this.bb.__offset(this.bb_pos,10);return i?(r||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}recordBatchesLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(4)}static addVersion(t,e){t.addFieldInt16(0,e,rt.apache.arrow.flatbuf.MetadataVersion.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static createFooter(t,e,i,n,s){return r.startFooter(t),r.addVersion(t,e),r.addSchema(t,i),r.addDictionaries(t,n),r.addRecordBatches(t,s),r.endFooter(t)}}e.Footer=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(ji||(ji={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).Block=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static createBlock(t,e,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(e),t.offset()}}}(ji||(ji={}));var zi=e.Long,$i=e.Builder,Wi=e.ByteBuffer,Hi=ji.apache.arrow.flatbuf.Block,qi=ji.apache.arrow.flatbuf.Footer;class Yi{constructor(t,e=lt.V4,r,i){this.schema=t,this.version=e,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new Wi(W(t));const e=qi.getRootAsFooter(t),r=ci.decode(e.schema());return new Gi(r,e)}static encode(t){const e=new $i,r=ci.encode(e,t.schema);qi.startRecordBatchesVector(e,t.numRecordBatches),[...t.recordBatches()].slice().reverse().forEach((t=>Ki.encode(e,t)));const i=e.endVector();qi.startDictionariesVector(e,t.numDictionaries),[...t.dictionaryBatches()].slice().reverse().forEach((t=>Ki.encode(e,t)));const n=e.endVector();return qi.startFooter(e),qi.addSchema(e,r),qi.addVersion(e,lt.V4),qi.addRecordBatches(e,i),qi.addDictionaries(e,n),qi.finishFooterBuffer(e,qi.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,r=this.numRecordBatches;++e<r;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,r=this.numDictionaries;++e<r;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Gi extends Yi{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return Ki.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return Ki.decode(e)}return null}}class Ki{constructor(t,e,r){this.metaDataLength=t,this.offset="number"==typeof r?r:r.low,this.bodyLength="number"==typeof e?e:e.low}static decode(t){return new Ki(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:r}=e,i=new zi(e.offset,0),n=new zi(e.bodyLength,0);return Hi.createBlock(t,i,r,n)}}class Ji extends _{write(t){if((t=W(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?f(this.toUint8Array(!0)):this.toUint8Array(!1).then(f)}toUint8Array(t=!1){return t?j(this._values)[0]:(async()=>{let t=[],e=0;for await(const r of this)t.push(r),e+=r.byteLength;return j(t,e)[0]})()}}class Qi{constructor(t){t&&(this.source=new Xi(J.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Zi{constructor(t){t instanceof Zi?this.source=t.source:t instanceof Ji?this.source=new tn(J.fromAsyncIterable(t)):U(t)?this.source=new tn(J.fromNodeStream(t)):F(t)?this.source=new tn(J.fromDOMStream(t)):N(t)?this.source=new tn(J.fromDOMStream(t.body)):L(t)?this.source=new tn(J.fromIterable(t)):(k(t)||C(t))&&(this.source=new tn(J.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Xi{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,e="read"){return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||m)}return(t){return Object.create(this.source.return&&this.source.return(t)||m)}}class tn{constructor(t){this.source=t,this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}async cancel(t){await this.return(t)}get closed(){return this._closedPromise}async read(t){return(await this.next(t,"read")).value}async peek(t){return(await this.next(t,"peek")).value}async next(t,e="read"){return await this.source.next({cmd:e,size:t})}async throw(t){const e=this.source.throw&&await this.source.throw(t)||m;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}async return(t){const e=this.source.return&&await this.source.return(t)||m;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}}class en extends Qi{constructor(t,e){super(),this.position=0,this.buffer=W(t),this.size=void 0===e?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:r}=this.readAt(t,4);return new DataView(e,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:r,position:i}=this;return e&&i<r?("number"!=typeof t&&(t=1/0),this.position=Math.min(r,i+Math.min(r-i,t)),e.subarray(i,this.position)):null}readAt(t,e){const r=this.buffer,i=Math.min(this.size,t+e);return r?r.subarray(t,i):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class rn extends Zi{constructor(t,e){super(),this.position=0,this._handle=t,"number"==typeof e?this.size=e:this._pending=(async()=>{this.size=(await t.stat()).size,delete this._pending})()}async readInt32(t){const{buffer:e,byteOffset:r}=await this.readAt(t,4);return new DataView(e,r).getInt32(0,!0)}async seek(t){return this._pending&&await this._pending,this.position=Math.min(t,this.size),t<this.size}async read(t){this._pending&&await this._pending;const{_handle:e,size:r,position:i}=this;if(e&&i<r){"number"!=typeof t&&(t=1/0);let n=i,s=0,a=0,o=Math.min(r,n+Math.min(r-n,t)),c=new Uint8Array(Math.max(0,(this.position=o)-n));for(;(n+=a)<o&&(s+=a)<c.byteLength;)({bytesRead:a}=await e.read(c,s,c.byteLength-s,n));return c}return null}async readAt(t,e){this._pending&&await this._pending;const{_handle:r,size:i}=this;if(r&&t+e<i){const n=Math.min(i,t+e),s=new Uint8Array(n-t);return(await r.read(s,0,e,t)).buffer}return new Uint8Array(e)}async close(){const t=this._handle;this._handle=null,t&&await t.close()}async throw(t){return await this.close(),{done:!0,value:t}}async return(t){return await this.close(),{done:!0,value:t}}}function nn(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const sn=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class an{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),r=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]);let i=e[3]*r[3];this.buffer[0]=65535&i;let n=i>>>16;return i=e[2]*r[3],n+=i,i=e[3]*r[2]>>>0,n+=i,this.buffer[0]+=n<<16,this.buffer[1]=n>>>0<i?65536:0,this.buffer[1]+=n>>>16,this.buffer[1]+=e[1]*r[3]+e[2]*r[2]+e[3]*r[1],this.buffer[1]+=e[0]*r[3]+e[1]*r[2]+e[2]*r[1]+e[3]*r[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${nn(this.buffer[1])} ${nn(this.buffer[0])}`}}class on extends an{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,e=new Uint32Array(2)){return on.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return on.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const r=t.length;let i=new on(e);for(let e=0;e<r;){const n=8<r-e?8:r-e,s=new on(new Uint32Array([parseInt(t.substr(e,n),10),0])),a=new on(new Uint32Array([sn[n],0]));i.times(a),i.plus(s),e+=n}return i}static convertArray(t){const e=new Uint32Array(2*t.length);for(let r=-1,i=t.length;++r<i;)on.from(t[r],new Uint32Array(e.buffer,e.byteOffset+2*r*4,2));return e}static multiply(t,e){return new on(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new on(new Uint32Array(t.buffer)).plus(e)}}class cn extends an{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]<<0,r=t.buffer[1]<<0;return e<r||e===r&&this.buffer[0]<t.buffer[0]}static from(t,e=new Uint32Array(2)){return cn.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return cn.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length;let n=new cn(e);for(let e=r?1:0;e<i;){const r=8<i-e?8:i-e,s=new cn(new Uint32Array([parseInt(t.substr(e,r),10),0])),a=new cn(new Uint32Array([sn[r],0]));n.times(a),n.plus(s),e+=r}return r?n.negate():n}static convertArray(t){const e=new Uint32Array(2*t.length);for(let r=-1,i=t.length;++r<i;)cn.from(t[r],new Uint32Array(e.buffer,e.byteOffset+2*r*4,2));return e}static multiply(t,e){return new cn(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new cn(new Uint32Array(t.buffer)).plus(e)}}class un{constructor(t){this.buffer=t}high(){return new cn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new cn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(t){const e=new on(new Uint32Array([this.buffer[3],0])),r=new on(new Uint32Array([this.buffer[2],0])),i=new on(new Uint32Array([this.buffer[1],0])),n=new on(new Uint32Array([this.buffer[0],0])),s=new on(new Uint32Array([t.buffer[3],0])),a=new on(new Uint32Array([t.buffer[2],0])),o=new on(new Uint32Array([t.buffer[1],0])),c=new on(new Uint32Array([t.buffer[0],0]));let u=on.multiply(n,c);this.buffer[0]=u.low();let h=new on(new Uint32Array([u.high(),0]));return u=on.multiply(i,c),h.plus(u),u=on.multiply(n,o),h.plus(u),this.buffer[1]=h.low(),this.buffer[3]=h.lessThan(u)?1:0,this.buffer[2]=h.high(),new on(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(on.multiply(r,c)).plus(on.multiply(i,o)).plus(on.multiply(n,a)),this.buffer[3]+=on.multiply(e,c).plus(on.multiply(r,o)).plus(on.multiply(i,a)).plus(on.multiply(n,s)).low(),this}plus(t){let e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return`${nn(this.buffer[3])} ${nn(this.buffer[2])} ${nn(this.buffer[1])} ${nn(this.buffer[0])}`}static multiply(t,e){return new un(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new un(new Uint32Array(t.buffer)).plus(e)}static from(t,e=new Uint32Array(4)){return un.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(4)){return un.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length;let n=new un(e);for(let e=r?1:0;e<i;){const r=8<i-e?8:i-e,s=new un(new Uint32Array([parseInt(t.substr(e,r),10),0,0,0])),a=new un(new Uint32Array([sn[r],0,0,0]));n.times(a),n.plus(s),e+=r}return r?n.negate():n}static convertArray(t){const e=new Uint32Array(4*t.length);for(let r=-1,i=t.length;++r<i;)un.from(t[r],new Uint32Array(e.buffer,e.byteOffset+16*r,4));return e}}class hn extends _t{constructor(t,e,r,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=r,this.dictionaries=i}visit(t){return super.visit(t instanceof ui?t.type:t)}visitNull(t,{length:e}=this.nextFieldNode()){return ve.Null(t,0,e)}visitBool(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.Bool(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitInt(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.Int(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitFloat(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.Float(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitUtf8(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.Utf8(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.readData(t))}visitBinary(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.Binary(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.readData(t))}visitFixedSizeBinary(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.FixedSizeBinary(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitDate(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.Date(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitTimestamp(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.Timestamp(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitTime(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.Time(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitDecimal(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.Decimal(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitList(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.List(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.visit(t.children[0]))}visitStruct(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.Struct(t,0,e,r,this.readNullBitmap(t,r),this.visitMany(t.children))}visitUnion(t){return t.mode===ct.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.Union(t,0,e,r,this.readNullBitmap(t,r),this.readTypeIds(t),this.readOffsets(t),this.visitMany(t.children))}visitSparseUnion(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.Union(t,0,e,r,this.readNullBitmap(t,r),this.readTypeIds(t),this.visitMany(t.children))}visitDictionary(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.Dictionary(t,0,e,r,this.readNullBitmap(t,r),this.readData(t.indices),this.readDictionary(t))}visitInterval(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.Interval(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitFixedSizeList(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.FixedSizeList(t,0,e,r,this.readNullBitmap(t,r),this.visit(t.children[0]))}visitMap(t,{length:e,nullCount:r}=this.nextFieldNode()){return ve.Map(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.visit(t.children[0]))}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e,r=this.nextBufferRange()){return e>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t,{length:e,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class ln extends hn{constructor(t,e,r,i){super(new Uint8Array(0),e,r,i),this.sources=t}readNullBitmap(t,e,{offset:r}=this.nextBufferRange()){return e<=0?new Uint8Array(0):yt(this.sources[r])}readOffsets(t,{offset:e}=this.nextBufferRange()){return z(Uint8Array,z(Int32Array,this.sources[e]))}readTypeIds(t,{offset:e}=this.nextBufferRange()){return z(Uint8Array,z(t.ArrayType,this.sources[e]))}readData(t,{offset:e}=this.nextBufferRange()){const{sources:r}=this;return Dt.isTimestamp(t)||(Dt.isInt(t)||Dt.isTime(t))&&64===t.bitWidth||Dt.isDate(t)&&t.unit===st.MILLISECOND?z(Uint8Array,cn.convertArray(r[e])):Dt.isDecimal(t)?z(Uint8Array,un.convertArray(r[e])):Dt.isBinary(t)||Dt.isFixedSizeBinary(t)?function(t){const e=t.join(""),r=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)r[t>>1]=parseInt(e.substr(t,2),16);return r}(r[e]):Dt.isBool(t)?yt(r[e]):Dt.isUtf8(t)?y(r[e].join("")):z(Uint8Array,z(t.ArrayType,r[e].map((t=>+t))))}}var pn=e.Long,dn=rt.apache.arrow.flatbuf.Null,fn=rt.apache.arrow.flatbuf.Int,yn=rt.apache.arrow.flatbuf.FloatingPoint,mn=rt.apache.arrow.flatbuf.Binary,bn=rt.apache.arrow.flatbuf.Bool,gn=rt.apache.arrow.flatbuf.Utf8,_n=rt.apache.arrow.flatbuf.Decimal,vn=rt.apache.arrow.flatbuf.Date,wn=rt.apache.arrow.flatbuf.Time,xn=rt.apache.arrow.flatbuf.Timestamp,In=rt.apache.arrow.flatbuf.Interval,Sn=rt.apache.arrow.flatbuf.List,Tn=rt.apache.arrow.flatbuf.Struct_,An=rt.apache.arrow.flatbuf.Union,En=rt.apache.arrow.flatbuf.DictionaryEncoding,Bn=rt.apache.arrow.flatbuf.FixedSizeBinary,kn=rt.apache.arrow.flatbuf.FixedSizeList,Ln=rt.apache.arrow.flatbuf.Map;const Cn=new class extends _t{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return dn.startNull(e),dn.endNull(e)}visitInt(t,e){return fn.startInt(e),fn.addBitWidth(e,t.bitWidth),fn.addIsSigned(e,t.isSigned),fn.endInt(e)}visitFloat(t,e){return yn.startFloatingPoint(e),yn.addPrecision(e,t.precision),yn.endFloatingPoint(e)}visitBinary(t,e){return mn.startBinary(e),mn.endBinary(e)}visitBool(t,e){return bn.startBool(e),bn.endBool(e)}visitUtf8(t,e){return gn.startUtf8(e),gn.endUtf8(e)}visitDecimal(t,e){return _n.startDecimal(e),_n.addScale(e,t.scale),_n.addPrecision(e,t.precision),_n.endDecimal(e)}visitDate(t,e){return vn.startDate(e),vn.addUnit(e,t.unit),vn.endDate(e)}visitTime(t,e){return wn.startTime(e),wn.addUnit(e,t.unit),wn.addBitWidth(e,t.bitWidth),wn.endTime(e)}visitTimestamp(t,e){const r=t.timezone&&e.createString(t.timezone)||void 0;return xn.startTimestamp(e),xn.addUnit(e,t.unit),void 0!==r&&xn.addTimezone(e,r),xn.endTimestamp(e)}visitInterval(t,e){return In.startInterval(e),In.addUnit(e,t.unit),In.endInterval(e)}visitList(t,e){return Sn.startList(e),Sn.endList(e)}visitStruct(t,e){return Tn.startStruct_(e),Tn.endStruct_(e)}visitUnion(t,e){An.startTypeIdsVector(e,t.typeIds.length);const r=An.createTypeIdsVector(e,t.typeIds);return An.startUnion(e),An.addMode(e,t.mode),An.addTypeIds(e,r),An.endUnion(e)}visitDictionary(t,e){const r=this.visit(t.indices,e);return En.startDictionaryEncoding(e),En.addId(e,new pn(t.id,0)),En.addIsOrdered(e,t.isOrdered),void 0!==r&&En.addIndexType(e,r),En.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return Bn.startFixedSizeBinary(e),Bn.addByteWidth(e,t.byteWidth),Bn.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return kn.startFixedSizeList(e),kn.addListSize(e,t.listSize),kn.endFixedSizeList(e)}visitMap(t,e){return Ln.startMap(e),Ln.addKeysSorted(e,t.keysSorted),Ln.endMap(e)}};function Dn(t){return new Xn(t.count,On(t.columns),Nn(t.columns))}function Mn(t,e){return(t.children||[]).filter(Boolean).map((t=>ui.fromJSON(t,e)))}function On(t){return(t||[]).reduce(((t,e)=>{return[...t,new rs(e.count,(r=e.VALIDITY,(r||[]).reduce(((t,e)=>t+ +(0===e)),0))),...On(e.children)];var r}),[])}function Nn(t,e=[]){for(let r=-1,i=(t||[]).length;++r<i;){const i=t[r];i.VALIDITY&&e.push(new es(e.length,i.VALIDITY.length)),i.TYPE&&e.push(new es(e.length,i.TYPE.length)),i.OFFSET&&e.push(new es(e.length,i.OFFSET.length)),i.DATA&&e.push(new es(e.length,i.DATA.length)),e=Nn(i.children,e)}return e}function Fn(t){return new Map(Object.entries(t||{}))}function Un(t){return new Nt(t.isSigned,t.bitWidth)}function Vn(t,e){const r=t.type.name;switch(r){case"NONE":case"null":return new Ot;case"binary":return new Gt;case"utf8":return new Kt;case"bool":return new Jt;case"list":return new he((e||[])[0]);case"struct":case"struct_":return new le(e||[])}switch(r){case"int":{const e=t.type;return new Nt(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new Wt(ot[e.precision])}case"decimal":{const e=t.type;return new Qt(e.scale,e.precision)}case"date":{const e=t.type;return new Zt(st[e.unit])}case"time":{const e=t.type;return new ee(at[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new ae(at[e.unit],e.timezone)}case"interval":{const e=t.type;return new oe(ut[e.unit])}case"union":{const r=t.type;return new pe(ct[r.mode],r.typeIds||[],e||[])}case"fixedsizebinary":{const e=t.type;return new de(e.byteWidth)}case"fixedsizelist":{const r=t.type;return new fe(r.listSize,(e||[])[0])}case"map":{const r=t.type;return new ye((e||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${r}"`)}var Pn=e.Long,Rn=e.Builder,jn=e.ByteBuffer,zn=rt.apache.arrow.flatbuf.Type,$n=rt.apache.arrow.flatbuf.Field,Wn=rt.apache.arrow.flatbuf.Schema,Hn=rt.apache.arrow.flatbuf.Buffer,qn=it.apache.arrow.flatbuf.Message,Yn=rt.apache.arrow.flatbuf.KeyValue,Gn=it.apache.arrow.flatbuf.FieldNode,Kn=rt.apache.arrow.flatbuf.Endianness,Jn=it.apache.arrow.flatbuf.RecordBatch,Qn=it.apache.arrow.flatbuf.DictionaryBatch;class Zn{constructor(t,e,r,i){this._version=e,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength="number"==typeof t?t:t.low}static fromJSON(t,e){const r=new Zn(0,lt.V4,e);return r._createHeader=function(t,e){return()=>{switch(e){case ht.Schema:return ci.fromJSON(t);case ht.RecordBatch:return Xn.fromJSON(t);case ht.DictionaryBatch:return ts.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${ht[e]}, type: ${e} }`)}}(t,e),r}static decode(t){t=new jn(W(t));const e=qn.getRootAsMessage(t),r=e.bodyLength(),i=e.version(),n=e.headerType(),s=new Zn(r,i,n);return s._createHeader=function(t,e){return()=>{switch(e){case ht.Schema:return ci.decode(t.header(new Wn));case ht.RecordBatch:return Xn.decode(t.header(new Jn),t.version());case ht.DictionaryBatch:return ts.decode(t.header(new Qn),t.version())}throw new Error(`Unrecognized Message type: { name: ${ht[e]}, type: ${e} }`)}}(e,n),s}static encode(t){let e=new Rn,r=-1;return t.isSchema()?r=ci.encode(e,t.header()):t.isRecordBatch()?r=Xn.encode(e,t.header()):t.isDictionaryBatch()&&(r=ts.encode(e,t.header())),qn.startMessage(e),qn.addVersion(e,lt.V4),qn.addHeader(e,r),qn.addHeaderType(e,t.headerType),qn.addBodyLength(e,new Pn(t.bodyLength,0)),qn.finishMessageBuffer(e,qn.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof ci)return new Zn(0,lt.V4,ht.Schema,t);if(t instanceof Xn)return new Zn(e,lt.V4,ht.RecordBatch,t);if(t instanceof ts)return new Zn(e,lt.V4,ht.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===ht.Schema}isRecordBatch(){return this.headerType===ht.RecordBatch}isDictionaryBatch(){return this.headerType===ht.DictionaryBatch}}class Xn{constructor(t,e,r){this._nodes=e,this._buffers=r,this._length="number"==typeof t?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class ts{constructor(t,e,r=!1){this._data=t,this._isDelta=r,this._id="number"==typeof e?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class es{constructor(t,e){this.offset="number"==typeof t?t:t.low,this.length="number"==typeof e?e:e.low}}class rs{constructor(t,e){this.length="number"==typeof t?t:t.low,this.nullCount="number"==typeof e?e:e.low}}function is(t,e){const r=[];for(let i,n=-1,s=-1,a=t.childrenLength();++n<a;)(i=t.children(n))&&(r[++s]=ui.decode(i,e));return r}function ns(t){const e=new Map;if(t)for(let r,i,n=-1,s=0|t.customMetadataLength();++n<s;)(r=t.customMetadata(n))&&null!=(i=r.key())&&e.set(i,r.value());return e}function ss(t){return new Nt(t.isSigned(),t.bitWidth())}function as(t,e){const r=t.typeType();switch(r){case zn.NONE:case zn.Null:return new Ot;case zn.Binary:return new Gt;case zn.Utf8:return new Kt;case zn.Bool:return new Jt;case zn.List:return new he((e||[])[0]);case zn.Struct_:return new le(e||[])}switch(r){case zn.Int:{const e=t.type(new rt.apache.arrow.flatbuf.Int);return new Nt(e.isSigned(),e.bitWidth())}case zn.FloatingPoint:{const e=t.type(new rt.apache.arrow.flatbuf.FloatingPoint);return new Wt(e.precision())}case zn.Decimal:{const e=t.type(new rt.apache.arrow.flatbuf.Decimal);return new Qt(e.scale(),e.precision())}case zn.Date:{const e=t.type(new rt.apache.arrow.flatbuf.Date);return new Zt(e.unit())}case zn.Time:{const e=t.type(new rt.apache.arrow.flatbuf.Time);return new ee(e.unit(),e.bitWidth())}case zn.Timestamp:{const e=t.type(new rt.apache.arrow.flatbuf.Timestamp);return new ae(e.unit(),e.timezone())}case zn.Interval:{const e=t.type(new rt.apache.arrow.flatbuf.Interval);return new oe(e.unit())}case zn.Union:{const r=t.type(new rt.apache.arrow.flatbuf.Union);return new pe(r.mode(),r.typeIdsArray()||[],e||[])}case zn.FixedSizeBinary:{const e=t.type(new rt.apache.arrow.flatbuf.FixedSizeBinary);return new de(e.byteWidth())}case zn.FixedSizeList:{const r=t.type(new rt.apache.arrow.flatbuf.FixedSizeList);return new fe(r.listSize(),(e||[])[0])}case zn.Map:{const r=t.type(new rt.apache.arrow.flatbuf.Map);return new ye((e||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${zn[r]}" (${r})`)}ui.encode=function(t,e){let r=-1,i=-1,n=-1,s=e.type,a=e.typeId;Dt.isDictionary(s)?(a=s.dictionary.typeId,n=Cn.visit(s,t),i=Cn.visit(s.dictionary,t)):i=Cn.visit(s,t);const o=(s.children||[]).map((e=>ui.encode(t,e))),c=$n.createChildrenVector(t,o),u=e.metadata&&e.metadata.size>0?$n.createCustomMetadataVector(t,[...e.metadata].map((([e,r])=>{const i=t.createString(`${e}`),n=t.createString(`${r}`);return Yn.startKeyValue(t),Yn.addKey(t,i),Yn.addValue(t,n),Yn.endKeyValue(t)}))):-1;e.name&&(r=t.createString(e.name));$n.startField(t),$n.addType(t,i),$n.addTypeType(t,a),$n.addChildren(t,c),$n.addNullable(t,!!e.nullable),-1!==r&&$n.addName(t,r);-1!==n&&$n.addDictionary(t,n);-1!==u&&$n.addCustomMetadata(t,u);return $n.endField(t)},ui.decode=function(t,e){let r,i,n,s,a,o;e&&(o=t.dictionary())?e.has(r=o.id().low)?(s=(s=o.indexType())?ss(s):new Vt,a=new ge(e.get(r),s,r,o.isOrdered()),i=new ui(t.name(),a,t.nullable(),ns(t))):(s=(s=o.indexType())?ss(s):new Vt,e.set(r,n=as(t,is(t,e))),a=new ge(n,s,r,o.isOrdered()),i=new ui(t.name(),a,t.nullable(),ns(t))):(n=as(t,is(t,e)),i=new ui(t.name(),n,t.nullable(),ns(t)));return i||null},ui.fromJSON=function(t,e){let r,i,n,s,a,o;return e&&(s=t.dictionary)?e.has(r=s.id)?(i=(i=s.indexType)?Un(i):new Vt,o=new ge(e.get(r),i,r,s.isOrdered),n=new ui(t.name,o,t.nullable,Fn(t.customMetadata))):(i=(i=s.indexType)?Un(i):new Vt,e.set(r,a=Vn(t,Mn(t,e))),o=new ge(a,i,r,s.isOrdered),n=new ui(t.name,o,t.nullable,Fn(t.customMetadata))):(a=Vn(t,Mn(t,e)),n=new ui(t.name,a,t.nullable,Fn(t.customMetadata))),n||null},ci.encode=function(t,e){const r=e.fields.map((e=>ui.encode(t,e)));Wn.startFieldsVector(t,r.length);const i=Wn.createFieldsVector(t,r),n=e.metadata&&e.metadata.size>0?Wn.createCustomMetadataVector(t,[...e.metadata].map((([e,r])=>{const i=t.createString(`${e}`),n=t.createString(`${r}`);return Yn.startKeyValue(t),Yn.addKey(t,i),Yn.addValue(t,n),Yn.endKeyValue(t)}))):-1;Wn.startSchema(t),Wn.addFields(t,i),Wn.addEndianness(t,os?Kn.Little:Kn.Big),-1!==n&&Wn.addCustomMetadata(t,n);return Wn.endSchema(t)},ci.decode=function(t,e=new Map){const r=function(t,e){const r=[];for(let i,n=-1,s=-1,a=t.fieldsLength();++n<a;)(i=t.fields(n))&&(r[++s]=ui.decode(i,e));return r}(t,e);return new ci(r,ns(t),e)},ci.fromJSON=function(t,e=new Map){return new ci(function(t,e){return(t.fields||[]).filter(Boolean).map((t=>ui.fromJSON(t,e)))}(t,e),Fn(t.customMetadata),e)},Xn.encode=function(t,e){const r=e.nodes||[],i=e.buffers||[];Jn.startNodesVector(t,r.length),r.slice().reverse().forEach((e=>rs.encode(t,e)));const n=t.endVector();Jn.startBuffersVector(t,i.length),i.slice().reverse().forEach((e=>es.encode(t,e)));const s=t.endVector();return Jn.startRecordBatch(t),Jn.addLength(t,new Pn(e.length,0)),Jn.addNodes(t,n),Jn.addBuffers(t,s),Jn.endRecordBatch(t)},Xn.decode=function(t,e=lt.V4){return new Xn(t.length(),function(t){const e=[];for(let r,i=-1,n=-1,s=t.nodesLength();++i<s;)(r=t.nodes(i))&&(e[++n]=rs.decode(r));return e}(t),function(t,e){const r=[];for(let i,n=-1,s=-1,a=t.buffersLength();++n<a;)(i=t.buffers(n))&&(e<lt.V4&&(i.bb_pos+=8*(n+1)),r[++s]=es.decode(i));return r}(t,e))},Xn.fromJSON=Dn,ts.encode=function(t,e){const r=Xn.encode(t,e.data);return Qn.startDictionaryBatch(t),Qn.addId(t,new Pn(e.id,0)),Qn.addIsDelta(t,e.isDelta),Qn.addData(t,r),Qn.endDictionaryBatch(t)},ts.decode=function(t,e=lt.V4){return new ts(Xn.decode(t.data(),e),t.id(),t.isDelta())},ts.fromJSON=function(t){return new ts(Dn(t.data),t.id,t.isDelta)},rs.encode=function(t,e){return Gn.createFieldNode(t,new Pn(e.length,0),new Pn(e.nullCount,0))},rs.decode=function(t){return new rs(t.length(),t.nullCount())},es.encode=function(t,e){return Hn.createBuffer(t,new Pn(e.offset,0),new Pn(e.length,0))},es.decode=function(t){return new es(t.offset(),t.length())};const os=function(){const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]}();var cs=e.ByteBuffer;const us=t=>`Expected ${ht[t]} Message in stream, but was null or length 0.`,hs=t=>`Header pointer of flatbuffer-encoded ${ht[t]} Message is null or length 0.`,ls=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,ps=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class ds{constructor(t){this.source=t instanceof Qi?t:new Qi(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||-1===t.value&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?m:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(us(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=W(this.source.read(t));if(e.byteLength<t)throw new Error(ps(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(t=!1){const e=ht.Schema,r=this.readMessage(e),i=r&&r.header();if(t&&!i)throw new Error(hs(e));return i}readMetadataLength(){const t=this.source.read(ms),e=t&&new cs(t),r=e&&e.readInt32(0)||0;return{done:0===r,value:r}}readMetadata(t){const e=this.source.read(t);if(!e)return m;if(e.byteLength<t)throw new Error(ls(t,e.byteLength));return{done:!1,value:Zn.decode(e)}}}class fs{constructor(t,e){this.source=t instanceof Zi?t:O(t)?new rn(t,e):new Zi(t)}[Symbol.asyncIterator](){return this}async next(){let t;return(t=await this.readMetadataLength()).done||-1===t.value&&(t=await this.readMetadataLength()).done||(t=await this.readMetadata(t.value)).done?m:t}async throw(t){return await this.source.throw(t)}async return(t){return await this.source.return(t)}async readMessage(t){let e;if((e=await this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(us(t));return e.value}async readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=W(await this.source.read(t));if(e.byteLength<t)throw new Error(ps(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}async readSchema(t=!1){const e=ht.Schema,r=await this.readMessage(e),i=r&&r.header();if(t&&!i)throw new Error(hs(e));return i}async readMetadataLength(){const t=await this.source.read(ms),e=t&&new cs(t),r=e&&e.readInt32(0)||0;return{done:0===r,value:r}}async readMetadata(t){const e=await this.source.read(t);if(!e)return m;if(e.byteLength<t)throw new Error(ls(t,e.byteLength));return{done:!1,value:Zn.decode(e)}}}class ys extends ds{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof b?t:new b(t)}next(){const{_json:t}=this;if(!this._schema){this._schema=!0;return{done:!1,value:Zn.fromJSON(t.schema,ht.Schema)}}if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];this._body=e.data.columns;return{done:!1,value:Zn.fromJSON(e,ht.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];this._body=e.columns;return{done:!1,value:Zn.fromJSON(e,ht.RecordBatch)}}return this._body=[],m}readMessageBody(t){return function t(e){return(e||[]).reduce(((e,r)=>[...e,...r.VALIDITY&&[r.VALIDITY]||[],...r.TYPE&&[r.TYPE]||[],...r.OFFSET&&[r.OFFSET]||[],...r.DATA&&[r.DATA]||[],...t(r.children)]),[])}(this._body)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(us(t));return e.value}readSchema(){const t=ht.Schema,e=this.readMessage(t),r=e&&e.header();if(!e||!r)throw new Error(hs(t));return r}}const ms=4,bs="ARROW1",gs=new Uint8Array(bs.length);for(let t=0;t<bs.length;t+=1)gs[t]=bs.charCodeAt(t);function _s(t,e=0){for(let r=-1,i=gs.length;++r<i;)if(gs[r]!==t[e+r])return!1;return!0}const vs=gs.length,ws=vs+ms,xs=2*vs+ms;class Is extends _t{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const e=new Is,r=ri(xo,t),[i=e]=e.visitMany(r);return i}visit(t){if(!Dt.isDictionary(t.type)){const{data:e,length:r,nullCount:i}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Dt.isNull(t.type)||Ss.call(this,i<=0?new Uint8Array(0):ft(e.offset,r,e.nullBitmap)),this.nodes.push(new rs(r,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.indices)}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Ss(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new es(this._byteLength,e)),this._byteLength+=e,this}function Ts(t){return Ss.call(this,t.values.subarray(0,t.length*t.stride))}function As(t){const{length:e,values:r,valueOffsets:i}=t,n=i[0],s=i[e],a=Math.min(s-n,r.byteLength-n);return Ss.call(this,K(-i[0],e,i)),Ss.call(this,r.subarray(n,n+a)),this}function Es(t){const{length:e,valueOffsets:r}=t;return r&&Ss.call(this,K(r[0],e,r)),this.visit(t.getChildAt(0))}function Bs(t){return this.visitMany(t.type.children.map(((e,r)=>t.getChildAt(r))).filter(Boolean))[0]}Is.prototype.visitBool=function(t){let e;return t.nullCount>=t.length?Ss.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Ss.call(this,ft(t.offset,t.length,e)):Ss.call(this,yt(t))},Is.prototype.visitInt=Ts,Is.prototype.visitFloat=Ts,Is.prototype.visitUtf8=As,Is.prototype.visitBinary=As,Is.prototype.visitFixedSizeBinary=Ts,Is.prototype.visitDate=Ts,Is.prototype.visitTimestamp=Ts,Is.prototype.visitTime=Ts,Is.prototype.visitDecimal=Ts,Is.prototype.visitList=Es,Is.prototype.visitStruct=Bs,Is.prototype.visitUnion=function(t){const{type:e,length:r,typeIds:i,valueOffsets:n}=t;if(Ss.call(this,i),e.mode===ct.Sparse)return Bs.call(this,t);if(e.mode===ct.Dense){if(t.offset<=0)return Ss.call(this,n),Bs.call(this,t);{const s=i.reduce(((t,e)=>Math.max(t,e)),i[0]),a=new Int32Array(s+1),o=new Int32Array(s+1).fill(-1),c=new Int32Array(r),u=K(-n[0],r,n);for(let t,e,n=-1;++n<r;)-1===(e=o[t=i[n]])&&(e=o[t]=u[t]),c[n]=u[n]-e,++a[t];Ss.call(this,c);for(let i,n=-1,s=e.children.length;++n<s;)if(i=t.getChildAt(n)){const t=e.typeIds[n],s=Math.min(r,a[t]);this.visit(i.slice(o[t],s))}}}return this},Is.prototype.visitInterval=Ts,Is.prototype.visitFixedSizeList=Es,Is.prototype.visitMap=Es;class ks extends g{constructor(t){super(),this._position=0,this._started=!1,this._sink=new Ji,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,B(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!=typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"==typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return k(t)?t.then((t=>this.writeAll(t))):C(t)?Ms(this,t):Ds(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){var r;return t===this._sink||t instanceof Ji?this._sink=t:(this._sink=new Ji,t&&(B(r=t)&&E(r.abort)&&E(r.getWriter)&&!(r instanceof g))?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&(t=>B(t)&&E(t.end)&&E(t.write)&&A(t.writable)&&!(t instanceof g))(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&e.compareTo(this._schema)||(null===e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==t)return this.finish()&&void 0;if(t instanceof wo&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof xo&&!(e=t.schema))return this.finish()&&void 0;if(e&&!e.compareTo(this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof xo?t instanceof Io||this._writeRecordBatch(t):t instanceof wo?this.writeAll(t.chunks):L(t)&&this.writeAll(t)}_writeMessage(t,e=8){const r=e-1,i=Zn.encode(t),n=i.byteLength,s=this._writeLegacyIpcFormat?4:8,a=n+s+r&~r,o=a-n-s;return t.headerType===ht.RecordBatch?this._recordBatchBlocks.push(new Ki(a,t.bodyLength,this._position)):t.headerType===ht.DictionaryBatch&&this._dictionaryBlocks.push(new Ki(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-s)),n>0&&this._write(i),this._writePadding(o)}_write(t){if(this._started){const e=W(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(Zn.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(gs)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:r,bufferRegions:i,buffers:n}=Is.assemble(t),s=new Xn(t.length,r,i),a=Zn.from(s,e);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(n)}_writeDictionaryBatch(t,e,r=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:i,nodes:n,bufferRegions:s,buffers:a}=Is.assemble(t),o=new Xn(t.length,n,s),c=new ts(o,e,r),u=Zn.from(c,i);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let e,r,i;for(let n=-1,s=t.length;++n<s;)(e=t[n])&&(r=e.byteLength)>0&&(this._write(e),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[e,r]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(r=r.slice(t)).length>0){const i="chunks"in r?r.chunks:[r];for(const r of i)this._writeDictionaryBatch(r,e,t>0),t+=r.length}}return this}}class Ls extends ks{static writeAll(t,e){const r=new Ls(e);return k(t)?t.then((t=>r.writeAll(t))):C(t)?Ms(r,t):Ds(r,t)}}class Cs extends ks{static writeAll(t){const e=new Cs;return k(t)?t.then((t=>e.writeAll(t))):C(t)?Ms(e,t):Ds(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=Yi.encode(new Yi(t,lt.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function Ds(t,e){let r=e;e instanceof wo&&(r=e.chunks,t.reset(void 0,e.schema));for(const e of r)t.write(e);return t.finish()}async function Ms(t,e){for await(const r of e)t.write(r);return t.finish()}const Os=new Uint8Array(0),Ns=t=>[Os,Os,new Uint8Array(t),Os];function Fs(t,e){return function(t,e){const r=[...t.fields],i=[],n={numBatches:e.reduce(((t,e)=>Math.max(t,e.length)),0)};let s,a=0,o=0,c=-1,u=e.length,h=[];for(;n.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,c=-1;++c<u;)h[c]=s=e[c].shift(),o=Math.min(o,s?s.length:o);isFinite(o)&&(h=Us(r,o,h,e,n),o>0&&(i[a++]=[o,h.slice()]))}return[t=new ci(r,t.metadata),i.map((e=>new xo(t,...e)))]}(t,e.map((t=>t instanceof Yr?t.chunks.map((t=>t.data)):[t.data])))}function Us(t,e,r,i,n){let s,a,o=0,c=-1,u=i.length;const h=(e+63&-64)>>3;for(;++c<u;)(s=r[c])&&(o=s.length)>=e?o===e?r[c]=s:(r[c]=s.slice(0,e),s=s.slice(e,o-e),n.numBatches=Math.max(n.numBatches,i[c].unshift(s))):((a=t[c]).nullable||(t[c]=a.clone({nullable:!0})),r[c]=s?s._changeLengthAndBackfillNullBitmap(e):ve.new(a.type,0,e,e,Ns(h)));return r}class Vs extends et{constructor(t,e){super(),this._children=e,this.numChildren=t.childData.length,this._bindDataAccessors(this.data=t)}get type(){return this.data.type}get typeId(){return this.data.typeId}get length(){return this.data.length}get offset(){return this.data.offset}get stride(){return this.data.stride}get nullCount(){return this.data.nullCount}get byteLength(){return this.data.byteLength}get VectorName(){return`${t.Type[this.typeId]}Vector`}get ArrayType(){return this.type.ArrayType}get values(){return this.data.values}get typeIds(){return this.data.typeIds}get nullBitmap(){return this.data.nullBitmap}get valueOffsets(){return this.data.valueOffsets}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}clone(t,e=this._children){return et.new(t,e)}concat(...t){return Yr.concat(this,...t)}slice(t,e){return jr(this,t,e,this._sliceInternal)}isValid(t){if(this.nullCount>0){const e=this.offset+t;return 0!==(this.nullBitmap[e>>3]&1<<e%8)}return!0}getChildAt(t){return t<0||t>=this.numChildren?null:(this._children||(this._children=[]))[t]||(this._children[t]=et.new(this.data.childData[t]))}toJSON(){return[...this]}_sliceInternal(t,e,r){return t.clone(t.data.slice(e,r-e),null)}_bindDataAccessors(t){}}Vs.prototype[Symbol.isConcatSpreadable]=!0;class Ps extends Vs{asUtf8(){return et.new(this.data.clone(new Kt))}}class Rs extends Vs{static from(t){return vo((()=>new Jt),t)}}class js extends Vs{static from(...t){return 2===t.length?vo((()=>t[1]===st.DAY?new Xt:new te),t[0]):vo((()=>new te),t[0])}}class zs extends js{}class $s extends js{}class Ws extends Vs{}class Hs extends Vs{constructor(t){super(t),this.indices=et.new(t.clone(this.type.indices))}static from(...t){if(3===t.length){const[e,r,i]=t,n=new ge(e.type,r,null,null);return et.new(ve.Dictionary(n,0,i.length,0,null,i,e))}return vo((()=>t[0].type),t[0])}get dictionary(){return this.data.dictionary}reverseLookup(t){return this.dictionary.indexOf(t)}getKey(t){return this.indices.get(t)}getValue(t){return this.dictionary.get(t)}setKey(t,e){return this.indices.set(t,e)}setValue(t,e){return this.dictionary.set(t,e)}}Hs.prototype.indices=null;class qs extends Vs{}class Ys extends Vs{}class Gs extends Vs{static from(t){let e=ta(this);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)){let r=Xs(t.constructor)||e;if(null===e&&(e=r),e&&e===r){let r=new e,i=t.byteLength/r.ArrayType.BYTES_PER_ELEMENT;if(!Zs(e,t.constructor))return et.new(ve.Float(r,0,i,0,null,t))}}if(e)return vo((()=>new e),t);if(t instanceof DataView||t instanceof ArrayBuffer)throw new TypeError(`Cannot infer float type from instance of ${t.constructor.name}`);throw new TypeError("Unrecognized FloatVector input")}}class Ks extends Gs{toFloat32Array(){return new Float32Array(this)}toFloat64Array(){return new Float64Array(this)}}class Js extends Gs{}class Qs extends Gs{}const Zs=(t,e)=>t===Ht&&e!==Uint16Array,Xs=t=>{switch(t){case Uint16Array:return Ht;case Float32Array:return qt;case Float64Array:return Yt;default:return null}},ta=t=>{switch(t){case Ks:return Ht;case Js:return qt;case Qs:return Yt;default:return null}};class ea extends Vs{}class ra extends ea{}class ia extends ea{}class na extends Vs{static from(...t){let[e,r=!1]=t,i=ya(this,r);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){let t=fa(e.constructor,r)||i;if(null===i&&(i=t),i&&i===t){let t=new i,r=e.byteLength/t.ArrayType.BYTES_PER_ELEMENT;return da(i,e.constructor)&&(r*=.5),et.new(ve.Int(t,0,r,0,null,e))}}if(i)return vo((()=>new i),e);if(e instanceof DataView||e instanceof ArrayBuffer)throw new TypeError(`Cannot infer integer type from instance of ${e.constructor.name}`);throw new TypeError("Unrecognized IntVector input")}}class sa extends na{}class aa extends na{}class oa extends na{}class ca extends na{toBigInt64Array(){return t=this.values,z(x,t);var t}get values64(){return this._values64||(this._values64=this.toBigInt64Array())}}class ua extends na{}class ha extends na{}class la extends na{}class pa extends na{toBigUint64Array(){return t=this.values,z(S,t);var t}get values64(){return this._values64||(this._values64=this.toBigUint64Array())}}const da=(t,e)=>!(t!==Pt&&t!==$t||e!==Int32Array&&e!==Uint32Array),fa=(t,e)=>{switch(t){case Int8Array:return Ft;case Int16Array:return Ut;case Int32Array:return e?Pt:Vt;case x:return Pt;case Uint8Array:return Rt;case Uint16Array:return jt;case Uint32Array:return e?$t:zt;case S:return $t;default:return null}},ya=(t,e)=>{switch(t){case sa:return Ft;case aa:return Ut;case oa:return e?Pt:Vt;case ca:return Pt;case ua:return Rt;case ha:return jt;case la:return e?$t:zt;case pa:return $t;default:return null}};class ma extends Vs{}class ba extends Vs{asList(){const t=this.type.children[0];return et.new(this.data.clone(new he(t)))}bind(t){const e=this.getChildAt(0),{[t]:r,[t+1]:i}=this.valueOffsets;return new Fr(e.slice(r,i))}}class ga extends Vs{}const _a=Symbol.for("rowIndex");class va extends Vs{bind(t){const e=this._row||(this._row=new Ur(this)),r=Object.create(e);return r[_a]=t,r}}class wa extends Vs{}class xa extends wa{}class Ia extends wa{}class Sa extends wa{}class Ta extends wa{}class Aa extends Vs{}class Ea extends Aa{}class Ba extends Aa{}class ka extends Aa{}class La extends Aa{}class Ca extends Vs{get typeIdToChildIndex(){return this.data.type.typeIdToChildIndex}}class Da extends Ca{get valueOffsets(){return this.data.valueOffsets}}class Ma extends Ca{}class Oa extends Vs{static from(t){return vo((()=>new Kt),t)}asBinary(){return et.new(this.data.clone(new Gt))}}function Na(t){return function(){return t(this)}}function Fa(t){return function(e,r){return t(this,e,r)}}class Ua extends _t{}const Va=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),Pa=t=>new Date(t),Ra=(t,e,r)=>{const{[r]:i,[r+1]:n}=e;return null!=i&&null!=n?t.subarray(i,n):null},ja=({values:t},e)=>((t,e)=>Pa(((t,e)=>864e5*t[e])(t,e)))(t,e),za=({values:t},e)=>((t,e)=>Pa(Va(t,e)))(t,2*e),$a=({stride:t,values:e},r)=>e[t*r],Wa=({stride:t,values:e},r)=>function(t){let e=(31744&t)>>10,r=(1023&t)/1024,i=(-1)**((32768&t)>>15);switch(e){case 31:return i*(r?NaN:1/0);case 0:return i*(r?6103515625e-14*r:0)}return i*2**(e-15)*(1+r)}(e[t*r]),Ha=({stride:t,values:e,type:r},i)=>rr.new(e.subarray(t*i,t*(i+1)),r.isSigned),qa=({values:t},e)=>1e3*Va(t,2*e),Ya=({values:t},e)=>Va(t,2*e),Ga=({values:t},e)=>((t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3)(t,2*e),Ka=({values:t},e)=>((t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6)(t,2*e),Ja=({values:t,stride:e},r)=>t[e*r],Qa=({values:t,stride:e},r)=>t[e*r],Za=({values:t},e)=>rr.signed(t.subarray(2*e,2*(e+1))),Xa=({values:t},e)=>rr.signed(t.subarray(2*e,2*(e+1))),to=(t,e)=>{const r=t.typeIdToChildIndex[t.typeIds[e]],i=t.getChildAt(r);return i?i.get(t.valueOffsets[e]):null},eo=(t,e)=>{const r=t.typeIdToChildIndex[t.typeIds[e]],i=t.getChildAt(r);return i?i.get(e):null},ro=({values:t},e)=>t.subarray(2*e,2*(e+1)),io=({values:t},e)=>{const r=t[e],i=new Int32Array(2);return i[0]=r/12|0,i[1]=r%12|0,i};Ua.prototype.visitNull=(t,e)=>null,Ua.prototype.visitBool=({offset:t,values:e},r)=>{const i=t+r;return 0!=(e[i>>3]&1<<i%8)},Ua.prototype.visitInt=(t,e)=>t.type.bitWidth<64?$a(t,e):Ha(t,e),Ua.prototype.visitInt8=$a,Ua.prototype.visitInt16=$a,Ua.prototype.visitInt32=$a,Ua.prototype.visitInt64=Ha,Ua.prototype.visitUint8=$a,Ua.prototype.visitUint16=$a,Ua.prototype.visitUint32=$a,Ua.prototype.visitUint64=Ha,Ua.prototype.visitFloat=(t,e)=>t.type.precision!==ot.HALF?$a(t,e):Wa(t,e),Ua.prototype.visitFloat16=Wa,Ua.prototype.visitFloat32=$a,Ua.prototype.visitFloat64=$a,Ua.prototype.visitUtf8=({values:t,valueOffsets:e},r)=>{const i=Ra(t,e,r);return null!==i?f(i):null},Ua.prototype.visitBinary=({values:t,valueOffsets:e},r)=>Ra(t,e,r),Ua.prototype.visitFixedSizeBinary=({stride:t,values:e},r)=>e.subarray(t*r,t*(r+1)),Ua.prototype.visitDate=(t,e)=>t.type.unit===st.DAY?ja(t,e):za(t,e),Ua.prototype.visitDateDay=ja,Ua.prototype.visitDateMillisecond=za,Ua.prototype.visitTimestamp=(t,e)=>{switch(t.type.unit){case at.SECOND:return qa(t,e);case at.MILLISECOND:return Ya(t,e);case at.MICROSECOND:return Ga(t,e);case at.NANOSECOND:return Ka(t,e)}},Ua.prototype.visitTimestampSecond=qa,Ua.prototype.visitTimestampMillisecond=Ya,Ua.prototype.visitTimestampMicrosecond=Ga,Ua.prototype.visitTimestampNanosecond=Ka,Ua.prototype.visitTime=(t,e)=>{switch(t.type.unit){case at.SECOND:return Ja(t,e);case at.MILLISECOND:return Qa(t,e);case at.MICROSECOND:return Za(t,e);case at.NANOSECOND:return Xa(t,e)}},Ua.prototype.visitTimeSecond=Ja,Ua.prototype.visitTimeMillisecond=Qa,Ua.prototype.visitTimeMicrosecond=Za,Ua.prototype.visitTimeNanosecond=Xa,Ua.prototype.visitDecimal=({values:t},e)=>rr.decimal(t.subarray(4*e,4*(e+1))),Ua.prototype.visitList=(t,e)=>{const r=t.getChildAt(0),{valueOffsets:i,stride:n}=t;return r.slice(i[e*n],i[e*n+1])},Ua.prototype.visitStruct=(t,e)=>t.bind(e),Ua.prototype.visitUnion=(t,e)=>t.type.mode===ct.Dense?to(t,e):eo(t,e),Ua.prototype.visitDenseUnion=to,Ua.prototype.visitSparseUnion=eo,Ua.prototype.visitDictionary=(t,e)=>t.getValue(t.getKey(e)),Ua.prototype.visitInterval=(t,e)=>t.type.unit===ut.DAY_TIME?ro(t,e):io(t,e),Ua.prototype.visitIntervalDayTime=ro,Ua.prototype.visitIntervalYearMonth=io,Ua.prototype.visitFixedSizeList=(t,e)=>{const r=t.getChildAt(0),{stride:i}=t;return r.slice(e*i,(e+1)*i)},Ua.prototype.visitMap=(t,e)=>t.bind(e);const no=new Ua;class so extends _t{}function ao(t,e,r){if(void 0===e)return-1;if(null===e)return function(t,e){const{nullBitmap:r}=t.data;if(!r||t.nullCount<=0)return-1;let i=0;for(const n of mt(r,t.data.offset+(e||0),t.length,r,pt)){if(!n)return i;++i}return-1}(t,r);const i=Wr(e);for(let e=(r||0)-1,n=t.length;++e<n;)if(i(t.get(e)))return e;return-1}function oo(t,e,r){const i=Wr(e);for(let e=(r||0)-1,n=t.length;++e<n;)if(i(t.get(e)))return e;return-1}so.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},so.prototype.visitBool=ao,so.prototype.visitInt=ao,so.prototype.visitInt8=ao,so.prototype.visitInt16=ao,so.prototype.visitInt32=ao,so.prototype.visitInt64=ao,so.prototype.visitUint8=ao,so.prototype.visitUint16=ao,so.prototype.visitUint32=ao,so.prototype.visitUint64=ao,so.prototype.visitFloat=ao,so.prototype.visitFloat16=ao,so.prototype.visitFloat32=ao,so.prototype.visitFloat64=ao,so.prototype.visitUtf8=ao,so.prototype.visitBinary=ao,so.prototype.visitFixedSizeBinary=ao,so.prototype.visitDate=ao,so.prototype.visitDateDay=ao,so.prototype.visitDateMillisecond=ao,so.prototype.visitTimestamp=ao,so.prototype.visitTimestampSecond=ao,so.prototype.visitTimestampMillisecond=ao,so.prototype.visitTimestampMicrosecond=ao,so.prototype.visitTimestampNanosecond=ao,so.prototype.visitTime=ao,so.prototype.visitTimeSecond=ao,so.prototype.visitTimeMillisecond=ao,so.prototype.visitTimeMicrosecond=ao,so.prototype.visitTimeNanosecond=ao,so.prototype.visitDecimal=ao,so.prototype.visitList=ao,so.prototype.visitStruct=ao,so.prototype.visitUnion=ao,so.prototype.visitDenseUnion=oo,so.prototype.visitSparseUnion=oo,so.prototype.visitDictionary=ao,so.prototype.visitInterval=ao,so.prototype.visitIntervalDayTime=ao,so.prototype.visitIntervalYearMonth=ao,so.prototype.visitFixedSizeList=ao,so.prototype.visitMap=ao;const co=new so;class uo extends _t{}function ho(e){if(e.nullCount>0)return function(t){const e=no.getVisitFn(t);return mt(t.data.nullBitmap,t.data.offset,t.length,t,((t,r,i,n)=>0!=(i&1<<n)?e(t,r):null))}(e);const{type:r,typeId:i,length:n}=e;return 1===e.stride&&(i===t.Type.Timestamp||i===t.Type.Int&&64!==r.bitWidth||i===t.Type.Time&&64!==r.bitWidth||i===t.Type.Float&&r.precision>0)?e.data.values.subarray(0,n)[Symbol.iterator]():function*(t){for(let r=-1;++r<n;)yield t(e,r)}(no.getVisitFn(e))}uo.prototype.visitNull=ho,uo.prototype.visitBool=ho,uo.prototype.visitInt=ho,uo.prototype.visitInt8=ho,uo.prototype.visitInt16=ho,uo.prototype.visitInt32=ho,uo.prototype.visitInt64=ho,uo.prototype.visitUint8=ho,uo.prototype.visitUint16=ho,uo.prototype.visitUint32=ho,uo.prototype.visitUint64=ho,uo.prototype.visitFloat=ho,uo.prototype.visitFloat16=ho,uo.prototype.visitFloat32=ho,uo.prototype.visitFloat64=ho,uo.prototype.visitUtf8=ho,uo.prototype.visitBinary=ho,uo.prototype.visitFixedSizeBinary=ho,uo.prototype.visitDate=ho,uo.prototype.visitDateDay=ho,uo.prototype.visitDateMillisecond=ho,uo.prototype.visitTimestamp=ho,uo.prototype.visitTimestampSecond=ho,uo.prototype.visitTimestampMillisecond=ho,uo.prototype.visitTimestampMicrosecond=ho,uo.prototype.visitTimestampNanosecond=ho,uo.prototype.visitTime=ho,uo.prototype.visitTimeSecond=ho,uo.prototype.visitTimeMillisecond=ho,uo.prototype.visitTimeMicrosecond=ho,uo.prototype.visitTimeNanosecond=ho,uo.prototype.visitDecimal=ho,uo.prototype.visitList=ho,uo.prototype.visitStruct=ho,uo.prototype.visitUnion=ho,uo.prototype.visitDenseUnion=ho,uo.prototype.visitSparseUnion=ho,uo.prototype.visitDictionary=ho,uo.prototype.visitInterval=ho,uo.prototype.visitIntervalDayTime=ho,uo.prototype.visitIntervalYearMonth=ho,uo.prototype.visitFixedSizeList=ho,uo.prototype.visitMap=ho;const lo=new uo;class po extends _t{}function fo(e){const{type:r,length:i,stride:n}=e;switch(r.typeId){case t.Type.Int:case t.Type.Float:case t.Type.Decimal:case t.Type.Time:case t.Type.Timestamp:return e.data.values.subarray(0,i*n)}return[...lo.visit(e)]}po.prototype.visitNull=fo,po.prototype.visitBool=fo,po.prototype.visitInt=fo,po.prototype.visitInt8=fo,po.prototype.visitInt16=fo,po.prototype.visitInt32=fo,po.prototype.visitInt64=fo,po.prototype.visitUint8=fo,po.prototype.visitUint16=fo,po.prototype.visitUint32=fo,po.prototype.visitUint64=fo,po.prototype.visitFloat=fo,po.prototype.visitFloat16=fo,po.prototype.visitFloat32=fo,po.prototype.visitFloat64=fo,po.prototype.visitUtf8=fo,po.prototype.visitBinary=fo,po.prototype.visitFixedSizeBinary=fo,po.prototype.visitDate=fo,po.prototype.visitDateDay=fo,po.prototype.visitDateMillisecond=fo,po.prototype.visitTimestamp=fo,po.prototype.visitTimestampSecond=fo,po.prototype.visitTimestampMillisecond=fo,po.prototype.visitTimestampMicrosecond=fo,po.prototype.visitTimestampNanosecond=fo,po.prototype.visitTime=fo,po.prototype.visitTimeSecond=fo,po.prototype.visitTimeMillisecond=fo,po.prototype.visitTimeMicrosecond=fo,po.prototype.visitTimeNanosecond=fo,po.prototype.visitDecimal=fo,po.prototype.visitList=fo,po.prototype.visitStruct=fo,po.prototype.visitUnion=fo,po.prototype.visitDenseUnion=fo,po.prototype.visitSparseUnion=fo,po.prototype.visitDictionary=fo,po.prototype.visitInterval=fo,po.prototype.visitIntervalDayTime=fo,po.prototype.visitIntervalYearMonth=fo,po.prototype.visitFixedSizeList=fo,po.prototype.visitMap=fo;const yo=new po,mo=(t,e)=>t+e,bo=t=>`Cannot compute the byte width of variable-width column ${t}`;const go=new class extends _t{visitNull(t){return 0}visitInt(t){return t.bitWidth/8}visitFloat(t){return t.ArrayType.BYTES_PER_ELEMENT}visitBinary(t){throw new Error(bo(t))}visitUtf8(t){throw new Error(bo(t))}visitBool(t){return 1/8}visitDecimal(t){return 16}visitDate(t){return 4*(t.unit+1)}visitTime(t){return t.bitWidth/8}visitTimestamp(t){return t.unit===at.SECOND?4:8}visitInterval(t){return 4*(t.unit+1)}visitList(t){throw new Error(bo(t))}visitStruct(t){return this.visitFields(t.children).reduce(mo,0)}visitUnion(t){return this.visitFields(t.children).reduce(mo,0)}visitFixedSizeBinary(t){return t.byteWidth}visitFixedSizeList(t){return t.listSize*this.visitFields(t.children).reduce(mo,0)}visitMap(t){return this.visitFields(t.children).reduce(mo,0)}visitDictionary(t){return this.visit(t.indices)}visitFields(t){return(t||[]).map((t=>this.visit(t.type)))}visitSchema(t){return this.visitFields(t.fields).reduce(mo,0)}};const _o=new class extends _t{visitNull(){return ga}visitBool(){return Rs}visitInt(){return na}visitInt8(){return sa}visitInt16(){return aa}visitInt32(){return oa}visitInt64(){return ca}visitUint8(){return ua}visitUint16(){return ha}visitUint32(){return la}visitUint64(){return pa}visitFloat(){return Gs}visitFloat16(){return Ks}visitFloat32(){return Js}visitFloat64(){return Qs}visitUtf8(){return Oa}visitBinary(){return Ps}visitFixedSizeBinary(){return qs}visitDate(){return js}visitDateDay(){return zs}visitDateMillisecond(){return $s}visitTimestamp(){return wa}visitTimestampSecond(){return xa}visitTimestampMillisecond(){return Ia}visitTimestampMicrosecond(){return Sa}visitTimestampNanosecond(){return Ta}visitTime(){return Aa}visitTimeSecond(){return Ea}visitTimeMillisecond(){return Ba}visitTimeMicrosecond(){return ka}visitTimeNanosecond(){return La}visitDecimal(){return Ws}visitList(){return ma}visitStruct(){return va}visitUnion(){return Ca}visitDenseUnion(){return Da}visitSparseUnion(){return Ma}visitDictionary(){return Hs}visitInterval(){return ea}visitIntervalDayTime(){return ra}visitIntervalYearMonth(){return ia}visitFixedSizeList(){return Ys}visitMap(){return ba}};function vo(t,e){if(L(e))return et.from({nullValues:[null,void 0],type:t(),values:e});if(C(e))return et.from({nullValues:[null,void 0],type:t(),values:e});const{values:r=[],type:i=t(),nullValues:n=[null,void 0]}={...e};return L(r),et.from({nullValues:n,...e,type:i})}et.new=function(t,...e){return new(_o.getVisitFn(t)())(t,...e)},et.from=function(t){const{values:e=[],...r}={nullValues:[null,void 0],...t};if(L(e)){const t=[...ke.throughIterable(r)(e)];return 1===t.length?t[0]:Yr.concat(t)}return(async t=>{const i=ke.throughAsyncIterable(r);for await(const r of i(e))t.push(r);return 1===t.length?t[0]:Yr.concat(t)})([])},Vs.prototype.get=function(t){return no.visit(this,t)},Vs.prototype.set=function(t,e){return Pi.visit(this,t,e)},Vs.prototype.indexOf=function(t,e){return co.visit(this,t,e)},Vs.prototype.toArray=function(){return yo.visit(this)},Vs.prototype.getByteWidth=function(){return go.visit(this.type)},Vs.prototype[Symbol.iterator]=function(){return lo.visit(this)},Vs.prototype._bindDataAccessors=function(){const t=this.nullBitmap;t&&t.byteLength>0&&(this.get=(e=this.get,function(t){return this.isValid(t)?e.call(this,t):null}),this.set=function(t){return function(e,r){var i,n;i=this.nullBitmap,n=this.offset+e,(!(null==r)?(i[n>>3]|=1<<n%8,1):(i[n>>3]&=~(1<<n%8),0))&&t.call(this,e,r)}}(this.set));var e},Object.keys(t.Type).map((e=>t.Type[e])).filter((t=>"number"==typeof t)).filter((e=>e!==t.Type.NONE)).forEach((t=>{const e=_o.visit(t);e.prototype.get=function(t){return function(e){return t(this,e)}}(no.getVisitFn(t)),e.prototype.set=Fa(Pi.getVisitFn(t)),e.prototype.indexOf=Fa(co.getVisitFn(t)),e.prototype.toArray=Na(yo.getVisitFn(t)),e.prototype.getByteWidth=function(t){return function(){return t(this.type)}}(go.getVisitFn(t)),e.prototype[Symbol.iterator]=Na(lo.getVisitFn(t))}));class wo extends Yr{constructor(...t){let e=null;t[0]instanceof ci&&(e=t.shift());let r=Xr(xo,t);if(!e&&!(e=r[0]&&r[0].schema))throw new TypeError("Table must be initialized with a Schema or at least one RecordBatch");r[0]||(r[0]=new Io(e)),super(new le(e.fields),r),this._schema=e,this._chunks=r}static empty(t=new ci([])){return new wo(t,[])}static from(t){if(!t)return wo.empty();if("object"==typeof t){let e=L(t.values)?function(t){const{type:e}=t;if(e instanceof le)return wo.fromStruct(va.from(t));return null}(t):C(t.values)?function(t){const{type:e}=t;if(e instanceof le)return va.from(t).then((t=>wo.fromStruct(t)));return null}(t):null;if(null!==e)return e}let e=To.from(t);return k(e)?(async()=>await wo.from(await e))():e.isSync()&&(e=e.open())?e.schema?new wo(e.schema,[...e]):wo.empty():(async t=>{const e=await t,r=e.schema,i=[];if(r){for await(let t of e)i.push(t);return new wo(r,i)}return wo.empty()})(e.open())}static async fromAsync(t){return await wo.from(t)}static fromStruct(t){return wo.new(t.data.childData,t.type.children)}static new(...t){return new wo(...function(t){return Fs(new ci(t.map((({field:t})=>t))),t)}((t=>{const[e,r]=oi(t,[[],[]]);return r.map(((t,r)=>t instanceof Jr?Jr.new(t.field.clone(e[r]),t):t instanceof et?Jr.new(e[r],t):Jr.new(e[r],[])))})(t)))}get schema(){return this._schema}get length(){return this._length}get chunks(){return this._chunks}get numCols(){return this._numChildren}clone(t=this._chunks){return new wo(this._schema,t)}getColumn(t){return this.getColumnAt(this.getColumnIndex(t))}getColumnAt(t){return this.getChildAt(t)}getColumnIndex(t){return this._schema.fields.findIndex((e=>e.name===t))}getChildAt(t){if(t<0||t>=this.numChildren)return null;let e,r;const i=this._schema.fields,n=this._children||(this._children=[]);if(r=n[t])return r;if(e=i[t]){const r=this._chunks.map((e=>e.getChildAt(t))).filter((t=>null!=t));if(r.length>0)return n[t]=new Jr(e,r)}return null}serialize(t="binary",e=!0){return(e?Ls:Cs).writeAll(this).toUint8Array(!0)}count(){return this._length}select(...t){const e=this._schema.fields.reduce(((t,e,r)=>t.set(e.name,r)),new Map);return this.selectAt(...t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(...t){const e=this._schema.selectAt(...t);return new wo(e,this._chunks.map((({length:r,data:{childData:i}})=>new xo(e,r,t.map((t=>i[t])).filter(Boolean)))))}assign(t){const e=this._schema.fields,[r,i]=t.schema.fields.reduce(((t,r,i)=>{const[n,s]=t,a=e.findIndex((t=>t.name===r.name));return~a?s[a]=i:n.push(i),t}),[[],[]]),n=this._schema.assign(t.schema),s=[...e.map(((e,r,n,s=i[r])=>void 0===s?this.getColumnAt(r):t.getColumnAt(s))),...r.map((e=>t.getColumnAt(e)))].filter(Boolean);return new wo(...Fs(n,s))}}class xo extends va{constructor(...t){let e,r,i=t[0];if(t[1]instanceof ve)[,e,r]=t;else{const r=i.fields,[,n,s]=t;e=ve.Struct(new le(r),0,n,0,null,s)}super(e,r),this._schema=i}static from(t){return L(t.values),wo.from(t)}static new(...t){const[e,r]=ti(t),i=r.filter((t=>t instanceof et));return new xo(...function(t,e,r=e.reduce(((t,e)=>Math.max(t,e.length)),0)){let i,n,s=-1,a=e.length;const o=[...t.fields],c=[],u=(r+63&-64)>>3;for(;++s<a;)(i=e[s])&&i.length===r?c[s]=i:((n=o[s]).nullable||(o[s]=o[s].clone({nullable:!0})),c[s]=i?i._changeLengthAndBackfillNullBitmap(r):ve.new(n.type,0,r,r,Ns(u)));return[new ci(o),r,c]}(new ci(e),i.map((t=>t.data))))}clone(t,e=this._children){return new xo(this._schema,t,e)}concat(...t){const e=this._schema,r=Yr.flatten(this,...t);return new wo(e,r.map((({data:t})=>new xo(e,t))))}get schema(){return this._schema}get numCols(){return this._schema.fields.length}get dictionaries(){return this._dictionaries||(this._dictionaries=So.collect(this))}select(...t){const e=this._schema.fields.reduce(((t,e,r)=>t.set(e.name,r)),new Map);return this.selectAt(...t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(...t){const e=this._schema.selectAt(...t),r=t.map((t=>this.data.childData[t])).filter(Boolean);return new xo(e,this.length,r)}}class Io extends xo{constructor(t){super(t,0,t.fields.map((t=>ve.new(t.type,0,0,0))))}}class So extends _t{constructor(){super(...arguments),this.dictionaries=new Map}static collect(t){return(new So).visit(t.data,new le(t.schema.fields)).dictionaries}visit(t,e){return Dt.isDictionary(e)?this.visitDictionary(t,e):(t.childData.forEach(((t,r)=>this.visit(t,e.children[r].type))),this)}visitDictionary(t,e){const r=t.dictionary;return r&&r.length>0&&this.dictionaries.set(e.id,r),this}}class To extends g{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return k(e)?e.then((()=>this)):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return J.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return J.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof To?t:D(t)?function(t){return new Ao(new No(t))}(t):O(t)?async function(t){const{size:e}=await t.stat(),r=new rn(t,e);if(e>=xs&&_s(await r.readAt(0,vs+7&-8)))return new ko(new Oo(r));return new Eo(new Do(r))}(t):k(t)?(async()=>await To.from(await t))():N(t)||F(t)||U(t)||C(t)?async function(t){const e=await t.peek(vs+7&-8);return e&&e.byteLength>=4?_s(e)?new Bo(new Mo(await t.read())):new Eo(new Do(t)):new Eo(new Do(async function*(){}()))}(new Zi(t)):function(t){const e=t.peek(vs+7&-8);return e&&e.byteLength>=4?_s(e)?new Bo(new Mo(t.read())):new Ao(new Co(t)):new Ao(new Co(function*(){}()))}(new Qi(t))}static readAll(t){return t instanceof To?t.isSync()?Uo(t):Vo(t):D(t)||ArrayBuffer.isView(t)||L(t)||M(t)?Uo(t):Vo(t)}}class Ao extends To{constructor(t){super(t),this._impl=t}[Symbol.iterator](){return this._impl[Symbol.iterator]()}async*[Symbol.asyncIterator](){yield*this[Symbol.iterator]()}}class Eo extends To{constructor(t){super(t),this._impl=t}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Bo extends Ao{constructor(t){super(t),this._impl=t}}class ko extends Eo{constructor(t){super(t),this._impl=t}}class Lo{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){return new xo(this.schema,t.length,this._loadVectors(t,e,this.schema.fields))}_loadDictionaryBatch(t,e){const{id:r,isDelta:i,data:n}=t,{dictionaries:s,schema:a}=this,o=s.get(r);if(i||!o){const t=a.dictionaries.get(r);return o&&i?o.concat(et.new(this._loadVectors(n,e,[t])[0])):et.new(this._loadVectors(n,e,[t])[0])}return o}_loadVectors(t,e,r){return new hn(e,t.nodes,t.buffers,this.dictionaries).visitMany(r)}}class Co extends Lo{constructor(t,e){super(e),this._reader=D(t)?new ys(this._handle=t):new ds(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Fo(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):m}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):m}next(){if(this.closed)return m;let t,{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=e.readMessageBody(t.bodyLength),n=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,n)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Io(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Do extends Lo{constructor(t,e){super(e),this._reader=new fs(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}async cancel(){!this.closed&&(this.closed=!0)&&(await this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}async open(t){return this.closed||(this.autoDestroy=Fo(this,t),this.schema||(this.schema=await this._reader.readSchema())||await this.cancel()),this}async throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.throw(t):m}async return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.return(t):m}async next(){if(this.closed)return m;let t,{_reader:e}=this;for(;t=await this._readNextMessageAndValidate();)if(t.isSchema())await this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=await e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=await e.readMessageBody(t.bodyLength),n=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,n)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Io(this.schema)}):await this.return()}async _readNextMessageAndValidate(t){return await this._reader.readMessage(t)}}class Mo extends Co{constructor(t,e){super(t instanceof en?t:new en(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){if(this.closed)return null;this._footer||this.open();const e=this._footer&&this._footer.getRecordBatch(t);if(e&&this._handle.seek(e.offset)){const t=this._reader.readMessage(ht.RecordBatch);if(t&&t.isRecordBatch()){const e=t.header(),r=this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,r)}}return null}_readDictionaryBatch(t){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&this._handle.seek(e.offset)){const t=this._reader.readMessage(ht.DictionaryBatch);if(t&&t.isDictionaryBatch()){const e=t.header(),r=this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,r);this.dictionaries.set(e.id,i)}}}_readFooter(){const{_handle:t}=this,e=t.size-ws,r=t.readInt32(e),i=t.readAt(e-r,r);return Yi.decode(i)}_readNextMessageAndValidate(t){if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer&&this._footer.getRecordBatch(this._recordBatchIndex);if(e&&this._handle.seek(e.offset))return this._reader.readMessage(t)}return null}}class Oo extends Do{constructor(t,...e){const r="number"!=typeof e[0]?e.shift():void 0,i=e[0]instanceof Map?e.shift():void 0;super(t instanceof rn?t:new rn(t,r),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}async open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=await this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&await this._readDictionaryBatch(this._dictionaryIndex++)}return await super.open(t)}async readRecordBatch(t){if(this.closed)return null;this._footer||await this.open();const e=this._footer&&this._footer.getRecordBatch(t);if(e&&await this._handle.seek(e.offset)){const t=await this._reader.readMessage(ht.RecordBatch);if(t&&t.isRecordBatch()){const e=t.header(),r=await this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,r)}}return null}async _readDictionaryBatch(t){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&await this._handle.seek(e.offset)){const t=await this._reader.readMessage(ht.DictionaryBatch);if(t&&t.isDictionaryBatch()){const e=t.header(),r=await this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,r);this.dictionaries.set(e.id,i)}}}async _readFooter(){const{_handle:t}=this;t._pending&&await t._pending;const e=t.size-ws,r=await t.readInt32(e),i=await t.readAt(e-r,r);return Yi.decode(i)}async _readNextMessageAndValidate(t){if(this._footer||await this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&await this._handle.seek(e.offset))return await this._reader.readMessage(t)}return null}}class No extends Co{constructor(t,e){super(t,e)}_loadVectors(t,e,r){return new ln(e,t.nodes,t.buffers,this.dictionaries).visitMany(r)}}function Fo(t,e){return e&&"boolean"==typeof e.autoDestroy?e.autoDestroy:t.autoDestroy}function*Uo(t){const e=To.from(t);try{if(!e.open({autoDestroy:!1}).closed)do{yield e}while(!e.reset().open().closed)}finally{e.cancel()}}async function*Vo(t){const e=await To.from(t);try{if(!(await e.open({autoDestroy:!1})).closed)do{yield e}while(!(await e.reset().open()).closed)}finally{await e.cancel()}}class Po{constructor(t){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{readableStrategy:e,writableStrategy:r,queueingStrategy:i="count",...n}=t;this._controller=null,this._builder=ke.new(n),this._getSize="bytes"!==i?Ro:jo;const{highWaterMark:s=("bytes"===i?16384:1e3)}={...e},{highWaterMark:a=("bytes"===i?16384:1e3)}={...r};this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:t=>{this._maybeFlush(this._builder,this._controller=t)},start:t=>{this._maybeFlush(this._builder,this._controller=t)}},{highWaterMark:s,size:"bytes"!==i?Ro:jo}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:a,size:t=>this._writeValueAndReturnChunkSize(t)})}_writeValueAndReturnChunkSize(t){const e=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(t)),this._bufferedSize-e}_maybeFlush(t,e){null!==e&&(this._bufferedSize>=e.desiredSize&&++this._numChunks&&this._enqueue(e,t.toVector()),t.finished&&((t.length>0||0===this._numChunks)&&++this._numChunks&&this._enqueue(e,t.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(e,null)))}_enqueue(t,e){this._bufferedSize=0,this._controller=null,null===e?t.close():t.enqueue(e)}}const Ro=t=>t.length,jo=t=>t.byteLength;class zo{eq(t){return t instanceof zo||(t=new $o(t)),new Jo(this,t)}le(t){return t instanceof zo||(t=new $o(t)),new Qo(this,t)}ge(t){return t instanceof zo||(t=new $o(t)),new Zo(this,t)}lt(t){return new Xo(this.ge(t))}gt(t){return new Xo(this.le(t))}ne(t){return new Xo(this.eq(t))}}class $o extends zo{constructor(t){super(),this.v=t}}class Wo extends zo{constructor(t){super(),this.name=t}bind(t){if(!this.colidx){this.colidx=-1;const e=t.schema.fields;for(let t=-1;++t<e.length;)if(e[t].name===this.name){this.colidx=t;break}if(this.colidx<0)throw new Error(`Failed to bind Col "${this.name}"`)}const e=this.vector=t.getChildAt(this.colidx);return t=>e.get(t)}}class Ho{and(...t){return new Go(this,...t)}or(...t){return new Ko(this,...t)}not(){return new Xo(this)}}class qo extends Ho{constructor(t,e){super(),this.left=t,this.right=e}bind(t){return this.left instanceof $o?this.right instanceof $o?this._bindLitLit(t,this.left,this.right):this._bindLitCol(t,this.left,this.right):this.right instanceof $o?this._bindColLit(t,this.left,this.right):this._bindColCol(t,this.left,this.right)}}class Yo extends Ho{constructor(...t){super(),this.children=t}}Yo.prototype.children=Object.freeze([]);class Go extends Yo{constructor(...t){t=t.reduce(((t,e)=>t.concat(e instanceof Go?e.children:e)),[]),super(...t)}bind(t){const e=this.children.map((e=>e.bind(t)));return(t,r)=>e.every((e=>e(t,r)))}}class Ko extends Yo{constructor(...t){t=t.reduce(((t,e)=>t.concat(e instanceof Ko?e.children:e)),[]),super(...t)}bind(t){const e=this.children.map((e=>e.bind(t)));return(t,r)=>e.some((e=>e(t,r)))}}class Jo extends qo{_bindLitLit(t,e,r){const i=e.v==r.v;return()=>i}_bindColCol(t,e,r){const i=e.bind(t),n=r.bind(t);return(t,e)=>i(t,e)==n(t,e)}_bindColLit(t,e,r){const i=e.bind(t);if(e.vector instanceof Hs){let t;const i=e.vector;return i.dictionary!==this.lastDictionary?(t=i.reverseLookup(r.v),this.lastDictionary=i.dictionary,this.lastKey=t):t=this.lastKey,-1===t?()=>!1:e=>i.getKey(e)===t}return(t,e)=>i(t,e)==r.v}_bindLitCol(t,e,r){return this._bindColLit(t,r,e)}}class Qo extends qo{_bindLitLit(t,e,r){const i=e.v<=r.v;return()=>i}_bindColCol(t,e,r){const i=e.bind(t),n=r.bind(t);return(t,e)=>i(t,e)<=n(t,e)}_bindColLit(t,e,r){const i=e.bind(t);return(t,e)=>i(t,e)<=r.v}_bindLitCol(t,e,r){const i=r.bind(t);return(t,r)=>e.v<=i(t,r)}}class Zo extends qo{_bindLitLit(t,e,r){const i=e.v>=r.v;return()=>i}_bindColCol(t,e,r){const i=e.bind(t),n=r.bind(t);return(t,e)=>i(t,e)>=n(t,e)}_bindColLit(t,e,r){const i=e.bind(t);return(t,e)=>i(t,e)>=r.v}_bindLitCol(t,e,r){const i=r.bind(t);return(t,r)=>e.v>=i(t,r)}}class Xo extends Ho{constructor(t){super(),this.child=t}bind(t){const e=this.child.bind(t);return(t,r)=>!e(t,r)}}wo.prototype.countBy=function(t){return new tc(this.chunks).countBy(t)},wo.prototype.scan=function(t,e){return new tc(this.chunks).scan(t,e)},wo.prototype.scanReverse=function(t,e){return new tc(this.chunks).scanReverse(t,e)},wo.prototype.filter=function(t){return new tc(this.chunks).filter(t)};class tc extends wo{filter(t){return new rc(this.chunks,t)}scan(t,e){const r=this.chunks,i=r.length;for(let n=-1;++n<i;){const i=r[n];e&&e(i);for(let e=-1,r=i.length;++e<r;)t(e,i)}}scanReverse(t,e){const r=this.chunks;for(let i=r.length;--i>=0;){const n=r[i];e&&e(n);for(let e=n.length;--e>=0;)t(e,n)}}countBy(t){const e=this.chunks,r=e.length,i="string"==typeof t?new Wo(t):t;i.bind(e[r-1]);const n=i.vector;if(!Dt.isDictionary(n.type))throw new Error("countBy currently only supports dictionary-encoded columns");const s=Math.ceil(Math.log(n.length)/Math.log(256)),a=new(4==s?Uint32Array:s>=2?Uint16Array:Uint8Array)(n.dictionary.length);for(let t=-1;++t<r;){const r=e[t];i.bind(r);const n=i.vector.indices;for(let t=-1,e=r.length;++t<e;){let e=n.get(t);null!==e&&a[e]++}}return new ec(n.dictionary,na.from(a))}}class ec extends wo{constructor(t,e){const r=new ci([new ui("values",t.type),new ui("counts",e.type)]);super(new xo(r,e.length,[t,e]))}toJSON(){const t=this.getColumnAt(0),e=this.getColumnAt(1),r={};for(let i=-1;++i<this.length;)r[t.get(i)]=e.get(i);return r}}class rc extends tc{constructor(t,e){super(t),this._predicate=e}scan(t,e){const r=this._chunks,i=r.length;for(let n=-1;++n<i;){const i=r[n],s=this._predicate.bind(i);let a=!1;for(let r=-1,n=i.length;++r<n;)s(r,i)&&(e&&!a&&(e(i),a=!0),t(r,i))}}scanReverse(t,e){const r=this._chunks;for(let i=r.length;--i>=0;){const n=r[i],s=this._predicate.bind(n);let a=!1;for(let r=n.length;--r>=0;)s(r,n)&&(e&&!a&&(e(n),a=!0),t(r,n))}}count(){let t=0;const e=this._chunks,r=e.length;for(let i=-1;++i<r;){const r=e[i],n=this._predicate.bind(r);for(let e=-1,i=r.length;++e<i;)n(e,r)&&++t}return t}*[Symbol.iterator](){const t=this._chunks,e=t.length;for(let r=-1;++r<e;){const e=t[r],i=this._predicate.bind(e);for(let t=-1,r=e.length;++t<r;)i(t,e)&&(yield e.get(t))}}filter(t){return new rc(this._chunks,this._predicate.and(t))}countBy(t){const e=this._chunks,r=e.length,i="string"==typeof t?new Wo(t):t;i.bind(e[r-1]);const n=i.vector;if(!Dt.isDictionary(n.type))throw new Error("countBy currently only supports dictionary-encoded columns");const s=Math.ceil(Math.log(n.length)/Math.log(256)),a=new(4==s?Uint32Array:s>=2?Uint16Array:Uint8Array)(n.dictionary.length);for(let t=-1;++t<r;){const r=e[t],n=this._predicate.bind(r);i.bind(r);const s=i.vector.indices;for(let t=-1,e=r.length;++t<e;){let e=s.get(t);null!==e&&n(t,r)&&a[e]++}}return new ec(n.dictionary,na.from(a))}}J.toDOMStream=function(t,e){if(C(t))return function(t,e){let r=null;const i=e&&"bytes"===e.type||!1,n=e&&e.highWaterMark||2**24;return new ReadableStream({...e,async start(e){await s(e,r||(r=t[Symbol.asyncIterator]()))},async pull(t){r?await s(t,r):t.close()},async cancel(){r&&r.return&&await r.return(),r=null}},{highWaterMark:i?n:void 0,...e});async function s(t,e){let r,n=null,s=t.desiredSize||null;for(;!(n=await e.next(i?s:null)).done;)if(ArrayBuffer.isView(n.value)&&(r=W(n.value))&&(null!=s&&i&&(s=s-r.byteLength+1),n.value=r),t.enqueue(n.value),null!=s&&--s<=0)return;t.close()}}(t,e);if(L(t))return function(t,e){let r=null;const i=e&&"bytes"===e.type||!1,n=e&&e.highWaterMark||2**24;return new ReadableStream({...e,start(e){s(e,r||(r=t[Symbol.iterator]()))},pull(t){r?s(t,r):t.close()},cancel(){r&&r.return&&r.return(),r=null}},{highWaterMark:i?n:void 0,...e});function s(t,e){let r,n=null,s=t.desiredSize||null;for(;!(n=e.next(i?s:null)).done;)if(ArrayBuffer.isView(n.value)&&(r=W(n.value))&&(null!=s&&i&&(s=s-r.byteLength+1),n.value=r),t.enqueue(n.value),null!=s&&--s<=0)return;t.close()}}(t,e);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")},ke.throughDOM=function(t){return new Po(t)},To.throughDOM=function(t,e){const r=new Ji;let i=null;const n=new ReadableStream({async cancel(){await r.close()},async start(t){await s(t,i||(i=await async function(){return await(await To.from(r)).open(e)}()))},async pull(t){i?await s(t,i):t.close()}});return{writable:new WritableStream(r,{highWaterMark:16384,...t}),readable:n};async function s(t,e){let r=t.desiredSize,i=null;for(;!(i=await e.next()).done;)if(t.enqueue(i.value),null!=r&&--r<=0)return;t.close()}},ks.throughDOM=function(t,e){const r=new this(t),i=new Zi(r),n=new ReadableStream({type:"bytes",async cancel(){await i.cancel()},async pull(t){await s(t)},async start(t){await s(t)}},{highWaterMark:16384,...e});return{writable:new WritableStream(r,t),readable:n};async function s(t){let e=null,r=t.desiredSize;for(;e=await i.read(r||null);)if(t.enqueue(e),null!=r&&(r-=e.byteLength)<=0)return;t.close()}};var ic=Array.isArray;function nc(t){return null!=t?ic(t)?t:[t]:[]}class sc{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,e){return this.__derive(this,t,e)}filter(t){return this.__filter(this,t)}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,e){return this.__relocate(this,nc(t),e)}rollup(t){return this.__rollup(this,t)}sample(t,e){return this.__sample(this,t,e)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,e){return this.__impute(this,t,e)}fold(t,e){return this.__fold(this,t,e)}pivot(t,e,r){return this.__pivot(this,t,e,r)}spread(t,e){return this.__spread(this,t,e)}unroll(t,e){return this.__unroll(this,t,e)}lookup(t,e,...r){return this.__lookup(this,t,e,r.flat())}join(t,e,r,i){return this.__join(this,t,e,r,i)}join_left(t,e,r,i){const n={...i,left:!0,right:!1};return this.__join(this,t,e,r,n)}join_right(t,e,r,i){const n={...i,left:!1,right:!0};return this.__join(this,t,e,r,n)}join_full(t,e,r,i){const n={...i,left:!0,right:!0};return this.__join(this,t,e,r,n)}cross(t,e,r){return this.__cross(this,t,e,r)}semijoin(t,e){return this.__semijoin(this,t,e)}antijoin(t,e){return this.__antijoin(this,t,e)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function ac(t){throw Error(t)}function oc(t){return"function"==typeof t}function cc(t,e){const r=Array(t);if(oc(e))for(let i=0;i<t;++i)r[i]=e(i);else r.fill(e);return r}class uc extends sc{constructor(t,e,r,i,n,s,a){super(a),this._names=Object.freeze(t),this._total=e,this._nrows=i?i.count():e,this._data=r,this._filter=i||null,this._group=n||null,this._order=s||null}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(1!==this.numRows()?"s":"");return`Table: ${this.numCols()+" col"+(1!==this.numCols()?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}create(){}isFiltered(){return!!this._filter}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}get(t,e){ac("Not implemented")}getter(t){ac("Not implemented")}objects(t){ac("Not implemented")}[Symbol.iterator](){ac("Not implemented")}print(t={}){"number"==typeof t?t={limit:10}:null==t.limit&&(t.limit=10);const e=this.objects(t),r=`${this[Symbol.toStringTag]}. Showing ${e.length} rows.`;console.log(r),console.table(e)}indices(t=!0){if(this._index)return this._index;let e=-1;const r=new Uint32Array(this.numRows()),i=this.isOrdered();if(this.scan((t=>r[++e]=t)),t&&i){const t=this._order,e=this._data;r.sort(((r,i)=>t(r,i,e)))}return!t&&i||(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:e,size:r}=this._group,i=cc(r,(()=>[])),n=!!this._index;if(this.scan((t=>i[e[t]].push(t)),n),t&&!n&&this.isOrdered()){const t=this._order,e=this._data;for(let n=0;n<r;++n)i[n].sort(((r,i)=>t(r,i,e)))}return!t&&this.isOrdered()||(this._partitions=i),i}scan(t,e,r=1/0,i=0){const n=this._filter,s=this._nrows,a=this._data;let o=i||0;if(o>s)return;const c=Math.min(s,o+r),u=()=>o=this._total;if(e&&this.isOrdered()||n&&this._index){const e=this.indices(),r=this._data;for(;o<c;++o)t(e[o],r,u)}else if(n){let e=c-o+1;for(o=n.nth(o);--e;o=n.next(o+1))t(o,a,u)}else for(;o<c;++o)t(o,a,u)}reduce(t){return this.__reduce(this,t)}}class hc{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}}function lc(t){return t instanceof Date}function pc(t){return t===Object(t)}function dc(t){return t instanceof RegExp}function fc(t){return"string"==typeof t}function yc(t,e){const r=e=>ac(`Illegal argument type: ${e||typeof t}`),i=Symbol.iterator;return t instanceof Map?mc(t.entries(),e):lc(t)?r("Date"):dc(t)?r("RegExp"):fc(t)?r():oc(t[i])?function(t,e){const r={},i=t=>r[t]=[];let n=t.next();for(;null==n.value&&!n.done;n=t.next());if(n.done)e&&e.forEach(i);else{const r=(e=e||Object.keys(n.value)).map(i),s=r.length,a=t=>{for(let i=0;i<s;++i)r[i].push(t[e[i]])};a(n.value);for(const e of t)null!=e&&a(e)}return r}(t[i](),e):pc(t)?mc(Object.entries(t),e):r()}function mc(t,e=["key","value"]){const r=[],i=[];for(const[e,n]of t)r.push(e),i.push(n);const n={};return e[0]&&(n[e[0]]=r),e[1]&&(n[e[1]]=i),n}function bc(t,e){return oc(e)?e(t):e||t.columnNames()}function gc(t,e,r){const i=r.format||{},n=r.align||{},s={},a={};return e.forEach((e=>{const o=function(t,e={}){let r=0,i=0,n=0,s=0,a=0,o=0;return t((t=>{if(++r,null==t)return void++i;const e=typeof t;if("object"===e&&lc(t))++n,0===(c=t).getUTCHours()&&0===c.getUTCMinutes()&&0===c.getUTCSeconds()&&0===c.getUTCMilliseconds()&&++s;else if("number"===e&&(++a,t==t&&(0|t)!==t)){const e=t+"",r=e.indexOf(".");if(r>=0){const t=e.indexOf("e"),i=t>0?t:e.length;o=Math.max(o,i-r-1)}}var c})),{align:(i+a+n)/r>.5?"r":"l",format:{utc:n===s,digits:Math.min(o,e.maxdigits||6)}}}(function(t,e){const r=t.column(e);return e=>t.scan((t=>e(r.get(t))))}(t,e),r);a[e]=n[e]||o.align,s[e]=i[e]||o.format})),{align:a,format:s}}function _c(t,e,r,i,n){const s=e.length;t.scan((r=>{n.row(r);for(let i=0;i<s;++i){const s=e[i];n.cell(t.get(s,r),s,i)}}),!0,r,i)}function vc(t,e,r="0"){const i=t+"",n=i.length;return n<e?Array(e-n+1).join(r)+i:i}hc.from=function(t){return t&&oc(t.get)?t:new hc(t)};const wc=t=>(t<10?"0":"")+t;function xc(t,e,r,i,n,s,a,o,c){const u=o?"Z":"";return(t=>t<0?"-"+vc(-t,6):t>9999?"+"+vc(t,6):vc(t,4))(t)+"-"+wc(e+1)+"-"+wc(r)+(!c||a?"T"+wc(i)+":"+wc(n)+":"+wc(s)+"."+vc(a,3)+u:s?"T"+wc(i)+":"+wc(n)+":"+wc(s)+u:n||i||!o?"T"+wc(i)+":"+wc(n)+u:"")}function Ic(t,e){return isNaN(t)?"Invalid Date":xc(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),!1,e)}function Sc(t,e){return isNaN(t)?"Invalid Date":xc(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds(),!0,e)}function Tc(t){return t&&t.map===Int8Array.prototype.map}function Ac(t,e={}){if(oc(e))return e(t)+"";const r=typeof t;if("object"===r){if(lc(t))return e.utc?Sc(t):Ic(t);{const r=JSON.stringify(t,((t,e)=>Tc(e)?Array.from(e):e)),i=e.maxlen||30;return r.length>i?r.slice(0,28)+"…"+("["===r[0]?"]":"}"):r}}if("number"===r){const r=e.digits||0;let i;return 0!==t&&((i=Math.abs(t))>=1e18||i<Math.pow(10,-r))?t.toExponential(r):t.toFixed(r)}return t+""}function Ec(t,e,r={}){for(const i in t)r[i]=e(t[i],i);return r}function Bc(t,e={}){const r=bc(t,e.columns),{align:i,format:n}=gc(t,r,e),s=function(t){return Ec(t.style,(t=>oc(t)?t:()=>t))}(e),a=e.null,o=(t,e)=>Ac(t,e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),c=a?(t,e)=>null==t?a(t):o(t,e):o;let u=-1,h=-1;const l=(t,e)=>{const r=h>=0&&e?(t=>"c"===t?"center":"r"===t?"right":"left")(i[e]):"",n=s[t]&&s[t](e,h,u)||"",a=(r?`text-align: ${r};`+(n?" ":""):"")+n;return`<${t}${a?` style="${a}"`:""}>`};let p=l("table")+l("thead")+l("tr",u)+r.map((t=>`${l("th",t)}${t}</th>`)).join("")+"</tr></thead>"+l("tbody");return _c(t,r,e.limit,e.offset,{row(t){u=t,p+=(++h?"</tr>":"")+l("tr")},cell(t,e){p+=l("td",e)+c(t,n[e])+"</td>"}}),p+"</tr></tbody></table>"}function kc(t,e=!0,r=!1){return void 0===t||t?e:r}const Lc=t=>lc(t)?Sc(t,!0):t;function Cc(t,e,r){return Function("_",'"use strict"; const '+t.map(((t,e)=>`_${e} = _[${e}]`)).join(", ")+`; return (${e}) => ${r};`)(t)}function Dc(t,e){return Cc((e=e||t.columnNames()).map((e=>t.column(e))),"row","({"+e.map(((t,e)=>`${JSON.stringify(t)}:_${e}.get(row)`))+"})")}class Mc extends uc{static from(t,e){return new Mc(yc(t,e),e)}constructor(t,e,r,i,n,s){Ec(t,hc.from,t);super(e=e||Object.keys(t),e.length?t[e[0]].length:0,t,r,i,n,s)}create({data:t,names:e,filter:r,groups:i,order:n}){const s=r?this._filter?this._filter.and(r):r:void 0!==r?r:this._filter;return new Mc(t||this._data,e||(t?null:this._names),s,void 0!==i?i:function(t,e){if(!t||!e)return t;const{keys:r,rows:i,size:n}=t,s=new Int32Array(n);e.scan((t=>s[r[t]]=1));const a=s.reduce(((t,e)=>t+e),0);if(a===n)return t;const o=Array(a);let c=0;for(let t=0;t<n;++t)s[t]&&(o[s[t]=c++]=i[t]);const u=new Uint32Array(r.length);return e.scan((t=>u[t]=s[r[t]])),{...t,keys:u,rows:o,size:c}}(this._group,r&&s),void 0!==n?n:this._order,this._params)}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}get(t,e){return this._data[t].get(e)}getter(t){const e=this.column(t);return e?t=>e.get(t):ac(`Unrecognized column: ${t}`)}objects(t={}){const e=Dc(this),r=[];return this.scan((t=>{r.push(e(t))}),!0,t.limit,t.offset),r}*[Symbol.iterator](){const t=Dc(this),e=this.numRows();if(this.isOrdered()||this.isFiltered){const r=this.indices();for(let i=0;i<e;++i)yield t(r[i])}else for(let r=0;r<e;++r)yield t(r)}reify(t){const e=t?t.length:this.numRows(),r=this._names;let i,n;if(!t&&!this.isOrdered()){if(!this.isFiltered())return this;e===this.totalRows()&&(i=this.data())}if(!i){const a=t?e=>t.forEach(e):t=>this.scan(t,!0),o=r.length;i={};for(let t=0;t<o;++t){const n=r[t],o=this.column(n),c=i[n]=new(Tc((s=o).data)?s.data.constructor:s.type&&s.type.ArrayType?s.type.ArrayType:Array)(e);let u=-1;a((t=>c[++u]=o.get(t)))}this.isGrouped()&&(n=function(t,e,r,i){const{keys:n,rows:s,size:a}=t;let o=s,c=a,u=null;if(r){u=new Int32Array(a),e((t=>u[n[t]]=1));const t=u.reduce(((t,e)=>t+e),0);if(t!==a){o=Array(t),c=0;for(let t=0;t<a;++t)u[t]&&(o[u[t]=c++]=s[t])}}let h=-1;const l=new Uint32Array(i);return e(c!==a?t=>l[++h]=u[n[t]]:t=>l[++h]=n[t]),{...t,keys:l,rows:o,size:c}}(this.groups(),a,!!t,e))}var s;return this.create({data:i,names:r,groups:n,filter:null,order:null})}toCSV(t){return function(t,e={}){const r=bc(t,e.columns),i=e.format||{},n=e.delimiter||",",s=new RegExp(`["${n}\n\r]`),a=t=>null==t?"":lc(t)?Sc(t,!0):s.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t,o=r.map(a);let c="";return _c(t,r,e.limit,e.offset,{row(){c+=o.join(n)+"\n"},cell(t,e,r){o[r]=a(i[e]?i[e](t):t)}}),c+o.join(n)}(this,t)}toHTML(t){return Bc(this,t)}toJSON(t){return function(t,e={}){const r=kc(e.schema),i=e.format||{},n=bc(t,e.columns);let s="{";return r&&(s+='"schema":{"fields":'+JSON.stringify(n.map((t=>({name:t}))))+'},"data":{'),n.forEach(((r,n)=>{s+=(n?",":"")+JSON.stringify(r)+":[";const a=t.column(r),o=i[r]||Lc;let c=-1;t.scan((t=>{const e=a.get(t);s+=(++c?",":"")+JSON.stringify(o(e))}),!0,e.limit,e.offset),s+="]"})),s+"}"+(r?"}":"")}(this,t)}toMarkdown(t){return function(t,e={}){const r=bc(t,e.columns),{align:i,format:n}=gc(t,r,e),s=t=>t.replace(/\|/g,"\\|");let a="|"+r.map(s).join("|")+"|\n|"+r.map((t=>{return"c"===(e=i[t])?":-:":"r"===e?"-:":":-";var e})).join("|")+"|";return _c(t,r,e.limit,e.offset,{row(){a+="\n|"},cell(t,e){a+=s(Ac(t,n[e]))+"|"}}),a+"\n"}(this,t)}}class Oc{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}writeToArrays(){ac("Unsupported operation")}writeToObject(){ac("Unsupported operation")}}var Nc={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Fc="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Uc={5:Fc,"5module":Fc+" export import",6:Fc+" const class extends export import super"},Vc=/^in(stanceof)?$/,Pc="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࣇऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-鿼ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞿꟂ-ꟊꟵ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Rc="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿᫀᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",jc=new RegExp("["+Pc+"]"),zc=new RegExp("["+Pc+Rc+"]");Pc=Rc=null;var $c=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],Wc=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function Hc(t,e){for(var r=65536,i=0;i<e.length;i+=2){if((r+=e[i])>t)return!1;if((r+=e[i+1])>=t)return!0}}function qc(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&jc.test(String.fromCharCode(t)):!1!==e&&Hc(t,$c)))}function Yc(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&zc.test(String.fromCharCode(t)):!1!==e&&(Hc(t,$c)||Hc(t,Wc)))))}var Gc=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function Kc(t,e){return new Gc(t,{beforeExpr:!0,binop:e})}var Jc={beforeExpr:!0},Qc={startsExpr:!0},Zc={};function Xc(t,e){return void 0===e&&(e={}),e.keyword=t,Zc[t]=new Gc(t,e)}var tu={num:new Gc("num",Qc),regexp:new Gc("regexp",Qc),string:new Gc("string",Qc),name:new Gc("name",Qc),eof:new Gc("eof"),bracketL:new Gc("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Gc("]"),braceL:new Gc("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Gc("}"),parenL:new Gc("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Gc(")"),comma:new Gc(",",Jc),semi:new Gc(";",Jc),colon:new Gc(":",Jc),dot:new Gc("."),question:new Gc("?",Jc),questionDot:new Gc("?."),arrow:new Gc("=>",Jc),template:new Gc("template"),invalidTemplate:new Gc("invalidTemplate"),ellipsis:new Gc("...",Jc),backQuote:new Gc("`",Qc),dollarBraceL:new Gc("${",{beforeExpr:!0,startsExpr:!0}),eq:new Gc("=",{beforeExpr:!0,isAssign:!0}),assign:new Gc("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Gc("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Gc("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Kc("||",1),logicalAND:Kc("&&",2),bitwiseOR:Kc("|",3),bitwiseXOR:Kc("^",4),bitwiseAND:Kc("&",5),equality:Kc("==/!=/===/!==",6),relational:Kc("</>/<=/>=",7),bitShift:Kc("<</>>/>>>",8),plusMin:new Gc("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Kc("%",10),star:Kc("*",10),slash:Kc("/",10),starstar:new Gc("**",{beforeExpr:!0}),coalesce:Kc("??",1),_break:Xc("break"),_case:Xc("case",Jc),_catch:Xc("catch"),_continue:Xc("continue"),_debugger:Xc("debugger"),_default:Xc("default",Jc),_do:Xc("do",{isLoop:!0,beforeExpr:!0}),_else:Xc("else",Jc),_finally:Xc("finally"),_for:Xc("for",{isLoop:!0}),_function:Xc("function",Qc),_if:Xc("if"),_return:Xc("return",Jc),_switch:Xc("switch"),_throw:Xc("throw",Jc),_try:Xc("try"),_var:Xc("var"),_const:Xc("const"),_while:Xc("while",{isLoop:!0}),_with:Xc("with"),_new:Xc("new",{beforeExpr:!0,startsExpr:!0}),_this:Xc("this",Qc),_super:Xc("super",Qc),_class:Xc("class",Qc),_extends:Xc("extends",Jc),_export:Xc("export"),_import:Xc("import",Qc),_null:Xc("null",Qc),_true:Xc("true",Qc),_false:Xc("false",Qc),_in:Xc("in",{beforeExpr:!0,binop:7}),_instanceof:Xc("instanceof",{beforeExpr:!0,binop:7}),_typeof:Xc("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Xc("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Xc("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},eu=/\r\n?|\n|\u2028|\u2029/,ru=new RegExp(eu.source,"g");function iu(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var nu=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,su=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,au=Object.prototype,ou=au.hasOwnProperty,cu=au.toString;function uu(t,e){return ou.call(t,e)}var hu=Array.isArray||function(t){return"[object Array]"===cu.call(t)};function lu(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var pu=function(t,e){this.line=t,this.column=e};pu.prototype.offset=function(t){return new pu(this.line,this.column+t)};var du=function(t,e,r){this.start=e,this.end=r,null!==t.sourceFile&&(this.source=t.sourceFile)};function fu(t,e){for(var r=1,i=0;;){ru.lastIndex=i;var n=ru.exec(t);if(!(n&&n.index<e))return new pu(r,e-i);++r,i=n.index+n[0].length}}var yu={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},mu=!1;function bu(t){var e={};for(var r in yu)e[r]=t&&uu(t,r)?t[r]:yu[r];if("latest"===e.ecmaVersion?e.ecmaVersion=1e8:null==e.ecmaVersion?(!mu&&"object"==typeof console&&console.warn&&(mu=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),hu(e.onToken)){var i=e.onToken;e.onToken=function(t){return i.push(t)}}return hu(e.onComment)&&(e.onComment=function(t,e){return function(r,i,n,s,a,o){var c={type:r?"Block":"Line",value:i,start:n,end:s};t.locations&&(c.loc=new du(this,a,o)),t.ranges&&(c.range=[n,s]),e.push(c)}}(e,e.onComment)),e}function gu(t,e){return 2|(t?4:0)|(e?8:0)}var _u=function(t,e,r){this.options=t=bu(t),this.sourceFile=t.sourceFile,this.keywords=lu(Uc[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var i="";!0!==t.allowReserved&&(i=Nc[t.ecmaVersion>=6?6:5===t.ecmaVersion?5:3],"module"===t.sourceType&&(i+=" await")),this.reservedWords=lu(i);var n=(i?i+" ":"")+Nc.strict;this.reservedWordsStrict=lu(n),this.reservedWordsStrictBind=lu(n+" "+Nc.strictBind),this.input=String(e),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf("\n",r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(eu).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=tu.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},vu={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};_u.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},vu.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},vu.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},vu.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},vu.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},vu.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},vu.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},vu.inNonArrowFunction.get=function(){return(2&this.currentThisScope().flags)>0},_u.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r},_u.parse=function(t,e){return new this(e,t).parse()},_u.parseExpressionAt=function(t,e,r){var i=new this(r,t,e);return i.nextToken(),i.parseExpression()},_u.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(_u.prototype,vu);var wu=_u.prototype,xu=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function Iu(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}wu.strictDirective=function(t){for(;;){su.lastIndex=t,t+=su.exec(this.input)[0].length;var e=xu.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2])){su.lastIndex=t+e[0].length;var r=su.exec(this.input),i=r.index+r[0].length,n=this.input.charAt(i);return";"===n||"}"===n||eu.test(r[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(n)||"!"===n&&"="===this.input.charAt(i+1))}t+=e[0].length,su.lastIndex=t,t+=su.exec(this.input)[0].length,";"===this.input[t]&&t++}},wu.eat=function(t){return this.type===t&&(this.next(),!0)},wu.isContextual=function(t){return this.type===tu.name&&this.value===t&&!this.containsEsc},wu.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},wu.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},wu.canInsertSemicolon=function(){return this.type===tu.eof||this.type===tu.braceR||eu.test(this.input.slice(this.lastTokEnd,this.start))},wu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},wu.semicolon=function(){this.eat(tu.semi)||this.insertSemicolon()||this.unexpected()},wu.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},wu.expect=function(t){this.eat(t)||this.unexpected()},wu.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},wu.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var r=e?t.parenthesizedAssign:t.parenthesizedBind;r>-1&&this.raiseRecoverable(r,"Parenthesized pattern")}},wu.checkExpressionErrors=function(t,e){if(!t)return!1;var r=t.shorthandAssign,i=t.doubleProto;if(!e)return r>=0||i>=0;r>=0&&this.raise(r,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")},wu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},wu.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var Su=_u.prototype;Su.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==tu.eof;){var r=this.parseStatement(null,!0,e);t.body.push(r)}if(this.inModule)for(var i=0,n=Object.keys(this.undefinedExports);i<n.length;i+=1){var s=n[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var Tu={kind:"loop"},Au={kind:"switch"};Su.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;su.lastIndex=this.pos;var e=su.exec(this.input),r=this.pos+e[0].length,i=this.input.charCodeAt(r);if(91===i)return!0;if(t)return!1;if(123===i)return!0;if(qc(i,!0)){for(var n=r+1;Yc(this.input.charCodeAt(n),!0);)++n;var s=this.input.slice(r,n);if(!Vc.test(s))return!0}return!1},Su.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;su.lastIndex=this.pos;var t=su.exec(this.input),e=this.pos+t[0].length;return!(eu.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&Yc(this.input.charAt(e+8)))},Su.parseStatement=function(t,e,r){var i,n=this.type,s=this.startNode();switch(this.isLet(t)&&(n=tu._var,i="let"),n){case tu._break:case tu._continue:return this.parseBreakContinueStatement(s,n.keyword);case tu._debugger:return this.parseDebuggerStatement(s);case tu._do:return this.parseDoStatement(s);case tu._for:return this.parseForStatement(s);case tu._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case tu._class:return t&&this.unexpected(),this.parseClass(s,!0);case tu._if:return this.parseIfStatement(s);case tu._return:return this.parseReturnStatement(s);case tu._switch:return this.parseSwitchStatement(s);case tu._throw:return this.parseThrowStatement(s);case tu._try:return this.parseTryStatement(s);case tu._const:case tu._var:return i=i||this.value,t&&"var"!==i&&this.unexpected(),this.parseVarStatement(s,i);case tu._while:return this.parseWhileStatement(s);case tu._with:return this.parseWithStatement(s);case tu.braceL:return this.parseBlock(!0,s);case tu.semi:return this.parseEmptyStatement(s);case tu._export:case tu._import:if(this.options.ecmaVersion>10&&n===tu._import){su.lastIndex=this.pos;var a=su.exec(this.input),o=this.pos+a[0].length,c=this.input.charCodeAt(o);if(40===c||46===c)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),n===tu._import?this.parseImport(s):this.parseExport(s,r);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var u=this.value,h=this.parseExpression();return n===tu.name&&"Identifier"===h.type&&this.eat(tu.colon)?this.parseLabeledStatement(s,u,h,t):this.parseExpressionStatement(s,h)}},Su.parseBreakContinueStatement=function(t,e){var r="break"===e;this.next(),this.eat(tu.semi)||this.insertSemicolon()?t.label=null:this.type!==tu.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var n=this.labels[i];if(null==t.label||n.name===t.label.name){if(null!=n.kind&&(r||"loop"===n.kind))break;if(t.label&&r)break}}return i===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,r?"BreakStatement":"ContinueStatement")},Su.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},Su.parseDoStatement=function(t){return this.next(),this.labels.push(Tu),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(tu._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(tu.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},Su.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Tu),this.enterScope(0),this.expect(tu.parenL),this.type===tu.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var r=this.isLet();if(this.type===tu._var||this.type===tu._const||r){var i=this.startNode(),n=r?"let":this.value;return this.next(),this.parseVar(i,!0,n),this.finishNode(i,"VariableDeclaration"),(this.type===tu._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===i.declarations.length?(this.options.ecmaVersion>=9&&(this.type===tu._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,i)):(e>-1&&this.unexpected(e),this.parseFor(t,i))}var s=new Iu,a=this.parseExpression(!0,s);return this.type===tu._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===tu._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(a,!1,s),this.checkLValPattern(a),this.parseForIn(t,a)):(this.checkExpressionErrors(s,!0),e>-1&&this.unexpected(e),this.parseFor(t,a))},Su.parseFunctionStatement=function(t,e,r){return this.next(),this.parseFunction(t,Bu|(r?0:ku),!1,e)},Su.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(tu._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},Su.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(tu.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},Su.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(tu.braceL),this.labels.push(Au),this.enterScope(0);for(var r=!1;this.type!==tu.braceR;)if(this.type===tu._case||this.type===tu._default){var i=this.type===tu._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(r&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),r=!0,e.test=null),this.expect(tu.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},Su.parseThrowStatement=function(t){return this.next(),eu.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var Eu=[];Su.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===tu._catch){var e=this.startNode();if(this.next(),this.eat(tu.parenL)){e.param=this.parseBindingAtom();var r="Identifier"===e.param.type;this.enterScope(r?32:0),this.checkLValPattern(e.param,r?4:2),this.expect(tu.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(tu._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},Su.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},Su.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(Tu),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},Su.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},Su.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},Su.parseLabeledStatement=function(t,e,r,i){for(var n=0,s=this.labels;n<s.length;n+=1){s[n].name===e&&this.raise(r.start,"Label '"+e+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===tu._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var c=this.labels[o];if(c.statementStart!==t.start)break;c.statementStart=this.start,c.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(i?-1===i.indexOf("label")?i+"label":i:"label"),this.labels.pop(),t.label=r,this.finishNode(t,"LabeledStatement")},Su.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},Su.parseBlock=function(t,e,r){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(tu.braceL),t&&this.enterScope(0);this.type!==tu.braceR;){var i=this.parseStatement(null);e.body.push(i)}return r&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")},Su.parseFor=function(t,e){return t.init=e,this.expect(tu.semi),t.test=this.type===tu.semi?null:this.parseExpression(),this.expect(tu.semi),t.update=this.type===tu.parenR?null:this.parseExpression(),this.expect(tu.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},Su.parseForIn=function(t,e){var r=this.type===tu._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!r||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)&&this.raise(e.start,(r?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=r?this.parseExpression():this.parseMaybeAssign(),this.expect(tu.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,r?"ForInStatement":"ForOfStatement")},Su.parseVar=function(t,e,r){for(t.declarations=[],t.kind=r;;){var i=this.startNode();if(this.parseVarId(i,r),this.eat(tu.eq)?i.init=this.parseMaybeAssign(e):"const"!==r||this.type===tu._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===i.id.type||e&&(this.type===tu._in||this.isContextual("of"))?i.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(tu.comma))break}return t},Su.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,"var"===e?1:2,!1)};var Bu=1,ku=2;Su.parseFunction=function(t,e,r,i){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===tu.star&&e&ku&&this.unexpected(),t.generator=this.eat(tu.star)),this.options.ecmaVersion>=8&&(t.async=!!i),e&Bu&&(t.id=4&e&&this.type!==tu.name?null:this.parseIdent(),!t.id||e&ku||this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var n=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(gu(t.async,t.generator)),e&Bu||(t.id=this.type===tu.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,r,!1),this.yieldPos=n,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(t,e&Bu?"FunctionDeclaration":"FunctionExpression")},Su.parseFunctionParams=function(t){this.expect(tu.parenL),t.params=this.parseBindingList(tu.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Su.parseClass=function(t,e){this.next();var r=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var i=this.startNode(),n=!1;for(i.body=[],this.expect(tu.braceL);this.type!==tu.braceR;){var s=this.parseClassElement(null!==t.superClass);s&&(i.body.push(s),"MethodDefinition"===s.type&&"constructor"===s.kind&&(n&&this.raise(s.start,"Duplicate constructor in the same class"),n=!0))}return this.strict=r,this.next(),t.body=this.finishNode(i,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},Su.parseClassElement=function(t){var e=this;if(this.eat(tu.semi))return null;var r=this.startNode(),i=function(t,i){void 0===i&&(i=!1);var n=e.start,s=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===tu.parenL||i&&e.canInsertSemicolon())||(r.key&&e.unexpected(),r.computed=!1,r.key=e.startNodeAt(n,s),r.key.name=t,e.finishNode(r.key,"Identifier"),!1))};r.kind="method",r.static=i("static");var n=this.eat(tu.star),s=!1;n||(this.options.ecmaVersion>=8&&i("async",!0)?(s=!0,n=this.options.ecmaVersion>=9&&this.eat(tu.star)):i("get")?r.kind="get":i("set")&&(r.kind="set")),r.key||this.parsePropertyName(r);var a=r.key,o=!1;return r.computed||r.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?r.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==r.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),n&&this.raise(a.start,"Constructor can't be a generator"),s&&this.raise(a.start,"Constructor can't be an async method"),r.kind="constructor",o=t),this.parseClassMethod(r,n,s,o),"get"===r.kind&&0!==r.value.params.length&&this.raiseRecoverable(r.value.start,"getter should have no params"),"set"===r.kind&&1!==r.value.params.length&&this.raiseRecoverable(r.value.start,"setter should have exactly one param"),"set"===r.kind&&"RestElement"===r.value.params[0].type&&this.raiseRecoverable(r.value.params[0].start,"Setter cannot use rest params"),r},Su.parseClassMethod=function(t,e,r,i){return t.value=this.parseMethod(e,r,i),this.finishNode(t,"MethodDefinition")},Su.parseClassId=function(t,e){this.type===tu.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},Su.parseClassSuper=function(t){t.superClass=this.eat(tu._extends)?this.parseExprSubscripts():null},Su.parseExport=function(t,e){if(this.next(),this.eat(tu.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseIdent(!0),this.checkExport(e,t.exported.name,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==tu.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(tu._default)){var r;if(this.checkExport(e,"default",this.lastTokStart),this.type===tu._function||(r=this.isAsyncFunction())){var i=this.startNode();this.next(),r&&this.next(),t.declaration=this.parseFunction(i,4|Bu,!1,r)}else if(this.type===tu._class){var n=this.startNode();t.declaration=this.parseClass(n,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==tu.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var s=0,a=t.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},Su.checkExport=function(t,e,r){t&&(uu(t,e)&&this.raiseRecoverable(r,"Duplicate export '"+e+"'"),t[e]=!0)},Su.checkPatternExport=function(t,e){var r=e.type;if("Identifier"===r)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===r)for(var i=0,n=e.properties;i<n.length;i+=1){var s=n[i];this.checkPatternExport(t,s)}else if("ArrayPattern"===r)for(var a=0,o=e.elements;a<o.length;a+=1){var c=o[a];c&&this.checkPatternExport(t,c)}else"Property"===r?this.checkPatternExport(t,e.value):"AssignmentPattern"===r?this.checkPatternExport(t,e.left):"RestElement"===r?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===r&&this.checkPatternExport(t,e.expression)},Su.checkVariableExport=function(t,e){if(t)for(var r=0,i=e;r<i.length;r+=1){var n=i[r];this.checkPatternExport(t,n.id)}},Su.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},Su.parseExportSpecifiers=function(t){var e=[],r=!0;for(this.expect(tu.braceL);!this.eat(tu.braceR);){if(r)r=!1;else if(this.expect(tu.comma),this.afterTrailingComma(tu.braceR))break;var i=this.startNode();i.local=this.parseIdent(!0),i.exported=this.eatContextual("as")?this.parseIdent(!0):i.local,this.checkExport(t,i.exported.name,i.exported.start),e.push(this.finishNode(i,"ExportSpecifier"))}return e},Su.parseImport=function(t){return this.next(),this.type===tu.string?(t.specifiers=Eu,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===tu.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},Su.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===tu.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLValSimple(r.local,2),t.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(tu.comma))return t}if(this.type===tu.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,2),t.push(this.finishNode(i,"ImportNamespaceSpecifier")),t}for(this.expect(tu.braceL);!this.eat(tu.braceR);){if(e)e=!1;else if(this.expect(tu.comma),this.afterTrailingComma(tu.braceR))break;var n=this.startNode();n.imported=this.parseIdent(!0),this.eatContextual("as")?n.local=this.parseIdent():(this.checkUnreserved(n.imported),n.local=n.imported),this.checkLValSimple(n.local,2),t.push(this.finishNode(n,"ImportSpecifier"))}return t},Su.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},Su.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var Lu=_u.prototype;Lu.toAssignable=function(t,e,r){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",r&&this.checkPatternErrors(r,!0);for(var i=0,n=t.properties;i<n.length;i+=1){var s=n[i];this.toAssignable(s,e),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",r&&this.checkPatternErrors(r,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,r);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else r&&this.checkPatternErrors(r,!0);return t},Lu.toAssignableList=function(t,e){for(var r=t.length,i=0;i<r;i++){var n=t[i];n&&this.toAssignable(n,e)}if(r){var s=t[r-1];6===this.options.ecmaVersion&&e&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return t},Lu.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},Lu.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==tu.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},Lu.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case tu.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(tu.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case tu.braceL:return this.parseObj(!0)}return this.parseIdent()},Lu.parseBindingList=function(t,e,r){for(var i=[],n=!0;!this.eat(t);)if(n?n=!1:this.expect(tu.comma),e&&this.type===tu.comma)i.push(null);else{if(r&&this.afterTrailingComma(t))break;if(this.type===tu.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),i.push(s),this.type===tu.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),i.push(a)}return i},Lu.parseBindingListItem=function(t){return t},Lu.parseMaybeDefault=function(t,e,r){if(r=r||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(tu.eq))return r;var i=this.startNodeAt(t,e);return i.left=r,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")},Lu.checkLValSimple=function(t,e,r){void 0===e&&(e=0);var i=0!==e;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(i?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),r&&(uu(r,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),r[t.name]=!0),5!==e&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,r);default:this.raise(t.start,(i?"Binding":"Assigning to")+" rvalue")}},Lu.checkLValPattern=function(t,e,r){switch(void 0===e&&(e=0),t.type){case"ObjectPattern":for(var i=0,n=t.properties;i<n.length;i+=1){var s=n[i];this.checkLValInnerPattern(s,e,r)}break;case"ArrayPattern":for(var a=0,o=t.elements;a<o.length;a+=1){var c=o[a];c&&this.checkLValInnerPattern(c,e,r)}break;default:this.checkLValSimple(t,e,r)}},Lu.checkLValInnerPattern=function(t,e,r){switch(void 0===e&&(e=0),t.type){case"Property":this.checkLValInnerPattern(t.value,e,r);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,r);break;case"RestElement":this.checkLValPattern(t.argument,e,r);break;default:this.checkLValPattern(t,e,r)}};var Cu=_u.prototype;Cu.checkPropClash=function(t,e,r){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i,n=t.key;switch(n.type){case"Identifier":i=n.name;break;case"Literal":i=String(n.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===i&&"init"===s&&(e.proto&&(r?r.doubleProto<0&&(r.doubleProto=n.start):this.raiseRecoverable(n.start,"Redefinition of __proto__ property")),e.proto=!0);else{var a=e[i="$"+i];if(a)("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(n.start,"Redefinition of property");else a=e[i]={init:!1,get:!1,set:!1};a[s]=!0}}},Cu.parseExpression=function(t,e){var r=this.start,i=this.startLoc,n=this.parseMaybeAssign(t,e);if(this.type===tu.comma){var s=this.startNodeAt(r,i);for(s.expressions=[n];this.eat(tu.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return n},Cu.parseMaybeAssign=function(t,e,r){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var i=!1,n=-1,s=-1;e?(n=e.parenthesizedAssign,s=e.trailingComma,e.parenthesizedAssign=e.trailingComma=-1):(e=new Iu,i=!0);var a=this.start,o=this.startLoc;this.type!==tu.parenL&&this.type!==tu.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(t,e);if(r&&(c=r.call(this,c,a,o)),this.type.isAssign){var u=this.startNodeAt(a,o);return u.operator=this.value,this.type===tu.eq&&(c=this.toAssignable(c,!1,e)),i||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=c.start&&(e.shorthandAssign=-1),this.type===tu.eq?this.checkLValPattern(c):this.checkLValSimple(c),u.left=c,this.next(),u.right=this.parseMaybeAssign(t),this.finishNode(u,"AssignmentExpression")}return i&&this.checkExpressionErrors(e,!0),n>-1&&(e.parenthesizedAssign=n),s>-1&&(e.trailingComma=s),c},Cu.parseMaybeConditional=function(t,e){var r=this.start,i=this.startLoc,n=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return n;if(this.eat(tu.question)){var s=this.startNodeAt(r,i);return s.test=n,s.consequent=this.parseMaybeAssign(),this.expect(tu.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return n},Cu.parseExprOps=function(t,e){var r=this.start,i=this.startLoc,n=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)||n.start===r&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,r,i,-1,t)},Cu.parseExprOp=function(t,e,r,i,n){var s=this.type.binop;if(null!=s&&(!n||this.type!==tu._in)&&s>i){var a=this.type===tu.logicalOR||this.type===tu.logicalAND,o=this.type===tu.coalesce;o&&(s=tu.logicalAND.binop);var c=this.value;this.next();var u=this.start,h=this.startLoc,l=this.parseExprOp(this.parseMaybeUnary(null,!1),u,h,s,n),p=this.buildBinary(e,r,t,l,c,a||o);return(a&&this.type===tu.coalesce||o&&(this.type===tu.logicalOR||this.type===tu.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(p,e,r,i,n)}return t},Cu.buildBinary=function(t,e,r,i,n,s){var a=this.startNodeAt(t,e);return a.left=r,a.operator=n,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},Cu.parseMaybeUnary=function(t,e){var r,i=this.start,n=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))r=this.parseAwait(),e=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===tu.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),a?this.checkLValSimple(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):e=!0,r=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(r=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(i,n);o.operator=this.value,o.prefix=!1,o.argument=r,this.checkLValSimple(r),this.next(),r=this.finishNode(o,"UpdateExpression")}}return!e&&this.eat(tu.starstar)?this.buildBinary(i,n,r,this.parseMaybeUnary(null,!1),"**",!1):r},Cu.parseExprSubscripts=function(t){var e=this.start,r=this.startLoc,i=this.parseExprAtom(t);if("ArrowFunctionExpression"===i.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return i;var n=this.parseSubscripts(i,e,r);return t&&"MemberExpression"===n.type&&(t.parenthesizedAssign>=n.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=n.start&&(t.parenthesizedBind=-1)),n},Cu.parseSubscripts=function(t,e,r,i){for(var n=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start,s=!1;;){var a=this.parseSubscript(t,e,r,i,n,s);if(a.optional&&(s=!0),a===t||"ArrowFunctionExpression"===a.type){if(s){var o=this.startNodeAt(e,r);o.expression=a,a=this.finishNode(o,"ChainExpression")}return a}t=a}},Cu.parseSubscript=function(t,e,r,i,n,s){var a=this.options.ecmaVersion>=11,o=a&&this.eat(tu.questionDot);i&&o&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(tu.bracketL);if(c||o&&this.type!==tu.parenL&&this.type!==tu.backQuote||this.eat(tu.dot)){var u=this.startNodeAt(e,r);u.object=t,u.property=c?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),u.computed=!!c,c&&this.expect(tu.bracketR),a&&(u.optional=o),t=this.finishNode(u,"MemberExpression")}else if(!i&&this.eat(tu.parenL)){var h=new Iu,l=this.yieldPos,p=this.awaitPos,d=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var f=this.parseExprList(tu.parenR,this.options.ecmaVersion>=8,!1,h);if(n&&!o&&!this.canInsertSemicolon()&&this.eat(tu.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=p,this.awaitIdentPos=d,this.parseArrowExpression(this.startNodeAt(e,r),f,!0);this.checkExpressionErrors(h,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=d||this.awaitIdentPos;var y=this.startNodeAt(e,r);y.callee=t,y.arguments=f,a&&(y.optional=o),t=this.finishNode(y,"CallExpression")}else if(this.type===tu.backQuote){(o||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var m=this.startNodeAt(e,r);m.tag=t,m.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(m,"TaggedTemplateExpression")}return t},Cu.parseExprAtom=function(t){this.type===tu.slash&&this.readRegexp();var e,r=this.potentialArrowAt===this.start;switch(this.type){case tu._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==tu.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==tu.dot&&this.type!==tu.bracketL&&this.type!==tu.parenL&&this.unexpected(),this.finishNode(e,"Super");case tu._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case tu.name:var i=this.start,n=this.startLoc,s=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(tu._function))return this.parseFunction(this.startNodeAt(i,n),0,!1,!0);if(r&&!this.canInsertSemicolon()){if(this.eat(tu.arrow))return this.parseArrowExpression(this.startNodeAt(i,n),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===tu.name&&!s)return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(tu.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,n),[a],!0)}return a;case tu.regexp:var o=this.value;return(e=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},e;case tu.num:case tu.string:return this.parseLiteral(this.value);case tu._null:case tu._true:case tu._false:return(e=this.startNode()).value=this.type===tu._null?null:this.type===tu._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case tu.parenL:var c=this.start,u=this.parseParenAndDistinguishExpression(r);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(t.parenthesizedAssign=c),t.parenthesizedBind<0&&(t.parenthesizedBind=c)),u;case tu.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(tu.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case tu.braceL:return this.parseObj(!1,t);case tu._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case tu._class:return this.parseClass(this.startNode(),!1);case tu._new:return this.parseNew();case tu.backQuote:return this.parseTemplate();case tu._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},Cu.parseExprImport=function(){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var e=this.parseIdent(!0);switch(this.type){case tu.parenL:return this.parseDynamicImport(t);case tu.dot:return t.meta=e,this.parseImportMeta(t);default:this.unexpected()}},Cu.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(tu.parenR)){var e=this.start;this.eat(tu.comma)&&this.eat(tu.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},Cu.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"!==this.options.sourceType&&this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},Cu.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},Cu.parseParenExpression=function(){this.expect(tu.parenL);var t=this.parseExpression();return this.expect(tu.parenR),t},Cu.parseParenAndDistinguishExpression=function(t){var e,r=this.start,i=this.startLoc,n=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,a=this.start,o=this.startLoc,c=[],u=!0,h=!1,l=new Iu,p=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==tu.parenR;){if(u?u=!1:this.expect(tu.comma),n&&this.afterTrailingComma(tu.parenR,!0)){h=!0;break}if(this.type===tu.ellipsis){s=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===tu.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}c.push(this.parseMaybeAssign(!1,l,this.parseParenItem))}var f=this.start,y=this.startLoc;if(this.expect(tu.parenR),t&&!this.canInsertSemicolon()&&this.eat(tu.arrow))return this.checkPatternErrors(l,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=d,this.parseParenArrowList(r,i,c);c.length&&!h||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(l,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=d||this.awaitPos,c.length>1?((e=this.startNodeAt(a,o)).expressions=c,this.finishNodeAt(e,"SequenceExpression",f,y)):e=c[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(r,i);return m.expression=e,this.finishNode(m,"ParenthesizedExpression")}return e},Cu.parseParenItem=function(t){return t},Cu.parseParenArrowList=function(t,e,r){return this.parseArrowExpression(this.startNodeAt(t,e),r)};var Du=[];Cu.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(tu.dot)){t.meta=e;var r=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),r&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(t.start,"'new.target' can only be used in functions"),this.finishNode(t,"MetaProperty")}var i=this.start,n=this.startLoc,s=this.type===tu._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),i,n,!0),s&&"ImportExpression"===t.callee.type&&this.raise(i,"Cannot use new with import()"),this.eat(tu.parenL)?t.arguments=this.parseExprList(tu.parenR,this.options.ecmaVersion>=8,!1):t.arguments=Du,this.finishNode(t,"NewExpression")},Cu.parseTemplateElement=function(t){var e=t.isTagged,r=this.startNode();return this.type===tu.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),r.value={raw:this.value,cooked:null}):r.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),r.tail=this.type===tu.backQuote,this.finishNode(r,"TemplateElement")},Cu.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var r=this.startNode();this.next(),r.expressions=[];var i=this.parseTemplateElement({isTagged:e});for(r.quasis=[i];!i.tail;)this.type===tu.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(tu.dollarBraceL),r.expressions.push(this.parseExpression()),this.expect(tu.braceR),r.quasis.push(i=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(r,"TemplateLiteral")},Cu.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===tu.name||this.type===tu.num||this.type===tu.string||this.type===tu.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===tu.star)&&!eu.test(this.input.slice(this.lastTokEnd,this.start))},Cu.parseObj=function(t,e){var r=this.startNode(),i=!0,n={};for(r.properties=[],this.next();!this.eat(tu.braceR);){if(i)i=!1;else if(this.expect(tu.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(tu.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,n,e),r.properties.push(s)}return this.finishNode(r,t?"ObjectPattern":"ObjectExpression")},Cu.parseProperty=function(t,e){var r,i,n,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(tu.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===tu.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===tu.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,e),this.type===tu.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(n=this.start,s=this.startLoc),t||(r=this.eat(tu.star)));var o=this.containsEsc;return this.parsePropertyName(a),!t&&!o&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(a)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(tu.star),this.parsePropertyName(a,e)):i=!1,this.parsePropertyValue(a,t,r,i,n,s,e,o),this.finishNode(a,"Property")},Cu.parsePropertyValue=function(t,e,r,i,n,s,a,o){if((r||i)&&this.type===tu.colon&&this.unexpected(),this.eat(tu.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===tu.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(r,i);else if(e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===tu.comma||this.type===tu.braceR||this.type===tu.eq)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((r||i)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),t.kind="init",e?t.value=this.parseMaybeDefault(n,s,this.copyNode(t.key)):this.type===tu.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(n,s,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected();else{(r||i)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var c="get"===t.kind?0:1;if(t.value.params.length!==c){var u=t.value.start;"get"===t.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},Cu.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(tu.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(tu.bracketR),t.key;t.computed=!1}return t.key=this.type===tu.num||this.type===tu.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},Cu.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},Cu.parseMethod=function(t,e,r){var i=this.startNode(),n=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|gu(e,i.generator)|(r?128:0)),this.expect(tu.parenL),i.params=this.parseBindingList(tu.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0),this.yieldPos=n,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")},Cu.parseArrowExpression=function(t,e,r){var i=this.yieldPos,n=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(16|gu(r,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!r),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=i,this.awaitPos=n,this.awaitIdentPos=s,this.finishNode(t,"ArrowFunctionExpression")},Cu.parseFunctionBody=function(t,e,r){var i=e&&this.type!==tu.braceL,n=this.strict,s=!1;if(i)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);n&&!a||(s=this.strictDirective(this.end))&&a&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],s&&(this.strict=!0),this.checkParams(t,!n&&!s&&!e&&!r&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,5),t.body=this.parseBlock(!1,void 0,s&&!n),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=o}this.exitScope()},Cu.isSimpleParamList=function(t){for(var e=0,r=t;e<r.length;e+=1){if("Identifier"!==r[e].type)return!1}return!0},Cu.checkParams=function(t,e){for(var r={},i=0,n=t.params;i<n.length;i+=1){var s=n[i];this.checkLValInnerPattern(s,1,e?null:r)}},Cu.parseExprList=function(t,e,r,i){for(var n=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(tu.comma),e&&this.afterTrailingComma(t))break;var a=void 0;r&&this.type===tu.comma?a=null:this.type===tu.ellipsis?(a=this.parseSpread(i),i&&this.type===tu.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),n.push(a)}return n},Cu.checkUnreserved=function(t){var e=t.start,r=t.end,i=t.name;(this.inGenerator&&"yield"===i&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===i&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(i)&&this.raise(e,"Unexpected keyword '"+i+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,r).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(i)&&(this.inAsync||"await"!==i||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+i+"' is reserved"))},Cu.parseIdent=function(t,e){var r=this.startNode();return this.type===tu.name?r.name=this.value:this.type.keyword?(r.name=this.type.keyword,"class"!==r.name&&"function"!==r.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(r,"Identifier"),t||(this.checkUnreserved(r),"await"!==r.name||this.awaitIdentPos||(this.awaitIdentPos=r.start)),r},Cu.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===tu.semi||this.canInsertSemicolon()||this.type!==tu.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(tu.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},Cu.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var Mu=_u.prototype;Mu.raise=function(t,e){var r=fu(this.input,t);e+=" ("+r.line+":"+r.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=r,i.raisedAt=this.pos,i},Mu.raiseRecoverable=Mu.raise,Mu.curPosition=function(){if(this.options.locations)return new pu(this.curLine,this.pos-this.lineStart)};var Ou=_u.prototype,Nu=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};Ou.enterScope=function(t){this.scopeStack.push(new Nu(t))},Ou.exitScope=function(){this.scopeStack.pop()},Ou.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},Ou.declareName=function(t,e,r){var i=!1;if(2===e){var n=this.currentScope();i=n.lexical.indexOf(t)>-1||n.functions.indexOf(t)>-1||n.var.indexOf(t)>-1,n.lexical.push(t),this.inModule&&1&n.flags&&delete this.undefinedExports[t]}else if(4===e){this.currentScope().lexical.push(t)}else if(3===e){var s=this.currentScope();i=this.treatFunctionsAsVar?s.lexical.indexOf(t)>-1:s.lexical.indexOf(t)>-1||s.var.indexOf(t)>-1,s.functions.push(t)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(t)>-1&&!(32&o.flags&&o.lexical[0]===t)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(t)>-1){i=!0;break}if(o.var.push(t),this.inModule&&1&o.flags&&delete this.undefinedExports[t],3&o.flags)break}i&&this.raiseRecoverable(r,"Identifier '"+t+"' has already been declared")},Ou.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},Ou.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Ou.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags)return e}},Ou.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags&&!(16&e.flags))return e}};var Fu=function(t,e,r){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new du(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},Uu=_u.prototype;function Vu(t,e,r,i){return t.type=e,t.end=r,this.options.locations&&(t.loc.end=i),this.options.ranges&&(t.range[1]=r),t}Uu.startNode=function(){return new Fu(this,this.start,this.startLoc)},Uu.startNodeAt=function(t,e){return new Fu(this,t,e)},Uu.finishNode=function(t,e){return Vu.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},Uu.finishNodeAt=function(t,e,r,i){return Vu.call(this,t,e,r,i)},Uu.copyNode=function(t){var e=new Fu(this,t.start,this.startLoc);for(var r in t)e[r]=t[r];return e};var Pu=function(t,e,r,i,n){this.token=t,this.isExpr=!!e,this.preserveSpace=!!r,this.override=i,this.generator=!!n},Ru={b_stat:new Pu("{",!1),b_expr:new Pu("{",!0),b_tmpl:new Pu("${",!1),p_stat:new Pu("(",!1),p_expr:new Pu("(",!0),q_tmpl:new Pu("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new Pu("function",!1),f_expr:new Pu("function",!0),f_expr_gen:new Pu("function",!0,!1,null,!0),f_gen:new Pu("function",!1,!1,null,!0)},ju=_u.prototype;ju.initialContext=function(){return[Ru.b_stat]},ju.braceIsBlock=function(t){var e=this.curContext();return e===Ru.f_expr||e===Ru.f_stat||(t!==tu.colon||e!==Ru.b_stat&&e!==Ru.b_expr?t===tu._return||t===tu.name&&this.exprAllowed?eu.test(this.input.slice(this.lastTokEnd,this.start)):t===tu._else||t===tu.semi||t===tu.eof||t===tu.parenR||t===tu.arrow||(t===tu.braceL?e===Ru.b_stat:t!==tu._var&&t!==tu._const&&t!==tu.name&&!this.exprAllowed):!e.isExpr)},ju.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},ju.updateContext=function(t){var e,r=this.type;r.keyword&&t===tu.dot?this.exprAllowed=!1:(e=r.updateContext)?e.call(this,t):this.exprAllowed=r.beforeExpr},tu.parenR.updateContext=tu.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===Ru.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},tu.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?Ru.b_stat:Ru.b_expr),this.exprAllowed=!0},tu.dollarBraceL.updateContext=function(){this.context.push(Ru.b_tmpl),this.exprAllowed=!0},tu.parenL.updateContext=function(t){var e=t===tu._if||t===tu._for||t===tu._with||t===tu._while;this.context.push(e?Ru.p_stat:Ru.p_expr),this.exprAllowed=!0},tu.incDec.updateContext=function(){},tu._function.updateContext=tu._class.updateContext=function(t){!t.beforeExpr||t===tu._else||t===tu.semi&&this.curContext()!==Ru.p_stat||t===tu._return&&eu.test(this.input.slice(this.lastTokEnd,this.start))||(t===tu.colon||t===tu.braceL)&&this.curContext()===Ru.b_stat?this.context.push(Ru.f_stat):this.context.push(Ru.f_expr),this.exprAllowed=!1},tu.backQuote.updateContext=function(){this.curContext()===Ru.q_tmpl?this.context.pop():this.context.push(Ru.q_tmpl),this.exprAllowed=!1},tu.star.updateContext=function(t){if(t===tu._function){var e=this.context.length-1;this.context[e]===Ru.f_expr?this.context[e]=Ru.f_expr_gen:this.context[e]=Ru.f_gen}this.exprAllowed=!0},tu.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==tu.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var zu="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",$u=zu+" Extended_Pictographic",Wu={9:zu,10:$u,11:$u,12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},Hu="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",qu="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Yu=qu+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Gu=Yu+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Ku={9:qu,10:Yu,11:Gu,12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},Ju={};function Qu(t){var e=Ju[t]={binary:lu(Wu[t]+" "+Hu),nonBinary:{General_Category:lu(Hu),Script:lu(Ku[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}Qu(9),Qu(10),Qu(11),Qu(12);var Zu=_u.prototype,Xu=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Ju[t.options.ecmaVersion>=12?12:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function th(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function eh(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function rh(t){return t>=65&&t<=90||t>=97&&t<=122}function ih(t){return rh(t)||95===t}function nh(t){return ih(t)||sh(t)}function sh(t){return t>=48&&t<=57}function ah(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function oh(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function ch(t){return t>=48&&t<=55}Xu.prototype.reset=function(t,e,r){var i=-1!==r.indexOf("u");this.start=0|t,this.source=e+"",this.flags=r,this.switchU=i&&this.parser.options.ecmaVersion>=6,this.switchN=i&&this.parser.options.ecmaVersion>=9},Xu.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Xu.prototype.at=function(t,e){void 0===e&&(e=!1);var r=this.source,i=r.length;if(t>=i)return-1;var n=r.charCodeAt(t);if(!e&&!this.switchU||n<=55295||n>=57344||t+1>=i)return n;var s=r.charCodeAt(t+1);return s>=56320&&s<=57343?(n<<10)+s-56613888:n},Xu.prototype.nextIndex=function(t,e){void 0===e&&(e=!1);var r=this.source,i=r.length;if(t>=i)return i;var n,s=r.charCodeAt(t);return!e&&!this.switchU||s<=55295||s>=57344||t+1>=i||(n=r.charCodeAt(t+1))<56320||n>57343?t+1:t+2},Xu.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},Xu.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},Xu.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},Xu.prototype.eat=function(t,e){return void 0===e&&(e=!1),this.current(e)===t&&(this.advance(e),!0)},Zu.validateRegExpFlags=function(t){for(var e=t.validFlags,r=t.flags,i=0;i<r.length;i++){var n=r.charAt(i);-1===e.indexOf(n)&&this.raise(t.start,"Invalid regular expression flag"),r.indexOf(n,i+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},Zu.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Zu.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,r=t.backReferenceNames;e<r.length;e+=1){var i=r[e];-1===t.groupNames.indexOf(i)&&t.raise("Invalid named capture referenced")}},Zu.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Zu.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},Zu.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Zu.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var r=!1;if(this.options.ecmaVersion>=9&&(r=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!r,!0}return t.pos=e,!1},Zu.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Zu.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Zu.regexp_eatBracedQuantifier=function(t,e){var r=t.pos;if(t.eat(123)){var i=0,n=-1;if(this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(n=t.lastIntValue),t.eat(125)))return-1!==n&&n<i&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=r}return!1},Zu.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Zu.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Zu.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},Zu.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Zu.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Zu.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Zu.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!eh(e)&&(t.lastIntValue=e,t.advance(),!0)},Zu.regexp_eatPatternCharacters=function(t){for(var e=t.pos,r=0;-1!==(r=t.current())&&!eh(r);)t.advance();return t.pos!==e},Zu.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},Zu.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Zu.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Zu.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=th(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=th(t.lastIntValue);return!0}return!1},Zu.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,r=this.options.ecmaVersion>=11,i=t.current(r);return t.advance(r),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,r)&&(i=t.lastIntValue),function(t){return qc(t,!0)||36===t||95===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},Zu.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,r=this.options.ecmaVersion>=11,i=t.current(r);return t.advance(r),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,r)&&(i=t.lastIntValue),function(t){return Yc(t,!0)||36===t||95===t||8204===t||8205===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},Zu.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Zu.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var r=t.lastIntValue;if(t.switchU)return r>t.maxBackReference&&(t.maxBackReference=r),!0;if(r<=t.numCapturingParens)return!0;t.pos=e}return!1},Zu.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Zu.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Zu.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Zu.regexp_eatZero=function(t){return 48===t.current()&&!sh(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Zu.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Zu.regexp_eatControlLetter=function(t){var e=t.current();return!!rh(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Zu.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){void 0===e&&(e=!1);var r,i=t.pos,n=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(n&&s>=55296&&s<=56319){var a=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var o=t.lastIntValue;if(o>=56320&&o<=57343)return t.lastIntValue=1024*(s-55296)+(o-56320)+65536,!0}t.pos=a,t.lastIntValue=s}return!0}if(n&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&((r=t.lastIntValue)>=0&&r<=1114111))return!0;n&&t.raise("Invalid unicode escape"),t.pos=i}return!1},Zu.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},Zu.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},Zu.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},Zu.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var r=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,r,i),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var n=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,n),!0}return!1},Zu.regexp_validateUnicodePropertyNameAndValue=function(t,e,r){uu(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(r)||t.raise("Invalid property value")},Zu.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},Zu.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";ih(e=t.current());)t.lastStringValue+=th(e),t.advance();return""!==t.lastStringValue},Zu.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";nh(e=t.current());)t.lastStringValue+=th(e),t.advance();return""!==t.lastStringValue},Zu.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Zu.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},Zu.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var r=t.lastIntValue;!t.switchU||-1!==e&&-1!==r||t.raise("Invalid character class"),-1!==e&&-1!==r&&e>r&&t.raise("Range out of order in character class")}}},Zu.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var r=t.current();(99===r||ch(r))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var i=t.current();return 93!==i&&(t.lastIntValue=i,t.advance(),!0)},Zu.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Zu.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!sh(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},Zu.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},Zu.regexp_eatDecimalDigits=function(t){var e=t.pos,r=0;for(t.lastIntValue=0;sh(r=t.current());)t.lastIntValue=10*t.lastIntValue+(r-48),t.advance();return t.pos!==e},Zu.regexp_eatHexDigits=function(t){var e=t.pos,r=0;for(t.lastIntValue=0;ah(r=t.current());)t.lastIntValue=16*t.lastIntValue+oh(r),t.advance();return t.pos!==e},Zu.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var r=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*r+t.lastIntValue:t.lastIntValue=8*e+r}else t.lastIntValue=e;return!0}return!1},Zu.regexp_eatOctalDigit=function(t){var e=t.current();return ch(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Zu.regexp_eatFixedHexDigits=function(t,e){var r=t.pos;t.lastIntValue=0;for(var i=0;i<e;++i){var n=t.current();if(!ah(n))return t.pos=r,!1;t.lastIntValue=16*t.lastIntValue+oh(n),t.advance()}return!0};var uh=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new du(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},hh=_u.prototype;function lh(t){return"function"!=typeof BigInt?null:BigInt(t.replace(/_/g,""))}function ph(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}hh.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new uh(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},hh.getToken=function(){return this.next(),new uh(this)},"undefined"!=typeof Symbol&&(hh[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===tu.eof,value:e}}}}),hh.curContext=function(){return this.context[this.context.length-1]},hh.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(tu.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},hh.readToken=function(t){return qc(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},hh.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},hh.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),r=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(-1===i&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(ru.lastIndex=r;(t=ru.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(r+2,i),r,this.pos,e,this.curPosition())},hh.skipLineComment=function(t){for(var e=this.pos,r=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!iu(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,r,this.curPosition())},hh.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&nu.test(String.fromCharCode(t))))break t;++this.pos}}},hh.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var r=this.type;this.type=t,this.value=e,this.updateContext(r)},hh.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(tu.ellipsis)):(++this.pos,this.finishToken(tu.dot))},hh.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(tu.assign,2):this.finishOp(tu.slash,1)},hh.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),r=1,i=42===t?tu.star:tu.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++r,i=tu.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(tu.assign,r+1):this.finishOp(i,r)},hh.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(tu.assign,3);return this.finishOp(124===t?tu.logicalOR:tu.logicalAND,2)}return 61===e?this.finishOp(tu.assign,2):this.finishOp(124===t?tu.bitwiseOR:tu.bitwiseAND,1)},hh.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(tu.assign,2):this.finishOp(tu.bitwiseXOR,1)},hh.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!eu.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(tu.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(tu.assign,2):this.finishOp(tu.plusMin,1)},hh.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),r=1;return e===t?(r=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+r)?this.finishOp(tu.assign,r+1):this.finishOp(tu.bitShift,r)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(r=2),this.finishOp(tu.relational,r)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},hh.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(tu.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(tu.arrow)):this.finishOp(61===t?tu.eq:tu.prefix,1)},hh.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(46===e){var r=this.input.charCodeAt(this.pos+2);if(r<48||r>57)return this.finishOp(tu.questionDot,2)}if(63===e){if(t>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(tu.assign,3);return this.finishOp(tu.coalesce,2)}}return this.finishOp(tu.question,1)},hh.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(tu.parenL);case 41:return++this.pos,this.finishToken(tu.parenR);case 59:return++this.pos,this.finishToken(tu.semi);case 44:return++this.pos,this.finishToken(tu.comma);case 91:return++this.pos,this.finishToken(tu.bracketL);case 93:return++this.pos,this.finishToken(tu.bracketR);case 123:return++this.pos,this.finishToken(tu.braceL);case 125:return++this.pos,this.finishToken(tu.braceR);case 58:return++this.pos,this.finishToken(tu.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(tu.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(tu.prefix,1)}this.raise(this.pos,"Unexpected character '"+ph(t)+"'")},hh.finishOp=function(t,e){var r=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,r)},hh.readRegexp=function(){for(var t,e,r=this.pos;;){this.pos>=this.input.length&&this.raise(r,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(eu.test(i)&&this.raise(r,"Unterminated regular expression"),t)t=!1;else{if("["===i)e=!0;else if("]"===i&&e)e=!1;else if("/"===i&&!e)break;t="\\"===i}++this.pos}var n=this.input.slice(r,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new Xu(this));o.reset(r,n,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var c=null;try{c=new RegExp(n,a)}catch(t){}return this.finishToken(tu.regexp,{pattern:n,flags:a,value:c})},hh.readInt=function(t,e,r){for(var i=this.options.ecmaVersion>=12&&void 0===e,n=r&&48===this.input.charCodeAt(this.pos),s=this.pos,a=0,o=0,c=0,u=null==e?1/0:e;c<u;++c,++this.pos){var h=this.input.charCodeAt(this.pos),l=void 0;if(i&&95===h)n&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===c&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=h;else{if((l=h>=97?h-97+10:h>=65?h-65+10:h>=48&&h<=57?h-48:1/0)>=t)break;o=h,a=a*t+l}}return i&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||null!=e&&this.pos-s!==e?null:a},hh.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var r=this.readInt(t);return null==r&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(r=lh(this.input.slice(e,this.pos)),++this.pos):qc(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(tu.num,r)},hh.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(e,"Invalid number");var r=this.pos-e>=2&&48===this.input.charCodeAt(e);r&&this.strict&&this.raise(e,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!r&&!t&&this.options.ecmaVersion>=11&&110===i){var n=lh(this.input.slice(e,this.pos));return++this.pos,qc(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(tu.num,n)}r&&/[89]/.test(this.input.slice(e,this.pos))&&(r=!1),46!==i||r||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||r||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),qc(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s,a=(s=this.input.slice(e,this.pos),r?parseInt(s,8):parseFloat(s.replace(/_/g,"")));return this.finishToken(tu.num,a)},hh.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},hh.readString=function(t){for(var e="",r=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===t)break;92===i?(e+=this.input.slice(r,this.pos),e+=this.readEscapedChar(!1),r=this.pos):(iu(i,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(r,this.pos++),this.finishToken(tu.string,e)};var dh={};hh.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==dh)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},hh.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw dh;this.raise(t,e)},hh.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var r=this.input.charCodeAt(this.pos);if(96===r||36===r&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==tu.template&&this.type!==tu.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(tu.template,t)):36===r?(this.pos+=2,this.finishToken(tu.dollarBraceL)):(++this.pos,this.finishToken(tu.backQuote));if(92===r)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(iu(r)){switch(t+=this.input.slice(e,this.pos),++this.pos,r){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(r)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},hh.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(tu.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},hh.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ph(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var r=this.pos-1;return this.invalidStringToken(r,"Invalid escape sequence in template string"),null}default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],n=parseInt(i,8);return n>255&&(i=i.slice(0,-1),n=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),"0"===i&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-i.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(n)}return iu(e)?"":String.fromCharCode(e)}},hh.readHexChar=function(t){var e=this.pos,r=this.readInt(16,t);return null===r&&this.invalidStringToken(e,"Bad character escape sequence"),r},hh.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,r=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(Yc(n,i))this.pos+=n<=65535?1:2;else{if(92!==n)break;this.containsEsc=!0,t+=this.input.slice(r,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?qc:Yc)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=ph(a),r=this.pos}e=!1}return t+this.input.slice(r,this.pos)},hh.readWord=function(){var t=this.readWord1(),e=tu.name;return this.keywords.test(t)&&(e=Zc[t]),this.finishToken(e,t)};_u.acorn={Parser:_u,version:"8.0.4",defaultOptions:yu,Position:pu,SourceLocation:du,getLineInfo:fu,Node:Fu,TokenType:Gc,tokTypes:tu,keywordTypes:Zc,TokContext:Pu,tokContexts:Ru,isIdentifierChar:Yc,isIdentifierStart:qc,Token:uh,isNewLine:iu,lineBreak:eu,lineBreakG:ru,nonASCIIwhitespace:nu};const fh="Identifier",yh="Literal",mh="MemberExpression",bh="ObjectPattern",gh="Column",_h="Function",vh="Parameter";function wh(t,e,r,i){const n=r[t.type]||r.Default;if(n&&!1===n(t,e,i))return;const s=Bh[t.type];s&&s(t,e,r)}const xh=(t,e,r)=>{wh(t.argument,e,r,t)},Ih=(t,e,r)=>{wh(t.left,e,r,t),wh(t.right,e,r,t)},Sh=(t,e,r)=>{wh(t.test,e,r,t),wh(t.consequent,e,r,t),t.alternate&&wh(t.alternate,e,r,t)},Th=(t,e,r)=>{Eh(t.params,e,r),wh(t.body,e,r,t)},Ah=(t,e,r)=>{wh(t.callee,e,r,t),Eh(t.arguments,e,r)},Eh=(t,e,r)=>{t.forEach((t=>wh(t,e,r,t)))},Bh={TemplateLiteral:(t,e,r)=>{Eh(t.expressions,e,r),Eh(t.quasis,e,r)},MemberExpression:(t,e,r)=>{wh(t.object,e,r,t),wh(t.property,e,r,t)},CallExpression:Ah,NewExpression:Ah,ArrayExpression:(t,e,r)=>{Eh(t.elements,e,r)},AssignmentExpression:Ih,AwaitExpression:xh,BinaryExpression:Ih,LogicalExpression:Ih,UnaryExpression:xh,UpdateExpression:xh,ConditionalExpression:Sh,ObjectExpression:(t,e,r)=>{Eh(t.properties,e,r)},Property:(t,e,r)=>{wh(t.key,e,r,t),wh(t.value,e,r,t)},ArrowFunctionExpression:Th,FunctionExpression:Th,FunctionDeclaration:Th,VariableDeclaration:(t,e,r)=>{Eh(t.declarations,e,r)},VariableDeclarator:(t,e,r)=>{wh(t.id,e,r,t),wh(t.init,e,r,t)},SpreadElement:(t,e,r)=>{wh(t.argument,e,r,t)},BlockStatement:(t,e,r)=>{Eh(t.body,e,r)},ExpressionStatement:(t,e,r)=>{wh(t.expression,e,r,t)},IfStatement:Sh,ForStatement:(t,e,r)=>{wh(t.init,e,r,t),wh(t.test,e,r,t),wh(t.update,e,r,t),wh(t.body,e,r,t)},WhileStatement:(t,e,r)=>{wh(t.test,e,r,t),wh(t.body,e,r,t)},DoWhileStatement:(t,e,r)=>{wh(t.body,e,r,t),wh(t.test,e,r,t)},SwitchStatement:(t,e,r)=>{wh(t.discriminant,e,r,t),Eh(t.cases,e,r)},SwitchCase:(t,e,r)=>{t.test&&wh(t.test,e,r,t),Eh(t.consequent,e,r)},ReturnStatement:xh,Program:(t,e,r)=>{wh(t.body[0],e,r,t)}};function kh(t){delete t.start,delete t.end,delete t.optional}function Lh(t){kh(t),delete t.object,delete t.property,delete t.computed,t.table||delete t.table}const Ch=(t,e)=>{const r=Fh[t.type];return r?r(t,e):ac(`Unsupported expression construct: ${t.type}`)},Dh=(t,e)=>"("+Ch(t.left,e)+" "+t.operator+" "+Ch(t.right,e)+")",Mh=(t,e)=>"("+Nh(t.params,e)+")=>"+Ch(t.body,e),Oh=(t,e)=>Ch(t.callee,e)+"("+Nh(t.arguments,e)+")",Nh=(t,e,r=",")=>t.map((t=>Ch(t,e))).join(r),Fh={Column:(t,e)=>{const r=t.computed?`[${JSON.stringify(t.name)}]`:`.${t.name}`,i=t.table||"";return`data${i}${r}${`.get(${e.index}${i})`}`},Constant:t=>t.raw,Function:t=>`fn.${t.name}`,Parameter:t=>`$${t.computed?`[${JSON.stringify(t.name)}]`:`.${t.name}`}`,OpLookup:(t,e)=>{const r=!t.computed,i=(e.op||t.object.name)+(t.index||""),n=Ch(t.property,e);return i+(r?"."+n:"["+n+"]")},Literal:t=>t.raw,Identifier:t=>t.name,TemplateLiteral:(t,e)=>{const{quasis:r,expressions:i}=t,n=i.length;let s=r[0].value.raw;for(let t=0;t<n;)s+="${"+Ch(i[t],e)+"}"+r[++t].value.raw;return"`"+s+"`"},MemberExpression:(t,e)=>{const r=!t.computed,i=Ch(t.object,e),n=Ch(t.property,e);return i+(r?"."+n:"["+n+"]")},CallExpression:Oh,NewExpression:(t,e)=>"new "+Oh(t,e),ArrayExpression:(t,e)=>"["+Nh(t.elements,e)+"]",AssignmentExpression:Dh,BinaryExpression:Dh,LogicalExpression:Dh,UnaryExpression:(t,e)=>"("+t.operator+Ch(t.argument,e)+")",ConditionalExpression:(t,e)=>"("+Ch(t.test,e)+"?"+Ch(t.consequent,e)+":"+Ch(t.alternate,e)+")",ObjectExpression:(t,e)=>"({"+Nh(t.properties,e)+"})",Property:(t,e)=>Ch(t.key,e)+":"+Ch(t.value,e),ArrowFunctionExpression:Mh,FunctionExpression:Mh,FunctionDeclaration:Mh,ArrayPattern:(t,e)=>"["+Nh(t.elements,e)+"]",ObjectPattern:(t,e)=>"{"+Nh(t.properties,e)+"}",VariableDeclaration:(t,e)=>t.kind+" "+Nh(t.declarations,e,","),VariableDeclarator:(t,e)=>Ch(t.id,e)+"="+Ch(t.init,e),SpreadElement:(t,e)=>"..."+Ch(t.argument,e),BlockStatement:(t,e)=>"{"+Nh(t.body,e,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(t,e)=>Ch(t.expression,e),IfStatement:(t,e)=>"if ("+Ch(t.test,e)+")"+Ch(t.consequent,e)+(t.alternate?" else "+Ch(t.alternate,e):""),SwitchStatement:(t,e)=>"switch ("+Ch(t.discriminant,e)+") {"+Nh(t.cases,e,"")+"}",SwitchCase:(t,e)=>(t.test?"case "+Ch(t.test,e):"default")+": "+Nh(t.consequent,e,";")+";",ReturnStatement:(t,e)=>"return "+Ch(t.argument,e),Program:(t,e)=>Ch(t.body[0],e)};function Uh(t,e={index:"row"}){return Ch(t,e)}function Vh(t){const e=typeof t;return"string"===e?`"${t}"`:"object"===e&&t?lc(t)?+t:ic(t)||Tc(t)?`[${t.map(Vh)}]`:dc(t)?t+"":function(t){let e="{",r=-1;for(const i in t)++r>0&&(e+=","),e+=`"${i}":${Vh(t[i])}`;return e+="}",e}(t):t}function Ph(t,e){const r=t.length;return 1===r?(e,r)=>Vh(t[0](e,r)):(i,n)=>{let s="";for(let a=0;a<r;++a){a>0&&(s+="|");const r=t[a](i,n);if(e&&(null==r||r!=r))return null;s+=Vh(r)}return s}}function Rh(t){return"bigint"==typeof t}function jh(){}function zh(t){return t.init=t.init||jh,t.add=t.add||jh,t.rem=t.rem||jh,t}function $h(t,e){return t.product_v=!1,t.product=e}var Wh={count:{create:()=>zh({value:t=>t.count}),param:[]},values:{create:()=>zh({init:t=>t.values=!0,value:t=>t.list.values().slice()}),param:[1]},any:{create:()=>zh({add:(t,e)=>{null==t.any&&(t.any=e)},value:t=>t.valid?t.any:void 0}),param:[1]},valid:{create:()=>zh({value:t=>t.valid}),param:[1]},invalid:{create:()=>zh({value:t=>t.count-t.valid}),param:[1]},distinct:{create:()=>({init:t=>t.distinct=function(){const t=new Map;return{count:()=>t.size,values:()=>Array.from(t.values(),(t=>t.v)),increment(e){const r=Vh(e),i=t.get(r);i?++i.n:t.set(r,{v:e,n:1})},decrement(e){const r=Vh(e),i=t.get(r);1===i.n?t.delete(r):--i.n},forEach(e){t.forEach((({v:t,n:r})=>e(t,r)))}}}(),value:t=>t.distinct.count()+(t.valid===t.count?0:1),add:(t,e)=>t.distinct.increment(e),rem:(t,e)=>t.distinct.decrement(e)}),param:[1]},unique:{create:()=>zh({value:t=>t.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>zh({value:t=>{let e,r=0;return t.distinct.forEach(((t,i)=>{i>r&&(r=i,e=t)})),e}}),param:[1],req:["distinct"]},sum:{create:()=>({init:t=>t.sum=0,value:t=>t.valid?t.sum:void 0,add:(t,e)=>Rh(e)?0===t.sum?t.sum=e:t.sum+=e:t.sum+=+e,rem:(t,e)=>t.sum-=e}),param:[1]},product:{create:()=>({init:t=>$h(t,1),value:t=>t.valid?t.product_v?$h(t,function(t,e=0,r=t.length){let i=t[e++];for(let n=e;n<r;++n)i*=t[n];return i}(t.list.values())):t.product:void 0,add:(t,e)=>Rh(e)&&1===t.product?t.product=e:t.product*=e,rem:(t,e)=>0==e||e===1/0||e===-1/0?t.product_v=!0:t.product/=e}),param:[1],stream:["values"]},mean:{create:()=>({init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>{t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid},rem:(t,e)=>{t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean}}),param:[1]},average:{create:()=>zh({value:t=>t.valid?t.mean:void 0}),param:[1],req:["mean"]},variance:{create:()=>({init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean)}),param:[1],req:["mean"]},variancep:{create:()=>zh({value:t=>t.valid>1?t.dev/t.valid:void 0}),param:[1],req:["variance"]},stdev:{create:()=>zh({value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0}),param:[1],req:["variance"]},stdevp:{create:()=>zh({value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0}),param:[1],req:["variance"]},min:{create:()=>({init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.list.min():t.min,add:(t,e)=>{(e<t.min||void 0===t.min)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)}}),param:[1],stream:["values"]},max:{create:()=>({init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.list.max():t.max,add:(t,e)=>{(e>t.max||void 0===t.max)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)}}),param:[1],stream:["values"]},quantile:{create:t=>zh({value:e=>e.list.quantile(t)}),param:[1,1],req:["values"]},median:{create:()=>zh({value:t=>t.list.quantile(.5)}),param:[1],req:["values"]},covariance:{create:()=>({init:t=>{t.cov=t.mean_x=t.mean_y=t.dev_x=t.dev_y=0},value:t=>t.valid>1?t.cov/(t.valid-1):void 0,add:(t,e,r)=>{const i=e-t.mean_x,n=r-t.mean_y;t.mean_x+=i/t.valid,t.mean_y+=n/t.valid;const s=r-t.mean_y;t.dev_x+=i*(e-t.mean_x),t.dev_y+=n*s,t.cov+=i*s},rem:(t,e,r)=>{const i=e-t.mean_x,n=r-t.mean_y;t.mean_x-=t.valid?i/t.valid:t.mean_x,t.mean_y-=t.valid?n/t.valid:t.mean_y;const s=r-t.mean_y;t.dev_x-=i*(e-t.mean_x),t.dev_y-=n*s,t.cov-=i*s}}),param:[2]},covariancep:{create:()=>zh({value:t=>t.valid>1?t.cov/t.valid:void 0}),param:[2],req:["covariance"]},corr:{create:()=>zh({value:t=>t.valid>1?t.cov/(Math.sqrt(t.dev_x)*Math.sqrt(t.dev_y)):void 0}),param:[2],req:["covariance"]},bins:{create:(t,e,r)=>zh({value:i=>function(t,e,r=15,i=!0,n=0){const s=[5,2],a=Math.LN10,o=Math.ceil(Math.log(r)/a),c=e-t||Math.abs(t)||1;let u=Math.max(n,Math.pow(10,Math.round(Math.log(c)/a)-o));for(;Math.ceil(c/u)>r;)u*=10;const h=s.length;for(let t=0;t<h;++t){const e=u/s[t];e>=n&&c/e<=r&&(u=e)}if(i){let r=Math.log(u);const i=r>=0?0:1+~~(-r/a),n=Math.pow(10,-i-1);r=Math.floor(t/u+n)*u,t=t<r?r-u:r,e=Math.ceil(e/u)*u}return[t,e===t?t+u:e,u]}(i.min,i.max,t,e,r)}),param:[1,3],req:["min","max"]}};function Hh(t){return null!=t&&t==t}const qh={create(){let t;return{init:()=>t=1,value:e=>{const r=e.index;return r&&!e.peer(r)?t=r+1:t}}},param:[]},Yh={create(){let t;return{init:()=>t=0,value:e=>{const{index:r,peer:i,size:n}=e;let s=r;if(t<s){for(;s+1<n&&i(s+1);)++s;t=s}return(1+t)/n}}},param:[]};var Gh={row_number:{create:()=>({init:jh,value:t=>t.index+1}),param:[]},rank:qh,avg_rank:{create(){let t,e;return{init:()=>(t=-1,e=1),value:r=>{const i=r.index;if(i>=t){for(e=t=i+1;r.peer(t);e+=++t);e/=t-i}return e}}},param:[]},dense_rank:{create(){let t;return{init:()=>t=1,value:e=>{const r=e.index;return r&&!e.peer(r)?++t:t}}},param:[]},percent_rank:{create(){const{init:t,value:e}=qh.create();return{init:t,value:t=>(e(t)-1)/(t.size-1)}},param:[]},cume_dist:Yh,ntile:{create(t){(t=+t)>0||ac("ntile num must be greater than zero.");const{init:e,value:r}=Yh.create();return{init:e,value:e=>Math.ceil(t*r(e))}},param:[0,1]},lag:{create:(t,e)=>(t=+t||1,{init:jh,value:(r,i)=>{const n=r.index-t;return n>=0?r.value(n,i):e}}),param:[1,2]},lead:{create:(t,e)=>(t=+t||1,{init:jh,value:(r,i)=>{const n=r.index+t;return n<r.size?r.value(n,i):e}}),param:[1,2]},first_value:{create:()=>({init:jh,value:(t,e)=>t.value(t.i0,e)}),param:[1]},last_value:{create:()=>({init:jh,value:(t,e)=>t.value(t.i1-1,e)}),param:[1]},nth_value:{create:t=>((t=+t)>0||ac("nth_value nth must be greater than zero."),{init:jh,value:(e,r)=>{const i=e.i0+(t-1);return i<e.i1?e.value(i,r):void 0}}),param:[1,1]},fill_down:{create(t){let e;return{init:()=>e=t,value:(t,r)=>{const i=t.value(t.index,r);return Hh(i)?e=i:e}}},param:[1,1]},fill_up:{create(t){let e,r;return{init:()=>(e=t,r=-1),value:(i,n)=>i.index<=r?e:(r=function(t,e,r){for(const i=t.size;r<i;++r)if(Hh(t.value(r,e)))return r;return-1}(i,n,i.index))>=0?e=i.value(r,n):(r=i.size,e=t)}},param:[1,1]}};function Kh(t){return ic(t)||Tc(t)}const Jh=t=>Kh(t)?t:null,Qh=t=>Kh(t)||fc(t)?t:null;var Zh={concat:(...t)=>[].concat(...t),includes:(t,e,r)=>Qh(t).includes(e,r),indexof:(t,e)=>Qh(t).indexOf(e),join:(t,e)=>Jh(t).join(e),lastindexof:(t,e)=>Qh(t).lastIndexOf(e),length:t=>t.length,pluck:(t,e)=>Jh(t).map((t=>Hh(t)?t[e]:void 0)),reverse:t=>Jh(t).slice().reverse(),slice:(t,e,r)=>Qh(t).slice(e,r)};const Xh=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/,tl=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function el(t,e=Date.parse){const r=t.match(Xh);return r&&(tl&&r[4]&&!r[7]&&(t=t.replace(/-/g,"/").replace(/T/," ")),t=e(t)),t}const rl=864e5,il=6048e5,nl=new Date,sl=new Date,al=t=>(nl.setTime("string"==typeof t?el(t):t),nl);var ol={format_date:(t,e)=>Ic(al(t),!e),format_utcdate:(t,e)=>Sc(al(t),!e),timestamp:t=>+al(t),year:t=>al(t).getFullYear(),quarter:t=>Math.floor(al(t).getMonth()/3),month:t=>al(t).getMonth(),date:t=>al(t).getDate(),dayofweek:t=>al(t).getDay(),hours:t=>al(t).getHours(),minutes:t=>al(t).getMinutes(),seconds:t=>al(t).getSeconds(),milliseconds:t=>al(t).getMilliseconds(),utcyear:t=>al(t).getUTCFullYear(),utcquarter:t=>Math.floor(al(t).getUTCMonth()/3),utcmonth:t=>al(t).getUTCMonth(),utcdate:t=>al(t).getUTCDate(),utcdayofweek:t=>al(t).getUTCDay(),utchours:t=>al(t).getUTCHours(),utcminutes:t=>al(t).getUTCMinutes(),utcseconds:t=>al(t).getUTCSeconds(),utcmilliseconds:t=>al(t).getUTCMilliseconds(),datetime:function(t,e,r,i,n,s,a){return arguments.length?new Date(t,e||0,null==r?1:r,i||0,n||0,s||0,a||0):new Date(Date.now())},dayofyear:function(t){sl.setTime(+t),sl.setHours(0,0,0,0),nl.setTime(+sl),nl.setMonth(0),nl.setDate(1);const e=6e4*(sl.getTimezoneOffset()-nl.getTimezoneOffset());return Math.floor(1+(sl-nl-e)/rl)},week:function(t,e){const r=e||0;sl.setTime(+t),sl.setDate(sl.getDate()-(sl.getDay()+7-r)%7),sl.setHours(0,0,0,0),nl.setTime(+t),nl.setMonth(0),nl.setDate(1),nl.setDate(1-(nl.getDay()+7-r)%7),nl.setHours(0,0,0,0);const i=6e4*(sl.getTimezoneOffset()-nl.getTimezoneOffset());return Math.floor((sl-nl+1-i)/il)},utcdatetime:function(t,e,r,i,n,s,a){return arguments.length?new Date(Date.UTC(t,e||0,null==r?1:r,i||0,n||0,s||0,a||0)):new Date(Date.now())},utcdayofyear:function(t){sl.setTime(+t),sl.setUTCHours(0,0,0,0);const e=Date.UTC(sl.getUTCFullYear(),0,1);return Math.floor(1+(sl-e)/rl)},utcweek:function(t,e){const r=e||0;return sl.setTime(+t),sl.setUTCDate(sl.getUTCDate()-(sl.getUTCDay()+7-r)%7),sl.setUTCHours(0,0,0,0),nl.setTime(+t),nl.setUTCMonth(0),nl.setUTCDate(1),nl.setUTCDate(1-(nl.getUTCDay()+7-r)%7),nl.setUTCHours(0,0,0,0),Math.floor((sl-nl+1)/il)},now:Date.now};function cl(t,e){return null!=t&&null!=e&&t==t&&e==e&&(t===e||(lc(t)||lc(e)?+t==+e:dc(t)&&dc(e)?t+""==e+"":!(!pc(t)||!pc(e))&&function(t,e){if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;if(t.length||e.length)return ul(t,e);const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(r.sort(),i.sort(),!ul(r,i,((t,e)=>t===e)))return!1;const n=r.length;for(let i=0;i<n;++i){const n=r[i];if(!cl(t[n],e[n]))return!1}return!0}(t,e)))}function ul(t,e,r=cl){const i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;++n)if(!r(t[n],e[n]))return!1;return!0}let hl=Math.random;function ll(){return hl()}var pl={random:ll,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,max:Math.max,min:Math.min,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:t=>180*t/Math.PI,radians:t=>Math.PI*t/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};const{hasOwnProperty:dl}=Object.prototype;function fl(t,e){return dl.call(t,e)}var yl={bin:function(t,e,r,i,n){return null==t?null:t<e?-1/0:t>r?1/0:(t=Math.max(e,Math.min(t,r)),e+i*Math.floor(1e-14+(t-e)/i+(n||0)))},equal:cl,recode:function(t,e,r){if(e instanceof Map){if(e.has(t))return e.get(t)}else if(fl(e,t))return e[t];return void 0!==r?r:t},sequence:function(t,e,r){let i=arguments.length;t=+t,e=+e,r=i<2?(e=t,t=0,1):i<3?1:+r,i=0|Math.max(0,Math.ceil((e-t)/r));const n=new Array(i);for(let e=0;e<i;++e)n[e]=t+e*r;return n},...Zh,...ol,...pl,...{has:(t,e)=>fl(t,e),keys:t=>Object.keys(t),values:t=>Object.values(t)},...{parse_date:t=>new Date(t),parse_float:t=>Number.parseFloat(t),parse_int:(t,e)=>Number.parseInt(t,e),endswith:(t,e,r)=>String(t).endsWith(e,r),match:(t,e,r)=>{const i=String(t).match(e);return null==r||null==i?i:"number"==typeof r?i[r]:i.groups?i.groups[r]:null},normalize:(t,e)=>String(t).normalize(e),padend:(t,e,r)=>String(t).padEnd(e,r),padstart:(t,e,r)=>String(t).padStart(e,r),upper:t=>String(t).toUpperCase(),lower:t=>String(t).toLowerCase(),repeat:(t,e)=>String(t).repeat(e),replace:(t,e,r)=>String(t).replace(e,String(r)),substring:(t,e,r)=>String(t).substring(e,r),split:(t,e,r)=>String(t).split(e,r),startswith:(t,e,r)=>String(t).startsWith(e,r),trim:t=>String(t).trim()}};function ml(t){return fl(Wh,t)}function bl(t){return fl(Gh,t)}function gl(t){return ml(t)&&Wh[t]}function _l(t){return bl(t)&&Gh[t]}function vl(t){return fl(yl,t)&&yl[t]}function wl(t,e){return t=`"use strict"; return ${t};`,Function("fn","$",t)(yl,e)}var xl={expr:(t,e)=>wl(`(row,data,op)=>${t}`,e),expr2:(t,e)=>wl(`(row0,data0,row,data)=>${t}`,e),join:(t,e)=>wl(`(row1,data1,row2,data2)=>${t}`,e),param:(t,e)=>wl(t,e)},Il={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"};function Sl(t){return ic(t)?t:function(t){return t instanceof Map}(t)?t.entries():t?Object.entries(t):[]}const Tl={ecmaVersion:11},Al=t=>(e,r)=>r.error(t+" not allowed",e),El=Al("Aggregate function"),Bl=Al("Aggregate function"),kl="Invalid column reference",Ll="Invalid function call",Cl="Invalid operator parameter",Dl=(t,e)=>e&&e.type===t;function Ml(t,e={}){const r=e.generate||Uh,i=e.compiler||xl,n=Ol(e),s={},a={},o=[],c=[];let u=0,h=-1;const l=e.join?i.join:1==e.index?i.expr2:i.expr,p={op(t){const e=`${t.name}(${t.fields.concat(t.params).join(",")})`;return a[e]||(t.id=++h,a[e]=t)},field(t){const e=r(t);return s[e]||(s[e]=++u)},param:t=>Dl(yh,t)?t.value:i.param(r(t),n),value(t,i){o.push(t),c.push(e.ast?function(t){return wh(t,null,{Column:Lh,Constant:Lh,Default:kh}),t}(i):l(r(i),n))},error(t,e){const r=e.start-6,i=e.end-6;ac(`${t}: "${String(p.spec).slice(r,i)}"`)}};Object.assign(p,e,{params:n});for(const[e,r]of Sl(t))Gl(p,e+"",r);if(e.ast)return{names:o,exprs:c};const d=[];for(const t in s)d[s[t]]=i.expr(t,n);const f=Object.values(a);return f.forEach((t=>t.fields=t.fields.map((t=>d[t])))),{names:o,exprs:c,ops:f}}const Ol=t=>(t.table?Nl(t.table):t.join?{...Nl(t.join[1]),...Nl(t.join[0])}:{})||{},Nl=t=>t&&oc(t.params)?t.params():{},Fl=(t,e)=>Dl(fh,e)?e.name:Dl(mh,e)?e.property.name:null;function Ul(t,e,r){const{name:i}=t;if(Dl(mh,r)&&r.property===t);else if(Dl("Property",r)&&r.key===t);else if(e.paramsRef.has(i))jl(t,e.paramsRef.get(i));else if(e.columnRef.has(i))Pl(t,i,e);else if(fl(e.params,i))jl(t,i);else{if(!fl(Il,i))return!0;zl(t,i)}}function Vl(t,e,r,i){const n=0===r?i.table:r>0?i.join[r-1]:null;n&&!n.column(e)&&i.error(kl,t),i.aggronly&&!i.$op&&(i.$op||i.error("Invalid column reference (must be input to an aggregate function)",t))}function Pl(t,e,r){const[i,n]=r.columnRef.get(e);Vl(t,i,n,r),t.type=gh,t.name=i,t.table=n}function Rl(t,e,r,i){i.params&&!fl(i.params,e)&&i.error("Invalid param reference",t)}function jl(t,e){t.type=vh,t.name=e}function zl(t,e){t.type="Constant",t.name=e,t.raw=Il[e]}function $l(t,e){Dl(fh,t)?e.scope.add(t.name):Dl("ArrayPattern",t)?t.elements.forEach((t=>$l(t,e))):Dl(bh,t)?t.properties.forEach((t=>$l(t.value,e))):e.error("Unsupported variable declaration",t.id)}const Wl={FunctionDeclaration:Al("Function definitions"),ForStatement:Al("For loops"),ForOfStatement:Al("For-of loops"),ForInStatement:Al("For-in loops"),WhileStatement:Al("While loops"),DoWhileStatement:Al("Do-while loops"),AwaitExpression:Al("Await expressions"),ArrowFunctionExpression:Al("Function definitions"),AssignmentExpression:Al("Assignments"),FunctionExpression:Al("Function definitions"),NewExpression:Al('Use of "new"'),UpdateExpression:Al("Update expressions"),VariableDeclarator(t,e){$l(t.id,e)},Identifier(t,e,r){Ul(t,e,r)&&!e.scope.has(t.name)&&e.error("Invalid variable reference",t)},CallExpression(t,e){const r=Fl(0,t.callee),i=gl(r)||_l(r);if(i){if((e.join||!1===e.aggregate)&&ml(i)&&El(t,e),(e.join||!1===e.window)&&bl(i)&&Bl(t,e),e.$op=1,e.ast)t.callee={type:_h,name:r},t.arguments.forEach((t=>wh(t,e,ql)));else{const n=e.op(function(t,e,r,i){const n=[],s=[],a=e.param[0]||0,o=a+(e.param[1]||0);return i.forEach(((e,r)=>{r<a?(wh(e,t,ql),n.push(t.field(e))):r<o?(wh(e,t,ql),s.push(t.param(e))):t.error(Cl,e)})),{name:r,fields:n,params:s,...t.spec.window||{}}}(e,i,r,t.arguments));Object.assign(t,{type:"OpLookup",computed:!0,object:{type:fh,name:"op"},property:{type:yh,raw:n.id}})}return e.$op=0,!1}vl(r)?t.callee={type:_h,name:r}:e.error(Ll,t)},MemberExpression(t,e){const{object:r,property:i}=t;if(!Dl(fh,r))return;const{name:n}=r;if("Math"===n&&Dl(fh,i)&&fl(Il,i.name))return void zl(t,i.name);const s=n===e.tuple?0:n===e.tuple1?1:n===e.tuple2?2:-1;return s>=0?Hl(t,{type:gh,table:s},e,Vl):n===e.$param?Hl(t,{type:vh},e,Rl):void(e.paramsRef.has(n)?jl(t,e.paramsRef.get(n)):e.columnRef.has(n)?Pl(r,n,e):fl(e.params,n)&&jl(r,n))}};function Hl(t,e,r,i){const{property:n}=t,s=Dl(fh,n)?{name:n.name}:Dl(yh,n)?{name:n.value,computed:!0}:r.error("Invalid member expression",t);return i(t,s.name,e.table,r),Object.assign(t,e,s),!1}const ql={...Wl,VariableDeclarator:Al("Variable declaration in operator call"),Identifier(t,e,r){Ul(t,e,r)&&e.error("Variable not accessible in operator call",t)},CallExpression(t,e){const r=Fl(0,t.callee);vl(r)?t.callee={type:_h,name:r}:e.error(Ll,t)}};function Yl(t){try{const i=t.field?(t=>{const e=JSON.stringify(t+"");return t.table?`(a,b)=>b[${e}]`:`d=>d[${e}]`})(t):t;return(e=`expr=(${i})`,r=Tl,_u.parse(e,r)).body[0].expression.right}catch(e){ac("Expression parse error: "+(t+""))}var e,r}function Gl(t,e,r){const i=Yl(r);let n=t.root=i;t.spec=r,t.tuple=null,t.tuple1=null,t.tuple2=null,t.$param=null,t.$op=0,t.scope=new Set,t.paramsRef=new Map,t.columnRef=new Map,(t=>Dl("FunctionExpression",t)||Dl("ArrowFunctionExpression",t))(n)?(!function(t,e){t.generator&&Al("Generator functions")(t,e);t.async&&Al("Async functions")(t,e);const{params:r}=t,i=r.length,n=t=>(r,i)=>e.columnRef.set(r,[i,t]),s=(t,r)=>e.paramsRef.set(t,r);i&&(e.join?(Kl(e,r[0],"tuple1",n(1)),i>1&&Kl(e,r[1],"tuple2",n(2)),i>2&&Kl(e,r[2],"$param",s)):(Kl(e,r[0],"tuple",n(0)),i>1&&Kl(e,r[1],"$param",s)));e.root=t.body}(n,t),n=n.body):t.join?(t.scope.add(t.tuple1="d1"),t.scope.add(t.tuple2="d2"),t.scope.add(t.$param="$")):(t.scope.add(t.tuple="d"),t.scope.add(t.$param="$")),wh(n,t,Wl),t.value(e,t.root)}function Kl(t,e,r,i){Dl(fh,e)?(t.scope.add(e.name),t[r]=e.name):Dl(bh,e)&&e.properties.forEach((e=>{const r=Dl(fh,e.key)?e.key.name:Dl(yh,e.key)?e.key.value:t.error("Invalid argument",e);Dl(fh,e.value)||t.error("Unsupported destructuring pattern",e.value),i(e.value.name,r)}))}const Jl="Expr",Ql="ExprList",Zl="ExprNumber",Xl="ExprObject",tp="JoinKeys",ep="JoinValues",rp="Options",ip="OrderKeys",np="SelectionList",sp="TableRef",ap="TableRefList";function op(t){return t?new cp({...t.data()},t.columnNames()):new cp}class cp{constructor(t,e){this.data=t||{},this.names=e||[]}add(t,e){return this.has(t)||this.names.push(t+""),this.data[t]=e}has(t){return fl(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}function up(t,e){const r=op();return e.forEach(((e,i)=>{const n=fc(e)?e:i;if(n){const e=t.column(i)||ac(`Unrecognized column: ${i}`);r.add(n,e)}})),t.create(r)}function hp(t,e){for(const[r,i]of Sl(e))t.set(r,i);return t}function lp(t){return t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function pp(t){return"number"==typeof t}function dp(t){return void 0===t?t+"":Rh(t)?t+"n":JSON.stringify(t)}function fp(t,e,r=new Map){return fc(e=pp(e)?t.columnName(e):e)?r.set(e,e):ic(e)?e.forEach((e=>fp(t,e,r))):oc(e)?fp(t,e(t),r):pc(e)?hp(r,e):ac(`Invalid column selection: ${dp(e)}`),r}function yp(t,e){return t.toObject=e,t}function mp(t){return ic(t)?t.map(mp):t&&t.toObject?t.toObject():t}function bp(){return yp((t=>t.columnNames()),(()=>({all:[]})))}function gp(...t){return t=t.flat(),yp((e=>{const r=fp(e,t);return e.columnNames((t=>!r.has(t)))}),(()=>({not:mp(t)})))}function _p(t,e){return yp((r=>{let i=pp(t)?t:r.columnIndex(t),n=pp(e)?e:r.columnIndex(e);if(n<i){const t=n;n=i,i=t}return r.columnNames().slice(i,n+1)}),(()=>({range:[t,e]})))}function vp(t){return fc(t)&&(t=RegExp(lp(t))),yp((e=>e.columnNames((e=>t.test(e)))),(()=>({matches:[t.source,t.flags]})))}function wp(t,e,{before:r,after:i}={}){const n=null!=r,s=null!=i;n||s||ac("relocate requires a before or after option."),n&&s&&ac("relocate accepts only one of the before or after options."),e=fp(t,e);const a=[...fp(t,n?r:i).keys()],o=n?a[0]:a.pop(),c=new Map;return t.columnNames().forEach((t=>{const r=!e.has(t);if(t===o){s&&r&&c.set(t,t);for(const[t,r]of e)c.set(t,r);if(s)return}r&&c.set(t,t)})),up(t,c)}function xp(t,e=(t=>t),r=""){const i=t.length;if(!i)return"";let n=e(t[0],0);for(let s=1;s<i;++s)n+=r+e(t[s],s);return n}function Ip(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Sp(t){return Rh(t)?t:+t}class Tp{constructor(t){this.values(t||[])}values(t){if(!arguments.length)return this._start&&(this._values=this._values.slice(this._start),this._start=0),this._values;this._values=t,this._sorted=null,this._start=0}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted?this._sorted[0]:function(t,e=0,r=t.length){let i=t[e++];for(let n=e;n<r;++n)i>t[n]&&(i=t[n]);return i}(this._values,this._start)}max(){return this._sorted?this._sorted[this._sorted.length-1]:function(t,e=0,r=t.length){let i=t[e++];for(let n=e;n<r;++n)i<t[n]&&(i=t[n]);return i}(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values().slice(),this._sorted.sort(Ip)),function(t,e){const r=t.length;if(!r)return;if((e=+e)<=0||r<2)return Sp(t[0]);if(e>=1)return Sp(t[r-1]);const i=(r-1)*e,n=Math.floor(i),s=Sp(t[n]);return Rh(s)?s:s+(Sp(t[n+1])-s)*(i-n)}(this._sorted,t)}}const Ap=(t,e,r)=>Cc(t,e,"{"+xp(t,((t,i)=>`_${i}.${r}(${e});`))+"}");function Ep(t,e){const{ops:r,output:i}=function(t,e){const r={},i=[];function n(t,s=[]){const a=t+":"+s;if(r[a])return r[a];const o=gl(t),c=o.create(...s);return e&&o.stream&&o.stream.forEach((t=>n(t,[]))),o.req&&o.req.forEach((t=>n(t,[]))),r[a]=c,i.push(c),c}const s=t.map((t=>{const e=n(t.name,t.params);return e.output=t.id,e}));return{ops:i,output:s}}(t,e),n=t[0].fields,s=n.length;return new(0===s?Bp:1===s?kp:2===s?Lp:ac("Unsupported field count: "+s))(n,r,i)}class Bp extends Oc{constructor(t,e,r){super(r),this._op=e,this._fields=t}init(){const t={count:0,valid:0};return this._op.forEach((e=>e.init(t))),t.values&&(t.list=new Tp),t}writeToArrays(t,e,r){const i=this._outputs,n=i.length;for(let s=0;s<n;++s)e[i[s].output][r]=i[s].value(t);return 1}writeToObject(t,e){const r=this._outputs,i=r.length;for(let n=0;n<i;++n)e[r[n].output]=r[n].value(t);return 1}_add(){}add(t){++t.count}rem(t){--t.count}}class kp extends Bp{constructor(t,e,r){super(t,e,r);const i=["state","v1","v2"];this._add=Ap(e,i,"add"),this._rem=Ap(e,i,"rem")}add(t,e,r){const i=this._fields[0](e,r);++t.count,Hh(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,e,r){const i=this._fields[0](e,r);--t.count,Hh(i)&&(--t.valid,t.list&&t.list.rem(i),this._rem(t,i))}}class Lp extends Bp{constructor(t,e,r){super(t,e,r);const i=["state","v1","v2"];this._add=Ap(e,i,"add"),this._rem=Ap(e,i,"rem")}add(t,e,r){const i=this._fields[0](e,r),n=this._fields[1](e,r);++t.count,Hh(i)&&Hh(n)&&(++t.valid,this._add(t,i,n))}rem(t,e,r){const i=this._fields[0](e,r),n=this._fields[1](e,r);--t.count,Hh(i)&&Hh(n)&&(--t.valid,this._rem(t,i,n))}}function Cp(t,e,r){if(e.length){const i=Dp(t,e),n=t.isGrouped()?t.groups().keys:null,s=t.data();r=n?r.map((t=>e=>t(e,s,i[n[e]]))):r.map((t=>e=>t(e,s,i)))}return r}function Dp(t,e){if(!e.length)return;const r=Mp(e);if(t.isGrouped()){const e=t.groups(),{size:i}=e,n=cc(i,(()=>({})));return r.forEach((r=>{const s=Np(t,r,e);for(let t=0;t<i;++t)r.writeToObject(s[t],n[t])})),n}{const e=[];return r.forEach((r=>{const i=Op(t,r);r.writeToObject(i,e)})),e}}function Mp(t,e){const r=[],i={};for(const e of t){const t=e.fields.map((t=>t+"")).join(",");(i[t]||(i[t]=[])).push(e)}for(const t in i)r.push(Ep(i[t],e));return r}function Op(t,e){const r=e.init();return t.scan(((t,i)=>e.add(r,t,i))),r}function Np(t,e,r){const{keys:i,size:n}=r,s=cc(n,(()=>e.init()));return t.scan(((t,r)=>e.add(s[i[t]],t,r))),s}function Fp(t,e){const{names:r,size:i}=e.groups();return r.forEach((e=>t.add(e,Array(i)))),new Uint32Array(i+1)}function Up(t,e,r){const{get:i,names:n,rows:s,size:a}=e.groups(),o=e.data();n.forEach(((e,n)=>{const c=t[e],u=i[n];for(let t=0,e=0;t<a;++t){const i=u(s[t],o),n=r[t+1];for(let t=0;t<n;++t)c[e++]=i}}))}function Vp(t,e,r,i){return Function("_","$",'"use strict"; const '+t.map(((t,e)=>`_${e} = _[${e}]`)).join(", ")+"; const "+e.map(((t,e)=>`$${e} = $[${e}]`)).join(", ")+`; return (${r}) => ${i};`)(t,e)}function Pp(t){return{left(e,r,i,n){for(null==i&&(i=0),null==n&&(n=e.length);i<n;){var s=i+n>>>1;t(e[s],r)<0?i=s+1:n=s}return i},right(e,r,i,n){for(null==i&&(i=0),null==n&&(n=e.length);i<n;){var s=i+n>>>1;t(e[s],r)>0?n=s:i=s+1}return i}}}const Rp=Pp(Ip);function jp(t,e,r,i=[],n){const s=t.data(),a=function(t,e){const r={};return t.forEach((t=>{const e=(t=>(t.frame||[null,null]).map((t=>Number.isFinite(t)?t:null)))(t),i=(t=>!!t.peers)(t),n=`${e},${i}`,{aggOps:s,winOps:a}=r[n]||(r[n]={frame:e,peers:i,aggOps:[],winOps:[]});ml(t.name)?s.push(t):a.push(function(t){const{id:e,name:r,fields:i=[],params:n=[]}=t,s=_l(r).create(...n);return i.length&&(s.get=i[0]),s.name=e,s}(t))})),Object.values(r).map((t=>function(t,e,r,i,n){let s,a,o,c;const u=t=>a[t-1]===a[t],h=i.length,l=n.length,p=i.length?Cc(i,["w","r"],"{"+xp(i,((t,e)=>`r[_${e}.name]=_${e}.value(w,_${e}.get);`))+"}"):()=>{},d={i0:0,i1:0,index:0,size:0,peer:u,init(t,e,r){d.index=d.i0=d.i1=0,d.size=e.length,s=t,a=e,c=r,o=n?n.map((t=>t.init())):null;for(let t=0;t<h;++t)i[t].init();return d},value:(e,r)=>r(s[e],t),step(i){const[h,f]=e,y=d.size,m=d.i0,b=d.i1;d.i0=null!=h?Math.max(0,i-Math.abs(h)):0,d.i1=null!=f?Math.min(y,i+Math.abs(f)+1):y,d.index=i,r&&(d.i0>0&&u(d.i0)&&(d.i0=Rp.left(a,a[d.i0])),d.i1<y&&u(d.i1)&&(d.i1=Rp.right(a,a[d.i1-1])));for(let e=0;e<l;++e){const r=n[e],i=o[e];for(let e=m;e<d.i0;++e)r.rem(i,s[e],t);for(let e=b;e<d.i1;++e)r.add(i,s[e],t);r.writeToObject(i,c)}return p(d,c),c}};return d}(e,t.frame,t.peers,t.winOps,Mp(t.aggOps,null!=t.frame[0]))))}(n,s),o=a.length,c=Vp(e,r,["r","input","result"],"{"+xp(e,((t,e)=>`_${e}[r] = $${e}(r, input, result);`))+"}");t.partitions().forEach(((e,r)=>{const n=e.length,u=function(t,e){if(t.isOrdered()){const r=t.comparator(),i=t.data(),n=e.length,s=new Uint32Array(n);for(let t=1,a=0;t<n;++t)s[t]=r(e[t-1],e[t],i)?++a:a;return s}return e}(t,e),h=i[r]||{};for(let t=0;t<o;++t)a[t].init(e,u,h);for(let t=0;t<n;++t){for(let e=0;e<o;++e)a[e].step(t);c(e[t],s,h)}}))}function zp(t){return bl(t.name)||t.frame&&(Number.isFinite(t.frame[0])||Number.isFinite(t.frame[1]))}function $p(t,{names:e,exprs:r,ops:i},n={}){const s=t.totalRows(),a=op(n.drop?null:t),o=e.map((t=>a.add(t,Array(s)))),[c,u]=function(t){const e=[],r=[],i=t.length;for(let n=0;n<i;++n){const i=t[n];i.id=n,(zp(i)?r:e).push(i)}return[e,r]}(i),h=Dp(t,c);return u.length?jp(t,o,r,t.isGrouped()?h:[h],u):function(t,e,r,i={}){const n=t.groups(),s=e.length;if(n){const{keys:a}=n;for(let n=0;n<s;++n){const s=r[n],o=e[n];t.scan(((t,e)=>o[t]=s(t,e,i[a[t]])))}}else for(let n=0;n<s;++n){const s=r[n],a=e[n];t.scan(((t,e)=>a[t]=s(t,e,i)))}}(t,o,r,h),t.create(a)}const Wp=2147483648;class Hp{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let e=0;for(let r=0;r<t;++r)for(let t=this._bits[r];t;++e)t&=t-1;return e}get(t){return this._bits[t>>5]&Wp>>>t}set(t){this._bits[t>>5]|=Wp>>>t}clear(t){this._bits[t>>5]&=~(Wp>>>t)}scan(t){for(let e=this.next(0);e>=0;e=this.next(e+1))t(e)}next(t){const e=this._bits,r=e.length;let i=t>>5,n=e[i]&4294967295>>>t;for(;i<r;n=e[++i])if(0!==n)return 32*i+Math.clz32(n);return-1}nth(t){let e=this.next(0);for(;t--&&e>=0;)e=this.next(e+1);return e}not(){const t=this._bits,e=t.length;for(let r=0;r<e;++r)t[r]=~t[r];const r=this._size%32;return r&&(t[e-1]&=Wp>>r-1),this}and(t){const e=this._bits,r=t._bits,i=new Hp(Math.min(this.length,t.length)),n=i._bits,s=n.length;for(let t=0;t<s;++t)n[t]=e[t]&r[t];return i}or(t){const e=this._bits,r=t._bits,i=new Hp(Math.max(this.length,t.length)),n=i._bits,s=n.length;for(let t=0;t<s;++t)n[t]=e[t]|r[t];return i}}function qp(t,{names:e=[],exprs:r=[],ops:i=[]},n={}){if(!e.length)return t;const s=n.limit>0?+n.limit:1/0,a=n.index?!0===n.index?"index":n.index+"":null,o=new Set(n.drop),c=Cp(t,i,r),u=op(),h=new Set(e),l=[],p=[],d=[];t.columnNames().forEach((e=>{if(!o.has(e)){const r=u.add(e,[]);h.has(e)||(l.push(t.column(e)),p.push(r))}})),e.forEach((t=>{o.has(t)||(u.has(t)||u.add(t,[]),d.push(u.data[t]))}));const f=a?u.add(a,[]):null;let y=0;const m=l.length,b=d.length,g=(t,e)=>{for(let r=0;r<m;++r)p[r].length=y+e,p[r].fill(l[r].get(t),y,y+e)},_=f?(t,e)=>{for(let r=0;r<e;++r)f[t+r]=r}:()=>{};if(1===b){const e=c[0],r=d[0];t.scan(((t,i)=>{const n=nc(e(t,i)),a=Math.min(n.length,s);g(t,a);for(let t=0;t<a;++t)r[y+t]=n[t];_(y,a),y+=a}))}else t.scan(((t,e)=>{let r=0;const i=c.map((i=>{const n=nc(i(t,e));return r=Math.min(Math.max(r,n.length),s),n}));g(t,r);for(let t=0;t<b;++t){const e=d[t],n=i[t];for(let t=0;t<r;++t)e[y+t]=n[t]}_(y,r),y+=r}));return t.create(u.new())}function Yp(t,e){return t&&t.expr?new Gp({...t,...e}):new Gp(e,t)}class Gp{constructor(t,e){this.expr=e,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...oc(this.expr)?{func:!0}:{}}}}function Kp(t,e,r=0){const i=r?{field:!0,table:r}:{field:!0};return Yp(t,e?{expr:e,...i}:i)}function Jp(t,e,r,i={window:!1}){const n=new Map,s=r=>{fc(r=pp(r)?e.columnName(r):r)?n.set(r,Kp(r)):oc(r)?fp(e,r).forEach(s):pc(r)?hp(n,r):ac(`Invalid ${t} value: ${r+""}`)};return nc(r).forEach(s),i.preparse&&i.preparse(n),Ml(n,{table:e,...i})}function Qp(t,e,r,i){const n=r&&r.length;return function(t,{names:e,exprs:r,ops:i},n){const s=Cp(t,i,r),a=n?null:op(t),o=t.totalRows();return e.forEach(((e,r)=>{const i=t.column(e),c=n?i.data:a.add(e,Array(o)),u=s[r];t.scan((t=>{const e=i.get(t);c[t]=Hh(e)?e:u(t)}))})),n?t:t.create(a)}(n?function(t,e,r){const i=t.groups(),n=t.data(),s=(i?i.names:[]).concat(e),a=(i?i.get:[]).concat(e.map((e=>t.getter(e)))),o=new Set,c=Ph(a);t.scan(((t,e)=>o.add(c(t,e))));const u=t.columnNames(),h=op(),l=u.map((t=>h.add(t,[])));u.forEach(((e,r)=>{const i=n[e],s=l[r];t.scan((t=>s.push(i.get(t))))}));const p=Ph(a.map(((t,e)=>t=>t[e]))),d=Vp(l,u.map((t=>s.indexOf(t))),"v","{"+l.map(((t,e)=>`_${e}.push(v[$${e}]);`)).join("")+"}");if(i){let t=i.keys.length;const e=r.reduce(((t,e)=>t*e.length),i.size),n=new Uint32Array(e+(t-o.size));n.set(i.keys),Zp(i,r,((e,r)=>{o.has(p(e))||(d(e),n[t++]=r[0])})),h.groupby({...i,keys:n})}else Zp(i,r,(t=>{o.has(p(t))||d(t)}));return t.create(h.new())}(t,r,i):t,e,n)}function Zp(t,e,r){const i=t?t.get.length:0,n=t?1:0,s=n+e.length,a=new Int32Array(s),o=new Int32Array(s),c=[];if(t){const{get:e,rows:r,size:n}=t;a[0]=n,c.push(((t,n)=>{const s=r[n];for(let r=0;r<i;++r)t[r]=e[r](s)}))}e.forEach(((t,e)=>{const r=e+i;a[e+n]=t.length,c.push(((e,i)=>e[r]=t[i]))}));const u=Array(i+e.length);for(let t=0;t<s;++t)c[t](u,0);r(u,o);for(let t=s-1;t>=0;){const e=++o[t];e<a[t]?(c[t](u,e),r(u,o),t=s-1):(o[t]=0,c[t](u,0),--t)}}function Xp(t,{names:e,exprs:r,ops:i}){const n=op(),s=t.isGrouped();return s&&Up(n.data,t,Fp(n,t).fill(1)),function(t,e,r,i=[],n){const s=r?i.length:1,a=t.length;if(r)for(let r=0;r<a;++r){const a=e[r],o=Array(s);for(let t=0;t<s;++t)o[t]=a(t,null,i[t]);n.add(t[r],o)}else for(let r=0;r<a;++r){const s=e[r];n.add(t[r],[s(0,null,i)])}}(e,r,s,Dp(t,i),n),t.create(n.new())}function td(t,e=[],r=[]){return new ed(t,nc(e),nc(r))}class ed{constructor(t,e,r){this.name=t,this.fields=e,this.params=r}toString(){const t=[...this.fields.map((t=>`d[${dp(t)}]`)),...this.params.map(dp)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}}const rd=t=>td("any",t),id=()=>td("count"),nd=t=>td("unique",t);var sd={...yl,count:id,any:rd,values:t=>td("values",t),valid:t=>td("valid",t),invalid:t=>td("invalid",t),distinct:t=>td("distinct",t),unique:nd,mode:t=>td("mode",t),sum:t=>td("sum",t),product:t=>td("product",t),mean:t=>td("mean",t),average:t=>td("average",t),variance:t=>td("variance",t),variancep:t=>td("variancep",t),stdev:t=>td("stdev",t),stdevp:t=>td("stdevp",t),min:t=>td("min",t),max:t=>td("max",t),quantile:(t,e)=>td("quantile",t,e),median:t=>td("median",t),covariance:(t,e)=>td("covariance",[t,e]),covariancep:(t,e)=>td("covariancep",[t,e]),corr:(t,e)=>td("corr",[t,e]),bins:(t,e,r,i)=>td("bins",t,[e,r,i]),row_number:td("row_number"),rank:()=>td("rank"),avg_rank:()=>td("avg_rank"),dense_rank:()=>td("dense_rank"),percent_rank:()=>td("percent_rank"),cume_dist:()=>td("cume_dist"),ntile:t=>td("ntile",null,t),lag:(t,e,r)=>td("lag",t,[e,r]),lead:(t,e,r)=>td("lead",t,[e,r]),first_value:t=>td("first_value",t),last_value:t=>td("last_value",t),nth_value:(t,e)=>td("nth_value",t,e),fill_down:(t,e)=>td("fill_down",t,e),fill_up:(t,e)=>td("fill_up",t,e)};function ad(t){t.forEach(((e,r)=>e.field?t.set(r,nd(e+"")):0))}function od(t,e,r,{names:i,exprs:n},s={}){const a=t.data(),o=t.indices(!1),c=o.length,u=new Int32Array(c),h=e.data(),l=e.indices(!1),p=l.length,d=new Int32Array(p),f=i.length,y=op(),m=Array(f),b=Array(f);for(let t=0;t<i.length;++t)m[t]=y.add(i[t],[]),b[t]=n[t];const g=function(t,e){const r=["i","a","j","b"];return Vp(t,e,r,"{"+xp(t,((t,e)=>`_${e}.push($${e}(${r}));`))+"}")}(m,b);if((ic(r)?ud:cd)(g,r,a,h,o,l,u,d,c,p),s.left)for(let t=0;t<c;++t)u[t]||g(o[t],a,-1,h);if(s.right)for(let t=0;t<p;++t)d[t]||g(-1,a,l[t],h);return t.create(y.new())}function cd(t,e,r,i,n,s,a,o,c,u){for(let h=0;h<c;++h){const c=n[h];for(let n=0;n<u;++n){const u=s[n];e(c,r,u,i)&&(t(c,r,u,i),a[h]=1,o[n]=1)}}}function ud(t,[e,r],i,n,s,a,o,c,u,h){let l,p,d,f,y,m,b,g,_,v,w=t;u>=h?(l=i,p=e,d=o,f=s,y=u,m=n,b=r,g=c,_=a,v=h):(l=n,p=r,d=c,f=a,y=h,m=i,b=e,g=o,_=s,v=u,w=(e,r,i,n)=>t(i,n,e,r));const x=new Map;for(let t=0;t<v;++t){const e=b(_[t],m);null!=e&&e==e&&(x.has(e)||x.set(e,[]),x.get(e).push(t))}for(let t=0;t<y;++t){const e=f[t],r=x.get(p(e,l));if(r){const i=r.length;for(let t=0;t<i;++t){const i=r[t];w(e,l,_[i],m),g[i]=1}d[t]=1}}}function hd(t,e,r){const i=new Map;nc(r).forEach(((r,n)=>{fc(r=pp(r)?e.columnName(r):r)?i.set(n,Kp(r)):oc(r)||pc(r)&&r.expr?i.set(n,r):ac(`Invalid ${t} key value: ${r+""}`)}));return Ph(Ml(i,{table:e,aggregate:!1,window:!1}).exprs,!0)}const ld={aggregate:!1,window:!1,index:1};function pd(t,e,r,i,n={}){r=dd(t,e,r);const s={join:[t,e]};let a;if(ic(r)){const[s,o]=r.map(nc);s.length!==o.length&&ac("Mismatched number of join keys"),a=[hd("join",t,s),hd("join",e,o)],i||(i=function(t,e,r,i){const n=[];e.forEach(((t,e)=>fc(t)&&t===r[e]?n.push(t):0));const s=gp(n);if(i.left&&i.right){const e=new Set(n);return[t.columnNames().map((t=>{const r=`[${dp(t)}]`;return e.has(t)?{[t]:`(a, b) => a${r} === undefined ? b${r} : a${r}`}:t})),s]}return i.right?[s,bp()]:[bp(),s]}(t,s,o,n))}else a=Ml({on:r},s).exprs[0],i||(i=[bp(),bp()]);return od(t,e,a,function(t,e,r,i,n=[]){if(ic(r)){let s,a,o,c=r.length;s=a=o={names:[],exprs:[]},c--&&(s=Jp("join",t,r[0],i)),c--&&(a=Jp("join",e,r[1],ld)),c--&&(o=Ml(r[2],i));const u=new Set,h=new Set(s.names);return a.names.forEach((t=>{h.has(t)&&u.add(t)})),u.size&&(fd(s.names,u,n[0]||"_1"),fd(a.names,u,n[1]||"_2")),{names:s.names.concat(a.names,o.names),exprs:s.exprs.concat(a.exprs,o.exprs)}}return Ml(r,i)}(t,e,i,s,n&&n.suffix),n)}function dd(t,e,r){if(r)fc(r)?r=[r,r]:ic(r)&&1===r.length&&(r=[r[0],r[0]]);else{const i=function(t,e){const r=new Set(e);return t.filter((t=>r.has(t)))}(t.columnNames(),e.columnNames());i.length||ac("Natural join requires shared column names."),r=[i,i]}return r}function fd(t,e,r){t.forEach(((i,n)=>e.has(i)?t[n]=i+r:0))}function yd(t,e,r,i){var n,s;return r=dd(t,e,r),function(t,e,r,i={}){const n=new Hp(t.totalRows()),s=e.data(),a=e.indices(!1),o=a.length;return t.scan(((t,e)=>{for(let i=0;i<o;++i)if(r(t,e,a[i],s)){n.set(t);break}})),i.anti&&n.not(),t.create({filter:n})}(t,e,r=ic(r)?(n=hd("join",t,r[0]),s=hd("join",e,r[1]),(t,e,r,i)=>{const a=n(t,e),o=s(r,i);return a===o&&null!=a&&null!=o}):Ml({on:r},{join:[t,e]}).exprs[0],i)}const md=(t,e)=>null!=t?t:e;function bd(t,e,r,i={}){const{keys:n,keyColumn:s}=function(t,e,r){const i=r.limit>0?+r.limit:1/0,n=md(r.sort,!0),s=md(r.keySeparator,"_"),a=Cp(t,e.ops,e.exprs),o=1===a.length?a[0]:(t,e)=>a.map((r=>r(t,e))).join(s),c=Array(t.totalRows());t.scan(((t,e)=>c[t]=o(t,e)));const u=Dp(t.ungroup(),[{id:0,name:"unique",fields:[t=>c[t]],params:[]}]),h=n?u[0].sort():u[0];return{keys:Number.isFinite(i)?h.slice(0,i):h,keyColumn:c}}(t,e,i),a=md(i.valueSeparator,"_"),o=r.names.length>1?(t,e)=>e+a+n[t]:t=>n[t],c=n.map((t=>r.ops.map((e=>{const r=e.fields.map((e=>{const r=(r,i)=>t===s[r]?e(r,i):NaN;return r.toString=()=>t+":"+e,r}));return{...e,fields:r}})))).map((e=>Dp(t,e)));return t.create(function(t,{names:e,exprs:r},i,n){const s=e.length,a=n.length,o=op();if(t.isGrouped()){Up(o.data,t,Fp(o,t).fill(1));const c=n[0].length;for(let t=0;t<s;++t){const s=r[t];for(let t=0;t<a;++t){const r=n[t],a=o.add(i(t,e[t]),Array(c));for(let t=0;t<c;++t)a[t]=s(t,null,r[t])}}}else for(let t=0;t<s;++t){const s=r[t];for(let r=0;r<a;++r)o.add(i(r,e[t]),[s(0,null,n[r])])}return o.new()}(t,r,o,c))}function gd(t){t.forEach(((e,r)=>e.field?t.set(r,rd(e+"")):0))}function _d(t,e){return Xp(t,Ml(e,{table:t,aggronly:!0}))}function vd(t,e,r,i){return(e?i?xd:wd:i?Sd:Id)(t.length,t,r,i)}function wd(t,e,r){const i=r.length;for(let n=0;n<t;++n)e[n]=r[i*ll()|0];return e}function xd(t,e,r,i){const n=r.length,s=new Float64Array(n);let a=0;for(let t=0;t<n;++t)s[t]=a+=i(r[t]);const o=Pp(Ip).right;for(let i=0;i<t;++i)e[i]=r[o(s,a*ll())];return e}function Id(t,e,r){const i=r.length;if(t>=i)return r;for(let i=0;i<t;++i)e[i]=r[i];for(let n=t;n<i;++n){const i=n*ll();i<t&&(e[0|i]=r[n])}return e}function Sd(t,e,r,i){const n=r.length;if(t>=n)return r;const s=new Float32Array(n),a=new Uint32Array(n);for(let t=0;t<n;++t)a[t]=t,s[t]=-Math.log(ll())/i(r[t]);a.sort(((t,e)=>s[t]-s[e]));for(let i=0;i<t;++i)e[i]=r[a[i]];return e}const Td=t=>e=>t.get(e)||0;function Ad(t,{names:e,exprs:r,ops:i=[]},n={}){if(0===e.length)return t;const s=1===e.length&&n.as||[],a=null==n.drop||!!n.drop,o=null==n.limit?s.length||1/0:Math.max(1,+n.limit||1),c=Cp(t,i,r),u=op(),h=e.reduce(((t,e,r)=>t.set(e,r)),new Map),l=(e,r)=>{const i=function(t,e,r){const i=t.totalRows(),n=[];return t.scan(((t,s)=>{const a=nc(e(t,s)),o=Math.min(a.length,r);for(let e=0;e<o;++e){(n[e]||(n[e]=Array(i).fill(void 0)))[t]=a[e]}})),n}(t,c[e],o),n=i.length;for(let t=0;t<n;++t)u.add(s[t]||`${r}_${t+1}`,i[t])};return t.columnNames().forEach((e=>{h.has(e)?(a||u.add(e,t.column(e)),l(h.get(e),e),h.delete(e)):u.add(e,t.column(e))})),h.forEach(l),t.create(u)}function Ed(t,{names:e=[],exprs:r=[],ops:i=[]}){const n=t.data();if(0===e.length)return null;let s=Cp(t,i,r);const a=Ph(s),o=new Uint32Array(t.totalRows()),c={},u=[];return t.scan(((t,e)=>{const r=a(t,e)+"",i=c[r];o[t]=null!=i?i:c[r]=u.push(t)-1})),i.length||(s=s.map((t=>e=>t(e,n)))),{keys:o,get:s,names:e,rows:u,size:u.length}}const Bd=(t,e,r,i)=>`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${r}\n    : (u > v || v == null) && u != null ? ${i}\n    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${r}\n    : v !== v && u === u ? ${i} : `;function kd(t,e,r,i){e.outputs().map((t=>r.add(t,[])));const{data:n}=r;if(i){const r=i.length;for(let s=0;s<r-1;++s)i[s+1]=e.writeToArrays(t[s],n,i[s])}else e.writeToArrays(t,n,0)}function Ld(t){return Yp(t,{desc:!0})}function Cd(t,e,r){return Yp(t,{window:{frame:e||[-1/0,0],peers:!!r}})}function Dd(t,e){return(e=e&&oc(e.query)?e.query():e)&&oc(e.evaluate)?e.evaluate(null,t):t(e)}function Md(t){return pc(t)&&(ic(t.all)||ic(t.matches)||ic(t.not)||ic(t.range))}function Od(t){return t&&oc(t.toObject)?t.toObject():oc(t)?{expr:String(t),func:!0}:ic(t)?t.map(Od):pc(t)?Ec(t,(t=>Od(t))):t}function Nd(t){return ic(t)?t.map(Nd):pc(t)?ic(t.verbs)?Qd.from(t):ic(t.all)?bp():ic(t.range)?_p(...t.range):ic(t.match)?vp(RegExp(...t.match)):ic(t.not)?gp(t.not.map(Od)):function(t){let e=t,r=t.expr;if(null!=r){if(!0===t.field?e=r=Kp(r):!0===t.func&&(e=r=function(t){const e=t=>t;return e.toString=()=>t,e}(r)),pc(t.window)){const{frame:i,peers:n}=t.window;e=r=Cd(r,i,n)}!0===t.desc&&(e=Ld(r))}return t===e?Ec(t,(t=>Nd(t))):e}(t):t}function Fd(t){const e=[];return nc(t).forEach((t=>{pp(t)?e.push(t):fc(t)?e.push(Kp(t,null)):pc(t)&&t.expr||oc(t)?e.push(t):ac("Invalid key value: "+(t+""))})),e}function Ud(t,e){return e<2?nc(t):t}Object.assign(Mc.prototype,{__antijoin:(t,e,r)=>yd(t,e,r,{anti:!0}),__count:(t,e)=>_d(t,{[e&&e.as||"count"]:id()}),__concat:function(t,e){const r=t.numRows(),i=r+e.reduce(((t,e)=>t+e.numRows()),0);if(r===i)return t;const n=[t,...e],s=op();return t.columnNames().forEach((t=>{const e=Array(i);let r=0;n.forEach((i=>{const n=i.column(t)||{get:()=>{}};i.scan((t=>e[r++]=n.get(t)))})),s.add(t,e)})),t.create(s.new())},__cross:(t,e,r,i)=>pd(t,e,(()=>!0),r,{...i,left:!0,right:!0}),__dedupe:function(t,e=[]){return t.groupby(e.length?e:t.columnNames()).filter("row_number() === 1").reify()},__derive:function(t,e,r={}){const i=$p(t,Ml(e,{table:t}),r);return r.drop||null==r.before&&null==r.after?i:wp(i,Object.keys(e).filter((e=>!t.column(e))),r)},__except:function(t,e){if(0===e.length)return t;const r=t.columnNames();return e.reduce(((t,e)=>t.antijoin(e.select(r))),t).dedupe()},__filter:function(t,e){const r=Ml({test:e},{table:t});let i=r.exprs[0];if(r.ops.length){const e=$p(t,r,{drop:!0}).column("test");i=t=>e.get(t)}return function(t,e){const r=new Hp(t.totalRows());return t.scan(((t,i)=>{e(t,i)&&r.set(t)})),t.create({filter:r})}(t,i)},__fold:function(t,e,r){return function(t,{names:e=[],exprs:r=[],ops:i=[]},n={}){if(0===e.length)return t;const[s="key",a="value"]=n.as||[],o=Cp(t,i,r);return qp(t,{names:[s,a],exprs:[()=>e,(t,e)=>o.map((r=>r(t,e)))]},{...n,drop:e})}(t,Jp("fold",t,e),r)},__impute:function(t,e,r={}){if((e=Ml(e,{table:t})).names.forEach((e=>t.column(e)?0:ac(`Invalid impute column ${dp(e)}`))),r.expand){const i=Jp("impute",t,r.expand,{preparse:ad}),n=Xp(t.ungroup(),i);return Qp(t,e,i.names,i.names.map((t=>n.get(t,0))))}return Qp(t,e)},__intersect:function(t,e){const r=t.columnNames();return e.length?e.reduce(((t,e)=>t.semijoin(e.select(r))),t).dedupe():t.reify([])},__join:pd,__lookup:function(t,e,r,i){return function(t,e,[r,i],{names:n,exprs:s,ops:a}){const o=op(t),c=t.totalRows();n.forEach((t=>o.add(t,Array(c))));const u=new Map;e.scan(((t,e)=>{const r=i(t,e);null!=r&&r==r&&u.set(i(t,e),t)}));const h=new Int32Array(t.numRows()),l=new Int32Array(t.numRows());let p=0;t.scan(((t,e)=>{const i=u.get(r(t,e));h[p]=t,l[p]=null==i?-1:i,++p}));const d=e.data(),f=Cp(e,a,s),y=f.length;for(let t=0;t<y;++t){const e=o.data[n[t]],r=f[t];for(let t=0;t<p;++t){const i=l[t];e[h[t]]=i>=0?r(i,d):void 0}}return t.create(o)}(t,e,[hd("lookup",t,(r=dd(t,e,r))[0]),hd("lookup",e,r[1])],Jp("lookup",e,i))},__pivot:function(t,e,r,i){return bd(t,Jp("fold",t,e),Jp("fold",t,r,{preparse:gd,aggronly:!0}),i)},__relocate:wp,__rollup:_d,__sample:function(t,e,r={}){return function(t,e,r,i={}){const n=!!i.replace,s=t.partitions(!1);let a=0;e=s.map(((t,r)=>{let i=e(r);return a+=i=n?i:Math.min(t.length,i),i}));const o=new Uint32Array(a);let c=0;return s.forEach(((t,i)=>{const s=e[i],a=o.subarray(c,c+=s);n||s!==t.length?vd(a,n,t,r):a.set(t)})),t.reify(o)}(t,function(t,e){return pp(e)?()=>e:Td(Xp(t,Ml({size:e},{table:t})).column("size"))}(t,e),function(t,e){return null==e?null:(e=pp(e)?t.columnName(e):e,Td(fc(e)?t.column(e):$p(t,Ml({w:e},{table:t}),{drop:!0}).column("w")))}(t,r.weight),r)},__select:function(t,e){return up(t,fp(t,e))},__semijoin:yd,__spread:function(t,e,r){return Ad(t,Jp("spread",t,e),r)},__union:function(t,e){return t.concat(e).dedupe()},__unroll:function(t,e,r){return qp(t,Jp("unroll",t,e),r&&r.drop?{...r,drop:Jp("unroll",t,r.drop).names}:r)},__groupby:function(t,e){return function(t,e){return t.create({groups:Ed(t,e)})}(t,Jp("groupby",t,e))},__orderby:function(t,e){return function(t,e){return t.create({order:e})}(t,function(t,e){let r=-1;const i=new Map,n=t=>i.set(++r+"",t);return e.forEach((e=>{const r=null!=e.expr?e.expr:e;if(pc(r)&&!oc(r))for(const t in r)n(r[t]);else n(pp(r)?Kp(e,t.columnName(r)):fc(r)?Kp(e):oc(r)?e:ac("Invalid orderby field: "+(e+"")))})),function(t,e){const r=[],i=[];let n="op",s="op",a=null;t.isGrouped()&&(n+="[ka]",s+="[kb]",a=t.groups().keys);const{ops:o}=Ml(e,{table:t,value:(t,e)=>{r.push(t),i.push([Uh(e,{index:"a",op:n}),Uh(e,{index:"b",op:s})])},window:!1}),c=o.length?Dp(t,o):null,u=r.length;let h="return (a, b) => {\n";c&&t.isGrouped()&&(h+="  const ka = keys[a], kb = keys[b];\n"),h+="  var u, v;\n  return ";for(let t=0;t<u;++t){const n=e.get(r[t]).desc?-1:1,[s,a]=i[t];h+=Bd(s,a,-n,n)}return h+="0;\n};",Function("op","keys","data",h)(c,a,t.data())}(t,i)}(t,e))},__ungroup:function(t){return t.isGrouped()?t.create({groups:null}):t},__unorder:function(t){return t.isOrdered()?t.create({order:null}):t},__reduce:function(t,e){const r=op();if(t.isGrouped()){const i=t.groups(),n=Fp(r,t);kd(Np(t,e,i),e,r,n),Up(r.data,t,n)}else kd(Op(t,e),e,r);return t.create(r.new())}});const Vd={[Jl]:Hd,[Ql]:qd,[Zl]:function(t){return pp(t)?t:zd(t)},[Xl]:zd,[tp]:function(t){return ic(t)?t.map(qd):zd(t,{join:!0})},[ep]:function(t){return ic(t)?t.map(((t,e)=>e<2?qd(t):zd(t,{join:!0}))):zd(t,{join:!0})},[ip]:qd,[np]:function(t){return nc(t).map(Wd).flat()}};function Pd(t,e,r){return e===rp?t?function(t,e={}){const r={};for(const i in t){const n=t[i];r[i]=e[i]?Pd(n,e[i]):n}return r}(t,r):t:Vd[e](t)}function Rd(t){return{type:gh,name:t}}function jd(t){return{type:gh,index:t}}function zd(t,e){if(fc(t))return function(t,e){return Ml({expr:t},{...e,ast:!0}).exprs[0]}(t,e);if(t.expr){let r;if(!0===t.field?r=Rd(t.expr):!0===t.func&&(r=zd(t.expr,e)),r)return t.desc&&(r={type:"Descending",expr:r}),t.window&&(r={type:"Window",expr:r,...t.window}),r}return Object.keys(t).map((r=>({...zd(t[r],e),as:r})))}function $d(t){const e="Selection";return t.all?{type:e,operator:"all"}:t.not?{type:e,operator:"not",arguments:qd(t.not)}:t.range?{type:e,operator:"range",arguments:qd(t.range)}:t.matches?{type:e,operator:"matches",arguments:t.matches}:ac("Invalid input")}function Wd(t){return Md(t)?$d(t):pp(t)?jd(t):fc(t)?Rd(t):pc(t)?Object.keys(t).map((e=>({type:gh,name:e,as:t[e]}))):ac("Invalid input")}function Hd(t){return Md(t)?$d(t):pp(t)?jd(t):fc(t)?Rd(t):pc(t)?zd(t):ac("Invalid input")}function qd(t){return nc(t).map(Hd).flat()}function Yd(t){return t&&oc(t.toAST)?t.toAST():t}class Gd{constructor(t,e=[],r=[]){this.verb=t,this.schema=e,e.forEach(((t,e)=>{const i=t.type,n=r[e],s=i===tp?ic(a=n)?a.map(Fd):a:i===ep?function(t){return ic(t)?t.map(Ud):t}(n):i===ip?function(t){const e=[];return t.forEach((t=>{const r=null!=t.expr?t.expr:t;if(pc(r)&&!oc(r))for(const t in r)e.push(r[t]);else t=pp(r)?r:fc(r)?Kp(t):oc(r)?t:ac("Invalid orderby field: "+t),e.push(t)})),e}(n):n;var a;this[t.name]=void 0!==s?s:t.default}))}static from(t){const e=Jd[t.verb];return e(...(e.schema||[]).map((({name:e})=>Nd(t[e]))))}evaluate(t,e){const r=this.schema.map((({name:t,type:r})=>{const i=this[t];return r===sp?Dd(e,i):r===ap?i.map((t=>Dd(e,t))):i}));return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach((({name:e})=>{t[e]=Od(this[e])})),t}toAST(){const t={type:"Verb",verb:this.verb};return this.schema.forEach((({name:e,type:r,props:i})=>{t[e]=function(t,e,r){return e===sp?Yd(t):e===ap?t.map(Yd):Pd(Od(t),e,r)}(this[e],r,i)})),t}}function Kd(t,e){return Object.assign(((...r)=>new Gd(t,e,r)),{schema:e})}const Jd={count:Kd("count",[{name:"options",type:rp}]),derive:Kd("derive",[{name:"values",type:Xl},{name:"options",type:rp,props:{before:np,after:np}}]),filter:Kd("filter",[{name:"criteria",type:Xl}]),groupby:Kd("groupby",[{name:"keys",type:Ql}]),orderby:Kd("orderby",[{name:"keys",type:ip}]),relocate:Kd("relocate",[{name:"columns",type:np},{name:"options",type:rp,props:{before:np,after:np}}]),rollup:Kd("rollup",[{name:"values",type:Xl}]),sample:Kd("sample",[{name:"size",type:Zl},{name:"options",type:rp,props:{weight:Jl}}]),select:Kd("select",[{name:"columns",type:np}]),ungroup:Kd("ungroup"),unorder:Kd("unorder"),reify:Kd("reify"),dedupe:Kd("dedupe",[{name:"keys",type:Ql,default:[]}]),impute:Kd("impute",[{name:"values",type:Xl},{name:"options",type:rp,props:{expand:Ql}}]),fold:Kd("fold",[{name:"values",type:Ql},{name:"options",type:rp}]),pivot:Kd("pivot",[{name:"keys",type:Ql},{name:"values",type:Ql},{name:"options",type:rp}]),spread:Kd("spread",[{name:"values",type:Ql},{name:"options",type:rp}]),unroll:Kd("unroll",[{name:"values",type:Ql},{name:"options",type:rp,props:{drop:Ql}}]),lookup:Kd("lookup",[{name:"table",type:sp},{name:"on",type:tp},{name:"values",type:Ql}]),join:Kd("join",[{name:"table",type:sp},{name:"on",type:tp},{name:"values",type:ep},{name:"options",type:rp}]),cross:Kd("cross",[{name:"table",type:sp},{name:"values",type:ep},{name:"options",type:rp}]),semijoin:Kd("semijoin",[{name:"table",type:sp},{name:"on",type:tp}]),antijoin:Kd("antijoin",[{name:"table",type:sp},{name:"on",type:tp}]),concat:Kd("concat",[{name:"tables",type:ap}]),union:Kd("union",[{name:"tables",type:ap}]),intersect:Kd("intersect",[{name:"tables",type:ap}]),except:Kd("except",[{name:"tables",type:ap}])};class Qd extends sc{constructor(t,e,r){super(e),this._verbs=t||[],this._table=r}static from({verbs:t,table:e,params:r}){return new Qd(t.map(Gd.from),r,e)}get[Symbol.toStringTag](){if(!this._verbs)return"Object";return`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:"")}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,e){t=t||e(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),e);return t}toObject(){return Zd(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Zd(this,"toAST",{type:"Query"})}}function Zd(t,e,r){return{...r,verbs:t._verbs.map((t=>t[e]())),...t._params?{params:t._params}:null,...t._table?{table:t._table}:null}}for(const t in Jd){const e=Jd[t];Qd.prototype["__"+t]=(t,...r)=>new Qd(t._verbs.concat(e(...r)),t._params,t._table)}function Xd(t,e={}){const{names:r,cols:i}=function(t,e){const r=t.schema.fields.map((t=>t.name)),i=fp({columnNames:t=>t?r.filter(t):r.slice(),columnIndex:t=>r.indexOf(t)},e||bp()),n=[],s=[];return i.forEach(((e,r)=>{n.push(e),s.push(t.getColumn(r))})),{names:n,cols:s}}(t,e.columns),n=t.count(),s=t.length===n?function(t,e,r){const i={};return e.forEach(((e,n)=>i[t[n]]=e.numChildren?sf(e):r?af(e):e)),i}(r,i,!!e.unpack):function(t,e,r,i){const n={},s=r.map(((t,r)=>n[e[r]]=function(t,e){if(!t.nullCount){const{ArrayType:r,typeId:i}=t;if(2===i||3===i||7===i||9===i||10===i)return new r(e)}return Array(e)}(t,i))),a=r.map((t=>t.dictionary?rf(t):null));let o,c=-1,u=-1;return t.scan((t=>o(++c,t)),(()=>{++u,o=Vp(s,r.map(((t,e)=>{return r=t.chunks[u],i=a[e],r.numChildren?tf(r):r.dictionary?ef(r,i):t=>r.get(t);var r,i})),["row","idx"],"{"+s.map(((t,e)=>`_${e}[row]=$${e}(idx)`)).join(";")+";}")})),n}(t,r,i,n);return new Mc(s,r)}function tf(t){const e=12===(r=t.typeId)||16===r?e=>nf(t.get(e)):function(t){return 13===t}(t.typeId)?function(t){const e=t.type.children.map((t=>t.name));return Cc(e.map(((e,r)=>nf(t.getChildAt(r)))),"i","({"+e.map(((t,e)=>`${dp(t)}:_${e}[i]`))+"})")}(t):ac(`Unsupported Arrow type: ${dp(t.VectorName)}`);var r;return r=>t.isValid(r)?e(r):null}function ef(t,e){const{nullBitmap:r,data:{values:i}}=t;return r&&r.length?t=>r[t>>3]&1<<(7&t)?e(i[t]):null:t=>e(i[t])}function rf(t){const e=t.chunks[t.chunks.length-1].dictionary,r=[];return t=>{const i=r[t];return void 0===i?r[t]=e.get(t):i}}function nf(t){return t.numChildren?sf(t):af(t)}function sf(t){const e=tf(t);return Array.from({length:t.length},((t,r)=>e(r)))}function af(t){return t.dictionary?function(t){const e=rf(t),r=Array(t.length);let i=-1;for(const n of t.chunks){const t=ef(n,e),s=n.length;for(let e=0;e<s;++e)r[++i]=t(e)}return r}(t):t.nullCount>0?[...t]:t.toArray()}function of(t){const e=t.trim();let r;return e?"true"===e||"false"!==e&&("NaN"===e?NaN:isNaN(r=+e)?(r=el(e,(t=>new Date(t))))!==e?r:t:r):null}const cf={},uf={};function hf(t,e){return"string"!=typeof e||function(t){const e=t.length;for(let r=0;r<e;++r){const e=t.charCodeAt(r);if(e<48||e>57)return!1}return!0}(e)?e:el(e,(t=>new Date(t)))}function lf(t,e={}){"string"==typeof t&&(t=JSON.parse(t,kc(e.autoType,hf,null)));let r,i=t.data;if(pc(i)&&!Kh(i)?t.schema&&t.schema.fields&&(r=t.schema.fields.map((t=>t.name))):i=t,e.parse)for(const t in e.parse)i[t]=i[t].map(e.parse[t]);return new Mc(i,r)}function pf(t){fl(sd,t)&&ac(`Function ${JSON.stringify(t)} is already defined.`)}function df(t,e,r,i={}){const{numFields:n,numParams:s,override:a}=i;if(r[t]===e)return;a||pf(t),null==n&&null==s||(e.param=[n||0,s||0]),r[t]=e;const[o,c]=e.param;sd[t]=(...e)=>td(t,e.slice(0,o),e.slice(o,o+c))}const ff={Table:uc,ColumnTable:Mc,Query:Qd,Reducer:Oc,Verbs:Jd,parse:Ml,walk_ast:wh},{Query:yf,Verbs:mf}=ff;class bf extends yf{constructor(t,e,r,i){super(e,r,t),this._worker=i}static for(t,e){return new bf(t,null,null,e)}fetch(t){return this._worker.query(this.toObject(),t)}}for(const t in mf){const e=mf[t];bf.prototype["__"+t]=(t,...r)=>new bf(t._table,t._verbs.concat(e(...r)),t._params,t._worker)}function gf(t,e){const{status:r,request:i}=t,n=i.id;if(e.has(n)){const{resolve:i,reject:s}=e.get(n);switch(r){case"result":i(t.result);break;case"error":s(t.error)}e.delete(n)}}function _f(t){let e,r=0;const i=new Map;if("undefined"==typeof Worker){const{Worker:r}=require("worker_threads");e=new r(t||__dirname+"/arquero-node-worker.js"),e.on("message",(t=>gf(t,i)))}else e=new Worker(t),e.onmessage=t=>gf(t.data,i);return e.post=(t,n)=>{const s=++r;return e.postMessage({id:s,...t},n),new Promise(((t,e)=>{i.set(s,{resolve:t,reject:e})}))},e}class vf{constructor(t,e={}){this._worker=_f(t),this._format=e.format||"json"}post(t,e){return this._worker.post(t,e)}terminate(){this._worker.terminate()}async list(){return(await this.post({method:"list"})).list}async seed(t){return(await this.post({method:"seed",params:{seed:t}})).seed}async drop(t){t&&t.tableName&&!t.length&&(t=t.tableName());return(await this.post({method:"drop",params:{name:t}})).drop}async table(t,e){if(e){const r=ArrayBuffer.isView(e)?[e]:void 0;t=(await this.post({method:"add",params:{name:t,data:e}},r)).table}return bf.for(t,this)}async load(t,e,r="csv",i={},n=!1){const s=await this.post({method:"load",params:{name:t,url:e,type:r,options:i,append:n}});return bf.for(s.table,this)}async query(t,e,r){const i=this._format,n=await this.post({method:"query",params:{query:t,as:r,format:i,options:e}});return r?bf.for(n.table,this):wf(n.data)}async fetch(t,e){const r=this._format;return wf((await this.post({method:"fetch",params:{name:t,format:r,options:e}})).data)}}function wf(t){return ArrayBuffer.isView(t)?Xd(wo.from(t),{unpack:!0}):"string"==typeof t?lf(t):function(t){throw Error(t)}("Unrecognized table data format")}function xf(t){throw Error(t)}function If(e){if(e instanceof Dt||null==e)return e;switch(e){case t.Type.Binary:return new Gt;case t.Type.Bool:return new Jt;case t.Type.DateDay:return new Xt;case t.Type.DateMillisecond:case t.Type.Date:return new te;case t.Type.Dictionary:return new ge(new Kt,new zt);case t.Type.Float16:return new Ht;case t.Type.Float32:return new qt;case t.Type.Float64:case t.Type.Float:return new Yt;case t.Type.Int8:return new Ft;case t.Type.Int16:return new Ut;case t.Type.Int32:case t.Type.Int:return new Vt;case t.Type.Int64:return new Pt;case t.Type.IntervalDayTime:return new ce;case t.Type.Interval:case t.Type.IntervalYearMonth:return new ue;case t.Type.Null:return new Ot;case t.Type.TimeMicrosecond:return new ne;case t.Type.TimeMillisecond:case t.Type.Time:return new ie;case t.Type.TimeNanosecond:return new se;case t.Type.TimeSecond:return new re;case t.Type.Uint8:return new Rt;case t.Type.Uint16:return new jt;case t.Type.Uint32:return new zt;case t.Type.Uint64:return new $t;default:xf(`Unsupported type code: ${r=e,void 0===r?r+"":"bigint"==typeof r?r+"n":JSON.stringify(r)}. Use a data type constructor instead?`)}var r}var Sf=Array.isArray;function Tf(t){return t&&t.map===Int8Array.prototype.map}function Af(t){return Sf(t)||Tf(t)}function Ef(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,null==t)return void++e.nulls;const r=typeof t;if("string"===r)++e.strings;else if("number"===r)++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if("boolean"===r)++e.bools;else if("object"===r)if(function(t){return t instanceof Date}(t))++e.dates,0===(i=t).getUTCHours()&&0===i.getUTCMinutes()&&0===i.getUTCSeconds()&&0===i.getUTCMilliseconds()&&++e.utcdays;else if(Af(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=Ef());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const e in t){(r[e]||(r[e]=Ef())).add(t[e])}}else"bigint"===r&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t));var i},type:()=>If(function(e){const r=e.count-e.nulls;if(0===r)return t.Type.Null;if(e.ints===r){const r=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?r>=2**31?t.Type.Float64:r<128?t.Type.Int8:r<32768?t.Type.Int16:t.Type.Int32:r>=2**32?t.Type.Float64:r<256?t.Type.Uint8:r<65536?t.Type.Uint16:t.Type.Uint32}if(e.nums===r)return t.Type.Float64;if(e.bigints===r){const r=-e.min>e.max?-e.min-1n:e.max;return e.min<0?r<2**63?t.Type.Int64:xf(`BigInt exceeds 64 bits: ${r}`):e.max<2**64?t.Type.Uint64:xf(`BigInt exceeds 64 bits: ${e.max}`)}if(e.bools===r)return t.Type.Bool;if(e.utcdays===r)return t.Type.DateDay;if(e.dates===r)return t.Type.DateMillisecond;if(e.arrays===r){const t=ui.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new fe(e.minlen,t):new he(t)}if(e.structs===r){const t=e.struct_prof;return new le(Object.keys(t).map((e=>ui.new(e,t[e].type(),!0))))}if(e.strings>0)return t.Type.Dictionary;xf("Type inference failure")}(e))};return e}function Bf(t,e=1){return(t*e+63&-64||64)/e}function kf(t,e,r=t.BYTES_PER_ELEMENT){return new t(Bf(e,r))}function Lf(t){return t instanceof ve?t:ve.new(t.type,0,t.length,t.nulls,t.buffers,null,t.dict)}const Cf=new TextEncoder;const Df=Cf.encodeInto?function(t,e,r){return Cf.encodeInto(r,t.subarray(e)).written}:function(t,e,r){const i=Cf.encode(r);return t.set(i,e),i.length};function Mf(t,e){const r=kf(t.ArrayType,e);return{set(t,e){r[e]=t},data:()=>({type:t,length:e,buffers:[null,r]})}}function Of(t,e){const r=kf(t.ArrayType,e/8);return{set(t,e){t&&(r[e>>3]|=1<<e%8)},data:()=>({type:t,length:e,buffers:[null,r]})}}function Nf(t,e){const r=kf(t.ArrayType,e);return{set(t,e){r[e]=t/864e5|0},data:()=>({type:t,length:e,buffers:[null,r]})}}function Ff(t,e){const r=kf(t.ArrayType,e);return{set(t,e){const i=e<<1;r[i]=t%4294967296|0,r[i+1]=t/4294967296|0},data:()=>({type:t,length:e,buffers:[null,r]})}}function Uf(t,e){const r=[],i=kf(t.indices.ArrayType,e),n=Object.create(null);let s=-1,a=0;return{set(t,e){const o=String(t);let c=n[o];void 0===c&&(a+=o.length,n[o]=c=++s,r.push(o)),i[e]=c},data:()=>({type:t,length:e,buffers:[null,i],dict:Vf(t.dictionary,r,a)})}}function Vf(t,e,r){const i=function(t,e,r){const i=kf(Int32Array,e+1),n=kf(Uint8Array,3*r);let s=0;return{set(t,e){s+=Df(n,s,t),i[e+1]=s},data:()=>{const r=Bf(s),a=n.length>r?n.subarray(0,r):n;return{type:t,length:e,buffers:[i,a]}}}}(t,e.length,r);return e.forEach(i.set),function(t){return et.new(Lf(t))}(i.data())}function Pf(e,r,i=!0){let n;switch(e.typeId){case t.Type.Int:n=e.bitWidth<64?Mf:null;break;case t.Type.Float:n=e.precision>0?Mf:null;break;case t.Type.Dictionary:n=e.dictionary.typeId===t.Type.Utf8&&e.indices.typeId===t.Type.Int&&e.indices.bitWidth<64?Uf:null;break;case t.Type.Bool:n=Of;break;case t.Type.Date:n=e.unit?Ff:Nf}return null==n?function(t){const e=ke.new({type:t,nullValues:[null,void 0],highWaterMark:1/0});return{set(t,r){e.set(r,t)},data:()=>e.finish().flush()}}(e):i?function(t,e){const r=kf(Uint8Array,e/8);let i=0;return{set(e,n){null==e?++i:(t.set(e,n),r[n>>3]|=1<<n%8)},data:()=>{const e=t.data();return i&&(e.nulls=i,e.buffers[2]=r),e}}}(n(e,r),r):n(e,r)}function Rf(t,e,r,i=!0){if(!(r=If(r))){const n=function(t,e){const r=Ef();return t.forEach((t=>r.add(t[e]))),r}(t,e);i=n.nulls>0,r=n.type()}return Jr.new(e,function(t,e,r,i=!0){const n=Pf(r,t.length,i);return t.forEach(((t,r)=>n.set(t[e],r))),Lf(n.data())}(t,e,r,i))}function jf(t,e,r){let i=-1;!Af(e.data)||t.isFiltered()||t.isOrdered()?t.scan((t=>r(e.get(t),++i))):e.data.forEach(r)}function zf(t,e,r,i=!0){r=If(r);const n=t.column(e),s=!(t.isFiltered()||t.isOrdered());if(s&&((a=n)instanceof Jr||a instanceof et)&&Wf(n.type,r))return Jr.new(e,n.chunks||n);var a;const o=n.data;if(Tf(o)){const t=function(t){const e=$f[t.constructor.name];return e?new e:null}(o);if(s&&t&&Wf(t,r))return Jr.new(e,function(t,e){const r=t.length,i=Bf(r,t.BYTES_PER_ELEMENT);let n=t;r!==i&&(n=new t.constructor(i),n.set(t));return Lf({type:e,length:r,buffers:[null,n]})}(o,t));r=r||t,i=!1}if(!r){const e=function(t,e){const r=Ef();return jf(t,e,r.add),r}(t,n);i=e.nulls>0,r=e.type()}return Jr.new(e,Hf(t,n,r,i))}const $f={Float32Array:qt,Float64Array:Yt,Int8Array:Ft,Int16Array:Ut,Int32Array:Vt,Uint8Array:Rt,Uint16Array:jt,Uint32Array:zt,BigInt64Array:Pt,BigUint64Array:$t};function Wf(t,e){return!t||!e||t.compareTo(e)}function Hf(t,e,r,i=!0){const n=Pf(r,t.numRows(),i);return jf(t,e,n.set),Lf(n.data())}t.addAggregateFunction=function(t,e,r){df(t,e,Wh,r)},t.addFunction=function(t,e,r={}){1===arguments.length&&(""!==(t=(e=t).name)&&"anonymous"!==t||ac("Anonymous function provided, please include a name argument.")),yl[t]!==e&&(r.override||pf(t),yl[t]=e,sd[t]=e)},t.addWindowFunction=function(t,e,r){df(t,e,Gh,r)},t.all=bp,t.bin=function(t,e={}){const r=`d[${JSON.stringify(t)}]`,{maxbins:i,nice:n,minstep:s,offset:a}=e,o=[i,n,s];let c=o.length;for(;c&&null==o[--c];)o.pop();return`d => op.bin(${r}, ...${`op.bins(${r}${o.length?", "+o.join(", "):""})`}, ${a||0})`},t.dataFrom=Hf,t.desc=Ld,t.endswith=function(t){return vp(RegExp(lp(t)+"$"))},t.field=Kp,t.from=function(t,e){return Mc.from(t,e)},t.fromArrow=Xd,t.fromCSV=function(t,e={}){const r=((null==e.delimiter?",":e.delimiter)+"").charCodeAt(0),i=!1!==e.autoType?of:t=>t,n=!1!==e.header;let s,a,o;!function(t,e,r){let i,n=t.length,s=0,a=0,o=n<=0,c=!1;function u(){if(o)return uf;if(c)return c=!1,cf;const r=s;let i,a;if(34===t.charCodeAt(r)){for(;s++<n&&34!==t.charCodeAt(s)||34===t.charCodeAt(++s););return(i=s)>=n?o=!0:10===(a=t.charCodeAt(s++))?c=!0:13===a&&(c=!0,10===t.charCodeAt(s)&&++s),t.slice(r+1,i-1).replace(/""/g,'"')}for(;s<n;){if(10===(a=t.charCodeAt(i=s++)))c=!0;else if(13===a)c=!0,10===t.charCodeAt(s)&&++s;else if(a!==e)continue;return t.slice(r,i)}return o=!0,t.slice(r,n)}for(10===t.charCodeAt(n-1)&&--n,13===t.charCodeAt(n-1)&&--n;(i=u())!==uf;){const t=[];for(;i!==cf&&i!==uf;)t.push(i),i=u();r(t,a++)}}(t,r,((t,r)=>{if(0===r){const r=t.length;if(a=cc(r,(()=>[])),o=Array(r).fill(i),n){const r=e.parse||{};return void(s=t).forEach(((t,e)=>oc(r[t])?o[e]=r[t]:0))}s=cc(r,(t=>`col${t+1}`))}const c=s.length;for(let e=0;e<c;++e)a[e].push(o[e](t[e]))}));const c={};return s.forEach(((t,e)=>c[t]=a[e])),new Mc(c,s)},t.fromJSON=lf,t.internal=ff,t.matches=vp,t.not=gp,t.op=sd,t.profiler=Ef,t.query=function(t){return new Qd(null,null,t)},t.queryFrom=function(t){return Qd.from(t)},t.range=_p,t.rolling=Cd,t.seed=function(t){hl=Hh(t)&&isFinite(t=+t)?function(t){const e=1664525,r=1013904223,i=1/4294967296;return t=0|(0<=t&&t<1?t/i:Math.abs(t)),()=>i*((t=e*t+r|0)>>>0)}(t):Math.random},t.startswith=function(t){return vp(RegExp("^"+lp(t)))},t.table=function(t,e){return new Mc(Ec(t,(t=>t)),e)},t.toArrow=function(t,e={}){const{columnFrom:r,nrows:i,names:n}=function(t){if(Sf(t))return{columnFrom:Rf,names:Object.keys(t[0]),nrows:t.length};if(function(t){return t&&(e=t.reify,"function"==typeof e);var e}(t))return{columnFrom:zf,names:t.columnNames(),nrows:t.numRows()};xf("Unsupported input data type")}(t);return wo.new(n.map((n=>{const s=r(t,n,e[n]);return s.length===i?s:xf("Column length mismatch")})))},t.version="2.1.0",t.worker=function(t,e){return new vf(t,e)},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=arquero-worker-client.min.js.map
