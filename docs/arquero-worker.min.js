!function(){"use strict";var t=Array.isArray;function e(e){return null!=e?t(e)?e:[e]:[]}function r(t){return t<0?`count() + ${t}`:t}class i{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,e){return this.__derive(this,t,e)}filter(t){return this.__filter(this,t)}slice(t,e){return this.filter(function(t=0,e=1/0){return`${r(t)} < row_number() && row_number() <= ${r(e)}`}(t,e)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,r){return this.__relocate(this,e(t),r)}rollup(t){return this.__rollup(this,t)}sample(t,e){return this.__sample(this,t,e)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,e){return this.__impute(this,t,e)}fold(t,e){return this.__fold(this,t,e)}pivot(t,e,r){return this.__pivot(this,t,e,r)}spread(t,e){return this.__spread(this,t,e)}unroll(t,e){return this.__unroll(this,t,e)}lookup(t,e,...r){return this.__lookup(this,t,e,r.flat())}join(t,e,r,i){return this.__join(this,t,e,r,i)}join_left(t,e,r,i){const n={...i,left:!0,right:!1};return this.__join(this,t,e,r,n)}join_right(t,e,r,i){const n={...i,left:!1,right:!0};return this.__join(this,t,e,r,n)}join_full(t,e,r,i){const n={...i,left:!0,right:!0};return this.__join(this,t,e,r,n)}cross(t,e,r){return this.__cross(this,t,e,r)}semijoin(t,e){return this.__semijoin(this,t,e)}antijoin(t,e){return this.__antijoin(this,t,e)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function n(t){throw Error(t)}function s(t){return"function"==typeof t}function a(t,e){const r=Array(t);if(s(e))for(let i=0;i<t;++i)r[i]=e(i);else r.fill(e);return r}class o extends i{constructor(t,e,r,i,n,s,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=e,this._nrows=i?i.count():e,this._mask=e!==this._nrows&&i||null,this._group=n||null,this._order=s||null}create(t){n("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(1!==this.numRows()?"s":"");return`Table: ${this.numCols()+" col"+(1!==this.numCols()?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}get(t,e){n("Not implemented")}getter(t){n("Not implemented")}objects(t){n("Not implemented")}[Symbol.iterator](){n("Not implemented")}print(t={}){"number"==typeof t?t={limit:10}:null==t.limit&&(t.limit=10);const e=this.objects(t),r=`${this[Symbol.toStringTag]}. Showing ${e.length} rows.`;console.log(r),console.table(e)}indices(t=!0){if(this._index)return this._index;const e=this.numRows(),r=new Uint32Array(e),i=this.isOrdered(),n=this.mask();let s=-1;if(n)for(let t=n.next(0);t>=0;t=n.next(t+1))r[++s]=t;else for(let t=0;t<e;++t)r[++s]=t;if(t&&i){const t=this._order,e=this._data;r.sort(((r,i)=>t(r,i,e)))}return!t&&i||(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:e,size:r}=this._group,i=a(r,(()=>[])),n=this._index,s=this.mask(),o=this.numRows();if(n&&this.isOrdered())for(let t,r=0;r<o;++r)t=n[r],i[e[t]].push(t);else if(s)for(let t=s.next(0);t>=0;t=s.next(t+1))i[e[t]].push(t);else for(let t=0;t<o;++t)i[e[t]].push(t);if(t&&!n&&this.isOrdered()){const t=this._order,e=this._data;for(let n=0;n<r;++n)i[n].sort(((r,i)=>t(r,i,e)))}return!t&&this.isOrdered()||(this._partitions=i),i}scan(t,e,r=1/0,i=0){const n=this._mask,s=this._nrows,a=this._data;let o=i||0;if(o>s)return;const c=Math.min(s,o+r),u=()=>o=this._total;if(e&&this.isOrdered()||n&&this._index){const e=this.indices(),r=this._data;for(;o<c;++o)t(e[o],r,u)}else if(n){let e=c-o+1;for(o=n.nth(o);--e;o=n.next(o+1))t(o,a,u)}else for(;o<c;++o)t(o,a,u)}slice(t=0,e=1/0){if(this.isGrouped())return super.slice(t,e);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),e=Math.min(i,Math.max(0,e+(e<0?i:0))),this.scan((t=>r.push(t)),!0,e-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}}class c{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}}let u=function(t){return t&&s(t.get)?t:new c(t)};function h(t){return t instanceof Date}function l(t){return t===Object(t)}function p(t){return t instanceof RegExp}function d(t){return"string"==typeof t}function f(e,r){const i=t=>n(`Illegal argument type: ${t||typeof e}`);return e instanceof Map?y(e.entries(),r):h(e)?i("Date"):p(e)?i("RegExp"):d(e)?i():t(e)?function(t,e){const r=t.length,i={},n=t=>i[t]=Array(r);if(r){const i=(e=e||Object.keys(t[0])).map(n),s=i.length;for(let n=0;n<r;++n){const r=t[n];for(let t=0;t<s;++t)i[t][n]=r[e[t]]}}else e&&e.forEach(n);return i}(e,r):s(e[Symbol.iterator])?function(t,e){const r={},i=t=>r[t]=[];let n,s;for(const r of t){n||(n=(e=e||Object.keys(r)).map(i),s=n.length);for(let t=0;t<s;++t)n[t].push(r[e[t]])}!n&&e&&e.forEach(i);return r}(e,r):l(e)?y(Object.entries(e),r):i()}function y(t,e=["key","value"]){const r=[],i=[];for(const[e,n]of t)r.push(e),i.push(n);const n={};return e[0]&&(n[e[0]]=r),e[1]&&(n[e[1]]=i),n}const{hasOwnProperty:m}=Object.prototype;function b(t,e){return m.call(t,e)}function g(t){return t?new _({...t.data()},t.columnNames()):new _}class _{constructor(t,e){this.data=t||{},this.names=e||[]}add(t,e){return this.has(t)||this.names.push(t+""),this.data[t]=e}has(t){return b(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}var v=1,w=2,x=3,S=4,I=5,A=6,T=8,E=9,B=11,k=12,C=13,L=16,D=-1,M=-2,O=-3,N=-4,F=-5,U=-6,V=-7,P=-8,R=-9,j=-10,z=-11,$=-12,W=-13,H=-14,q=-19,Y=-20,G=-21,K=-22,J=-25,Q=-26,Z={};function X(t,e,r){return e<=t&&t<=r}function tt(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}Z.SIZEOF_SHORT=2,Z.SIZEOF_INT=4,Z.FILE_IDENTIFIER_LENGTH=4,Z.Encoding={UTF8_BYTES:1,UTF16_STRING:2},Z.int32=new Int32Array(2),Z.float32=new Float32Array(Z.int32.buffer),Z.float64=new Float64Array(Z.int32.buffer),Z.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],Z.Long=function(t,e){this.low=0|t,this.high=0|e},Z.Long.create=function(t,e){return 0==t&&0==e?Z.Long.ZERO:new Z.Long(t,e)},Z.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},Z.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},Z.Long.ZERO=new Z.Long(0,0),Z.Builder=function(t){if(t)e=t;else var e=1024;this.bb=Z.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},Z.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},Z.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},Z.Builder.prototype.dataBuffer=function(){return this.bb},Z.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},Z.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var r=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<r+t+e;){var i=this.bb.capacity();this.bb=Z.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)},Z.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},Z.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},Z.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},Z.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},Z.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},Z.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},Z.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},Z.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},Z.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},Z.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},Z.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},Z.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},Z.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},Z.Builder.prototype.addFieldInt8=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt8(e),this.slot(t))},Z.Builder.prototype.addFieldInt16=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt16(e),this.slot(t))},Z.Builder.prototype.addFieldInt32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt32(e),this.slot(t))},Z.Builder.prototype.addFieldInt64=function(t,e,r){!this.force_defaults&&e.equals(r)||(this.addInt64(e),this.slot(t))},Z.Builder.prototype.addFieldFloat32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat32(e),this.slot(t))},Z.Builder.prototype.addFieldFloat64=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat64(e),this.slot(t))},Z.Builder.prototype.addFieldOffset=function(t,e,r){(this.force_defaults||e!=r)&&(this.addOffset(e),this.slot(t))},Z.Builder.prototype.addFieldStruct=function(t,e,r){e!=r&&(this.nested(e),this.slot(t))},Z.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},Z.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},Z.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},Z.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},Z.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var r=e<<1,i=Z.ByteBuffer.allocate(r);return i.setPosition(r-e),i.bytes().set(t.bytes(),r-e),i},Z.Builder.prototype.addOffset=function(t){this.prep(Z.SIZEOF_INT,0),this.writeInt32(this.offset()-t+Z.SIZEOF_INT)},Z.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},Z.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var r=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var i=(r+2)*Z.SIZEOF_SHORT;this.addInt16(i);var n=0,s=this.space;t:for(e=0;e<this.vtables.length;e++){var a=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(a)){for(var o=Z.SIZEOF_SHORT;o<i;o+=Z.SIZEOF_SHORT)if(this.bb.readInt16(s+o)!=this.bb.readInt16(a+o))continue t;n=this.vtables[e];break}}return n?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,n-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},Z.Builder.prototype.finish=function(t,e){if(e){var r=e;if(this.prep(this.minalign,Z.SIZEOF_INT+Z.FILE_IDENTIFIER_LENGTH),r.length!=Z.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+Z.FILE_IDENTIFIER_LENGTH);for(var i=Z.FILE_IDENTIFIER_LENGTH-1;i>=0;i--)this.writeInt8(r.charCodeAt(i))}this.prep(this.minalign,Z.SIZEOF_INT),this.addOffset(t),this.bb.setPosition(this.space)},Z.Builder.prototype.requiredField=function(t,e){var r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(0!=this.bb.readInt16(i+e)))throw new Error("FlatBuffers: field "+e+" must be set")},Z.Builder.prototype.startVector=function(t,e,r){this.notNested(),this.vector_num_elems=e,this.prep(Z.SIZEOF_INT,t*e),this.prep(r,t*e)},Z.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},Z.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var r=0;r<t.length;){var i,n=t.charCodeAt(r++);if(n<55296||n>=56320)i=n;else i=(n<<10)+t.charCodeAt(r++)+-56613888;i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(63&i|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);r=0;for(var s=this.space,a=this.bb.bytes();r<e.length;r++)a[s++]=e[r];return this.endVector()},Z.Builder.prototype.createLong=function(t,e){return Z.Long.create(t,e)},Z.ByteBuffer=function(t){this.bytes_=t,this.position_=0},Z.ByteBuffer.allocate=function(t){return new Z.ByteBuffer(new Uint8Array(t))},Z.ByteBuffer.prototype.clear=function(){this.position_=0},Z.ByteBuffer.prototype.bytes=function(){return this.bytes_},Z.ByteBuffer.prototype.position=function(){return this.position_},Z.ByteBuffer.prototype.setPosition=function(t){this.position_=t},Z.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},Z.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},Z.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},Z.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},Z.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},Z.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},Z.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},Z.ByteBuffer.prototype.readInt64=function(t){return new Z.Long(this.readInt32(t),this.readInt32(t+4))},Z.ByteBuffer.prototype.readUint64=function(t){return new Z.Long(this.readUint32(t),this.readUint32(t+4))},Z.ByteBuffer.prototype.readFloat32=function(t){return Z.int32[0]=this.readInt32(t),Z.float32[0]},Z.ByteBuffer.prototype.readFloat64=function(t){return Z.int32[Z.isLittleEndian?0:1]=this.readInt32(t),Z.int32[Z.isLittleEndian?1:0]=this.readInt32(t+4),Z.float64[0]},Z.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},Z.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},Z.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},Z.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},Z.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},Z.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},Z.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},Z.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},Z.ByteBuffer.prototype.writeFloat32=function(t,e){Z.float32[0]=e,this.writeInt32(t,Z.int32[0])},Z.ByteBuffer.prototype.writeFloat64=function(t,e){Z.float64[0]=e,this.writeInt32(t,Z.int32[Z.isLittleEndian?0:1]),this.writeInt32(t+4,Z.int32[Z.isLittleEndian?1:0])},Z.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+Z.SIZEOF_INT+Z.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<Z.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+Z.SIZEOF_INT+e));return t},Z.ByteBuffer.prototype.__offset=function(t,e){var r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0},Z.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},Z.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var r=this.readInt32(t),i="",n=0;if(t+=Z.SIZEOF_INT,e===Z.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;n<r;){var s,a=this.readUint8(t+n++);if(a<192)s=a;else{var o=this.readUint8(t+n++);if(a<224)s=(31&a)<<6|63&o;else{var c=this.readUint8(t+n++);if(a<240)s=(15&a)<<12|(63&o)<<6|63&c;else s=(7&a)<<18|(63&o)<<12|(63&c)<<6|63&this.readUint8(t+n++)}}s<65536?i+=String.fromCharCode(s):(s-=65536,i+=String.fromCharCode(55296+(s>>10),56320+(1023&s)))}return i},Z.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},Z.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+Z.SIZEOF_INT},Z.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},Z.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=Z.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+Z.FILE_IDENTIFIER_LENGTH);for(var e=0;e<Z.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+Z.SIZEOF_INT+e))return!1;return!0},Z.ByteBuffer.prototype.createLong=function(t,e){return Z.Long.create(t,e)};function et(t){this.tokens=[].slice.call(t)}et.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var rt=-1;function it(t,e){if(t)throw TypeError("Decoder error");return e||65533}var nt="utf-8";function st(t,e){if(!(this instanceof st))return new st(t,e);if((t=void 0!==t?String(t).toLowerCase():nt)!==nt)throw new Error("Encoding not supported. Only utf-8 is supported");e=tt(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function at(t,e){if(!(this instanceof at))return new at(t,e);if((t=void 0!==t?String(t).toLowerCase():nt)!==nt)throw new Error("Encoding not supported. Only utf-8 is supported");e=tt(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function ot(t){var e=t.fatal,r=0,i=0,n=0,s=128,a=191;this.handler=function(t,o){if(-1===o&&0!==n)return n=0,it(e);if(-1===o)return rt;if(0===n){if(X(o,0,127))return o;if(X(o,194,223))n=1,r=o-192;else if(X(o,224,239))224===o&&(s=160),237===o&&(a=159),n=2,r=o-224;else{if(!X(o,240,244))return it(e);240===o&&(s=144),244===o&&(a=143),n=3,r=o-240}return r<<=6*n,null}if(!X(o,s,a))return r=n=i=0,s=128,a=191,t.prepend(o),it(e);if(s=128,a=191,r+=o-128<<6*(n-(i+=1)),i!==n)return null;var c=r;return r=n=i=0,c}}function ct(t){t.fatal,this.handler=function(t,e){if(-1===e)return rt;if(X(e,0,127))return e;var r,i;X(e,128,2047)?(r=1,i=192):X(e,2048,65535)?(r=2,i=224):X(e,65536,1114111)&&(r=3,i=240);for(var n=[(e>>6*r)+i];r>0;){var s=e>>6*(r-1);n.push(128|63&s),r-=1}return n}}st.prototype={decode:function(t,e){var r;r="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=tt(e),this._streaming||(this._decoder=new ot({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var i,n=new et(r),s=[];!n.endOfStream()&&(i=this._decoder.handler(n,n.read()))!==rt;)null!==i&&(Array.isArray(i)?s.push.apply(s,i):s.push(i));if(!this._streaming){do{if((i=this._decoder.handler(n,n.read()))===rt)break;null!==i&&(Array.isArray(i)?s.push.apply(s,i):s.push(i))}while(!n.endOfStream());this._decoder=null}return s.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===s[0]?(this._BOMseen=!0,s.shift()):this._BOMseen=!0)),function(t){for(var e="",r=0;r<t.length;++r){var i=t[r];i<=65535?e+=String.fromCharCode(i):(i-=65536,e+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return e}(s)}},at.prototype={encode:function(t,e){t=t?String(t):"",e=tt(e),this._streaming||(this._encoder=new ct(this._options)),this._streaming=Boolean(e.stream);for(var r,i=[],n=new et(function(t){for(var e=String(t),r=e.length,i=0,n=[];i<r;){var s=e.charCodeAt(i);if(s<55296||s>57343)n.push(s);else if(56320<=s&&s<=57343)n.push(65533);else if(55296<=s&&s<=56319)if(i===r-1)n.push(65533);else{var a=t.charCodeAt(i+1);if(56320<=a&&a<=57343){var o=1023&s,c=1023&a;n.push(65536+(o<<10)+c),i+=1}else n.push(65533)}i+=1}return n}(t));!n.endOfStream()&&(r=this._encoder.handler(n,n.read()))!==rt;)Array.isArray(r)?i.push.apply(i,r):i.push(r);if(!this._streaming){for(;(r=this._encoder.handler(n,n.read()))!==rt;)Array.isArray(r)?i.push.apply(i,r):i.push(r);this._encoder=null}return new Uint8Array(i)}};const ut="function"==typeof Buffer?Buffer:null,ht="function"==typeof TextDecoder&&"function"==typeof TextEncoder,lt=(t=>{if(ht||!ut){const e=new t("utf-8");return t=>e.decode(t)}return t=>{const{buffer:e,byteOffset:r,length:i}=jt(t);return ut.from(e,r,i).toString()}})("undefined"!=typeof TextDecoder?TextDecoder:st),pt=(t=>{if(ht||!ut){const e=new t;return t=>e.encode(t)}return(t="")=>jt(ut.from(t,"utf8"))})("undefined"!=typeof TextEncoder?TextEncoder:at),dt=Object.freeze({done:!0,value:void 0});class ft{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class yt{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class mt extends yt{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}get closed(){return this._closedPromise}async cancel(t){await this.return(t)}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(dt);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Yt.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Yt.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}async throw(t){return await this.abort(t),dt}async return(t){return await this.close(),dt}async read(t){return(await this.next(t,"read")).value}async peek(t){return(await this.next(t,"peek")).value}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((t,e)=>{this.resolvers.push({resolve:t,reject:e})})):Promise.resolve(dt)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error(`${this} is closed`)}}const[bt,gt]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!=typeof BigInt?[BigInt,!0]:[e,!1]})(),[_t,vt]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!=typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),[wt,xt]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!=typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),St=t=>"boolean"==typeof t,It=t=>"function"==typeof t,At=t=>null!=t&&Object(t)===t,Tt=t=>At(t)&&It(t.then),Et=t=>At(t)&&It(t[Symbol.iterator]),Bt=t=>At(t)&&It(t[Symbol.asyncIterator]),kt=t=>At(t)&&At(t.schema),Ct=t=>At(t)&&"done"in t&&"value"in t,Lt=t=>At(t)&&It(t.stat)&&(t=>"number"==typeof t)(t.fd),Dt=t=>At(t)&&Mt(t.body),Mt=t=>At(t)&&It(t.cancel)&&It(t.getReader)&&!(t instanceof yt),Ot=t=>At(t)&&It(t.read)&&It(t.pipe)&&St(t.readable)&&!(t instanceof yt);var Nt=Z.ByteBuffer;const Ft="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function Ut(t,e,r=0,i=e.byteLength){const n=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,n),a=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,n));return s.set(a,r),t}function Vt(t,e){let r,i,n,s=function(t){let e,r,i,n,s=t[0]?[t[0]]:[];for(let a,o,c=0,u=0,h=t.length;++c<h;)a=s[u],o=t[c],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset?o&&(s[++u]=o):(({byteOffset:e,byteLength:i}=a),({byteOffset:r,byteLength:n}=o),e+i<r||r+n<e?o&&(s[++u]=o):s[u]=new Uint8Array(a.buffer,e,r-e+n));return s}(t),a=s.reduce(((t,e)=>t+e.byteLength),0),o=0,c=-1,u=Math.min(e||1/0,a);for(let t=s.length;++c<t;){if(r=s[c],i=r.subarray(0,Math.min(r.length,u-o)),u<=o+i.length){i.length<r.length?s[c]=r.subarray(i.length):i.length===r.length&&c++,n?Ut(n,i,o):n=i;break}Ut(n||(n=new Uint8Array(u)),i,o),o+=i.length}return[n||new Uint8Array(0),s.slice(c),a-(n?n.byteLength:0)]}function Pt(t,e){let r=Ct(e)?e.value:e;return r instanceof t?t===Uint8Array?new t(r.buffer,r.byteOffset,r.byteLength):r:r?("string"==typeof r&&(r=pt(r)),r instanceof ArrayBuffer||r instanceof Ft?new t(r):r instanceof Nt?Pt(t,r.bytes()):ArrayBuffer.isView(r)?r.byteLength<=0?new t(0):new t(r.buffer,r.byteOffset,r.byteLength/t.BYTES_PER_ELEMENT):t.from(r)):new t(0)}const Rt=t=>Pt(Int32Array,t),jt=t=>Pt(Uint8Array,t),zt=t=>(t.next(),t);const $t=t=>function*(t,e){const r=function*(t){yield t},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Ft?r(e):Et(e)?e:r(e);return yield*zt(function*(e){let r=null;do{r=e.next(yield Pt(t,r))}while(!r.done)}(i[Symbol.iterator]())),new t}(Uint8Array,t);async function*Wt(t,e){if(Tt(e))return yield*Wt(t,await e);const r=async function*(t){yield await t},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Ft?r(e):Et(e)?async function*(t){yield*zt(function*(t){let e=null;do{e=t.next(yield e&&e.value)}while(!e.done)}(t[Symbol.iterator]()))}(e):Bt(e)?e:r(e);return yield*zt(async function*(e){let r=null;do{r=await e.next(yield Pt(t,r))}while(!r.done)}(i[Symbol.asyncIterator]())),new t}const Ht=t=>Wt(Uint8Array,t);function qt(t,e,r){if(0!==t){r=r.slice(0,e+1);for(let i=-1;++i<=e;)r[i]+=t}return r}var Yt={fromIterable:t=>Gt(function*(t){let e,r,i,n,s=!1,a=[],o=0;function c(){return"peek"===i?Vt(a,n)[0]:([r,a,o]=Vt(a,n),r)}({cmd:i,size:n}=yield null);let u=$t(t)[Symbol.iterator]();try{do{if(({done:e,value:r}=isNaN(n-o)?u.next(void 0):u.next(n-o)),!e&&r.byteLength>0&&(a.push(r),o+=r.byteLength),e||n<=o)do{({cmd:i,size:n}=yield c())}while(n<o)}while(!e)}catch(t){(s=!0)&&"function"==typeof u.throw&&u.throw(t)}finally{!1===s&&"function"==typeof u.return&&u.return(null)}return null}(t)),fromAsyncIterable:t=>Gt(async function*(t){let e,r,i,n,s=!1,a=[],o=0;function c(){return"peek"===i?Vt(a,n)[0]:([r,a,o]=Vt(a,n),r)}({cmd:i,size:n}=yield null);let u=Ht(t)[Symbol.asyncIterator]();try{do{if(({done:e,value:r}=isNaN(n-o)?await u.next(void 0):await u.next(n-o)),!e&&r.byteLength>0&&(a.push(r),o+=r.byteLength),e||n<=o)do{({cmd:i,size:n}=yield c())}while(n<o)}while(!e)}catch(t){(s=!0)&&"function"==typeof u.throw&&await u.throw(t)}finally{!1===s&&"function"==typeof u.return&&await u.return(new Uint8Array(0))}return null}(t)),fromDOMStream:t=>Gt(async function*(t){let e,r,i,n=!1,s=!1,a=[],o=0;function c(){return"peek"===r?Vt(a,i)[0]:([e,a,o]=Vt(a,i),e)}({cmd:r,size:i}=yield null);let u=new Kt(t);try{do{if(({done:n,value:e}=isNaN(i-o)?await u.read(void 0):await u.read(i-o)),!n&&e.byteLength>0&&(a.push(jt(e)),o+=e.byteLength),n||i<=o)do{({cmd:r,size:i}=yield c())}while(i<o)}while(!n)}catch(t){(s=!0)&&await u.cancel(t)}finally{!1===s?await u.cancel():t.locked&&u.releaseLock()}return null}(t)),fromNodeStream:t=>Gt(async function*(t){let e,r,i,n=[],s="error",a=!1,o=null,c=0,u=[];function h(){return"peek"===e?Vt(u,r)[0]:([i,u,c]=Vt(u,r),i)}if(({cmd:e,size:r}=yield null),t.isTTY)return yield new Uint8Array(0),null;try{n[0]=Qt(t,"end"),n[1]=Qt(t,"error");do{if(n[2]=Qt(t,"readable"),[s,o]=await Promise.race(n.map((t=>t[2]))),"error"===s)break;if((a="end"===s)||(isFinite(r-c)?(i=jt(t.read(r-c)),i.byteLength<r-c&&(i=jt(t.read(void 0)))):i=jt(t.read(void 0)),i.byteLength>0&&(u.push(i),c+=i.byteLength)),a||r<=c)do{({cmd:e,size:r}=yield h())}while(r<c)}while(!a)}finally{await l(n,"error"===s?o:null)}return null;function l(e,r){return i=u=null,new Promise((async(i,n)=>{for(const[r,i]of e)t.off(r,i);try{const e=t.destroy;e&&e.call(t,r),r=void 0}catch(t){r=t||r}finally{null!=r?n(r):i()}}))}}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}};const Gt=t=>(t.next(),t);class Kt{constructor(t){this.source=t,this.byobReader=null,this.defaultReader=null;try{this.supportsBYOB=!!(this.reader=this.getBYOBReader())}catch(t){this.supportsBYOB=!(this.reader=this.getDefaultReader())}}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=this.byobReader=this.defaultReader=null}async cancel(t){const{reader:e,source:r}=this;e&&await e.cancel(t).catch((()=>{})),r&&r.locked&&this.releaseLock()}async read(t){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=this.supportsBYOB&&"number"==typeof t?await this.readFromBYOBReader(t):await this.getDefaultReader().read();return!e.done&&(e.value=jt(e)),e}getDefaultReader(){return this.byobReader&&this.releaseLock(),this.defaultReader||(this.defaultReader=this.source.getReader(),this.defaultReader.closed.catch((()=>{}))),this.reader=this.defaultReader}getBYOBReader(){return this.defaultReader&&this.releaseLock(),this.byobReader||(this.byobReader=this.source.getReader({mode:"byob"}),this.byobReader.closed.catch((()=>{}))),this.reader=this.byobReader}async readFromBYOBReader(t){return await Jt(this.getBYOBReader(),new ArrayBuffer(t),0,t)}}async function Jt(t,e,r,i){if(r>=i)return{done:!1,value:new Uint8Array(e,0,i)};const{done:n,value:s}=await t.read(new Uint8Array(e,r,i-r));return(r+=s.byteLength)<i&&!n?await Jt(t,s.buffer,r,i):{done:n,value:new Uint8Array(s.buffer,0,r)}}const Qt=(t,e)=>{let r,i=t=>r([e,t]);return[e,i,new Promise((n=>(r=n)&&t.once(e,i)))]};class Zt{}var Xt,te;Zt.prototype.data=null,function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4"}((i=r.flatbuf||(r.flatbuf={})).MetadataVersion||(i.MetadataVersion={}))}(Xt||(Xt={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}((i=r.flatbuf||(r.flatbuf={})).UnionMode||(i.UnionMode={}))}(Xt||(Xt={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}((i=r.flatbuf||(r.flatbuf={})).Precision||(i.Precision={}))}(Xt||(Xt={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}((i=r.flatbuf||(r.flatbuf={})).DateUnit||(i.DateUnit={}))}(Xt||(Xt={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}((i=r.flatbuf||(r.flatbuf={})).TimeUnit||(i.TimeUnit={}))}(Xt||(Xt={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME"}((i=r.flatbuf||(r.flatbuf={})).IntervalUnit||(i.IntervalUnit={}))}(Xt||(Xt={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"}((i=r.flatbuf||(r.flatbuf={})).Type||(i.Type={}))}(Xt||(Xt={})),function(t){var e,r,i,n;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),i=r.flatbuf||(r.flatbuf={}),(n=i.Endianness||(i.Endianness={}))[n.Little=0]="Little",n[n.Big=1]="Big"}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return e.startNull(t),e.endNull(t)}}t.Null=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return e.startStruct_(t),e.endStruct_(t)}}t.Struct_=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return e.startList(t),e.endList(t)}}t.List=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeList(t){t.startObject(0)}static endLargeList(t){return t.endObject()}static createLargeList(t){return e.startLargeList(t),e.endLargeList(t)}}t.LargeList=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}listSize(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,r){return e.startFixedSizeList(t),e.addListSize(t,r),e.endFixedSizeList(t)}}t.FixedSizeList=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){let t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,r){return e.startMap(t),e.addKeysSorted(t,r),e.endMap(t)}}t.Map=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}mode(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.UnionMode.Sparse}typeIds(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.UnionMode.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,i){return r.startUnion(t),r.addMode(t,e),r.addTypeIds(t,i),r.endUnion(t)}}e.Union=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){let t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,r,i){return e.startInt(t),e.addBitWidth(t,r),e.addIsSigned(t,i),e.endInt(t)}}t.Int=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}precision(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Precision.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.Precision.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return r.startFloatingPoint(t),r.addPrecision(t,e),r.endFloatingPoint(t)}}e.FloatingPoint=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return e.startUtf8(t),e.endUtf8(t)}}t.Utf8=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return e.startBinary(t),e.endBinary(t)}}t.Binary=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeUtf8(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return e.startLargeUtf8(t),e.endLargeUtf8(t)}}t.LargeUtf8=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsLargeBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return e.startLargeBinary(t),e.endLargeBinary(t)}}t.LargeBinary=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,r){return e.startFixedSizeBinary(t),e.addByteWidth(t,r),e.endFixedSizeBinary(t)}}t.FixedSizeBinary=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return e.startBool(t),e.endBool(t)}}t.Bool=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}precision(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}static startDecimal(t){t.startObject(2)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static endDecimal(t){return t.endObject()}static createDecimal(t,r,i){return e.startDecimal(t),e.addPrecision(t,r),e.addScale(t,i),e.endDecimal(t)}}t.Decimal=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.DateUnit.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.DateUnit.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return r.startDate(t),r.addUnit(t,e),r.endDate(t)}}e.Date=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.MILLISECOND}bitWidth(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,i){return r.startTime(t),r.addUnit(t,e),r.addBitWidth(t,i),r.endTime(t)}}e.Time=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.SECOND}timezone(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.TimeUnit.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,i){return r.startTimestamp(t),r.addUnit(t,e),r.addTimezone(t,i),r.endTimestamp(t)}}e.Timestamp=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return r.startInterval(t),r.addUnit(t,e),r.endInterval(t)}}e.Interval=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDuration(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.TimeUnit.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,e){return r.startDuration(t),r.addUnit(t,e),r.endDuration(t)}}e.Duration=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}key(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,r,i){return e.startKeyValue(t),e.addKey(t,r),e.addValue(t,i),e.endKeyValue(t)}}t.KeyValue=e}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(e){let r=this.bb.__offset(this.bb_pos,6);return r?(e||new t.apache.arrow.flatbuf.Int).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isOrdered(){let t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryEncoding(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryEncoding(t){return t.endObject()}static createDictionaryEncoding(t,e,i,n){return r.startDictionaryEncoding(t),r.addId(t,e),r.addIndexType(t,i),r.addIsOrdered(t,n),r.endDictionaryEncoding(t)}}e.DictionaryEncoding=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){let t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.Type.NONE}type(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(e){let r=this.bb.__offset(this.bb_pos,12);return r?(e||new t.apache.arrow.flatbuf.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}children(e,r){let i=this.bb.__offset(this.bb_pos,14);return i?(r||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}childrenLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(e,r){let i=this.bb.__offset(this.bb_pos,16);return i?(r||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(e,r){e.addFieldInt8(2,r,t.apache.arrow.flatbuf.Type.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}static createField(t,e,i,n,s,a,o,c){return r.startField(t),r.addName(t,e),r.addNullable(t,i),r.addTypeType(t,n),r.addType(t,s),r.addDictionary(t,a),r.addChildren(t,o),r.addCustomMetadata(t,c),r.endField(t)}}e.Field=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).Buffer=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static createBuffer(t,e,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(e),t.offset()}}}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}endianness(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Endianness.Little}fields(e,r){let i=this.bb.__offset(this.bb_pos,6);return i?(r||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}fieldsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(e,r){let i=this.bb.__offset(this.bb_pos,8);return i?(r||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(3)}static addEndianness(e,r){e.addFieldInt16(0,r,t.apache.arrow.flatbuf.Endianness.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static createSchema(t,e,i,n){return r.startSchema(t),r.addEndianness(t,e),r.addFields(t,i),r.addCustomMetadata(t,n),r.endSchema(t)}}e.Schema=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Xt||(Xt={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).Schema=Xt.apache.arrow.flatbuf.Schema}(te||(te={})),function(t){var e,r,i;e=t.apache||(t.apache={}),r=e.arrow||(e.arrow={}),function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}((i=r.flatbuf||(r.flatbuf={})).MessageHeader||(i.MessageHeader={}))}(te||(te={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).FieldNode=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static createFieldNode(t,e,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(e),t.offset()}}}(te||(te={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}length(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(e,r){let i=this.bb.__offset(this.bb_pos,6);return i?(r||new t.apache.arrow.flatbuf.FieldNode).__init(this.bb.__vector(this.bb_pos+i)+16*e,this.bb):null}nodesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){let r=this.bb.__offset(this.bb_pos,8);return r?(e||new Xt.apache.arrow.flatbuf.Buffer).__init(this.bb.__vector(this.bb_pos+r)+16*t,this.bb):null}buffersLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startRecordBatch(t){t.startObject(3)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static endRecordBatch(t){return t.endObject()}static createRecordBatch(t,e,i,n){return r.startRecordBatch(t),r.addLength(t,e),r.addNodes(t,i),r.addBuffers(t,n),r.endRecordBatch(t)}}e.RecordBatch=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(te||(te={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(e){let r=this.bb.__offset(this.bb_pos,6);return r?(e||new t.apache.arrow.flatbuf.RecordBatch).__init(this.bb.__indirect(this.bb_pos+r),this.bb):null}isDelta(){let t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}static createDictionaryBatch(t,e,i,n){return r.startDictionaryBatch(t),r.addId(t,e),r.addData(t,i),r.addIsDelta(t,n),r.endDictionaryBatch(t)}}e.DictionaryBatch=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(te||(te={})),function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xt.apache.arrow.flatbuf.MetadataVersion.V1}headerType(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.MessageHeader.NONE}header(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){let r=this.bb.__offset(this.bb_pos,12);return r?(e||new Xt.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,Xt.apache.arrow.flatbuf.MetadataVersion.V1)}static addHeaderType(e,r){e.addFieldInt8(1,r,t.apache.arrow.flatbuf.MessageHeader.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static createMessage(t,e,i,n,s,a){return r.startMessage(t),r.addVersion(t,e),r.addHeaderType(t,i),r.addHeader(t,n),r.addBodyLength(t,s),r.addCustomMetadata(t,a),r.endMessage(t)}}e.Message=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(te||(te={})),Xt.apache.arrow.flatbuf.Type;var ee,re,ie=Xt.apache.arrow.flatbuf.DateUnit,ne=Xt.apache.arrow.flatbuf.TimeUnit,se=Xt.apache.arrow.flatbuf.Precision,ae=Xt.apache.arrow.flatbuf.UnionMode,oe=Xt.apache.arrow.flatbuf.IntervalUnit,ce=te.apache.arrow.flatbuf.MessageHeader,ue=Xt.apache.arrow.flatbuf.MetadataVersion;function he(t,e,r,i){return 0!=(r&1<<i)}function le(t,e,r,i){return(r&1<<i)>>i}function pe(t,e,r){const i=r.byteLength+7&-8;if(t>0||r.byteLength<i){const n=new Uint8Array(i);return n.set(t%8==0?r.subarray(t>>3):de(fe(r,t,e,null,he)).subarray(0,i)),n}return r}function de(t){let e=[],r=0,i=0,n=0;for(const s of t)s&&(n|=1<<i),8==++i&&(e[r++]=n,n=i=0);(0===r||i>0)&&(e[r++]=n);let s=new Uint8Array(e.length+7&-8);return s.set(e),s}function*fe(t,e,r,i,n){let s=e%8,a=e>>3,o=0,c=r;for(;c>0;s=0){let e=t[a++];do{yield n(i,o++,e,s)}while(--c>0&&++s<8)}}function ye(t,e,r){if(r-e<=0)return 0;if(r-e<8){let i=0;for(const n of fe(t,e,r-e,t,le))i+=n;return i}const i=r>>3<<3,n=e+(e%8==0?0:8-e%8);return ye(t,e,n)+ye(t,i,r)+function(t,e,r){let i=0,n=0|e;const s=new DataView(t.buffer,t.byteOffset,t.byteLength),a=void 0===r?t.byteLength:n+r;for(;a-n>=4;)i+=me(s.getUint32(n)),n+=4;for(;a-n>=2;)i+=me(s.getUint16(n)),n+=2;for(;a-n>=1;)i+=me(s.getUint8(n)),n+=1;return i}(t,n>>3,i-n>>3)}function me(t){let e=0|t;return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(ee||(ee={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(re||(re={}));class be{visitMany(t,...e){return t.map(((t,r)=>this.visit(t,...e.map((t=>t[r])))))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return function(t,e,r=!0){let i=null,n=ee.NONE;e instanceof gr||e instanceof Zt?n=ge(e.type):e instanceof Ce?n=ge(e):"number"!=typeof(n=e)&&(n=ee[e]);switch(n){case ee.Null:i=t.visitNull;break;case ee.Bool:i=t.visitBool;break;case ee.Int:i=t.visitInt;break;case ee.Int8:i=t.visitInt8||t.visitInt;break;case ee.Int16:i=t.visitInt16||t.visitInt;break;case ee.Int32:i=t.visitInt32||t.visitInt;break;case ee.Int64:i=t.visitInt64||t.visitInt;break;case ee.Uint8:i=t.visitUint8||t.visitInt;break;case ee.Uint16:i=t.visitUint16||t.visitInt;break;case ee.Uint32:i=t.visitUint32||t.visitInt;break;case ee.Uint64:i=t.visitUint64||t.visitInt;break;case ee.Float:i=t.visitFloat;break;case ee.Float16:i=t.visitFloat16||t.visitFloat;break;case ee.Float32:i=t.visitFloat32||t.visitFloat;break;case ee.Float64:i=t.visitFloat64||t.visitFloat;break;case ee.Utf8:i=t.visitUtf8;break;case ee.Binary:i=t.visitBinary;break;case ee.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case ee.Date:i=t.visitDate;break;case ee.DateDay:i=t.visitDateDay||t.visitDate;break;case ee.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case ee.Timestamp:i=t.visitTimestamp;break;case ee.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case ee.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case ee.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case ee.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case ee.Time:i=t.visitTime;break;case ee.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case ee.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case ee.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case ee.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case ee.Decimal:i=t.visitDecimal;break;case ee.List:i=t.visitList;break;case ee.Struct:i=t.visitStruct;break;case ee.Union:i=t.visitUnion;break;case ee.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case ee.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case ee.Dictionary:i=t.visitDictionary;break;case ee.Interval:i=t.visitInterval;break;case ee.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case ee.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case ee.FixedSizeList:i=t.visitFixedSizeList;break;case ee.Map:i=t.visitMap}if("function"==typeof i)return i;if(!r)return()=>null;throw new Error(`Unrecognized type '${ee[n]}'`)}(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function ge(t){switch(t.typeId){case ee.Null:return ee.Null;case ee.Int:const{bitWidth:e,isSigned:r}=t;switch(e){case 8:return r?ee.Int8:ee.Uint8;case 16:return r?ee.Int16:ee.Uint16;case 32:return r?ee.Int32:ee.Uint32;case 64:return r?ee.Int64:ee.Uint64}return ee.Int;case ee.Float:switch(t.precision){case se.HALF:return ee.Float16;case se.SINGLE:return ee.Float32;case se.DOUBLE:return ee.Float64}return ee.Float;case ee.Binary:return ee.Binary;case ee.Utf8:return ee.Utf8;case ee.Bool:return ee.Bool;case ee.Decimal:return ee.Decimal;case ee.Time:switch(t.unit){case ne.SECOND:return ee.TimeSecond;case ne.MILLISECOND:return ee.TimeMillisecond;case ne.MICROSECOND:return ee.TimeMicrosecond;case ne.NANOSECOND:return ee.TimeNanosecond}return ee.Time;case ee.Timestamp:switch(t.unit){case ne.SECOND:return ee.TimestampSecond;case ne.MILLISECOND:return ee.TimestampMillisecond;case ne.MICROSECOND:return ee.TimestampMicrosecond;case ne.NANOSECOND:return ee.TimestampNanosecond}return ee.Timestamp;case ee.Date:switch(t.unit){case ie.DAY:return ee.DateDay;case ie.MILLISECOND:return ee.DateMillisecond}return ee.Date;case ee.Interval:switch(t.unit){case oe.DAY_TIME:return ee.IntervalDayTime;case oe.YEAR_MONTH:return ee.IntervalYearMonth}return ee.Interval;case ee.Map:return ee.Map;case ee.List:return ee.List;case ee.Struct:return ee.Struct;case ee.Union:switch(t.mode){case ae.Dense:return ee.DenseUnion;case ae.Sparse:return ee.SparseUnion}return ee.Union;case ee.FixedSizeBinary:return ee.FixedSizeBinary;case ee.FixedSizeList:return ee.FixedSizeList;case ee.Dictionary:return ee.Dictionary}throw new Error(`Unrecognized type '${ee[t.typeId]}'`)}be.prototype.visitInt8=null,be.prototype.visitInt16=null,be.prototype.visitInt32=null,be.prototype.visitInt64=null,be.prototype.visitUint8=null,be.prototype.visitUint16=null,be.prototype.visitUint32=null,be.prototype.visitUint64=null,be.prototype.visitFloat16=null,be.prototype.visitFloat32=null,be.prototype.visitFloat64=null,be.prototype.visitDateDay=null,be.prototype.visitDateMillisecond=null,be.prototype.visitTimestampSecond=null,be.prototype.visitTimestampMillisecond=null,be.prototype.visitTimestampMicrosecond=null,be.prototype.visitTimestampNanosecond=null,be.prototype.visitTimeSecond=null,be.prototype.visitTimeMillisecond=null,be.prototype.visitTimeMicrosecond=null,be.prototype.visitTimeNanosecond=null,be.prototype.visitDenseUnion=null,be.prototype.visitSparseUnion=null,be.prototype.visitIntervalDayTime=null,be.prototype.visitIntervalYearMonth=null;class _e extends be{compareSchemas(t,e){return t===e||e instanceof t.constructor&&ke.compareFields(t.fields,e.fields)}compareFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,r)=>ke.compareField(t,e[r])))}compareField(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&ke.visit(t.type,e.type)}}function ve(t,e){return e instanceof t.constructor}function we(t,e){return t===e||ve(t,e)}function xe(t,e){return t===e||ve(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function Se(t,e){return t===e||ve(t,e)&&t.precision===e.precision}function Ie(t,e){return t===e||ve(t,e)&&t.unit===e.unit}function Ae(t,e){return t===e||ve(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function Te(t,e){return t===e||ve(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function Ee(t,e){return t===e||ve(t,e)&&t.mode===e.mode&&t.typeIds.every(((t,r)=>t===e.typeIds[r]))&&ke.compareFields(t.children,e.children)}function Be(t,e){return t===e||ve(t,e)&&t.unit===e.unit}_e.prototype.visitNull=we,_e.prototype.visitBool=we,_e.prototype.visitInt=xe,_e.prototype.visitInt8=xe,_e.prototype.visitInt16=xe,_e.prototype.visitInt32=xe,_e.prototype.visitInt64=xe,_e.prototype.visitUint8=xe,_e.prototype.visitUint16=xe,_e.prototype.visitUint32=xe,_e.prototype.visitUint64=xe,_e.prototype.visitFloat=Se,_e.prototype.visitFloat16=Se,_e.prototype.visitFloat32=Se,_e.prototype.visitFloat64=Se,_e.prototype.visitUtf8=we,_e.prototype.visitBinary=we,_e.prototype.visitFixedSizeBinary=function(t,e){return t===e||ve(t,e)&&t.byteWidth===e.byteWidth},_e.prototype.visitDate=Ie,_e.prototype.visitDateDay=Ie,_e.prototype.visitDateMillisecond=Ie,_e.prototype.visitTimestamp=Ae,_e.prototype.visitTimestampSecond=Ae,_e.prototype.visitTimestampMillisecond=Ae,_e.prototype.visitTimestampMicrosecond=Ae,_e.prototype.visitTimestampNanosecond=Ae,_e.prototype.visitTime=Te,_e.prototype.visitTimeSecond=Te,_e.prototype.visitTimeMillisecond=Te,_e.prototype.visitTimeMicrosecond=Te,_e.prototype.visitTimeNanosecond=Te,_e.prototype.visitDecimal=we,_e.prototype.visitList=function(t,e){return t===e||ve(t,e)&&t.children.length===e.children.length&&ke.compareFields(t.children,e.children)},_e.prototype.visitStruct=function(t,e){return t===e||ve(t,e)&&t.children.length===e.children.length&&ke.compareFields(t.children,e.children)},_e.prototype.visitUnion=Ee,_e.prototype.visitDenseUnion=Ee,_e.prototype.visitSparseUnion=Ee,_e.prototype.visitDictionary=function(t,e){return t===e||ve(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&ke.visit(t.indices,e.indices)&&ke.visit(t.dictionary,e.dictionary)},_e.prototype.visitInterval=Be,_e.prototype.visitIntervalDayTime=Be,_e.prototype.visitIntervalYearMonth=Be,_e.prototype.visitFixedSizeList=function(t,e){return t===e||ve(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&ke.compareFields(t.children,e.children)},_e.prototype.visitMap=function(t,e){return t===e||ve(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&ke.compareFields(t.children,e.children)};const ke=new _e;class Ce{static isNull(t){return t&&t.typeId===ee.Null}static isInt(t){return t&&t.typeId===ee.Int}static isFloat(t){return t&&t.typeId===ee.Float}static isBinary(t){return t&&t.typeId===ee.Binary}static isUtf8(t){return t&&t.typeId===ee.Utf8}static isBool(t){return t&&t.typeId===ee.Bool}static isDecimal(t){return t&&t.typeId===ee.Decimal}static isDate(t){return t&&t.typeId===ee.Date}static isTime(t){return t&&t.typeId===ee.Time}static isTimestamp(t){return t&&t.typeId===ee.Timestamp}static isInterval(t){return t&&t.typeId===ee.Interval}static isList(t){return t&&t.typeId===ee.List}static isStruct(t){return t&&t.typeId===ee.Struct}static isUnion(t){return t&&t.typeId===ee.Union}static isFixedSizeBinary(t){return t&&t.typeId===ee.FixedSizeBinary}static isFixedSizeList(t){return t&&t.typeId===ee.FixedSizeList}static isMap(t){return t&&t.typeId===ee.Map}static isDictionary(t){return t&&t.typeId===ee.Dictionary}get typeId(){return ee.NONE}compareTo(t){return ke.visit(this,t)}}var Le;Ce[Symbol.toStringTag]=((Le=Ce.prototype).children=null,Le.ArrayType=Array,Le[Symbol.toStringTag]="DataType");class De extends Ce{toString(){return"Null"}get typeId(){return ee.Null}}De[Symbol.toStringTag]=(t=>t[Symbol.toStringTag]="Null")(De.prototype);class Me extends Ce{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return ee.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:case 64:return this.isSigned?Int32Array:Uint32Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Me[Symbol.toStringTag]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Me.prototype);class Oe extends Me{constructor(){super(!0,8)}}class Ne extends Me{constructor(){super(!0,16)}}class Fe extends Me{constructor(){super(!0,32)}}class Ue extends Me{constructor(){super(!0,64)}}class Ve extends Me{constructor(){super(!1,8)}}class Pe extends Me{constructor(){super(!1,16)}}class Re extends Me{constructor(){super(!1,32)}}class je extends Me{constructor(){super(!1,64)}}Object.defineProperty(Oe.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(Ne.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(Fe.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(Ue.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(Ve.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(Pe.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(Re.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(je.prototype,"ArrayType",{value:Uint32Array});class ze extends Ce{constructor(t){super(),this.precision=t}get typeId(){return ee.Float}get ArrayType(){switch(this.precision){case se.HALF:return Uint16Array;case se.SINGLE:return Float32Array;case se.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}ze[Symbol.toStringTag]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(ze.prototype);class $e extends ze{constructor(){super(se.HALF)}}class We extends ze{constructor(){super(se.SINGLE)}}class He extends ze{constructor(){super(se.DOUBLE)}}Object.defineProperty($e.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(We.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(He.prototype,"ArrayType",{value:Float64Array});class qe extends Ce{constructor(){super()}get typeId(){return ee.Binary}toString(){return"Binary"}}qe[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(qe.prototype);class Ye extends Ce{constructor(){super()}get typeId(){return ee.Utf8}toString(){return"Utf8"}}Ye[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(Ye.prototype);class Ge extends Ce{constructor(){super()}get typeId(){return ee.Bool}toString(){return"Bool"}}Ge[Symbol.toStringTag]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(Ge.prototype);class Ke extends Ce{constructor(t,e){super(),this.scale=t,this.precision=e}get typeId(){return ee.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}Ke[Symbol.toStringTag]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(Ke.prototype);class Je extends Ce{constructor(t){super(),this.unit=t}get typeId(){return ee.Date}toString(){return`Date${32*(this.unit+1)}<${ie[this.unit]}>`}}Je[Symbol.toStringTag]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(Je.prototype);class Qe extends Je{constructor(){super(ie.DAY)}}class Ze extends Je{constructor(){super(ie.MILLISECOND)}}class Xe extends Ce{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return ee.Time}toString(){return`Time${this.bitWidth}<${ne[this.unit]}>`}}Xe[Symbol.toStringTag]=(t=>(t.unit=null,t.bitWidth=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Time"))(Xe.prototype);class tr extends Xe{constructor(){super(ne.SECOND,32)}}class er extends Xe{constructor(){super(ne.MILLISECOND,32)}}class rr extends Xe{constructor(){super(ne.MICROSECOND,64)}}class ir extends Xe{constructor(){super(ne.NANOSECOND,64)}}class nr extends Ce{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return ee.Timestamp}toString(){return`Timestamp<${ne[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}nr[Symbol.toStringTag]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(nr.prototype);class sr extends Ce{constructor(t){super(),this.unit=t}get typeId(){return ee.Interval}toString(){return`Interval<${oe[this.unit]}>`}}sr[Symbol.toStringTag]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(sr.prototype);class ar extends sr{constructor(){super(oe.DAY_TIME)}}class or extends sr{constructor(){super(oe.YEAR_MONTH)}}class cr extends Ce{constructor(t){super(),this.children=[t]}get typeId(){return ee.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}cr[Symbol.toStringTag]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(cr.prototype);class ur extends Ce{constructor(t){super(),this.children=t}get typeId(){return ee.Struct}toString(){return`Struct<{${this.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}ur[Symbol.toStringTag]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(ur.prototype);class hr extends Ce{constructor(t,e,r){super(),this.mode=t,this.children=r,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce(((t,e,r)=>(t[e]=r)&&t||t),Object.create(null))}get typeId(){return ee.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map((t=>`${t.type}`)).join(" | ")}>`}}hr[Symbol.toStringTag]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(hr.prototype);class lr extends Ce{constructor(t){super(),this.byteWidth=t}get typeId(){return ee.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}lr[Symbol.toStringTag]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(lr.prototype);class pr extends Ce{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return ee.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}pr[Symbol.toStringTag]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(pr.prototype);class dr extends Ce{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return ee.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}toString(){return`Map<{${this.children[0].type.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}dr[Symbol.toStringTag]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(dr.prototype);const fr=(yr=-1,()=>++yr);var yr;class mr extends Ce{constructor(t,e,r,i){super(),this.indices=e,this.dictionary=t,this.isOrdered=i||!1,this.id=null==r?fr():"number"==typeof r?r:r.low}get typeId(){return ee.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function br(t){let e=t;switch(t.typeId){case ee.Decimal:return 4;case ee.Timestamp:return 2;case ee.Date:case ee.Interval:return 1+e.unit;case ee.Int:case ee.Time:return+(e.bitWidth>32)+1;case ee.FixedSizeList:return e.listSize;case ee.FixedSizeBinary:return e.byteWidth;default:return 1}}mr[Symbol.toStringTag]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(mr.prototype);class gr{constructor(t,e,r,i,n,s,a){let o;this.type=t,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1)),this.childData=(s||[]).map((t=>t instanceof gr?t:t.data)),n instanceof gr?(this.stride=n.stride,this.values=n.values,this.typeIds=n.typeIds,this.nullBitmap=n.nullBitmap,this.valueOffsets=n.valueOffsets):(this.stride=br(t),n&&((o=n[0])&&(this.valueOffsets=o),(o=n[1])&&(this.values=o),(o=n[2])&&(this.nullBitmap=o),(o=n[3])&&(this.typeIds=o)))}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0,{valueOffsets:e,values:r,nullBitmap:i,typeIds:n}=this;return e&&(t+=e.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),n&&(t+=n.byteLength),this.childData.reduce(((t,e)=>t+e.byteLength),t)}get nullCount(){let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-ye(t,this.offset,this.offset+this.length)),e}clone(t,e=this.offset,r=this.length,i=this._nullCount,n=this,s=this.childData){return new gr(t,e,r,i,n,s,this.dictionary)}slice(t,e){const{stride:r,typeId:i,childData:n}=this,s=+(0===this._nullCount)-1,a=16===i?r:1,o=this._sliceBuffers(t,e,r,i);return this.clone(this.type,this.offset+t,e,s,o,!n.length||this.valueOffsets?n:this._sliceChildren(n,a*t,a*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===ee.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);i[e>>3]=(1<<e-(-8&e))-1,r>0&&i.set(pe(this.offset,e,this.nullBitmap),0);const n=this.buffers;return n[re.VALIDITY]=i,this.clone(this.type,0,t,r+(t-e),n)}_sliceBuffers(t,e,r,i){let n,{buffers:s}=this;return(n=s[re.TYPE])&&(s[re.TYPE]=n.subarray(t,t+e)),(n=s[re.OFFSET])&&(s[re.OFFSET]=n.subarray(t,t+e+1))||(n=s[re.DATA])&&(s[re.DATA]=6===i?n:n.subarray(r*t,r*(t+e))),s}_sliceChildren(t,e,r){return t.map((t=>t.slice(e,r)))}static new(t,e,r,i,n,s,a){switch(n instanceof gr?n=n.buffers:n||(n=[]),t.typeId){case ee.Null:return gr.Null(t,e,r);case ee.Int:return gr.Int(t,e,r,i||0,n[re.VALIDITY],n[re.DATA]||[]);case ee.Dictionary:return gr.Dictionary(t,e,r,i||0,n[re.VALIDITY],n[re.DATA]||[],a);case ee.Float:return gr.Float(t,e,r,i||0,n[re.VALIDITY],n[re.DATA]||[]);case ee.Bool:return gr.Bool(t,e,r,i||0,n[re.VALIDITY],n[re.DATA]||[]);case ee.Decimal:return gr.Decimal(t,e,r,i||0,n[re.VALIDITY],n[re.DATA]||[]);case ee.Date:return gr.Date(t,e,r,i||0,n[re.VALIDITY],n[re.DATA]||[]);case ee.Time:return gr.Time(t,e,r,i||0,n[re.VALIDITY],n[re.DATA]||[]);case ee.Timestamp:return gr.Timestamp(t,e,r,i||0,n[re.VALIDITY],n[re.DATA]||[]);case ee.Interval:return gr.Interval(t,e,r,i||0,n[re.VALIDITY],n[re.DATA]||[]);case ee.FixedSizeBinary:return gr.FixedSizeBinary(t,e,r,i||0,n[re.VALIDITY],n[re.DATA]||[]);case ee.Binary:return gr.Binary(t,e,r,i||0,n[re.VALIDITY],n[re.OFFSET]||[],n[re.DATA]||[]);case ee.Utf8:return gr.Utf8(t,e,r,i||0,n[re.VALIDITY],n[re.OFFSET]||[],n[re.DATA]||[]);case ee.List:return gr.List(t,e,r,i||0,n[re.VALIDITY],n[re.OFFSET]||[],(s||[])[0]);case ee.FixedSizeList:return gr.FixedSizeList(t,e,r,i||0,n[re.VALIDITY],(s||[])[0]);case ee.Struct:return gr.Struct(t,e,r,i||0,n[re.VALIDITY],s||[]);case ee.Map:return gr.Map(t,e,r,i||0,n[re.VALIDITY],n[re.OFFSET]||[],(s||[])[0]);case ee.Union:return gr.Union(t,e,r,i||0,n[re.VALIDITY],n[re.TYPE]||[],n[re.OFFSET]||s,s)}throw new Error(`Unrecognized typeId ${t.typeId}`)}static Null(t,e,r){return new gr(t,e,r,0)}static Int(t,e,r,i,n,s){return new gr(t,e,r,i,[void 0,Pt(t.ArrayType,s),jt(n)])}static Dictionary(t,e,r,i,n,s,a){return new gr(t,e,r,i,[void 0,Pt(t.indices.ArrayType,s),jt(n)],[],a)}static Float(t,e,r,i,n,s){return new gr(t,e,r,i,[void 0,Pt(t.ArrayType,s),jt(n)])}static Bool(t,e,r,i,n,s){return new gr(t,e,r,i,[void 0,Pt(t.ArrayType,s),jt(n)])}static Decimal(t,e,r,i,n,s){return new gr(t,e,r,i,[void 0,Pt(t.ArrayType,s),jt(n)])}static Date(t,e,r,i,n,s){return new gr(t,e,r,i,[void 0,Pt(t.ArrayType,s),jt(n)])}static Time(t,e,r,i,n,s){return new gr(t,e,r,i,[void 0,Pt(t.ArrayType,s),jt(n)])}static Timestamp(t,e,r,i,n,s){return new gr(t,e,r,i,[void 0,Pt(t.ArrayType,s),jt(n)])}static Interval(t,e,r,i,n,s){return new gr(t,e,r,i,[void 0,Pt(t.ArrayType,s),jt(n)])}static FixedSizeBinary(t,e,r,i,n,s){return new gr(t,e,r,i,[void 0,Pt(t.ArrayType,s),jt(n)])}static Binary(t,e,r,i,n,s,a){return new gr(t,e,r,i,[Rt(s),jt(a),jt(n)])}static Utf8(t,e,r,i,n,s,a){return new gr(t,e,r,i,[Rt(s),jt(a),jt(n)])}static List(t,e,r,i,n,s,a){return new gr(t,e,r,i,[Rt(s),void 0,jt(n)],a?[a]:[])}static FixedSizeList(t,e,r,i,n,s){return new gr(t,e,r,i,[void 0,void 0,jt(n)],s?[s]:[])}static Struct(t,e,r,i,n,s){return new gr(t,e,r,i,[void 0,void 0,jt(n)],s)}static Map(t,e,r,i,n,s,a){return new gr(t,e,r,i,[Rt(s),void 0,jt(n)],a?[a]:[])}static Union(t,e,r,i,n,s,a,o){const c=[void 0,void 0,jt(n),Pt(t.ArrayType,s)];return t.mode===ae.Sparse?new gr(t,e,r,i,c,a):(c[re.OFFSET]=Rt(a),new gr(t,e,r,i,c,o))}}gr.prototype.childData=Object.freeze([]);function _r(t){if(null===t)return"null";if(undefined===t)return"undefined";switch(typeof t){case"number":case"bigint":return`${t}`;case"string":return`"${t}"`}return"function"==typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t)}function vr(t){if(!t||t.length<=0)return function(t){return!0};let e="",r=t.filter((t=>t==t));return r.length>0&&(e=`\n    switch (x) {${r.map((t=>`\n        case ${function(t){if("bigint"!=typeof t)return _r(t);if(gt)return`${_r(t)}n`;return`"${_r(t)}"`}(t)}:`)).join("")}\n            return false;\n    }`),t.length!==r.length&&(e=`if (x !== x) return false;\n${e}`),new Function("x",`${e}\nreturn true;`)}const wr=(t,e)=>(t*e+63&-64||64)/e;class xr{constructor(t,e=1){this.buffer=t,this.stride=e,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=t.length/e|0)}get byteLength(){return this.length*this.stride*this.BYTES_PER_ELEMENT|0}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,e){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const e=this.stride,r=this.length*e,i=this.buffer.length;r>=i&&this._resize(wr(0===i?1*r:2*r,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=wr(t*this.stride,this.BYTES_PER_ELEMENT);const e=((t,e=0)=>t.length>=e?t.subarray(0,e):Ut(new t.constructor(e),t,0))(this.buffer,t);return this.clear(),e}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=Ut(new this.ArrayType(t),this.buffer)}}xr.prototype.offset=0;class Sr extends xr{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,e){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=e,this}}class Ir extends Sr{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,e){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,n=t%8,s=r[i]>>n&1;return e?0===s&&(r[i]|=1<<n,++this.numValid):1===s&&(r[i]&=~(1<<n),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class Ar extends Sr{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,e){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+e,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}class Tr extends xr{get ArrayType64(){return this._ArrayType64||(this._ArrayType64=this.buffer instanceof Int32Array?_t:wt)}set(t,e){switch(this.reserve(t-this.length+1),typeof e){case"bigint":this.buffer64[t]=e;break;case"number":this.buffer[t*this.stride]=e;break;default:this.buffer.set(e,t*this.stride)}return this}_resize(t){const e=super._resize(t),r=e.byteLength/(this.BYTES_PER_ELEMENT*this.stride);return gt&&(this.buffer64=new this.ArrayType64(e.buffer,e.byteOffset,r)),e}}class Er{constructor({type:t,nullValues:e}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=e,this.stride=br(t),this._nulls=new Ir,e&&e.length>0&&(this._isValid=vr(e))}static new(t){}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}static throughIterable(t){return function(t){const{queueingStrategy:e="count"}=t,{highWaterMark:r=("bytes"!==e?1e3:16384)}=t,i="bytes"!==e?"length":"byteLength";return function*(e){let n=0,s=Er.new(t);for(const t of e)s.append(t)[i]>=r&&++n&&(yield s.toVector());(s.finish().length>0||0===n)&&(yield s.toVector())}}(t)}static throughAsyncIterable(t){return function(t){const{queueingStrategy:e="count"}=t,{highWaterMark:r=("bytes"!==e?1e3:16384)}=t,i="bytes"!==e?"length":"byteLength";return async function*(e){let n=0,s=Er.new(t);for await(const t of e)s.append(t)[i]>=r&&++n&&(yield s.toVector());(s.finish().length>0||0===n)&&(yield s.toVector())}}(t)}toVector(){return Zt.new(this.flush())}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),this._typeIds&&(t+=this._typeIds.byteLength),this.children.reduce(((t,e)=>t+e.byteLength),t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce(((t,e)=>t+e.reservedByteLength),t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,e){return this.setValid(t,this.isValid(e))&&this.setValue(t,e),this}setValue(t,e){this._setValue(this,t,e)}setValid(t,e){return this.length=this._nulls.set(t,+e).length,e}addChild(t,e=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){const t=[],e=this._values,r=this._offsets,i=this._typeIds,{length:n,nullCount:s}=this;i?(t[re.TYPE]=i.flush(n),r&&(t[re.OFFSET]=r.flush(n))):r?(e&&(t[re.DATA]=e.flush(r.last())),t[re.OFFSET]=r.flush(n)):e&&(t[re.DATA]=e.flush(n)),s>0&&(t[re.VALIDITY]=this._nulls.flush(n));const a=gr.new(this.type,0,n,s,t,this.children.map((t=>t.flush())));return this.clear(),a}finish(){return this.finished=!0,this.children.forEach((t=>t.finish())),this}clear(){return this.length=0,this._offsets&&this._offsets.clear(),this._values&&this._values.clear(),this._nulls&&this._nulls.clear(),this._typeIds&&this._typeIds.clear(),this.children.forEach((t=>t.clear())),this}}Er.prototype.length=1,Er.prototype.stride=1,Er.prototype.children=null,Er.prototype.finished=!1,Er.prototype.nullValues=null,Er.prototype._isValid=()=>!0;class Br extends Er{constructor(t){super(t),this._values=new Sr(new this.ArrayType(0),this.stride)}setValue(t,e){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,e)}}class kr extends Er{constructor(t){super(t),this._pendingLength=0,this._offsets=new Ar}setValue(t,e){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=e.length,r.set(t,e)}setValid(t,e){return!!super.setValid(t,e)||((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,e=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,e),this}}class Cr extends Er{constructor(t){super(t),this._values=new Ir}setValue(t,e){this._values.set(t,+e)}}class Lr extends Er{setValue(t,e){}setValid(t,e){return this.length=Math.max(t+1,this.length),e}}class Dr extends Br{}class Mr extends Dr{}class Or extends Dr{}class Nr extends Br{}class Fr extends Er{constructor({type:t,nullValues:e,dictionaryHashFunction:r}){super({type:new mr(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Er.new({type:this.type.indices,nullValues:e}),this.dictionary=Er.new({type:this.type.dictionary,nullValues:null}),"function"==typeof r&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,e){const r=this.indices;return e=r.setValid(t,e),this.length=r.length,e}setValue(t,e){let r=this._keysToIndices,i=this.valueToKey(e),n=r[i];return void 0===n&&(r[i]=n=this._dictionaryOffset+this.dictionary.append(e).length-1),this.indices.setValue(t,n)}flush(){const t=this.type,e=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=e?e.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return"string"==typeof t?t:`${t}`}}class Ur extends Br{}const Vr=new Float64Array(1),Pr=new Uint32Array(Vr.buffer);function Rr(t){if(t!=t)return 32256;Vr[0]=t;let e=(2147483648&Pr[1])>>16&65535,r=2146435072&Pr[1],i=0;return r>=1089470464?Pr[0]>0?r=31744:(r=(2080374784&r)>>16,i=(1048575&Pr[1])>>10):r<=1056964608?(i=1048576+(1048575&Pr[1]),i=1048576+(i<<(r>>20)-998)>>21,r=0):(r=r-1056964608>>10,i=512+(1048575&Pr[1])>>10),e|r|65535&i}class jr extends Br{}class zr extends jr{setValue(t,e){this._values.set(t,Rr(e))}}class $r extends jr{setValue(t,e){this._values.set(t,e)}}class Wr extends jr{setValue(t,e){this._values.set(t,e)}}const Hr=Symbol.for("isArrowBigNum");function qr(t,...e){return 0===e.length?Object.setPrototypeOf(Pt(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}function Yr(...t){return qr.apply(this,t)}function Gr(...t){return qr.apply(this,t)}function Kr(...t){return qr.apply(this,t)}function Jr(t){let e,r,{buffer:i,byteOffset:n,length:s,signed:a}=t,o=new Int32Array(i,n,s),c=0,u=0,h=o.length;for(;u<h;)r=o[u++],e=o[u++],a||(e>>>=0),c+=(r>>>0)+e*u**32;return c}let Qr,Zr;function Xr(t){let e="",r=new Uint32Array(2),i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),n=new Uint32Array((i=new Uint16Array(i).reverse()).buffer),s=-1,a=i.length-1;do{for(r[0]=i[s=0];s<a;)i[s++]=r[1]=r[0]/10,r[0]=(r[0]-10*r[1]<<16)+i[s];i[s]=r[1]=r[0]/10,r[0]=r[0]-10*r[1],e=`${r[0]}${e}`}while(n[0]||n[1]||n[2]||n[3]);return e||"0"}qr.prototype[Hr]=!0,qr.prototype.toJSON=function(){return`"${Qr(this)}"`},qr.prototype.valueOf=function(){return Jr(this)},qr.prototype.toString=function(){return Qr(this)},qr.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return Jr(this);case"string":return Qr(this);case"default":return Zr(this)}return Qr(this)},Object.setPrototypeOf(Yr.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(Gr.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(Kr.prototype,Object.create(Uint32Array.prototype)),Object.assign(Yr.prototype,qr.prototype,{constructor:Yr,signed:!0,TypedArray:Int32Array,BigIntArray:_t}),Object.assign(Gr.prototype,qr.prototype,{constructor:Gr,signed:!1,TypedArray:Uint32Array,BigIntArray:wt}),Object.assign(Kr.prototype,qr.prototype,{constructor:Kr,signed:!0,TypedArray:Uint32Array,BigIntArray:wt}),gt?(Zr=t=>8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:Xr(t),Qr=t=>8===t.byteLength?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:Xr(t)):(Qr=Xr,Zr=Qr);class ti{static new(t,e){switch(e){case!0:return new Yr(t);case!1:return new Gr(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case _t:return new Yr(t)}return 16===t.byteLength?new Kr(t):new Gr(t)}static signed(t){return new Yr(t)}static unsigned(t){return new Gr(t)}static decimal(t){return new Kr(t)}constructor(t,e){return ti.new(t,e)}}class ei extends Br{setValue(t,e){this._values.set(t,e)}}class ri extends ei{}class ii extends ei{}class ni extends ei{}class si extends ei{constructor(t){t.nullValues&&(t.nullValues=t.nullValues.map(hi)),super(t),this._values=new Tr(new Int32Array(0),2)}get values64(){return this._values.buffer64}isValid(t){return super.isValid(hi(t))}}class ai extends ei{}class oi extends ei{}class ci extends ei{}class ui extends ei{constructor(t){t.nullValues&&(t.nullValues=t.nullValues.map(hi)),super(t),this._values=new Tr(new Uint32Array(0),2)}get values64(){return this._values.buffer64}isValid(t){return super.isValid(hi(t))}}const hi=(li={BigIntArray:_t},t=>(ArrayBuffer.isView(t)&&(li.buffer=t.buffer,li.byteOffset=t.byteOffset,li.byteLength=t.byteLength,t=Zr(li),li.buffer=null),t));var li;class pi extends Br{}class di extends pi{}class fi extends pi{}class yi extends pi{}class mi extends pi{}class bi extends Br{}class gi extends bi{}class _i extends bi{}class vi extends bi{}class wi extends bi{}class xi extends Br{}class Si extends xi{}class Ii extends xi{}class Ai extends kr{constructor(t){super(t),this._values=new xr(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,jt(e))}_flushPending(t,e){const r=this._offsets,i=this._values.reserve(e).buffer;let n,s=0,a=0,o=0;for([s,n]of t)void 0===n?r.set(s,0):(a=n.length,i.set(n,o),r.set(s,a),o+=a)}}class Ti extends kr{constructor(t){super(t),this._values=new xr(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,pt(e))}_flushPending(t,e){}}Ti.prototype._flushPending=Ai.prototype._flushPending;class Ei{get length(){return this._values.length}get(t){return this._values[t]}clear(){return this._values=null,this}bind(t){return t instanceof Zt?t:(this._values=t,this)}}const Bi=Symbol.for("parent"),ki=Symbol.for("rowIndex"),Ci=Symbol.for("keyToIdx"),Li=Symbol.for("idxToVal"),Di=Symbol.for("nodejs.util.inspect.custom");class Mi{constructor(t,e){this[Bi]=t,this.size=e}entries(){return this[Symbol.iterator]()}has(t){return void 0!==this.get(t)}get(t){let e;if(null!=t){const r=this[Ci]||(this[Ci]=new Map);let i=r.get(t);if(void 0!==i){const t=this[Li]||(this[Li]=new Array(this.size));void 0!==(e=t[i])||(t[i]=e=this.getValue(i))}else if((i=this.getIndex(t))>-1){r.set(t,i);const n=this[Li]||(this[Li]=new Array(this.size));void 0!==(e=n[i])||(n[i]=e=this.getValue(i))}}return e}set(t,e){if(null!=t){const r=this[Ci]||(this[Ci]=new Map);let i=r.get(t);if(void 0===i&&r.set(t,i=this.getIndex(t)),i>-1){(this[Li]||(this[Li]=new Array(this.size)))[i]=this.setValue(i,e)}}return this}clear(){throw new Error(`Clearing ${this[Symbol.toStringTag]} not supported.`)}delete(t){throw new Error(`Deleting ${this[Symbol.toStringTag]} values not supported.`)}*[Symbol.iterator](){const t=this.keys(),e=this.values(),r=this[Ci]||(this[Ci]=new Map),i=this[Li]||(this[Li]=new Array(this.size));for(let n,s,a,o,c=0;!(a=t.next()).done&&!(o=e.next()).done;++c)n=a.value,s=o.value,i[c]=s,r.has(n)||r.set(n,c),yield[n,s]}forEach(t,e){const r=this.keys(),i=this.values(),n=void 0===e?t:(r,i,n)=>t.call(e,r,i,n),s=this[Ci]||(this[Ci]=new Map),a=this[Li]||(this[Li]=new Array(this.size));for(let t,e,o,c,u=0;!(o=r.next()).done&&!(c=i.next()).done;++u)t=o.value,e=c.value,a[u]=e,s.has(t)||s.set(t,u),n(e,t,this)}toArray(){return[...this.values()]}toJSON(){const t={};return this.forEach(((e,r)=>t[r]=e)),t}inspect(){return this.toString()}[Di](){return this.toString()}toString(){const t=[];return this.forEach(((e,r)=>{r=_r(r),e=_r(e),t.push(`${r}: ${e}`)})),`{ ${t.join(", ")} }`}}Mi[Symbol.toStringTag]=(t=>(Object.defineProperties(t,{size:{writable:!0,enumerable:!1,configurable:!1,value:0},[Bi]:{writable:!0,enumerable:!1,configurable:!1,value:null},[ki]:{writable:!0,enumerable:!1,configurable:!1,value:-1}}),t[Symbol.toStringTag]="Row"))(Mi.prototype);class Oi extends Mi{constructor(t){return super(t,t.length),Ui(this)}keys(){return this[Bi].getChildAt(0)[Symbol.iterator]()}values(){return this[Bi].getChildAt(1)[Symbol.iterator]()}getKey(t){return this[Bi].getChildAt(0).get(t)}getIndex(t){return this[Bi].getChildAt(0).indexOf(t)}getValue(t){return this[Bi].getChildAt(1).get(t)}setValue(t,e){this[Bi].getChildAt(1).set(t,e)}}class Ni extends Mi{constructor(t){return super(t,t.type.children.length),Fi(this)}*keys(){for(const t of this[Bi].type.children)yield t.name}*values(){for(const t of this[Bi].type.children)yield this[t.name]}getKey(t){return this[Bi].type.children[t].name}getIndex(t){return this[Bi].type.children.findIndex((e=>e.name===t))}getValue(t){return this[Bi].getChildAt(t).get(this[ki])}setValue(t,e){return this[Bi].getChildAt(t).set(this[ki],e)}}Object.setPrototypeOf(Mi.prototype,Map.prototype);const Fi=(()=>{const t={enumerable:!0,configurable:!1,get:null,set:null};return e=>{let r=-1,i=e[Ci]||(e[Ci]=new Map);const n=t=>function(){return this.get(t)},s=t=>function(e){return this.set(t,e)};for(const a of e.keys())i.set(a,++r),t.get=n(a),t.set=s(a),e.hasOwnProperty(a)||(t.enumerable=!0,Object.defineProperty(e,a,t)),e.hasOwnProperty(r)||(t.enumerable=!1,Object.defineProperty(e,r,t));return t.get=t.set=null,e}})(),Ui=(()=>{if("undefined"==typeof Proxy)return Fi;const t=Mi.prototype.has,e=Mi.prototype.get,r=Mi.prototype.set,i=Mi.prototype.getKey,n={isExtensible:()=>!1,deleteProperty:()=>!1,preventExtensions:()=>!0,ownKeys:t=>[...t.keys()].map((t=>`${t}`)),has(t,e){switch(e){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Bi:case ki:case Li:case Ci:case Di:return!0}return"number"!=typeof e||t.has(e)||(e=t.getKey(e)),t.has(e)},get(r,n,s){switch(n){case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Bi:case ki:case Li:case Ci:case Di:return Reflect.get(r,n,s)}return"number"!=typeof n||t.call(s,n)||(n=i.call(s,n)),e.call(s,n)},set(e,n,s,a){switch(n){case Bi:case ki:case Li:case Ci:return Reflect.set(e,n,s,a);case"getKey":case"getIndex":case"getValue":case"setValue":case"toArray":case"toJSON":case"inspect":case"constructor":case"isPrototypeOf":case"propertyIsEnumerable":case"toString":case"toLocaleString":case"valueOf":case"size":case"has":case"get":case"set":case"clear":case"delete":case"keys":case"values":case"entries":case"forEach":case"__proto__":case"__defineGetter__":case"__defineSetter__":case"hasOwnProperty":case"__lookupGetter__":case"__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:return!1}return"number"!=typeof n||t.call(a,n)||(n=i.call(a,n)),!!t.call(a,n)&&!!r.call(a,n,s)}};return t=>new Proxy(t,n)})();let Vi;function Pi(t,e,r,i){let{length:n=0}=t,s="number"!=typeof e?0:e,a="number"!=typeof r?n:r;return s<0&&(s=(s%n+n)%n),a<0&&(a=(a%n+n)%n),a<s&&(Vi=s,s=a,a=Vi),a>n&&(a=n),i?i(t,s,a):[s,a]}const Ri=gt?bt(0):0,ji=t=>t!=t;function zi(t){let e=typeof t;if("object"!==e||null===t)return ji(t)?ji:"bigint"!==e?e=>e===t:e=>Ri+e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&function(t,e){let r=0,i=t.length;if(i!==e.length)return!1;if(i>0)do{if(t[r]!==e[r])return!1}while(++r<i);return!0}(t,e):t instanceof Map?function(t){let e=-1;const r=[];return t.forEach((t=>r[++e]=zi(t))),$i(r)}(t):Array.isArray(t)?function(t){const e=[];for(let r=-1,i=t.length;++r<i;)e[r]=zi(t[r]);return $i(e)}(t):t instanceof Zt?function(t){const e=[];for(let r=-1,i=t.length;++r<i;)e[r]=zi(t.get(r));return $i(e)}(t):function(t){const e=Object.keys(t);if(0===e.length)return()=>!1;const r=[];for(let i=-1,n=e.length;++i<n;)r[i]=zi(t[e[i]]);return $i(r,e)}(t)}function $i(t,e){return r=>{if(!r||"object"!=typeof r)return!1;switch(r.constructor){case Array:return function(t,e){const r=t.length;if(e.length!==r)return!1;for(let i=-1;++i<r;)if(!t[i](e[i]))return!1;return!0}(t,r);case Map:case Oi:case Ni:return Wi(t,r,r.keys());case Object:case void 0:return Wi(t,r,e||Object.keys(r))}return r instanceof Zt&&function(t,e){const r=t.length;if(e.length!==r)return!1;for(let i=-1;++i<r;)if(!t[i](e.get(i)))return!1;return!0}(t,r)}}function Wi(t,e,r){const i=r[Symbol.iterator](),n=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let a=0,o=t.length,c=s.next(),u=i.next(),h=n.next();for(;a<o&&!u.done&&!h.done&&!c.done&&(u.value===h.value&&t[a](c.value));++a,u=i.next(),h=n.next(),c=s.next());return!!(a===o&&u.done&&h.done&&c.done)||(i.return&&i.return(),n.return&&n.return(),s.return&&s.return(),!1)}class Hi extends Zt{constructor(t,e=[],r=function(t){let e=new Uint32Array((t||[]).length+1),r=e[0]=0,i=e.length;for(let n=0;++n<i;)e[n]=r+=t[n-1].length;return e}(e)){super(),this._nullCount=-1,this._type=t,this._chunks=e,this._chunkOffsets=r,this._length=r[r.length-1],this._numChildren=(this._type.children||[]).length}static flatten(...t){return Xi(Zt,t)}static concat(...t){const e=Hi.flatten(...t);return new Hi(e[0].type,e)}get type(){return this._type}get length(){return this._length}get chunks(){return this._chunks}get typeId(){return this._type.typeId}get VectorName(){return`Chunked<${this._type}>`}get data(){return this._chunks[0]?this._chunks[0].data:null}get ArrayType(){return this._type.ArrayType}get numChildren(){return this._numChildren}get stride(){return this._chunks[0]?this._chunks[0].stride:1}get byteLength(){return this._chunks.reduce(((t,e)=>t+e.byteLength),0)}get nullCount(){let t=this._nullCount;return t<0&&(this._nullCount=t=this._chunks.reduce(((t,{nullCount:e})=>t+e),0)),t}get indices(){if(Ce.isDictionary(this._type)){if(!this._indices){const t=this._chunks;this._indices=1===t.length?t[0].indices:Hi.concat(...t.map((t=>t.indices)))}return this._indices}return null}get dictionary(){return Ce.isDictionary(this._type)?this._chunks[this._chunks.length-1].data.dictionary:null}*[Symbol.iterator](){for(const t of this._chunks)yield*t}clone(t=this._chunks){return new Hi(this._type,t)}concat(...t){return this.clone(Hi.flatten(this,...t))}slice(t,e){return Pi(this,t,e,this._sliceInternal)}getChildAt(t){if(t<0||t>=this._numChildren)return null;let e,r,i,n=this._children||(this._children=[]);return(e=n[t])?e:(r=(this._type.children||[])[t])&&(i=this._chunks.map((e=>e.getChildAt(t))).filter((t=>null!=t)),i.length>0)?n[t]=new Hi(r.type,i):null}search(t,e){let r=t,i=this._chunkOffsets,n=i.length-1;if(r<0)return null;if(r>=i[n])return null;if(n<=1)return e?e(this,0,r):[0,r];let s=0,a=0,o=0;do{if(s+1===n)return e?e(this,s,r-a):[s,r-a];o=s+(n-s)/2|0,r>=i[o]?s=o:n=o}while(r<i[n]&&r>=(a=i[s]));return null}isValid(t){return!!this.search(t,this.isValidInternal)}get(t){return this.search(t,this.getInternal)}set(t,e){this.search(t,(({chunks:t},r,i)=>t[r].set(i,e)))}indexOf(t,e){return e&&"number"==typeof e?this.search(e,((e,r,i)=>this.indexOfInternal(e,r,i,t))):this.indexOfInternal(this,0,Math.max(0,e||0),t)}toArray(){const{chunks:t}=this,e=t.length;let r=this._type.ArrayType;if(e<=0)return new r(0);if(e<=1)return t[0].toArray();let i=0,n=new Array(e);for(let r=-1;++r<e;)i+=(n[r]=t[r].toArray()).length;r!==n[0].constructor&&(r=n[0].constructor);let s=new r(i),a=r===Array?Yi:qi;for(let t=-1,r=0;++t<e;)r=a(n[t],s,r);return s}getInternal({_chunks:t},e,r){return t[e].get(r)}isValidInternal({_chunks:t},e,r){return t[e].isValid(r)}indexOfInternal({_chunks:t},e,r,i){let n=e-1,s=t.length,a=r,o=0,c=-1;for(;++n<s;){if(~(c=t[n].indexOf(i,a)))return o+c;a=0,o+=t[n].length}return-1}_sliceInternal(t,e,r){const i=[],{chunks:n,_chunkOffsets:s}=t;for(let t=-1,a=n.length;++t<a;){const a=n[t],o=a.length,c=s[t];if(c>=r)break;if(e>=c+o)continue;if(c>=e&&c+o<=r){i.push(a);continue}const u=Math.max(0,e-c),h=Math.min(r-c,o);i.push(a.slice(u,h))}return t.clone(i)}}const qi=(t,e,r)=>(e.set(t,r),r+t.length),Yi=(t,e,r)=>{let i=r;for(let r=-1,n=t.length;++r<n;)e[i++]=t[r];return i};class Gi extends Hi{constructor(t,e=[],r){if(e=Hi.flatten(...e),super(t.type,e,r),this._field=t,1===e.length&&!(this instanceof Ki))return new Ki(t,e[0],this._chunkOffsets)}static new(...t){let[e,r,...i]=t;"string"==typeof e||e instanceof cn||(r=e,e="");const n=Hi.flatten(Array.isArray(r)?[...r,...i]:r instanceof Zt?[r,...i]:[Zt.new(r,...i)]);if("string"==typeof e){const t=n[0].data.type;e=new cn(e,t,!0)}else!e.nullable&&n.some((({nullCount:t})=>t>0))&&(e=e.clone({nullable:!0}));return new Gi(e,n)}get field(){return this._field}get name(){return this._field.name}get nullable(){return this._field.nullable}get metadata(){return this._field.metadata}clone(t=this._chunks){return new Gi(this._field,t)}getChildAt(t){if(t<0||t>=this.numChildren)return null;let e,r,i,n=this._children||(this._children=[]);return(e=n[t])?e:(r=(this.type.children||[])[t])&&(i=this._chunks.map((e=>e.getChildAt(t))).filter((t=>null!=t)),i.length>0)?n[t]=new Gi(r,i):null}}class Ki extends Gi{constructor(t,e,r){super(t,[e],r),this._chunk=e}search(t,e){return e?e(this,0,t):[0,t]}isValid(t){return this._chunk.isValid(t)}get(t){return this._chunk.get(t)}set(t,e){this._chunk.set(t,e)}indexOf(t,e){return this._chunk.indexOf(t,e)}}const Ji=Array.isArray,Qi=(t,e)=>en(t,e,[],0),Zi=t=>an(t,[[],[]]),Xi=(t,e)=>rn(t,e,[],0),tn=(t,e)=>nn(t,e,[],0);function en(t,e,r,i){let n,s=i,a=-1,o=e.length;for(;++a<o;)Ji(n=e[a])?s=en(t,n,r,s).length:n instanceof t&&(r[s++]=n);return r}function rn(t,e,r,i){let n,s=i,a=-1,o=e.length;for(;++a<o;)Ji(n=e[a])?s=rn(t,n,r,s).length:n instanceof Hi?s=rn(t,n.chunks,r,s).length:n instanceof t&&(r[s++]=n);return r}function nn(t,e,r,i){let n,s=i,a=-1,o=e.length;for(;++a<o;)Ji(n=e[a])?s=nn(t,n,r,s).length:n instanceof t?s=en(Zt,n.schema.fields.map(((t,e)=>n.getChildAt(e))),r,s).length:n instanceof Zt&&(r[s++]=n);return r}const sn=(t,[e,r],i)=>(t[0][i]=e,t[1][i]=r,t);function an(t,e){let r,i;switch(i=t.length){case 0:return e;case 1:if(r=e[0],!t[0])return e;if(Ji(t[0]))return an(t[0],e);t[0]instanceof gr||t[0]instanceof Zt||t[0]instanceof Ce||([r,t]=Object.entries(t[0]).reduce(sn,e));break;default:Ji(r=t[i-1])?t=Ji(t[0])?t[0]:t.slice(0,i-1):(t=Ji(t[0])?t[0]:t,r=[])}let n,s,a=-1,o=-1,c=-1,u=t.length,[h,l]=e;for(;++c<u;)s=t[c],s instanceof Gi&&(l[++o]=s)?h[++a]=s.field.clone(r[c],s.type,!0):(({[c]:n=c}=r),s instanceof Ce&&(l[++o]=s)?h[++a]=cn.new(n,s,!0):s&&s.type&&(l[++o]=s)&&(s instanceof gr&&(l[o]=s=Zt.new(s)),h[++a]=cn.new(n,s.type,!0)));return e}class on{constructor(t=[],e,r){this.fields=t||[],this.metadata=e||new Map,r||(r=hn(t)),this.dictionaries=r}static from(...t){return on.new(t[0],t[1])}static new(...t){return new on(Zi(t)[0])}get[Symbol.toStringTag](){return"Schema"}toString(){return`Schema<{ ${this.fields.map(((t,e)=>`${e}: ${t}`)).join(", ")} }>`}compareTo(t){return ke.compareSchemas(this,t)}select(...t){const e=t.reduce(((t,e)=>(t[e]=!0)&&t),Object.create(null));return new on(this.fields.filter((t=>e[t.name])),this.metadata)}selectAt(...t){return new on(t.map((t=>this.fields[t])).filter(Boolean),this.metadata)}assign(...t){const e=t[0]instanceof on?t[0]:new on(Qi(cn,t)),r=[...this.fields],i=un(un(new Map,this.metadata),e.metadata),n=e.fields.filter((t=>{const e=r.findIndex((e=>e.name===t.name));return!~e||(r[e]=t.clone({metadata:un(un(new Map,r[e].metadata),t.metadata)}))&&!1})),s=hn(n,new Map);return new on([...r,...n],i,new Map([...this.dictionaries,...s]))}}class cn{constructor(t,e,r=!1,i){this.name=t,this.type=e,this.nullable=r,this.metadata=i||new Map}static new(...t){let[e,r,i,n]=t;return t[0]&&"object"==typeof t[0]&&(({name:e}=t[0]),void 0===r&&(r=t[0].type),void 0===i&&(i=t[0].nullable),void 0===n&&(n=t[0].metadata)),new cn(`${e}`,r,i,n)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}compareTo(t){return ke.compareField(this,t)}clone(...t){let[e,r,i,n]=t;return t[0]&&"object"==typeof t[0]?({name:e=this.name,type:r=this.type,nullable:i=this.nullable,metadata:n=this.metadata}=t[0]):[e=this.name,r=this.type,i=this.nullable,n=this.metadata]=t,cn.new(e,r,i,n)}}function un(t,e){return new Map([...t||new Map,...e||new Map])}function hn(t,e=new Map){for(let r=-1,i=t.length;++r<i;){const i=t[r].type;if(Ce.isDictionary(i))if(e.has(i.id)){if(e.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(i.id,i.dictionary);i.children&&i.children.length>0&&hn(i.children,e)}return e}on.prototype.fields=null,on.prototype.metadata=null,on.prototype.dictionaries=null,cn.prototype.type=null,cn.prototype.name=null,cn.prototype.nullable=null,cn.prototype.metadata=null;class ln extends kr{constructor(t){super(t),this._run=new Ei,this._offsets=new Ar}addChild(t,e="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new cr(new cn(e,t.type,!0)),this.numChildren-1}clear(){return this._run.clear(),super.clear()}_flushPending(t){const e=this._run,r=this._offsets,i=this._setValue;let n,s=0;for([s,n]of t)void 0===n?r.set(s,0):(r.set(s,n.length),i(this,s,e.bind(n)))}}class pn extends Er{constructor(){super(...arguments),this._run=new Ei}setValue(t,e){super.setValue(t,this._run.bind(e))}addChild(t,e="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new pr(this.type.listSize,new cn(e,t.type,!0)),r}clear(){return this._run.clear(),super.clear()}}class dn extends kr{set(t,e){return super.set(t,e)}setValue(t,e){e=e instanceof Map?e:new Map(Object.entries(e));const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.size),this._pendingLength+=e.size,r.set(t,e)}addChild(t,e=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new dr(new cn(e,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const e=this._offsets,r=this._setValue;t.forEach(((t,i)=>{void 0===t?e.set(i,0):(e.set(i,t.size),r(this,i,t))}))}}class fn extends Er{addChild(t,e=`${this.numChildren}`){const r=this.children.push(t);return this.type=new ur([...this.type.children,new cn(e,t.type,!0)]),r}}class yn extends Er{constructor(t){super(t),this._typeIds=new Sr(new Int8Array(0),1),"function"==typeof t.valueToChildTypeId&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,e){return this.set(this.length,t,e)}set(t,e,r){return void 0===r&&(r=this._valueToChildTypeId(this,e,t)),this.setValid(t,this.isValid(e))&&this.setValue(t,e,r),this}setValue(t,e,r){this._typeIds.set(t,r),super.setValue(t,e)}addChild(t,e=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:n,typeIds:s}}=this,a=[...i,new cn(e,t.type)];return this.type=new hr(n,[...s,r],a),r}_valueToChildTypeId(t,e,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class mn extends yn{}class bn extends yn{constructor(t){super(t),this._offsets=new Sr(new Int32Array(0))}setValue(t,e,r){const i=this.type.typeIdToChildIndex[r];return this._offsets.set(t,this.getChildAt(i).length),super.setValue(t,e,r)}}class gn extends be{}const _n=(t,e,r)=>{t[e]=r%4294967296|0,t[e+1]=r/4294967296|0},vn=(t,e,r,i)=>{const{[r]:n,[r+1]:s}=e;null!=n&&null!=s&&t.set(i.subarray(0,s-n),n)},wn=({values:t},e,r)=>{((t,e,r)=>{t[e]=r/864e5|0})(t,e,r.valueOf())},xn=({values:t},e,r)=>{_n(t,2*e,r.valueOf())},Sn=({stride:t,values:e},r,i)=>{e[t*r]=i},In=({stride:t,values:e},r,i)=>{e[t*r]=Rr(i)},An=(t,e,r)=>{switch(typeof r){case"bigint":t.values64[e]=r;break;case"number":t.values[e*t.stride]=r;break;default:const i=r,{stride:n,ArrayType:s}=t,a=Pt(s,i);t.values.set(a.subarray(0,n),n*e)}},Tn=({values:t},e,r)=>_n(t,2*e,r/1e3),En=({values:t},e,r)=>_n(t,2*e,r),Bn=({values:t},e,r)=>((t,e,r)=>{t[e]=1e3*r%4294967296|0,t[e+1]=1e3*r/4294967296|0})(t,2*e,r),kn=({values:t},e,r)=>((t,e,r)=>{t[e]=1e6*r%4294967296|0,t[e+1]=1e6*r/4294967296|0})(t,2*e,r),Cn=({values:t,stride:e},r,i)=>{t[e*r]=i},Ln=({values:t,stride:e},r,i)=>{t[e*r]=i},Dn=({values:t},e,r)=>{t.set(r.subarray(0,2),2*e)},Mn=({values:t},e,r)=>{t.set(r.subarray(0,2),2*e)},On=(t,e,r)=>{const i=t.typeIdToChildIndex[t.typeIds[e]],n=t.getChildAt(i);n&&n.set(t.valueOffsets[e],r)},Nn=(t,e,r)=>{const i=t.typeIdToChildIndex[t.typeIds[e]],n=t.getChildAt(i);n&&n.set(e,r)},Fn=({values:t},e,r)=>{t.set(r.subarray(0,2),2*e)},Un=({values:t},e,r)=>{t[e]=12*r[0]+r[1]%12};gn.prototype.visitBool=({offset:t,values:e},r,i)=>{const n=t+r;i?e[n>>3]|=1<<n%8:e[n>>3]&=~(1<<n%8)},gn.prototype.visitInt=(t,e,r)=>{t.type.bitWidth<64?Sn(t,e,r):An(t,e,r)},gn.prototype.visitInt8=Sn,gn.prototype.visitInt16=Sn,gn.prototype.visitInt32=Sn,gn.prototype.visitInt64=An,gn.prototype.visitUint8=Sn,gn.prototype.visitUint16=Sn,gn.prototype.visitUint32=Sn,gn.prototype.visitUint64=An,gn.prototype.visitFloat=(t,e,r)=>{t.type.precision!==se.HALF?Sn(t,e,r):In(t,e,r)},gn.prototype.visitFloat16=In,gn.prototype.visitFloat32=Sn,gn.prototype.visitFloat64=Sn,gn.prototype.visitUtf8=({values:t,valueOffsets:e},r,i)=>{vn(t,e,r,pt(i))},gn.prototype.visitBinary=({values:t,valueOffsets:e},r,i)=>vn(t,e,r,i),gn.prototype.visitFixedSizeBinary=({stride:t,values:e},r,i)=>{e.set(i.subarray(0,t),t*r)},gn.prototype.visitDate=(t,e,r)=>{t.type.unit===ie.DAY?wn(t,e,r):xn(t,e,r)},gn.prototype.visitDateDay=wn,gn.prototype.visitDateMillisecond=xn,gn.prototype.visitTimestamp=(t,e,r)=>{switch(t.type.unit){case ne.SECOND:return Tn(t,e,r);case ne.MILLISECOND:return En(t,e,r);case ne.MICROSECOND:return Bn(t,e,r);case ne.NANOSECOND:return kn(t,e,r)}},gn.prototype.visitTimestampSecond=Tn,gn.prototype.visitTimestampMillisecond=En,gn.prototype.visitTimestampMicrosecond=Bn,gn.prototype.visitTimestampNanosecond=kn,gn.prototype.visitTime=(t,e,r)=>{switch(t.type.unit){case ne.SECOND:return Cn(t,e,r);case ne.MILLISECOND:return Ln(t,e,r);case ne.MICROSECOND:return Dn(t,e,r);case ne.NANOSECOND:return Mn(t,e,r)}},gn.prototype.visitTimeSecond=Cn,gn.prototype.visitTimeMillisecond=Ln,gn.prototype.visitTimeMicrosecond=Dn,gn.prototype.visitTimeNanosecond=Mn,gn.prototype.visitDecimal=({values:t},e,r)=>{t.set(r.subarray(0,4),4*e)},gn.prototype.visitList=(t,e,r)=>{const i=t.getChildAt(0),n=t.valueOffsets;for(let t=-1,s=n[e],a=n[e+1];s<a;)i.set(s++,r.get(++t))},gn.prototype.visitStruct=(t,e,r)=>{const i=r instanceof Map?(n=e,s=r,(t,e,r)=>t&&t.set(n,s.get(e.name))):r instanceof Zt?((t,e)=>(r,i,n)=>r&&r.set(t,e.get(n)))(e,r):Array.isArray(r)?((t,e)=>(r,i,n)=>r&&r.set(t,e[n]))(e,r):((t,e)=>(r,i,n)=>r&&r.set(t,e[i.name]))(e,r);var n,s;t.type.children.forEach(((e,r)=>i(t.getChildAt(r),e,r)))},gn.prototype.visitUnion=(t,e,r)=>{t.type.mode===ae.Dense?On(t,e,r):Nn(t,e,r)},gn.prototype.visitDenseUnion=On,gn.prototype.visitSparseUnion=Nn,gn.prototype.visitDictionary=(t,e,r)=>{const i=t.getKey(e);null!==i&&t.setValue(i,r)},gn.prototype.visitInterval=(t,e,r)=>{t.type.unit===oe.DAY_TIME?Fn(t,e,r):Un(t,e,r)},gn.prototype.visitIntervalDayTime=Fn,gn.prototype.visitIntervalYearMonth=Un,gn.prototype.visitFixedSizeList=(t,e,r)=>{const i=t.getChildAt(0),{stride:n}=t;for(let t=-1,s=e*n;++t<n;)i.set(s+t,r.get(t))},gn.prototype.visitMap=(t,e,r)=>{const i=t.getChildAt(0),n=t.valueOffsets,s=r instanceof Map?[...r]:Object.entries(r);for(let t=-1,r=n[e],a=n[e+1];r<a;)i.set(r++,s[++t])};const Vn=new gn;const Pn=new class extends be{visitNull(){return Lr}visitBool(){return Cr}visitInt(){return ei}visitInt8(){return ri}visitInt16(){return ii}visitInt32(){return ni}visitInt64(){return si}visitUint8(){return ai}visitUint16(){return oi}visitUint32(){return ci}visitUint64(){return ui}visitFloat(){return jr}visitFloat16(){return zr}visitFloat32(){return $r}visitFloat64(){return Wr}visitUtf8(){return Ti}visitBinary(){return Ai}visitFixedSizeBinary(){return Ur}visitDate(){return Dr}visitDateDay(){return Mr}visitDateMillisecond(){return Or}visitTimestamp(){return bi}visitTimestampSecond(){return gi}visitTimestampMillisecond(){return _i}visitTimestampMicrosecond(){return vi}visitTimestampNanosecond(){return wi}visitTime(){return pi}visitTimeSecond(){return di}visitTimeMillisecond(){return fi}visitTimeMicrosecond(){return yi}visitTimeNanosecond(){return mi}visitDecimal(){return Nr}visitList(){return ln}visitStruct(){return fn}visitUnion(){return yn}visitDenseUnion(){return bn}visitSparseUnion(){return mn}visitDictionary(){return Fr}visitInterval(){return xi}visitIntervalDayTime(){return Si}visitIntervalYearMonth(){return Ii}visitFixedSizeList(){return pn}visitMap(){return dn}};var Rn;Er.new=function t(e){const r=e.type,i=new(Pn.getVisitFn(r)())(e);if(r.children&&r.children.length>0){const n=e.children||[],s={nullValues:e.nullValues},a=Array.isArray(n)?(t,e)=>n[e]||s:({name:t})=>n[t]||s;r.children.forEach(((e,r)=>{const{type:n}=e,s=a(e,r);i.children.push(t({...s,type:n}))}))}return i},Object.keys(ee).map((t=>ee[t])).filter((t=>"number"==typeof t&&t!==ee.NONE)).forEach((t=>{Pn.visit(t).prototype._setValue=Vn.getVisitFn(t)})),Ti.prototype._setValue=Vn.visitBinary,function(t){var e,r;e=t.apache||(t.apache={}),function(e){class r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new r).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xt.apache.arrow.flatbuf.MetadataVersion.V1}schema(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new Xt.apache.arrow.flatbuf.Schema).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(e,r){let i=this.bb.__offset(this.bb_pos,8);return i?(r||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}dictionariesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(e,r){let i=this.bb.__offset(this.bb_pos,10);return i?(r||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}recordBatchesLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(4)}static addVersion(t,e){t.addFieldInt16(0,e,Xt.apache.arrow.flatbuf.MetadataVersion.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static createFooter(t,e,i,n,s){return r.startFooter(t),r.addVersion(t,e),r.addSchema(t,i),r.addDictionaries(t,n),r.addRecordBatches(t,s),r.endFooter(t)}}e.Footer=r}((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={}))}(Rn||(Rn={})),function(t){var e,r;e=t.apache||(t.apache={}),((r=e.arrow||(e.arrow={})).flatbuf||(r.flatbuf={})).Block=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static createBlock(t,e,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(e),t.offset()}}}(Rn||(Rn={}));var jn=Z.Long,zn=Z.Builder,$n=Z.ByteBuffer,Wn=Rn.apache.arrow.flatbuf.Block,Hn=Rn.apache.arrow.flatbuf.Footer;class qn{constructor(t,e=ue.V4,r,i){this.schema=t,this.version=e,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new $n(jt(t));const e=Hn.getRootAsFooter(t),r=on.decode(e.schema());return new Yn(r,e)}static encode(t){const e=new zn,r=on.encode(e,t.schema);Hn.startRecordBatchesVector(e,t.numRecordBatches),[...t.recordBatches()].slice().reverse().forEach((t=>Gn.encode(e,t)));const i=e.endVector();Hn.startDictionariesVector(e,t.numDictionaries),[...t.dictionaryBatches()].slice().reverse().forEach((t=>Gn.encode(e,t)));const n=e.endVector();return Hn.startFooter(e),Hn.addSchema(e,r),Hn.addVersion(e,ue.V4),Hn.addRecordBatches(e,i),Hn.addDictionaries(e,n),Hn.finishFooterBuffer(e,Hn.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,r=this.numRecordBatches;++e<r;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,r=this.numDictionaries;++e<r;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Yn extends qn{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return Gn.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return Gn.decode(e)}return null}}class Gn{constructor(t,e,r){this.metaDataLength=t,this.offset="number"==typeof r?r:r.low,this.bodyLength="number"==typeof e?e:e.low}static decode(t){return new Gn(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:r}=e,i=new jn(e.offset,0),n=new jn(e.bodyLength,0);return Wn.createBlock(t,i,r,n)}}class Kn extends mt{write(t){if((t=jt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?lt(this.toUint8Array(!0)):this.toUint8Array(!1).then(lt)}toUint8Array(t=!1){return t?Vt(this._values)[0]:(async()=>{let t=[],e=0;for await(const r of this)t.push(r),e+=r.byteLength;return Vt(t,e)[0]})()}}class Jn{constructor(t){t&&(this.source=new Zn(Yt.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Qn{constructor(t){t instanceof Qn?this.source=t.source:t instanceof Kn?this.source=new Xn(Yt.fromAsyncIterable(t)):Ot(t)?this.source=new Xn(Yt.fromNodeStream(t)):Mt(t)?this.source=new Xn(Yt.fromDOMStream(t)):Dt(t)?this.source=new Xn(Yt.fromDOMStream(t.body)):Et(t)?this.source=new Xn(Yt.fromIterable(t)):(Tt(t)||Bt(t))&&(this.source=new Xn(Yt.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Zn{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,e="read"){return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||dt)}return(t){return Object.create(this.source.return&&this.source.return(t)||dt)}}class Xn{constructor(t){this.source=t,this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}async cancel(t){await this.return(t)}get closed(){return this._closedPromise}async read(t){return(await this.next(t,"read")).value}async peek(t){return(await this.next(t,"peek")).value}async next(t,e="read"){return await this.source.next({cmd:e,size:t})}async throw(t){const e=this.source.throw&&await this.source.throw(t)||dt;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}async return(t){const e=this.source.return&&await this.source.return(t)||dt;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}}class ts extends Jn{constructor(t,e){super(),this.position=0,this.buffer=jt(t),this.size=void 0===e?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:r}=this.readAt(t,4);return new DataView(e,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:r,position:i}=this;return e&&i<r?("number"!=typeof t&&(t=1/0),this.position=Math.min(r,i+Math.min(r-i,t)),e.subarray(i,this.position)):null}readAt(t,e){const r=this.buffer,i=Math.min(this.size,t+e);return r?r.subarray(t,i):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class es extends Qn{constructor(t,e){super(),this.position=0,this._handle=t,"number"==typeof e?this.size=e:this._pending=(async()=>{this.size=(await t.stat()).size,delete this._pending})()}async readInt32(t){const{buffer:e,byteOffset:r}=await this.readAt(t,4);return new DataView(e,r).getInt32(0,!0)}async seek(t){return this._pending&&await this._pending,this.position=Math.min(t,this.size),t<this.size}async read(t){this._pending&&await this._pending;const{_handle:e,size:r,position:i}=this;if(e&&i<r){"number"!=typeof t&&(t=1/0);let n=i,s=0,a=0,o=Math.min(r,n+Math.min(r-n,t)),c=new Uint8Array(Math.max(0,(this.position=o)-n));for(;(n+=a)<o&&(s+=a)<c.byteLength;)({bytesRead:a}=await e.read(c,s,c.byteLength-s,n));return c}return null}async readAt(t,e){this._pending&&await this._pending;const{_handle:r,size:i}=this;if(r&&t+e<i){const n=Math.min(i,t+e),s=new Uint8Array(n-t);return(await r.read(s,0,e,t)).buffer}return new Uint8Array(e)}async close(){const t=this._handle;this._handle=null,t&&await t.close()}async throw(t){return await this.close(),{done:!0,value:t}}async return(t){return await this.close(),{done:!0,value:t}}}function rs(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const is=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class ns{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),r=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]);let i=e[3]*r[3];this.buffer[0]=65535&i;let n=i>>>16;return i=e[2]*r[3],n+=i,i=e[3]*r[2]>>>0,n+=i,this.buffer[0]+=n<<16,this.buffer[1]=n>>>0<i?65536:0,this.buffer[1]+=n>>>16,this.buffer[1]+=e[1]*r[3]+e[2]*r[2]+e[3]*r[1],this.buffer[1]+=e[0]*r[3]+e[1]*r[2]+e[2]*r[1]+e[3]*r[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${rs(this.buffer[1])} ${rs(this.buffer[0])}`}}class ss extends ns{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,e=new Uint32Array(2)){return ss.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return ss.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const r=t.length;let i=new ss(e);for(let e=0;e<r;){const n=8<r-e?8:r-e,s=new ss(new Uint32Array([parseInt(t.substr(e,n),10),0])),a=new ss(new Uint32Array([is[n],0]));i.times(a),i.plus(s),e+=n}return i}static convertArray(t){const e=new Uint32Array(2*t.length);for(let r=-1,i=t.length;++r<i;)ss.from(t[r],new Uint32Array(e.buffer,e.byteOffset+2*r*4,2));return e}static multiply(t,e){return new ss(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new ss(new Uint32Array(t.buffer)).plus(e)}}class as extends ns{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]<<0,r=t.buffer[1]<<0;return e<r||e===r&&this.buffer[0]<t.buffer[0]}static from(t,e=new Uint32Array(2)){return as.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return as.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length;let n=new as(e);for(let e=r?1:0;e<i;){const r=8<i-e?8:i-e,s=new as(new Uint32Array([parseInt(t.substr(e,r),10),0])),a=new as(new Uint32Array([is[r],0]));n.times(a),n.plus(s),e+=r}return r?n.negate():n}static convertArray(t){const e=new Uint32Array(2*t.length);for(let r=-1,i=t.length;++r<i;)as.from(t[r],new Uint32Array(e.buffer,e.byteOffset+2*r*4,2));return e}static multiply(t,e){return new as(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new as(new Uint32Array(t.buffer)).plus(e)}}class os{constructor(t){this.buffer=t}high(){return new as(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new as(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(t){const e=new ss(new Uint32Array([this.buffer[3],0])),r=new ss(new Uint32Array([this.buffer[2],0])),i=new ss(new Uint32Array([this.buffer[1],0])),n=new ss(new Uint32Array([this.buffer[0],0])),s=new ss(new Uint32Array([t.buffer[3],0])),a=new ss(new Uint32Array([t.buffer[2],0])),o=new ss(new Uint32Array([t.buffer[1],0])),c=new ss(new Uint32Array([t.buffer[0],0]));let u=ss.multiply(n,c);this.buffer[0]=u.low();let h=new ss(new Uint32Array([u.high(),0]));return u=ss.multiply(i,c),h.plus(u),u=ss.multiply(n,o),h.plus(u),this.buffer[1]=h.low(),this.buffer[3]=h.lessThan(u)?1:0,this.buffer[2]=h.high(),new ss(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(ss.multiply(r,c)).plus(ss.multiply(i,o)).plus(ss.multiply(n,a)),this.buffer[3]+=ss.multiply(e,c).plus(ss.multiply(r,o)).plus(ss.multiply(i,a)).plus(ss.multiply(n,s)).low(),this}plus(t){let e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return`${rs(this.buffer[3])} ${rs(this.buffer[2])} ${rs(this.buffer[1])} ${rs(this.buffer[0])}`}static multiply(t,e){return new os(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new os(new Uint32Array(t.buffer)).plus(e)}static from(t,e=new Uint32Array(4)){return os.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(4)){return os.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length;let n=new os(e);for(let e=r?1:0;e<i;){const r=8<i-e?8:i-e,s=new os(new Uint32Array([parseInt(t.substr(e,r),10),0,0,0])),a=new os(new Uint32Array([is[r],0,0,0]));n.times(a),n.plus(s),e+=r}return r?n.negate():n}static convertArray(t){const e=new Uint32Array(4*t.length);for(let r=-1,i=t.length;++r<i;)os.from(t[r],new Uint32Array(e.buffer,e.byteOffset+16*r,4));return e}}class cs extends be{constructor(t,e,r,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=r,this.dictionaries=i}visit(t){return super.visit(t instanceof cn?t.type:t)}visitNull(t,{length:e}=this.nextFieldNode()){return gr.Null(t,0,e)}visitBool(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.Bool(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitInt(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.Int(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitFloat(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.Float(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitUtf8(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.Utf8(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.readData(t))}visitBinary(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.Binary(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.readData(t))}visitFixedSizeBinary(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.FixedSizeBinary(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitDate(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.Date(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitTimestamp(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.Timestamp(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitTime(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.Time(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitDecimal(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.Decimal(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitList(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.List(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.visit(t.children[0]))}visitStruct(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.Struct(t,0,e,r,this.readNullBitmap(t,r),this.visitMany(t.children))}visitUnion(t){return t.mode===ae.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.Union(t,0,e,r,this.readNullBitmap(t,r),this.readTypeIds(t),this.readOffsets(t),this.visitMany(t.children))}visitSparseUnion(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.Union(t,0,e,r,this.readNullBitmap(t,r),this.readTypeIds(t),this.visitMany(t.children))}visitDictionary(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.Dictionary(t,0,e,r,this.readNullBitmap(t,r),this.readData(t.indices),this.readDictionary(t))}visitInterval(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.Interval(t,0,e,r,this.readNullBitmap(t,r),this.readData(t))}visitFixedSizeList(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.FixedSizeList(t,0,e,r,this.readNullBitmap(t,r),this.visit(t.children[0]))}visitMap(t,{length:e,nullCount:r}=this.nextFieldNode()){return gr.Map(t,0,e,r,this.readNullBitmap(t,r),this.readOffsets(t),this.visit(t.children[0]))}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e,r=this.nextBufferRange()){return e>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t,{length:e,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class us extends cs{constructor(t,e,r,i){super(new Uint8Array(0),e,r,i),this.sources=t}readNullBitmap(t,e,{offset:r}=this.nextBufferRange()){return e<=0?new Uint8Array(0):de(this.sources[r])}readOffsets(t,{offset:e}=this.nextBufferRange()){return Pt(Uint8Array,Pt(Int32Array,this.sources[e]))}readTypeIds(t,{offset:e}=this.nextBufferRange()){return Pt(Uint8Array,Pt(t.ArrayType,this.sources[e]))}readData(t,{offset:e}=this.nextBufferRange()){const{sources:r}=this;return Ce.isTimestamp(t)||(Ce.isInt(t)||Ce.isTime(t))&&64===t.bitWidth||Ce.isDate(t)&&t.unit===ie.MILLISECOND?Pt(Uint8Array,as.convertArray(r[e])):Ce.isDecimal(t)?Pt(Uint8Array,os.convertArray(r[e])):Ce.isBinary(t)||Ce.isFixedSizeBinary(t)?function(t){const e=t.join(""),r=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)r[t>>1]=parseInt(e.substr(t,2),16);return r}(r[e]):Ce.isBool(t)?de(r[e]):Ce.isUtf8(t)?pt(r[e].join("")):Pt(Uint8Array,Pt(t.ArrayType,r[e].map((t=>+t))))}}var hs=Z.Long,ls=Xt.apache.arrow.flatbuf.Null,ps=Xt.apache.arrow.flatbuf.Int,ds=Xt.apache.arrow.flatbuf.FloatingPoint,fs=Xt.apache.arrow.flatbuf.Binary,ys=Xt.apache.arrow.flatbuf.Bool,ms=Xt.apache.arrow.flatbuf.Utf8,bs=Xt.apache.arrow.flatbuf.Decimal,gs=Xt.apache.arrow.flatbuf.Date,_s=Xt.apache.arrow.flatbuf.Time,vs=Xt.apache.arrow.flatbuf.Timestamp,ws=Xt.apache.arrow.flatbuf.Interval,xs=Xt.apache.arrow.flatbuf.List,Ss=Xt.apache.arrow.flatbuf.Struct_,Is=Xt.apache.arrow.flatbuf.Union,As=Xt.apache.arrow.flatbuf.DictionaryEncoding,Ts=Xt.apache.arrow.flatbuf.FixedSizeBinary,Es=Xt.apache.arrow.flatbuf.FixedSizeList,Bs=Xt.apache.arrow.flatbuf.Map;const ks=new class extends be{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return ls.startNull(e),ls.endNull(e)}visitInt(t,e){return ps.startInt(e),ps.addBitWidth(e,t.bitWidth),ps.addIsSigned(e,t.isSigned),ps.endInt(e)}visitFloat(t,e){return ds.startFloatingPoint(e),ds.addPrecision(e,t.precision),ds.endFloatingPoint(e)}visitBinary(t,e){return fs.startBinary(e),fs.endBinary(e)}visitBool(t,e){return ys.startBool(e),ys.endBool(e)}visitUtf8(t,e){return ms.startUtf8(e),ms.endUtf8(e)}visitDecimal(t,e){return bs.startDecimal(e),bs.addScale(e,t.scale),bs.addPrecision(e,t.precision),bs.endDecimal(e)}visitDate(t,e){return gs.startDate(e),gs.addUnit(e,t.unit),gs.endDate(e)}visitTime(t,e){return _s.startTime(e),_s.addUnit(e,t.unit),_s.addBitWidth(e,t.bitWidth),_s.endTime(e)}visitTimestamp(t,e){const r=t.timezone&&e.createString(t.timezone)||void 0;return vs.startTimestamp(e),vs.addUnit(e,t.unit),void 0!==r&&vs.addTimezone(e,r),vs.endTimestamp(e)}visitInterval(t,e){return ws.startInterval(e),ws.addUnit(e,t.unit),ws.endInterval(e)}visitList(t,e){return xs.startList(e),xs.endList(e)}visitStruct(t,e){return Ss.startStruct_(e),Ss.endStruct_(e)}visitUnion(t,e){Is.startTypeIdsVector(e,t.typeIds.length);const r=Is.createTypeIdsVector(e,t.typeIds);return Is.startUnion(e),Is.addMode(e,t.mode),Is.addTypeIds(e,r),Is.endUnion(e)}visitDictionary(t,e){const r=this.visit(t.indices,e);return As.startDictionaryEncoding(e),As.addId(e,new hs(t.id,0)),As.addIsOrdered(e,t.isOrdered),void 0!==r&&As.addIndexType(e,r),As.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return Ts.startFixedSizeBinary(e),Ts.addByteWidth(e,t.byteWidth),Ts.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return Es.startFixedSizeList(e),Es.addListSize(e,t.listSize),Es.endFixedSizeList(e)}visitMap(t,e){return Bs.startMap(e),Bs.addKeysSorted(e,t.keysSorted),Bs.endMap(e)}};function Cs(t){return new Qs(t.count,Ds(t.columns),Ms(t.columns))}function Ls(t,e){return(t.children||[]).filter(Boolean).map((t=>cn.fromJSON(t,e)))}function Ds(t){return(t||[]).reduce(((t,e)=>{return[...t,new ta(e.count,(r=e.VALIDITY,(r||[]).reduce(((t,e)=>t+ +(0===e)),0))),...Ds(e.children)];var r}),[])}function Ms(t,e=[]){for(let r=-1,i=(t||[]).length;++r<i;){const i=t[r];i.VALIDITY&&e.push(new Xs(e.length,i.VALIDITY.length)),i.TYPE&&e.push(new Xs(e.length,i.TYPE.length)),i.OFFSET&&e.push(new Xs(e.length,i.OFFSET.length)),i.DATA&&e.push(new Xs(e.length,i.DATA.length)),e=Ms(i.children,e)}return e}function Os(t){return new Map(Object.entries(t||{}))}function Ns(t){return new Me(t.isSigned,t.bitWidth)}function Fs(t,e){const r=t.type.name;switch(r){case"NONE":case"null":return new De;case"binary":return new qe;case"utf8":return new Ye;case"bool":return new Ge;case"list":return new cr((e||[])[0]);case"struct":case"struct_":return new ur(e||[])}switch(r){case"int":{const e=t.type;return new Me(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new ze(se[e.precision])}case"decimal":{const e=t.type;return new Ke(e.scale,e.precision)}case"date":{const e=t.type;return new Je(ie[e.unit])}case"time":{const e=t.type;return new Xe(ne[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new nr(ne[e.unit],e.timezone)}case"interval":{const e=t.type;return new sr(oe[e.unit])}case"union":{const r=t.type;return new hr(ae[r.mode],r.typeIds||[],e||[])}case"fixedsizebinary":{const e=t.type;return new lr(e.byteWidth)}case"fixedsizelist":{const r=t.type;return new pr(r.listSize,(e||[])[0])}case"map":{const r=t.type;return new dr((e||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${r}"`)}var Us=Z.Long,Vs=Z.Builder,Ps=Z.ByteBuffer,Rs=Xt.apache.arrow.flatbuf.Type,js=Xt.apache.arrow.flatbuf.Field,zs=Xt.apache.arrow.flatbuf.Schema,$s=Xt.apache.arrow.flatbuf.Buffer,Ws=te.apache.arrow.flatbuf.Message,Hs=Xt.apache.arrow.flatbuf.KeyValue,qs=te.apache.arrow.flatbuf.FieldNode,Ys=Xt.apache.arrow.flatbuf.Endianness,Gs=te.apache.arrow.flatbuf.RecordBatch,Ks=te.apache.arrow.flatbuf.DictionaryBatch;class Js{constructor(t,e,r,i){this._version=e,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength="number"==typeof t?t:t.low}static fromJSON(t,e){const r=new Js(0,ue.V4,e);return r._createHeader=function(t,e){return()=>{switch(e){case ce.Schema:return on.fromJSON(t);case ce.RecordBatch:return Qs.fromJSON(t);case ce.DictionaryBatch:return Zs.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${ce[e]}, type: ${e} }`)}}(t,e),r}static decode(t){t=new Ps(jt(t));const e=Ws.getRootAsMessage(t),r=e.bodyLength(),i=e.version(),n=e.headerType(),s=new Js(r,i,n);return s._createHeader=function(t,e){return()=>{switch(e){case ce.Schema:return on.decode(t.header(new zs));case ce.RecordBatch:return Qs.decode(t.header(new Gs),t.version());case ce.DictionaryBatch:return Zs.decode(t.header(new Ks),t.version())}throw new Error(`Unrecognized Message type: { name: ${ce[e]}, type: ${e} }`)}}(e,n),s}static encode(t){let e=new Vs,r=-1;return t.isSchema()?r=on.encode(e,t.header()):t.isRecordBatch()?r=Qs.encode(e,t.header()):t.isDictionaryBatch()&&(r=Zs.encode(e,t.header())),Ws.startMessage(e),Ws.addVersion(e,ue.V4),Ws.addHeader(e,r),Ws.addHeaderType(e,t.headerType),Ws.addBodyLength(e,new Us(t.bodyLength,0)),Ws.finishMessageBuffer(e,Ws.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof on)return new Js(0,ue.V4,ce.Schema,t);if(t instanceof Qs)return new Js(e,ue.V4,ce.RecordBatch,t);if(t instanceof Zs)return new Js(e,ue.V4,ce.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===ce.Schema}isRecordBatch(){return this.headerType===ce.RecordBatch}isDictionaryBatch(){return this.headerType===ce.DictionaryBatch}}class Qs{constructor(t,e,r){this._nodes=e,this._buffers=r,this._length="number"==typeof t?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Zs{constructor(t,e,r=!1){this._data=t,this._isDelta=r,this._id="number"==typeof e?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class Xs{constructor(t,e){this.offset="number"==typeof t?t:t.low,this.length="number"==typeof e?e:e.low}}class ta{constructor(t,e){this.length="number"==typeof t?t:t.low,this.nullCount="number"==typeof e?e:e.low}}function ea(t,e){const r=[];for(let i,n=-1,s=-1,a=t.childrenLength();++n<a;)(i=t.children(n))&&(r[++s]=cn.decode(i,e));return r}function ra(t){const e=new Map;if(t)for(let r,i,n=-1,s=0|t.customMetadataLength();++n<s;)(r=t.customMetadata(n))&&null!=(i=r.key())&&e.set(i,r.value());return e}function ia(t){return new Me(t.isSigned(),t.bitWidth())}function na(t,e){const r=t.typeType();switch(r){case Rs.NONE:case Rs.Null:return new De;case Rs.Binary:return new qe;case Rs.Utf8:return new Ye;case Rs.Bool:return new Ge;case Rs.List:return new cr((e||[])[0]);case Rs.Struct_:return new ur(e||[])}switch(r){case Rs.Int:{const e=t.type(new Xt.apache.arrow.flatbuf.Int);return new Me(e.isSigned(),e.bitWidth())}case Rs.FloatingPoint:{const e=t.type(new Xt.apache.arrow.flatbuf.FloatingPoint);return new ze(e.precision())}case Rs.Decimal:{const e=t.type(new Xt.apache.arrow.flatbuf.Decimal);return new Ke(e.scale(),e.precision())}case Rs.Date:{const e=t.type(new Xt.apache.arrow.flatbuf.Date);return new Je(e.unit())}case Rs.Time:{const e=t.type(new Xt.apache.arrow.flatbuf.Time);return new Xe(e.unit(),e.bitWidth())}case Rs.Timestamp:{const e=t.type(new Xt.apache.arrow.flatbuf.Timestamp);return new nr(e.unit(),e.timezone())}case Rs.Interval:{const e=t.type(new Xt.apache.arrow.flatbuf.Interval);return new sr(e.unit())}case Rs.Union:{const r=t.type(new Xt.apache.arrow.flatbuf.Union);return new hr(r.mode(),r.typeIdsArray()||[],e||[])}case Rs.FixedSizeBinary:{const e=t.type(new Xt.apache.arrow.flatbuf.FixedSizeBinary);return new lr(e.byteWidth())}case Rs.FixedSizeList:{const r=t.type(new Xt.apache.arrow.flatbuf.FixedSizeList);return new pr(r.listSize(),(e||[])[0])}case Rs.Map:{const r=t.type(new Xt.apache.arrow.flatbuf.Map);return new dr((e||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Rs[r]}" (${r})`)}cn.encode=function(t,e){let r=-1,i=-1,n=-1,s=e.type,a=e.typeId;Ce.isDictionary(s)?(a=s.dictionary.typeId,n=ks.visit(s,t),i=ks.visit(s.dictionary,t)):i=ks.visit(s,t);const o=(s.children||[]).map((e=>cn.encode(t,e))),c=js.createChildrenVector(t,o),u=e.metadata&&e.metadata.size>0?js.createCustomMetadataVector(t,[...e.metadata].map((([e,r])=>{const i=t.createString(`${e}`),n=t.createString(`${r}`);return Hs.startKeyValue(t),Hs.addKey(t,i),Hs.addValue(t,n),Hs.endKeyValue(t)}))):-1;e.name&&(r=t.createString(e.name));js.startField(t),js.addType(t,i),js.addTypeType(t,a),js.addChildren(t,c),js.addNullable(t,!!e.nullable),-1!==r&&js.addName(t,r);-1!==n&&js.addDictionary(t,n);-1!==u&&js.addCustomMetadata(t,u);return js.endField(t)},cn.decode=function(t,e){let r,i,n,s,a,o;e&&(o=t.dictionary())?e.has(r=o.id().low)?(s=(s=o.indexType())?ia(s):new Fe,a=new mr(e.get(r),s,r,o.isOrdered()),i=new cn(t.name(),a,t.nullable(),ra(t))):(s=(s=o.indexType())?ia(s):new Fe,e.set(r,n=na(t,ea(t,e))),a=new mr(n,s,r,o.isOrdered()),i=new cn(t.name(),a,t.nullable(),ra(t))):(n=na(t,ea(t,e)),i=new cn(t.name(),n,t.nullable(),ra(t)));return i||null},cn.fromJSON=function(t,e){let r,i,n,s,a,o;return e&&(s=t.dictionary)?e.has(r=s.id)?(i=(i=s.indexType)?Ns(i):new Fe,o=new mr(e.get(r),i,r,s.isOrdered),n=new cn(t.name,o,t.nullable,Os(t.customMetadata))):(i=(i=s.indexType)?Ns(i):new Fe,e.set(r,a=Fs(t,Ls(t,e))),o=new mr(a,i,r,s.isOrdered),n=new cn(t.name,o,t.nullable,Os(t.customMetadata))):(a=Fs(t,Ls(t,e)),n=new cn(t.name,a,t.nullable,Os(t.customMetadata))),n||null},on.encode=function(t,e){const r=e.fields.map((e=>cn.encode(t,e)));zs.startFieldsVector(t,r.length);const i=zs.createFieldsVector(t,r),n=e.metadata&&e.metadata.size>0?zs.createCustomMetadataVector(t,[...e.metadata].map((([e,r])=>{const i=t.createString(`${e}`),n=t.createString(`${r}`);return Hs.startKeyValue(t),Hs.addKey(t,i),Hs.addValue(t,n),Hs.endKeyValue(t)}))):-1;zs.startSchema(t),zs.addFields(t,i),zs.addEndianness(t,sa?Ys.Little:Ys.Big),-1!==n&&zs.addCustomMetadata(t,n);return zs.endSchema(t)},on.decode=function(t,e=new Map){const r=function(t,e){const r=[];for(let i,n=-1,s=-1,a=t.fieldsLength();++n<a;)(i=t.fields(n))&&(r[++s]=cn.decode(i,e));return r}(t,e);return new on(r,ra(t),e)},on.fromJSON=function(t,e=new Map){return new on(function(t,e){return(t.fields||[]).filter(Boolean).map((t=>cn.fromJSON(t,e)))}(t,e),Os(t.customMetadata),e)},Qs.encode=function(t,e){const r=e.nodes||[],i=e.buffers||[];Gs.startNodesVector(t,r.length),r.slice().reverse().forEach((e=>ta.encode(t,e)));const n=t.endVector();Gs.startBuffersVector(t,i.length),i.slice().reverse().forEach((e=>Xs.encode(t,e)));const s=t.endVector();return Gs.startRecordBatch(t),Gs.addLength(t,new Us(e.length,0)),Gs.addNodes(t,n),Gs.addBuffers(t,s),Gs.endRecordBatch(t)},Qs.decode=function(t,e=ue.V4){return new Qs(t.length(),function(t){const e=[];for(let r,i=-1,n=-1,s=t.nodesLength();++i<s;)(r=t.nodes(i))&&(e[++n]=ta.decode(r));return e}(t),function(t,e){const r=[];for(let i,n=-1,s=-1,a=t.buffersLength();++n<a;)(i=t.buffers(n))&&(e<ue.V4&&(i.bb_pos+=8*(n+1)),r[++s]=Xs.decode(i));return r}(t,e))},Qs.fromJSON=Cs,Zs.encode=function(t,e){const r=Qs.encode(t,e.data);return Ks.startDictionaryBatch(t),Ks.addId(t,new Us(e.id,0)),Ks.addIsDelta(t,e.isDelta),Ks.addData(t,r),Ks.endDictionaryBatch(t)},Zs.decode=function(t,e=ue.V4){return new Zs(Qs.decode(t.data(),e),t.id(),t.isDelta())},Zs.fromJSON=function(t){return new Zs(Cs(t.data),t.id,t.isDelta)},ta.encode=function(t,e){return qs.createFieldNode(t,new Us(e.length,0),new Us(e.nullCount,0))},ta.decode=function(t){return new ta(t.length(),t.nullCount())},Xs.encode=function(t,e){return $s.createBuffer(t,new Us(e.offset,0),new Us(e.length,0))},Xs.decode=function(t){return new Xs(t.offset(),t.length())};const sa=function(){const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]}();var aa=Z.ByteBuffer;const oa=t=>`Expected ${ce[t]} Message in stream, but was null or length 0.`,ca=t=>`Header pointer of flatbuffer-encoded ${ce[t]} Message is null or length 0.`,ua=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,ha=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class la{constructor(t){this.source=t instanceof Jn?t:new Jn(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||-1===t.value&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?dt:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(oa(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=jt(this.source.read(t));if(e.byteLength<t)throw new Error(ha(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(t=!1){const e=ce.Schema,r=this.readMessage(e),i=r&&r.header();if(t&&!i)throw new Error(ca(e));return i}readMetadataLength(){const t=this.source.read(fa),e=t&&new aa(t),r=e&&e.readInt32(0)||0;return{done:0===r,value:r}}readMetadata(t){const e=this.source.read(t);if(!e)return dt;if(e.byteLength<t)throw new Error(ua(t,e.byteLength));return{done:!1,value:Js.decode(e)}}}class pa{constructor(t,e){this.source=t instanceof Qn?t:Lt(t)?new es(t,e):new Qn(t)}[Symbol.asyncIterator](){return this}async next(){let t;return(t=await this.readMetadataLength()).done||-1===t.value&&(t=await this.readMetadataLength()).done||(t=await this.readMetadata(t.value)).done?dt:t}async throw(t){return await this.source.throw(t)}async return(t){return await this.source.return(t)}async readMessage(t){let e;if((e=await this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(oa(t));return e.value}async readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=jt(await this.source.read(t));if(e.byteLength<t)throw new Error(ha(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}async readSchema(t=!1){const e=ce.Schema,r=await this.readMessage(e),i=r&&r.header();if(t&&!i)throw new Error(ca(e));return i}async readMetadataLength(){const t=await this.source.read(fa),e=t&&new aa(t),r=e&&e.readInt32(0)||0;return{done:0===r,value:r}}async readMetadata(t){const e=await this.source.read(t);if(!e)return dt;if(e.byteLength<t)throw new Error(ua(t,e.byteLength));return{done:!1,value:Js.decode(e)}}}class da extends la{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof ft?t:new ft(t)}next(){const{_json:t}=this;if(!this._schema){this._schema=!0;return{done:!1,value:Js.fromJSON(t.schema,ce.Schema)}}if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];this._body=e.data.columns;return{done:!1,value:Js.fromJSON(e,ce.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];this._body=e.columns;return{done:!1,value:Js.fromJSON(e,ce.RecordBatch)}}return this._body=[],dt}readMessageBody(t){return function t(e){return(e||[]).reduce(((e,r)=>[...e,...r.VALIDITY&&[r.VALIDITY]||[],...r.TYPE&&[r.TYPE]||[],...r.OFFSET&&[r.OFFSET]||[],...r.DATA&&[r.DATA]||[],...t(r.children)]),[])}(this._body)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(oa(t));return e.value}readSchema(){const t=ce.Schema,e=this.readMessage(t),r=e&&e.header();if(!e||!r)throw new Error(ca(t));return r}}const fa=4,ya="ARROW1",ma=new Uint8Array(ya.length);for(let t=0;t<ya.length;t+=1)ma[t]=ya.charCodeAt(t);function ba(t,e=0){for(let r=-1,i=ma.length;++r<i;)if(ma[r]!==t[e+r])return!1;return!0}const ga=ma.length,_a=ga+fa,va=2*ga+fa;class wa extends be{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const e=new wa,r=tn(vc,t),[i=e]=e.visitMany(r);return i}visit(t){if(!Ce.isDictionary(t.type)){const{data:e,length:r,nullCount:i}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Ce.isNull(t.type)||xa.call(this,i<=0?new Uint8Array(0):pe(e.offset,r,e.nullBitmap)),this.nodes.push(new ta(r,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.indices)}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function xa(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new Xs(this._byteLength,e)),this._byteLength+=e,this}function Sa(t){return xa.call(this,t.values.subarray(0,t.length*t.stride))}function Ia(t){const{length:e,values:r,valueOffsets:i}=t,n=i[0],s=i[e],a=Math.min(s-n,r.byteLength-n);return xa.call(this,qt(-i[0],e,i)),xa.call(this,r.subarray(n,n+a)),this}function Aa(t){const{length:e,valueOffsets:r}=t;return r&&xa.call(this,qt(r[0],e,r)),this.visit(t.getChildAt(0))}function Ta(t){return this.visitMany(t.type.children.map(((e,r)=>t.getChildAt(r))).filter(Boolean))[0]}wa.prototype.visitBool=function(t){let e;return t.nullCount>=t.length?xa.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?xa.call(this,pe(t.offset,t.length,e)):xa.call(this,de(t))},wa.prototype.visitInt=Sa,wa.prototype.visitFloat=Sa,wa.prototype.visitUtf8=Ia,wa.prototype.visitBinary=Ia,wa.prototype.visitFixedSizeBinary=Sa,wa.prototype.visitDate=Sa,wa.prototype.visitTimestamp=Sa,wa.prototype.visitTime=Sa,wa.prototype.visitDecimal=Sa,wa.prototype.visitList=Aa,wa.prototype.visitStruct=Ta,wa.prototype.visitUnion=function(t){const{type:e,length:r,typeIds:i,valueOffsets:n}=t;if(xa.call(this,i),e.mode===ae.Sparse)return Ta.call(this,t);if(e.mode===ae.Dense){if(t.offset<=0)return xa.call(this,n),Ta.call(this,t);{const s=i.reduce(((t,e)=>Math.max(t,e)),i[0]),a=new Int32Array(s+1),o=new Int32Array(s+1).fill(-1),c=new Int32Array(r),u=qt(-n[0],r,n);for(let t,e,n=-1;++n<r;)-1===(e=o[t=i[n]])&&(e=o[t]=u[t]),c[n]=u[n]-e,++a[t];xa.call(this,c);for(let i,n=-1,s=e.children.length;++n<s;)if(i=t.getChildAt(n)){const t=e.typeIds[n],s=Math.min(r,a[t]);this.visit(i.slice(o[t],s))}}}return this},wa.prototype.visitInterval=Sa,wa.prototype.visitFixedSizeList=Aa,wa.prototype.visitMap=Aa;class Ea extends yt{constructor(t){super(),this._position=0,this._started=!1,this._sink=new Kn,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,At(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!=typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"==typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Tt(t)?t.then((t=>this.writeAll(t))):Bt(t)?La(this,t):Ca(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){var r;return t===this._sink||t instanceof Kn?this._sink=t:(this._sink=new Kn,t&&(At(r=t)&&It(r.abort)&&It(r.getWriter)&&!(r instanceof yt))?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&(t=>At(t)&&It(t.end)&&It(t.write)&&St(t.writable)&&!(t instanceof yt))(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&e.compareTo(this._schema)||(null===e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==t)return this.finish()&&void 0;if(t instanceof _c&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof vc&&!(e=t.schema))return this.finish()&&void 0;if(e&&!e.compareTo(this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof vc?t instanceof wc||this._writeRecordBatch(t):t instanceof _c?this.writeAll(t.chunks):Et(t)&&this.writeAll(t)}_writeMessage(t,e=8){const r=e-1,i=Js.encode(t),n=i.byteLength,s=this._writeLegacyIpcFormat?4:8,a=n+s+r&~r,o=a-n-s;return t.headerType===ce.RecordBatch?this._recordBatchBlocks.push(new Gn(a,t.bodyLength,this._position)):t.headerType===ce.DictionaryBatch&&this._dictionaryBlocks.push(new Gn(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-s)),n>0&&this._write(i),this._writePadding(o)}_write(t){if(this._started){const e=jt(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(Js.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(ma)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:r,bufferRegions:i,buffers:n}=wa.assemble(t),s=new Qs(t.length,r,i),a=Js.from(s,e);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(n)}_writeDictionaryBatch(t,e,r=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:i,nodes:n,bufferRegions:s,buffers:a}=wa.assemble(t),o=new Qs(t.length,n,s),c=new Zs(o,e,r),u=Js.from(c,i);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(t){let e,r,i;for(let n=-1,s=t.length;++n<s;)(e=t[n])&&(r=e.byteLength)>0&&(this._write(e),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[e,r]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(r=r.slice(t)).length>0){const i="chunks"in r?r.chunks:[r];for(const r of i)this._writeDictionaryBatch(r,e,t>0),t+=r.length}}return this}}class Ba extends Ea{static writeAll(t,e){const r=new Ba(e);return Tt(t)?t.then((t=>r.writeAll(t))):Bt(t)?La(r,t):Ca(r,t)}}class ka extends Ea{static writeAll(t){const e=new ka;return Tt(t)?t.then((t=>e.writeAll(t))):Bt(t)?La(e,t):Ca(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=qn.encode(new qn(t,ue.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function Ca(t,e){let r=e;e instanceof _c&&(r=e.chunks,t.reset(void 0,e.schema));for(const e of r)t.write(e);return t.finish()}async function La(t,e){for await(const r of e)t.write(r);return t.finish()}const Da=new Uint8Array(0),Ma=t=>[Da,Da,new Uint8Array(t),Da];function Oa(t,e){return function(t,e){const r=[...t.fields],i=[],n={numBatches:e.reduce(((t,e)=>Math.max(t,e.length)),0)};let s,a=0,o=0,c=-1,u=e.length,h=[];for(;n.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,c=-1;++c<u;)h[c]=s=e[c].shift(),o=Math.min(o,s?s.length:o);isFinite(o)&&(h=Na(r,o,h,e,n),o>0&&(i[a++]=[o,h.slice()]))}return[t=new on(r,t.metadata),i.map((e=>new vc(t,...e)))]}(t,e.map((t=>t instanceof Hi?t.chunks.map((t=>t.data)):[t.data])))}function Na(t,e,r,i,n){let s,a,o=0,c=-1,u=i.length;const h=(e+63&-64)>>3;for(;++c<u;)(s=r[c])&&(o=s.length)>=e?o===e?r[c]=s:(r[c]=s.slice(0,e),s=s.slice(e,o-e),n.numBatches=Math.max(n.numBatches,i[c].unshift(s))):((a=t[c]).nullable||(t[c]=a.clone({nullable:!0})),r[c]=s?s._changeLengthAndBackfillNullBitmap(e):gr.new(a.type,0,e,e,Ma(h)));return r}class Fa extends Zt{constructor(t,e){super(),this._children=e,this.numChildren=t.childData.length,this._bindDataAccessors(this.data=t)}get type(){return this.data.type}get typeId(){return this.data.typeId}get length(){return this.data.length}get offset(){return this.data.offset}get stride(){return this.data.stride}get nullCount(){return this.data.nullCount}get byteLength(){return this.data.byteLength}get VectorName(){return`${ee[this.typeId]}Vector`}get ArrayType(){return this.type.ArrayType}get values(){return this.data.values}get typeIds(){return this.data.typeIds}get nullBitmap(){return this.data.nullBitmap}get valueOffsets(){return this.data.valueOffsets}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}clone(t,e=this._children){return Zt.new(t,e)}concat(...t){return Hi.concat(this,...t)}slice(t,e){return Pi(this,t,e,this._sliceInternal)}isValid(t){if(this.nullCount>0){const e=this.offset+t;return 0!==(this.nullBitmap[e>>3]&1<<e%8)}return!0}getChildAt(t){return t<0||t>=this.numChildren?null:(this._children||(this._children=[]))[t]||(this._children[t]=Zt.new(this.data.childData[t]))}toJSON(){return[...this]}_sliceInternal(t,e,r){return t.clone(t.data.slice(e,r-e),null)}_bindDataAccessors(t){}}Fa.prototype[Symbol.isConcatSpreadable]=!0;class Ua extends Fa{asUtf8(){return Zt.new(this.data.clone(new Ye))}}class Va extends Fa{static from(t){return gc((()=>new Ge),t)}}class Pa extends Fa{static from(...t){return 2===t.length?gc((()=>t[1]===ie.DAY?new Qe:new Ze),t[0]):gc((()=>new Ze),t[0])}}class Ra extends Pa{}class ja extends Pa{}class za extends Fa{}class $a extends Fa{constructor(t){super(t),this.indices=Zt.new(t.clone(this.type.indices))}static from(...t){if(3===t.length){const[e,r,i]=t,n=new mr(e.type,r,null,null);return Zt.new(gr.Dictionary(n,0,i.length,0,null,i,e))}return gc((()=>t[0].type),t[0])}get dictionary(){return this.data.dictionary}reverseLookup(t){return this.dictionary.indexOf(t)}getKey(t){return this.indices.get(t)}getValue(t){return this.dictionary.get(t)}setKey(t,e){return this.indices.set(t,e)}setValue(t,e){return this.dictionary.set(t,e)}}$a.prototype.indices=null;class Wa extends Fa{}class Ha extends Fa{}class qa extends Fa{static from(t){let e=Za(this);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)){let r=Qa(t.constructor)||e;if(null===e&&(e=r),e&&e===r){let r=new e,i=t.byteLength/r.ArrayType.BYTES_PER_ELEMENT;if(!Ja(e,t.constructor))return Zt.new(gr.Float(r,0,i,0,null,t))}}if(e)return gc((()=>new e),t);if(t instanceof DataView||t instanceof ArrayBuffer)throw new TypeError(`Cannot infer float type from instance of ${t.constructor.name}`);throw new TypeError("Unrecognized FloatVector input")}}class Ya extends qa{toFloat32Array(){return new Float32Array(this)}toFloat64Array(){return new Float64Array(this)}}class Ga extends qa{}class Ka extends qa{}const Ja=(t,e)=>t===$e&&e!==Uint16Array,Qa=t=>{switch(t){case Uint16Array:return $e;case Float32Array:return We;case Float64Array:return He;default:return null}},Za=t=>{switch(t){case Ya:return $e;case Ga:return We;case Ka:return He;default:return null}};class Xa extends Fa{}class to extends Xa{}class eo extends Xa{}class ro extends Fa{static from(...t){let[e,r=!1]=t,i=fo(this,r);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){let t=po(e.constructor,r)||i;if(null===i&&(i=t),i&&i===t){let t=new i,r=e.byteLength/t.ArrayType.BYTES_PER_ELEMENT;return lo(i,e.constructor)&&(r*=.5),Zt.new(gr.Int(t,0,r,0,null,e))}}if(i)return gc((()=>new i),e);if(e instanceof DataView||e instanceof ArrayBuffer)throw new TypeError(`Cannot infer integer type from instance of ${e.constructor.name}`);throw new TypeError("Unrecognized IntVector input")}}class io extends ro{}class no extends ro{}class so extends ro{}class ao extends ro{toBigInt64Array(){return t=this.values,Pt(_t,t);var t}get values64(){return this._values64||(this._values64=this.toBigInt64Array())}}class oo extends ro{}class co extends ro{}class uo extends ro{}class ho extends ro{toBigUint64Array(){return t=this.values,Pt(wt,t);var t}get values64(){return this._values64||(this._values64=this.toBigUint64Array())}}const lo=(t,e)=>!(t!==Ue&&t!==je||e!==Int32Array&&e!==Uint32Array),po=(t,e)=>{switch(t){case Int8Array:return Oe;case Int16Array:return Ne;case Int32Array:return e?Ue:Fe;case _t:return Ue;case Uint8Array:return Ve;case Uint16Array:return Pe;case Uint32Array:return e?je:Re;case wt:return je;default:return null}},fo=(t,e)=>{switch(t){case io:return Oe;case no:return Ne;case so:return e?Ue:Fe;case ao:return Ue;case oo:return Ve;case co:return Pe;case uo:return e?je:Re;case ho:return je;default:return null}};class yo extends Fa{}class mo extends Fa{asList(){const t=this.type.children[0];return Zt.new(this.data.clone(new cr(t)))}bind(t){const e=this.getChildAt(0),{[t]:r,[t+1]:i}=this.valueOffsets;return new Oi(e.slice(r,i))}}class bo extends Fa{}const go=Symbol.for("rowIndex");class _o extends Fa{bind(t){const e=this._row||(this._row=new Ni(this)),r=Object.create(e);return r[go]=t,r}}class vo extends Fa{}class wo extends vo{}class xo extends vo{}class So extends vo{}class Io extends vo{}class Ao extends Fa{}class To extends Ao{}class Eo extends Ao{}class Bo extends Ao{}class ko extends Ao{}class Co extends Fa{get typeIdToChildIndex(){return this.data.type.typeIdToChildIndex}}class Lo extends Co{get valueOffsets(){return this.data.valueOffsets}}class Do extends Co{}class Mo extends Fa{static from(t){return gc((()=>new Ye),t)}asBinary(){return Zt.new(this.data.clone(new qe))}}function Oo(t){return function(){return t(this)}}function No(t){return function(e,r){return t(this,e,r)}}class Fo extends be{}const Uo=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),Vo=t=>new Date(t),Po=(t,e,r)=>{const{[r]:i,[r+1]:n}=e;return null!=i&&null!=n?t.subarray(i,n):null},Ro=({values:t},e)=>((t,e)=>Vo(((t,e)=>864e5*t[e])(t,e)))(t,e),jo=({values:t},e)=>((t,e)=>Vo(Uo(t,e)))(t,2*e),zo=({stride:t,values:e},r)=>e[t*r],$o=({stride:t,values:e},r)=>function(t){let e=(31744&t)>>10,r=(1023&t)/1024,i=(-1)**((32768&t)>>15);switch(e){case 31:return i*(r?NaN:1/0);case 0:return i*(r?6103515625e-14*r:0)}return i*2**(e-15)*(1+r)}(e[t*r]),Wo=({stride:t,values:e,type:r},i)=>ti.new(e.subarray(t*i,t*(i+1)),r.isSigned),Ho=({values:t},e)=>1e3*Uo(t,2*e),qo=({values:t},e)=>Uo(t,2*e),Yo=({values:t},e)=>((t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3)(t,2*e),Go=({values:t},e)=>((t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6)(t,2*e),Ko=({values:t,stride:e},r)=>t[e*r],Jo=({values:t,stride:e},r)=>t[e*r],Qo=({values:t},e)=>ti.signed(t.subarray(2*e,2*(e+1))),Zo=({values:t},e)=>ti.signed(t.subarray(2*e,2*(e+1))),Xo=(t,e)=>{const r=t.typeIdToChildIndex[t.typeIds[e]],i=t.getChildAt(r);return i?i.get(t.valueOffsets[e]):null},tc=(t,e)=>{const r=t.typeIdToChildIndex[t.typeIds[e]],i=t.getChildAt(r);return i?i.get(e):null},ec=({values:t},e)=>t.subarray(2*e,2*(e+1)),rc=({values:t},e)=>{const r=t[e],i=new Int32Array(2);return i[0]=r/12|0,i[1]=r%12|0,i};Fo.prototype.visitNull=(t,e)=>null,Fo.prototype.visitBool=({offset:t,values:e},r)=>{const i=t+r;return 0!=(e[i>>3]&1<<i%8)},Fo.prototype.visitInt=(t,e)=>t.type.bitWidth<64?zo(t,e):Wo(t,e),Fo.prototype.visitInt8=zo,Fo.prototype.visitInt16=zo,Fo.prototype.visitInt32=zo,Fo.prototype.visitInt64=Wo,Fo.prototype.visitUint8=zo,Fo.prototype.visitUint16=zo,Fo.prototype.visitUint32=zo,Fo.prototype.visitUint64=Wo,Fo.prototype.visitFloat=(t,e)=>t.type.precision!==se.HALF?zo(t,e):$o(t,e),Fo.prototype.visitFloat16=$o,Fo.prototype.visitFloat32=zo,Fo.prototype.visitFloat64=zo,Fo.prototype.visitUtf8=({values:t,valueOffsets:e},r)=>{const i=Po(t,e,r);return null!==i?lt(i):null},Fo.prototype.visitBinary=({values:t,valueOffsets:e},r)=>Po(t,e,r),Fo.prototype.visitFixedSizeBinary=({stride:t,values:e},r)=>e.subarray(t*r,t*(r+1)),Fo.prototype.visitDate=(t,e)=>t.type.unit===ie.DAY?Ro(t,e):jo(t,e),Fo.prototype.visitDateDay=Ro,Fo.prototype.visitDateMillisecond=jo,Fo.prototype.visitTimestamp=(t,e)=>{switch(t.type.unit){case ne.SECOND:return Ho(t,e);case ne.MILLISECOND:return qo(t,e);case ne.MICROSECOND:return Yo(t,e);case ne.NANOSECOND:return Go(t,e)}},Fo.prototype.visitTimestampSecond=Ho,Fo.prototype.visitTimestampMillisecond=qo,Fo.prototype.visitTimestampMicrosecond=Yo,Fo.prototype.visitTimestampNanosecond=Go,Fo.prototype.visitTime=(t,e)=>{switch(t.type.unit){case ne.SECOND:return Ko(t,e);case ne.MILLISECOND:return Jo(t,e);case ne.MICROSECOND:return Qo(t,e);case ne.NANOSECOND:return Zo(t,e)}},Fo.prototype.visitTimeSecond=Ko,Fo.prototype.visitTimeMillisecond=Jo,Fo.prototype.visitTimeMicrosecond=Qo,Fo.prototype.visitTimeNanosecond=Zo,Fo.prototype.visitDecimal=({values:t},e)=>ti.decimal(t.subarray(4*e,4*(e+1))),Fo.prototype.visitList=(t,e)=>{const r=t.getChildAt(0),{valueOffsets:i,stride:n}=t;return r.slice(i[e*n],i[e*n+1])},Fo.prototype.visitStruct=(t,e)=>t.bind(e),Fo.prototype.visitUnion=(t,e)=>t.type.mode===ae.Dense?Xo(t,e):tc(t,e),Fo.prototype.visitDenseUnion=Xo,Fo.prototype.visitSparseUnion=tc,Fo.prototype.visitDictionary=(t,e)=>t.getValue(t.getKey(e)),Fo.prototype.visitInterval=(t,e)=>t.type.unit===oe.DAY_TIME?ec(t,e):rc(t,e),Fo.prototype.visitIntervalDayTime=ec,Fo.prototype.visitIntervalYearMonth=rc,Fo.prototype.visitFixedSizeList=(t,e)=>{const r=t.getChildAt(0),{stride:i}=t;return r.slice(e*i,(e+1)*i)},Fo.prototype.visitMap=(t,e)=>t.bind(e);const ic=new Fo;class nc extends be{}function sc(t,e,r){if(void 0===e)return-1;if(null===e)return function(t,e){const{nullBitmap:r}=t.data;if(!r||t.nullCount<=0)return-1;let i=0;for(const n of fe(r,t.data.offset+(e||0),t.length,r,he)){if(!n)return i;++i}return-1}(t,r);const i=zi(e);for(let e=(r||0)-1,n=t.length;++e<n;)if(i(t.get(e)))return e;return-1}function ac(t,e,r){const i=zi(e);for(let e=(r||0)-1,n=t.length;++e<n;)if(i(t.get(e)))return e;return-1}nc.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},nc.prototype.visitBool=sc,nc.prototype.visitInt=sc,nc.prototype.visitInt8=sc,nc.prototype.visitInt16=sc,nc.prototype.visitInt32=sc,nc.prototype.visitInt64=sc,nc.prototype.visitUint8=sc,nc.prototype.visitUint16=sc,nc.prototype.visitUint32=sc,nc.prototype.visitUint64=sc,nc.prototype.visitFloat=sc,nc.prototype.visitFloat16=sc,nc.prototype.visitFloat32=sc,nc.prototype.visitFloat64=sc,nc.prototype.visitUtf8=sc,nc.prototype.visitBinary=sc,nc.prototype.visitFixedSizeBinary=sc,nc.prototype.visitDate=sc,nc.prototype.visitDateDay=sc,nc.prototype.visitDateMillisecond=sc,nc.prototype.visitTimestamp=sc,nc.prototype.visitTimestampSecond=sc,nc.prototype.visitTimestampMillisecond=sc,nc.prototype.visitTimestampMicrosecond=sc,nc.prototype.visitTimestampNanosecond=sc,nc.prototype.visitTime=sc,nc.prototype.visitTimeSecond=sc,nc.prototype.visitTimeMillisecond=sc,nc.prototype.visitTimeMicrosecond=sc,nc.prototype.visitTimeNanosecond=sc,nc.prototype.visitDecimal=sc,nc.prototype.visitList=sc,nc.prototype.visitStruct=sc,nc.prototype.visitUnion=sc,nc.prototype.visitDenseUnion=ac,nc.prototype.visitSparseUnion=ac,nc.prototype.visitDictionary=sc,nc.prototype.visitInterval=sc,nc.prototype.visitIntervalDayTime=sc,nc.prototype.visitIntervalYearMonth=sc,nc.prototype.visitFixedSizeList=sc,nc.prototype.visitMap=sc;const oc=new nc;class cc extends be{}function uc(t){if(t.nullCount>0)return function(t){const e=ic.getVisitFn(t);return fe(t.data.nullBitmap,t.data.offset,t.length,t,((t,r,i,n)=>0!=(i&1<<n)?e(t,r):null))}(t);const{type:e,typeId:r,length:i}=t;return 1===t.stride&&(r===ee.Timestamp||r===ee.Int&&64!==e.bitWidth||r===ee.Time&&64!==e.bitWidth||r===ee.Float&&e.precision>0)?t.data.values.subarray(0,i)[Symbol.iterator]():function*(e){for(let r=-1;++r<i;)yield e(t,r)}(ic.getVisitFn(t))}cc.prototype.visitNull=uc,cc.prototype.visitBool=uc,cc.prototype.visitInt=uc,cc.prototype.visitInt8=uc,cc.prototype.visitInt16=uc,cc.prototype.visitInt32=uc,cc.prototype.visitInt64=uc,cc.prototype.visitUint8=uc,cc.prototype.visitUint16=uc,cc.prototype.visitUint32=uc,cc.prototype.visitUint64=uc,cc.prototype.visitFloat=uc,cc.prototype.visitFloat16=uc,cc.prototype.visitFloat32=uc,cc.prototype.visitFloat64=uc,cc.prototype.visitUtf8=uc,cc.prototype.visitBinary=uc,cc.prototype.visitFixedSizeBinary=uc,cc.prototype.visitDate=uc,cc.prototype.visitDateDay=uc,cc.prototype.visitDateMillisecond=uc,cc.prototype.visitTimestamp=uc,cc.prototype.visitTimestampSecond=uc,cc.prototype.visitTimestampMillisecond=uc,cc.prototype.visitTimestampMicrosecond=uc,cc.prototype.visitTimestampNanosecond=uc,cc.prototype.visitTime=uc,cc.prototype.visitTimeSecond=uc,cc.prototype.visitTimeMillisecond=uc,cc.prototype.visitTimeMicrosecond=uc,cc.prototype.visitTimeNanosecond=uc,cc.prototype.visitDecimal=uc,cc.prototype.visitList=uc,cc.prototype.visitStruct=uc,cc.prototype.visitUnion=uc,cc.prototype.visitDenseUnion=uc,cc.prototype.visitSparseUnion=uc,cc.prototype.visitDictionary=uc,cc.prototype.visitInterval=uc,cc.prototype.visitIntervalDayTime=uc,cc.prototype.visitIntervalYearMonth=uc,cc.prototype.visitFixedSizeList=uc,cc.prototype.visitMap=uc;const hc=new cc;class lc extends be{}function pc(t){const{type:e,length:r,stride:i}=t;switch(e.typeId){case ee.Int:case ee.Float:case ee.Decimal:case ee.Time:case ee.Timestamp:return t.data.values.subarray(0,r*i)}return[...hc.visit(t)]}lc.prototype.visitNull=pc,lc.prototype.visitBool=pc,lc.prototype.visitInt=pc,lc.prototype.visitInt8=pc,lc.prototype.visitInt16=pc,lc.prototype.visitInt32=pc,lc.prototype.visitInt64=pc,lc.prototype.visitUint8=pc,lc.prototype.visitUint16=pc,lc.prototype.visitUint32=pc,lc.prototype.visitUint64=pc,lc.prototype.visitFloat=pc,lc.prototype.visitFloat16=pc,lc.prototype.visitFloat32=pc,lc.prototype.visitFloat64=pc,lc.prototype.visitUtf8=pc,lc.prototype.visitBinary=pc,lc.prototype.visitFixedSizeBinary=pc,lc.prototype.visitDate=pc,lc.prototype.visitDateDay=pc,lc.prototype.visitDateMillisecond=pc,lc.prototype.visitTimestamp=pc,lc.prototype.visitTimestampSecond=pc,lc.prototype.visitTimestampMillisecond=pc,lc.prototype.visitTimestampMicrosecond=pc,lc.prototype.visitTimestampNanosecond=pc,lc.prototype.visitTime=pc,lc.prototype.visitTimeSecond=pc,lc.prototype.visitTimeMillisecond=pc,lc.prototype.visitTimeMicrosecond=pc,lc.prototype.visitTimeNanosecond=pc,lc.prototype.visitDecimal=pc,lc.prototype.visitList=pc,lc.prototype.visitStruct=pc,lc.prototype.visitUnion=pc,lc.prototype.visitDenseUnion=pc,lc.prototype.visitSparseUnion=pc,lc.prototype.visitDictionary=pc,lc.prototype.visitInterval=pc,lc.prototype.visitIntervalDayTime=pc,lc.prototype.visitIntervalYearMonth=pc,lc.prototype.visitFixedSizeList=pc,lc.prototype.visitMap=pc;const dc=new lc,fc=(t,e)=>t+e,yc=t=>`Cannot compute the byte width of variable-width column ${t}`;const mc=new class extends be{visitNull(t){return 0}visitInt(t){return t.bitWidth/8}visitFloat(t){return t.ArrayType.BYTES_PER_ELEMENT}visitBinary(t){throw new Error(yc(t))}visitUtf8(t){throw new Error(yc(t))}visitBool(t){return 1/8}visitDecimal(t){return 16}visitDate(t){return 4*(t.unit+1)}visitTime(t){return t.bitWidth/8}visitTimestamp(t){return t.unit===ne.SECOND?4:8}visitInterval(t){return 4*(t.unit+1)}visitList(t){throw new Error(yc(t))}visitStruct(t){return this.visitFields(t.children).reduce(fc,0)}visitUnion(t){return this.visitFields(t.children).reduce(fc,0)}visitFixedSizeBinary(t){return t.byteWidth}visitFixedSizeList(t){return t.listSize*this.visitFields(t.children).reduce(fc,0)}visitMap(t){return this.visitFields(t.children).reduce(fc,0)}visitDictionary(t){return this.visit(t.indices)}visitFields(t){return(t||[]).map((t=>this.visit(t.type)))}visitSchema(t){return this.visitFields(t.fields).reduce(fc,0)}};const bc=new class extends be{visitNull(){return bo}visitBool(){return Va}visitInt(){return ro}visitInt8(){return io}visitInt16(){return no}visitInt32(){return so}visitInt64(){return ao}visitUint8(){return oo}visitUint16(){return co}visitUint32(){return uo}visitUint64(){return ho}visitFloat(){return qa}visitFloat16(){return Ya}visitFloat32(){return Ga}visitFloat64(){return Ka}visitUtf8(){return Mo}visitBinary(){return Ua}visitFixedSizeBinary(){return Wa}visitDate(){return Pa}visitDateDay(){return Ra}visitDateMillisecond(){return ja}visitTimestamp(){return vo}visitTimestampSecond(){return wo}visitTimestampMillisecond(){return xo}visitTimestampMicrosecond(){return So}visitTimestampNanosecond(){return Io}visitTime(){return Ao}visitTimeSecond(){return To}visitTimeMillisecond(){return Eo}visitTimeMicrosecond(){return Bo}visitTimeNanosecond(){return ko}visitDecimal(){return za}visitList(){return yo}visitStruct(){return _o}visitUnion(){return Co}visitDenseUnion(){return Lo}visitSparseUnion(){return Do}visitDictionary(){return $a}visitInterval(){return Xa}visitIntervalDayTime(){return to}visitIntervalYearMonth(){return eo}visitFixedSizeList(){return Ha}visitMap(){return mo}};function gc(t,e){if(Et(e))return Zt.from({nullValues:[null,void 0],type:t(),values:e});if(Bt(e))return Zt.from({nullValues:[null,void 0],type:t(),values:e});const{values:r=[],type:i=t(),nullValues:n=[null,void 0]}={...e};return Et(r),Zt.from({nullValues:n,...e,type:i})}Zt.new=function(t,...e){return new(bc.getVisitFn(t)())(t,...e)},Zt.from=function(t){const{values:e=[],...r}={nullValues:[null,void 0],...t};if(Et(e)){const t=[...Er.throughIterable(r)(e)];return 1===t.length?t[0]:Hi.concat(t)}return(async t=>{const i=Er.throughAsyncIterable(r);for await(const r of i(e))t.push(r);return 1===t.length?t[0]:Hi.concat(t)})([])},Fa.prototype.get=function(t){return ic.visit(this,t)},Fa.prototype.set=function(t,e){return Vn.visit(this,t,e)},Fa.prototype.indexOf=function(t,e){return oc.visit(this,t,e)},Fa.prototype.toArray=function(){return dc.visit(this)},Fa.prototype.getByteWidth=function(){return mc.visit(this.type)},Fa.prototype[Symbol.iterator]=function(){return hc.visit(this)},Fa.prototype._bindDataAccessors=function(){const t=this.nullBitmap;t&&t.byteLength>0&&(this.get=(e=this.get,function(t){return this.isValid(t)?e.call(this,t):null}),this.set=function(t){return function(e,r){var i,n;i=this.nullBitmap,n=this.offset+e,(!(null==r)?(i[n>>3]|=1<<n%8,1):(i[n>>3]&=~(1<<n%8),0))&&t.call(this,e,r)}}(this.set));var e},Object.keys(ee).map((t=>ee[t])).filter((t=>"number"==typeof t)).filter((t=>t!==ee.NONE)).forEach((t=>{const e=bc.visit(t);e.prototype.get=function(t){return function(e){return t(this,e)}}(ic.getVisitFn(t)),e.prototype.set=No(Vn.getVisitFn(t)),e.prototype.indexOf=No(oc.getVisitFn(t)),e.prototype.toArray=Oo(dc.getVisitFn(t)),e.prototype.getByteWidth=function(t){return function(){return t(this.type)}}(mc.getVisitFn(t)),e.prototype[Symbol.iterator]=Oo(hc.getVisitFn(t))}));class _c extends Hi{constructor(...t){let e=null;t[0]instanceof on&&(e=t.shift());let r=Qi(vc,t);if(!e&&!(e=r[0]&&r[0].schema))throw new TypeError("Table must be initialized with a Schema or at least one RecordBatch");r[0]||(r[0]=new wc(e)),super(new ur(e.fields),r),this._schema=e,this._chunks=r}static empty(t=new on([])){return new _c(t,[])}static from(t){if(!t)return _c.empty();if("object"==typeof t){let e=Et(t.values)?function(t){const{type:e}=t;if(e instanceof ur)return _c.fromStruct(_o.from(t));return null}(t):Bt(t.values)?function(t){const{type:e}=t;if(e instanceof ur)return _o.from(t).then((t=>_c.fromStruct(t)));return null}(t):null;if(null!==e)return e}let e=Sc.from(t);return Tt(e)?(async()=>await _c.from(await e))():e.isSync()&&(e=e.open())?e.schema?new _c(e.schema,[...e]):_c.empty():(async t=>{const e=await t,r=e.schema,i=[];if(r){for await(let t of e)i.push(t);return new _c(r,i)}return _c.empty()})(e.open())}static async fromAsync(t){return await _c.from(t)}static fromStruct(t){return _c.new(t.data.childData,t.type.children)}static new(...t){return new _c(...function(t){return Oa(new on(t.map((({field:t})=>t))),t)}((t=>{const[e,r]=an(t,[[],[]]);return r.map(((t,r)=>t instanceof Gi?Gi.new(t.field.clone(e[r]),t):t instanceof Zt?Gi.new(e[r],t):Gi.new(e[r],[])))})(t)))}get schema(){return this._schema}get length(){return this._length}get chunks(){return this._chunks}get numCols(){return this._numChildren}clone(t=this._chunks){return new _c(this._schema,t)}getColumn(t){return this.getColumnAt(this.getColumnIndex(t))}getColumnAt(t){return this.getChildAt(t)}getColumnIndex(t){return this._schema.fields.findIndex((e=>e.name===t))}getChildAt(t){if(t<0||t>=this.numChildren)return null;let e,r;const i=this._schema.fields,n=this._children||(this._children=[]);if(r=n[t])return r;if(e=i[t]){const r=this._chunks.map((e=>e.getChildAt(t))).filter((t=>null!=t));if(r.length>0)return n[t]=new Gi(e,r)}return null}serialize(t="binary",e=!0){return(e?Ba:ka).writeAll(this).toUint8Array(!0)}count(){return this._length}select(...t){const e=this._schema.fields.reduce(((t,e,r)=>t.set(e.name,r)),new Map);return this.selectAt(...t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(...t){const e=this._schema.selectAt(...t);return new _c(e,this._chunks.map((({length:r,data:{childData:i}})=>new vc(e,r,t.map((t=>i[t])).filter(Boolean)))))}assign(t){const e=this._schema.fields,[r,i]=t.schema.fields.reduce(((t,r,i)=>{const[n,s]=t,a=e.findIndex((t=>t.name===r.name));return~a?s[a]=i:n.push(i),t}),[[],[]]),n=this._schema.assign(t.schema),s=[...e.map(((e,r,n,s=i[r])=>void 0===s?this.getColumnAt(r):t.getColumnAt(s))),...r.map((e=>t.getColumnAt(e)))].filter(Boolean);return new _c(...Oa(n,s))}}class vc extends _o{constructor(...t){let e,r,i=t[0];if(t[1]instanceof gr)[,e,r]=t;else{const r=i.fields,[,n,s]=t;e=gr.Struct(new ur(r),0,n,0,null,s)}super(e,r),this._schema=i}static from(t){return Et(t.values),_c.from(t)}static new(...t){const[e,r]=Zi(t),i=r.filter((t=>t instanceof Zt));return new vc(...function(t,e,r=e.reduce(((t,e)=>Math.max(t,e.length)),0)){let i,n,s=-1,a=e.length;const o=[...t.fields],c=[],u=(r+63&-64)>>3;for(;++s<a;)(i=e[s])&&i.length===r?c[s]=i:((n=o[s]).nullable||(o[s]=o[s].clone({nullable:!0})),c[s]=i?i._changeLengthAndBackfillNullBitmap(r):gr.new(n.type,0,r,r,Ma(u)));return[new on(o),r,c]}(new on(e),i.map((t=>t.data))))}clone(t,e=this._children){return new vc(this._schema,t,e)}concat(...t){const e=this._schema,r=Hi.flatten(this,...t);return new _c(e,r.map((({data:t})=>new vc(e,t))))}get schema(){return this._schema}get numCols(){return this._schema.fields.length}get dictionaries(){return this._dictionaries||(this._dictionaries=xc.collect(this))}select(...t){const e=this._schema.fields.reduce(((t,e,r)=>t.set(e.name,r)),new Map);return this.selectAt(...t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(...t){const e=this._schema.selectAt(...t),r=t.map((t=>this.data.childData[t])).filter(Boolean);return new vc(e,this.length,r)}}class wc extends vc{constructor(t){super(t,0,t.fields.map((t=>gr.new(t.type,0,0,0))))}}class xc extends be{constructor(){super(...arguments),this.dictionaries=new Map}static collect(t){return(new xc).visit(t.data,new ur(t.schema.fields)).dictionaries}visit(t,e){return Ce.isDictionary(e)?this.visitDictionary(t,e):(t.childData.forEach(((t,r)=>this.visit(t,e.children[r].type))),this)}visitDictionary(t,e){const r=t.dictionary;return r&&r.length>0&&this.dictionaries.set(e.id,r),this}}class Sc extends yt{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return Tt(e)?e.then((()=>this)):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Yt.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Yt.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Sc?t:kt(t)?function(t){return new Ic(new Mc(t))}(t):Lt(t)?async function(t){const{size:e}=await t.stat(),r=new es(t,e);if(e>=va&&ba(await r.readAt(0,ga+7&-8)))return new Ec(new Dc(r));return new Ac(new Cc(r))}(t):Tt(t)?(async()=>await Sc.from(await t))():Dt(t)||Mt(t)||Ot(t)||Bt(t)?async function(t){const e=await t.peek(ga+7&-8);return e&&e.byteLength>=4?ba(e)?new Tc(new Lc(await t.read())):new Ac(new Cc(t)):new Ac(new Cc(async function*(){}()))}(new Qn(t)):function(t){const e=t.peek(ga+7&-8);return e&&e.byteLength>=4?ba(e)?new Tc(new Lc(t.read())):new Ic(new kc(t)):new Ic(new kc(function*(){}()))}(new Jn(t))}static readAll(t){return t instanceof Sc?t.isSync()?Nc(t):Fc(t):kt(t)||ArrayBuffer.isView(t)||Et(t)||Ct(t)?Nc(t):Fc(t)}}class Ic extends Sc{constructor(t){super(t),this._impl=t}[Symbol.iterator](){return this._impl[Symbol.iterator]()}async*[Symbol.asyncIterator](){yield*this[Symbol.iterator]()}}class Ac extends Sc{constructor(t){super(t),this._impl=t}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Tc extends Ic{constructor(t){super(t),this._impl=t}}class Ec extends Ac{constructor(t){super(t),this._impl=t}}class Bc{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){return new vc(this.schema,t.length,this._loadVectors(t,e,this.schema.fields))}_loadDictionaryBatch(t,e){const{id:r,isDelta:i,data:n}=t,{dictionaries:s,schema:a}=this,o=s.get(r);if(i||!o){const t=a.dictionaries.get(r);return o&&i?o.concat(Zt.new(this._loadVectors(n,e,[t])[0])):Zt.new(this._loadVectors(n,e,[t])[0])}return o}_loadVectors(t,e,r){return new cs(e,t.nodes,t.buffers,this.dictionaries).visitMany(r)}}class kc extends Bc{constructor(t,e){super(e),this._reader=kt(t)?new da(this._handle=t):new la(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Oc(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):dt}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):dt}next(){if(this.closed)return dt;let t,{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=e.readMessageBody(t.bodyLength),n=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,n)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new wc(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Cc extends Bc{constructor(t,e){super(e),this._reader=new pa(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}async cancel(){!this.closed&&(this.closed=!0)&&(await this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}async open(t){return this.closed||(this.autoDestroy=Oc(this,t),this.schema||(this.schema=await this._reader.readSchema())||await this.cancel()),this}async throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.throw(t):dt}async return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?await this.reset()._reader.return(t):dt}async next(){if(this.closed)return dt;let t,{_reader:e}=this;for(;t=await this._readNextMessageAndValidate();)if(t.isSchema())await this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=await e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=await e.readMessageBody(t.bodyLength),n=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,n)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new wc(this.schema)}):await this.return()}async _readNextMessageAndValidate(t){return await this._reader.readMessage(t)}}class Lc extends kc{constructor(t,e){super(t instanceof ts?t:new ts(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){if(this.closed)return null;this._footer||this.open();const e=this._footer&&this._footer.getRecordBatch(t);if(e&&this._handle.seek(e.offset)){const t=this._reader.readMessage(ce.RecordBatch);if(t&&t.isRecordBatch()){const e=t.header(),r=this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,r)}}return null}_readDictionaryBatch(t){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&this._handle.seek(e.offset)){const t=this._reader.readMessage(ce.DictionaryBatch);if(t&&t.isDictionaryBatch()){const e=t.header(),r=this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,r);this.dictionaries.set(e.id,i)}}}_readFooter(){const{_handle:t}=this,e=t.size-_a,r=t.readInt32(e),i=t.readAt(e-r,r);return qn.decode(i)}_readNextMessageAndValidate(t){if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer&&this._footer.getRecordBatch(this._recordBatchIndex);if(e&&this._handle.seek(e.offset))return this._reader.readMessage(t)}return null}}class Dc extends Cc{constructor(t,...e){const r="number"!=typeof e[0]?e.shift():void 0,i=e[0]instanceof Map?e.shift():void 0;super(t instanceof es?t:new es(t,r),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}async open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=await this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&await this._readDictionaryBatch(this._dictionaryIndex++)}return await super.open(t)}async readRecordBatch(t){if(this.closed)return null;this._footer||await this.open();const e=this._footer&&this._footer.getRecordBatch(t);if(e&&await this._handle.seek(e.offset)){const t=await this._reader.readMessage(ce.RecordBatch);if(t&&t.isRecordBatch()){const e=t.header(),r=await this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,r)}}return null}async _readDictionaryBatch(t){const e=this._footer&&this._footer.getDictionaryBatch(t);if(e&&await this._handle.seek(e.offset)){const t=await this._reader.readMessage(ce.DictionaryBatch);if(t&&t.isDictionaryBatch()){const e=t.header(),r=await this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,r);this.dictionaries.set(e.id,i)}}}async _readFooter(){const{_handle:t}=this;t._pending&&await t._pending;const e=t.size-_a,r=await t.readInt32(e),i=await t.readAt(e-r,r);return qn.decode(i)}async _readNextMessageAndValidate(t){if(this._footer||await this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&await this._handle.seek(e.offset))return await this._reader.readMessage(t)}return null}}class Mc extends kc{constructor(t,e){super(t,e)}_loadVectors(t,e,r){return new us(e,t.nodes,t.buffers,this.dictionaries).visitMany(r)}}function Oc(t,e){return e&&"boolean"==typeof e.autoDestroy?e.autoDestroy:t.autoDestroy}function*Nc(t){const e=Sc.from(t);try{if(!e.open({autoDestroy:!1}).closed)do{yield e}while(!e.reset().open().closed)}finally{e.cancel()}}async function*Fc(t){const e=await Sc.from(t);try{if(!(await e.open({autoDestroy:!1})).closed)do{yield e}while(!(await e.reset().open()).closed)}finally{await e.cancel()}}class Uc{constructor(t){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{readableStrategy:e,writableStrategy:r,queueingStrategy:i="count",...n}=t;this._controller=null,this._builder=Er.new(n),this._getSize="bytes"!==i?Vc:Pc;const{highWaterMark:s=("bytes"===i?16384:1e3)}={...e},{highWaterMark:a=("bytes"===i?16384:1e3)}={...r};this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:t=>{this._maybeFlush(this._builder,this._controller=t)},start:t=>{this._maybeFlush(this._builder,this._controller=t)}},{highWaterMark:s,size:"bytes"!==i?Vc:Pc}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:a,size:t=>this._writeValueAndReturnChunkSize(t)})}_writeValueAndReturnChunkSize(t){const e=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(t)),this._bufferedSize-e}_maybeFlush(t,e){null!==e&&(this._bufferedSize>=e.desiredSize&&++this._numChunks&&this._enqueue(e,t.toVector()),t.finished&&((t.length>0||0===this._numChunks)&&++this._numChunks&&this._enqueue(e,t.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(e,null)))}_enqueue(t,e){this._bufferedSize=0,this._controller=null,null===e?t.close():t.enqueue(e)}}const Vc=t=>t.length,Pc=t=>t.byteLength;class Rc{eq(t){return t instanceof Rc||(t=new jc(t)),new Gc(this,t)}le(t){return t instanceof Rc||(t=new jc(t)),new Kc(this,t)}ge(t){return t instanceof Rc||(t=new jc(t)),new Jc(this,t)}lt(t){return new Qc(this.ge(t))}gt(t){return new Qc(this.le(t))}ne(t){return new Qc(this.eq(t))}}class jc extends Rc{constructor(t){super(),this.v=t}}class zc extends Rc{constructor(t){super(),this.name=t}bind(t){if(!this.colidx){this.colidx=-1;const e=t.schema.fields;for(let t=-1;++t<e.length;)if(e[t].name===this.name){this.colidx=t;break}if(this.colidx<0)throw new Error(`Failed to bind Col "${this.name}"`)}const e=this.vector=t.getChildAt(this.colidx);return t=>e.get(t)}}class $c{and(...t){return new qc(this,...t)}or(...t){return new Yc(this,...t)}not(){return new Qc(this)}}class Wc extends $c{constructor(t,e){super(),this.left=t,this.right=e}bind(t){return this.left instanceof jc?this.right instanceof jc?this._bindLitLit(t,this.left,this.right):this._bindLitCol(t,this.left,this.right):this.right instanceof jc?this._bindColLit(t,this.left,this.right):this._bindColCol(t,this.left,this.right)}}class Hc extends $c{constructor(...t){super(),this.children=t}}Hc.prototype.children=Object.freeze([]);class qc extends Hc{constructor(...t){t=t.reduce(((t,e)=>t.concat(e instanceof qc?e.children:e)),[]),super(...t)}bind(t){const e=this.children.map((e=>e.bind(t)));return(t,r)=>e.every((e=>e(t,r)))}}class Yc extends Hc{constructor(...t){t=t.reduce(((t,e)=>t.concat(e instanceof Yc?e.children:e)),[]),super(...t)}bind(t){const e=this.children.map((e=>e.bind(t)));return(t,r)=>e.some((e=>e(t,r)))}}class Gc extends Wc{_bindLitLit(t,e,r){const i=e.v==r.v;return()=>i}_bindColCol(t,e,r){const i=e.bind(t),n=r.bind(t);return(t,e)=>i(t,e)==n(t,e)}_bindColLit(t,e,r){const i=e.bind(t);if(e.vector instanceof $a){let t;const i=e.vector;return i.dictionary!==this.lastDictionary?(t=i.reverseLookup(r.v),this.lastDictionary=i.dictionary,this.lastKey=t):t=this.lastKey,-1===t?()=>!1:e=>i.getKey(e)===t}return(t,e)=>i(t,e)==r.v}_bindLitCol(t,e,r){return this._bindColLit(t,r,e)}}class Kc extends Wc{_bindLitLit(t,e,r){const i=e.v<=r.v;return()=>i}_bindColCol(t,e,r){const i=e.bind(t),n=r.bind(t);return(t,e)=>i(t,e)<=n(t,e)}_bindColLit(t,e,r){const i=e.bind(t);return(t,e)=>i(t,e)<=r.v}_bindLitCol(t,e,r){const i=r.bind(t);return(t,r)=>e.v<=i(t,r)}}class Jc extends Wc{_bindLitLit(t,e,r){const i=e.v>=r.v;return()=>i}_bindColCol(t,e,r){const i=e.bind(t),n=r.bind(t);return(t,e)=>i(t,e)>=n(t,e)}_bindColLit(t,e,r){const i=e.bind(t);return(t,e)=>i(t,e)>=r.v}_bindLitCol(t,e,r){const i=r.bind(t);return(t,r)=>e.v>=i(t,r)}}class Qc extends $c{constructor(t){super(),this.child=t}bind(t){const e=this.child.bind(t);return(t,r)=>!e(t,r)}}_c.prototype.countBy=function(t){return new Zc(this.chunks).countBy(t)},_c.prototype.scan=function(t,e){return new Zc(this.chunks).scan(t,e)},_c.prototype.scanReverse=function(t,e){return new Zc(this.chunks).scanReverse(t,e)},_c.prototype.filter=function(t){return new Zc(this.chunks).filter(t)};class Zc extends _c{filter(t){return new tu(this.chunks,t)}scan(t,e){const r=this.chunks,i=r.length;for(let n=-1;++n<i;){const i=r[n];e&&e(i);for(let e=-1,r=i.length;++e<r;)t(e,i)}}scanReverse(t,e){const r=this.chunks;for(let i=r.length;--i>=0;){const n=r[i];e&&e(n);for(let e=n.length;--e>=0;)t(e,n)}}countBy(t){const e=this.chunks,r=e.length,i="string"==typeof t?new zc(t):t;i.bind(e[r-1]);const n=i.vector;if(!Ce.isDictionary(n.type))throw new Error("countBy currently only supports dictionary-encoded columns");const s=Math.ceil(Math.log(n.length)/Math.log(256)),a=new(4==s?Uint32Array:s>=2?Uint16Array:Uint8Array)(n.dictionary.length);for(let t=-1;++t<r;){const r=e[t];i.bind(r);const n=i.vector.indices;for(let t=-1,e=r.length;++t<e;){let e=n.get(t);null!==e&&a[e]++}}return new Xc(n.dictionary,ro.from(a))}}class Xc extends _c{constructor(t,e){const r=new on([new cn("values",t.type),new cn("counts",e.type)]);super(new vc(r,e.length,[t,e]))}toJSON(){const t=this.getColumnAt(0),e=this.getColumnAt(1),r={};for(let i=-1;++i<this.length;)r[t.get(i)]=e.get(i);return r}}class tu extends Zc{constructor(t,e){super(t),this._predicate=e}scan(t,e){const r=this._chunks,i=r.length;for(let n=-1;++n<i;){const i=r[n],s=this._predicate.bind(i);let a=!1;for(let r=-1,n=i.length;++r<n;)s(r,i)&&(e&&!a&&(e(i),a=!0),t(r,i))}}scanReverse(t,e){const r=this._chunks;for(let i=r.length;--i>=0;){const n=r[i],s=this._predicate.bind(n);let a=!1;for(let r=n.length;--r>=0;)s(r,n)&&(e&&!a&&(e(n),a=!0),t(r,n))}}count(){let t=0;const e=this._chunks,r=e.length;for(let i=-1;++i<r;){const r=e[i],n=this._predicate.bind(r);for(let e=-1,i=r.length;++e<i;)n(e,r)&&++t}return t}*[Symbol.iterator](){const t=this._chunks,e=t.length;for(let r=-1;++r<e;){const e=t[r],i=this._predicate.bind(e);for(let t=-1,r=e.length;++t<r;)i(t,e)&&(yield e.get(t))}}filter(t){return new tu(this._chunks,this._predicate.and(t))}countBy(t){const e=this._chunks,r=e.length,i="string"==typeof t?new zc(t):t;i.bind(e[r-1]);const n=i.vector;if(!Ce.isDictionary(n.type))throw new Error("countBy currently only supports dictionary-encoded columns");const s=Math.ceil(Math.log(n.length)/Math.log(256)),a=new(4==s?Uint32Array:s>=2?Uint16Array:Uint8Array)(n.dictionary.length);for(let t=-1;++t<r;){const r=e[t],n=this._predicate.bind(r);i.bind(r);const s=i.vector.indices;for(let t=-1,e=r.length;++t<e;){let e=s.get(t);null!==e&&n(t,r)&&a[e]++}}return new Xc(n.dictionary,ro.from(a))}}function eu(t,e=1){return(t*e+63&-64||64)/e}function ru(t,e,r=t.BYTES_PER_ELEMENT){return new t(eu(e,r))}function iu(t){return t instanceof gr?t:gr.new(t.type,0,t.length,t.nulls,t.buffers,null,t.dict)}Yt.toDOMStream=function(t,e){if(Bt(t))return function(t,e){let r=null;const i=e&&"bytes"===e.type||!1,n=e&&e.highWaterMark||2**24;return new ReadableStream({...e,async start(e){await s(e,r||(r=t[Symbol.asyncIterator]()))},async pull(t){r?await s(t,r):t.close()},async cancel(){r&&r.return&&await r.return(),r=null}},{highWaterMark:i?n:void 0,...e});async function s(t,e){let r,n=null,s=t.desiredSize||null;for(;!(n=await e.next(i?s:null)).done;)if(ArrayBuffer.isView(n.value)&&(r=jt(n.value))&&(null!=s&&i&&(s=s-r.byteLength+1),n.value=r),t.enqueue(n.value),null!=s&&--s<=0)return;t.close()}}(t,e);if(Et(t))return function(t,e){let r=null;const i=e&&"bytes"===e.type||!1,n=e&&e.highWaterMark||2**24;return new ReadableStream({...e,start(e){s(e,r||(r=t[Symbol.iterator]()))},pull(t){r?s(t,r):t.close()},cancel(){r&&r.return&&r.return(),r=null}},{highWaterMark:i?n:void 0,...e});function s(t,e){let r,n=null,s=t.desiredSize||null;for(;!(n=e.next(i?s:null)).done;)if(ArrayBuffer.isView(n.value)&&(r=jt(n.value))&&(null!=s&&i&&(s=s-r.byteLength+1),n.value=r),t.enqueue(n.value),null!=s&&--s<=0)return;t.close()}}(t,e);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")},Er.throughDOM=function(t){return new Uc(t)},Sc.throughDOM=function(t,e){const r=new Kn;let i=null;const n=new ReadableStream({async cancel(){await r.close()},async start(t){await s(t,i||(i=await async function(){return await(await Sc.from(r)).open(e)}()))},async pull(t){i?await s(t,i):t.close()}});return{writable:new WritableStream(r,{highWaterMark:16384,...t}),readable:n};async function s(t,e){let r=t.desiredSize,i=null;for(;!(i=await e.next()).done;)if(t.enqueue(i.value),null!=r&&--r<=0)return;t.close()}},Ea.throughDOM=function(t,e){const r=new this(t),i=new Qn(r),n=new ReadableStream({type:"bytes",async cancel(){await i.cancel()},async pull(t){await s(t)},async start(t){await s(t)}},{highWaterMark:16384,...e});return{writable:new WritableStream(r,t),readable:n};async function s(t){let e=null,r=t.desiredSize;for(;e=await i.read(r||null);)if(t.enqueue(e),null!=r&&(r-=e.byteLength)<=0)return;t.close()}};const nu=new TextEncoder;const su=nu.encodeInto?function(t,e,r){return nu.encodeInto(r,t.subarray(e)).written}:function(t,e,r){const i=nu.encode(r);return t.set(i,e),i.length};function au(t,e){const r=ru(t.ArrayType,e);return{set(t,e){r[e]=t},data:()=>({type:t,length:e,buffers:[null,r]})}}function ou(t,e){const r=ru(t.ArrayType,e/8);return{set(t,e){t&&(r[e>>3]|=1<<e%8)},data:()=>({type:t,length:e,buffers:[null,r]})}}function cu(t,e){const r=ru(t.ArrayType,e);return{set(t,e){r[e]=t/864e5|0},data:()=>({type:t,length:e,buffers:[null,r]})}}function uu(t,e){const r=ru(t.ArrayType,e);return{set(t,e){const i=e<<1;r[i]=t%4294967296|0,r[i+1]=t/4294967296|0},data:()=>({type:t,length:e,buffers:[null,r]})}}function hu(t,e){const r=[],i=ru(t.indices.ArrayType,e),n=Object.create(null);let s=-1,a=0;return{set(t,e){const o=String(t);let c=n[o];void 0===c&&(a+=o.length,n[o]=c=++s,r.push(o)),i[e]=c},data:()=>({type:t,length:e,buffers:[null,i],dict:lu(t.dictionary,r,a)})}}function lu(t,e,r){const i=function(t,e,r){const i=ru(Int32Array,e+1),n=ru(Uint8Array,3*r);let s=0;return{set(t,e){s+=su(n,s,t),i[e+1]=s},data:()=>{const r=eu(s),a=n.length>r?n.subarray(0,r):n;return{type:t,length:e,buffers:[i,a]}}}}(t,e.length,r);return e.forEach(i.set),function(t){return Zt.new(iu(t))}(i.data())}function pu(t,e,r=!0){let i;switch(t.typeId){case w:i=t.bitWidth<64?au:null;break;case x:i=t.precision>0?au:null;break;case D:i=t.dictionary.typeId===I&&t.indices.typeId===w&&t.indices.bitWidth<64?hu:null;break;case A:i=ou;break;case T:i=t.unit?uu:cu}return null==i?function(t){const e=Er.new({type:t,nullValues:[null,void 0],highWaterMark:1/0});return{set(t,r){e.set(r,t)},data:()=>e.finish().flush()}}(t):r?function(t,e){const r=ru(Uint8Array,e/8);let i=0;return{set(e,n){null==e?++i:(t.set(e,n),r[n>>3]|=1<<n%8)},data:()=>{const e=t.data();return i&&(e.nulls=i,e.buffers[2]=r),e}}}(i(t,e),e):i(t,e)}function du(t,e,r,i,n=!0){const s=pu(i,t,n);return e(r,s.set),iu(s.data())}function fu(t){return"bigint"==typeof t}function yu(t){return void 0===t?t+"":fu(t)?t+"n":JSON.stringify(t)}function mu(t){if(t instanceof Ce||null==t)return t;switch(t){case S:return new qe;case A:return new Ge;case W:return new Qe;case H:case T:return new Ze;case D:return new mr(new Ye,new Fe);case j:return new $e;case z:return new We;case $:case x:return new He;case M:return new Oe;case O:return new Ne;case N:case w:return new Fe;case F:return new Ue;case J:return new ar;case B:case Q:return new or;case v:return new De;case G:return new rr;case Y:case E:return new er;case K:return new ir;case q:return new tr;case U:return new Ve;case V:return new Pe;case P:return new Re;case R:return new je;case I:return new Ye;default:n(`Unsupported type code: ${yu(t)}. Use a data type constructor instead?`)}}const bu=Object.getPrototypeOf(Int8Array);function gu(t){return t instanceof bu}function _u(e){return t(e)||gu(e)}function vu(t,e){const r=wu();return t(e,r.add),r}function wu(){const t={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(e){if(++t.count,null==e)return void++t.nulls;const r=typeof e;if("string"===r)++t.strings;else if("number"===r)++t.nums,e<t.min&&(t.min=e),e>t.max&&(t.max=e),Number.isInteger(e)&&++t.ints;else if("boolean"===r)++t.bools;else if("object"===r)if(h(e))++t.dates,0===(i=e).getUTCHours()&&0===i.getUTCMinutes()&&0===i.getUTCSeconds()&&0===i.getUTCMilliseconds()&&++t.utcdays;else if(_u(e)){++t.arrays,e.length<t.minlen&&(t.minlen=e.length),e.length>t.maxlen&&(t.maxlen=e.length);const r=t.array_prof||(t.array_prof=wu());e.forEach(r.add)}else{++t.structs;const r=t.struct_prof||(t.struct_prof={});for(const t in e){(r[t]||(r[t]=wu())).add(e[t])}}else"bigint"===r&&(++t.bigints,e<t.min&&(t.min=e),e>t.max&&(t.max=e));var i},type:()=>mu(function(t){const e=t.count-t.nulls;if(0===e)return v;if(t.ints===e){const e=Math.max(Math.abs(t.min)-1,t.max);return t.min<0?e>=2**31?$:e<128?M:e<32768?O:N:e>=2**32?$:e<256?U:e<65536?V:P}if(t.nums===e)return $;if(t.bigints===e){const e=-t.min>t.max?-t.min-1n:t.max;return t.min<0?e<2**63?F:n(`BigInt exceeds 64 bits: ${e}`):t.max<2**64?R:n(`BigInt exceeds 64 bits: ${t.max}`)}if(t.bools===e)return A;if(t.utcdays===e)return W;if(t.dates===e)return H;if(t.arrays===e){const e=cn.new("value",t.array_prof.type(),!0);return t.minlen===t.maxlen?new pr(t.minlen,e):new cr(e)}if(t.structs===e){const e=t.struct_prof;return new ur(Object.keys(e).map((t=>cn.new(t,e[t].type(),!0))))}if(t.strings>0)return D;n("Type inference failure")}(t))};return t}function xu(t,e,r,i,n,s=!0){if(!(n=mu(n))){const t=vu(i,e);s=t.nulls>0,n=t.type()}return du(r,i,e,n,s)}function Su(t,e,r,i,n,s=!0){n=mu(n);const a=t.column(e),o=!(t.isFiltered()||t.isOrdered()),c=(u=a)instanceof Zt?u:u.vector instanceof Zt?u.vector:null;var u;if(c&&o&&Iu(c.type,n))return c;const h=a.data;if(gu(h)){const t=function(t){const e={Float32Array:We,Float64Array:He,Int8Array:Oe,Int16Array:Ne,Int32Array:Fe,Uint8Array:Ve,Uint16Array:Pe,Uint32Array:Re,BigInt64Array:Ue,BigUint64Array:je}[t.constructor.name];return e?new e:null}(h);if(o&&t&&Iu(t,n))return function(t,e){const r=t.length,i=eu(r,t.BYTES_PER_ELEMENT);let n=t;return r!==i&&(n=new t.constructor(i),n.set(t)),iu({type:e,length:r,buffers:[null,n]})}(h,t);n=n||t,s=!1}if(!n){const t=vu(i,a);s=t.nulls>0,n=t.type()}return du(r,i,a,n,s)}function Iu(t,e){return!t||!e||t.compareTo(e)}function Au(t,e,r){const i=Math.min(t.length,r+e);return(e,n)=>{for(let s=r;s<i;++s)n(t[s][e],s)}}function Tu(t,e,r){const i=0===r&&t.numRows()<=e&&!t.isFiltered()&&!t.isOrdered();return(n,s)=>{let a=-1;i&&_u(n.data)?n.data.forEach(s):t.scan((t=>s(n.get(t),++a)),!0,e,r)}}function Eu(){try{return _c}catch(t){n("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage")}}function Bu(e,r={}){const{types:i={}}=r,{dataFrom:a,names:o,nrows:c,scan:u}=function(e,r){const{columns:i,limit:a=1/0,offset:o=0}=r,c=s(i)?i(e):t(i)?i:null;if(t(e))return{dataFrom:xu,names:c||Object.keys(e[0]),nrows:Math.min(a,e.length-o),scan:Au(e,a,o)};if(function(t){return t&&s(t.reify)}(e))return{dataFrom:Su,names:c||e.columnNames(),nrows:Math.min(a,e.numRows()-o),scan:Tu(e,a,o)};n("Unsupported input data type")}(e,r);return Eu().new(o.map((t=>{const r=a(e,t,c,u,i[t]);return r.length===c?r:n("Column length mismatch")})),o)}function ku(t,e){return s(e)?e(t):e||t.columnNames()}function Cu(t,e,r){const i=r.format||{},n=r.align||{},s={},a={};return e.forEach((e=>{const o=function(t,e={}){let r=0,i=0,n=0,s=0,a=0,o=0;return t((t=>{if(++r,null==t)return void++i;const e=typeof t;if("object"===e&&h(t))++n,0===(c=t).getUTCHours()&&0===c.getUTCMinutes()&&0===c.getUTCSeconds()&&0===c.getUTCMilliseconds()&&++s;else if("number"===e&&(++a,t==t&&(0|t)!==t)){const e=t+"",r=e.indexOf(".");if(r>=0){const t=e.indexOf("e"),i=t>0?t:e.length;o=Math.max(o,i-r-1)}}var c})),{align:(i+a+n)/r>.5?"r":"l",format:{utc:n===s,digits:Math.min(o,e.maxdigits||6)}}}(function(t,e){const r=t.column(e);return e=>t.scan((t=>e(r.get(t))))}(t,e),r);a[e]=n[e]||o.align,s[e]=i[e]||o.format})),{align:a,format:s}}function Lu(t,e,r,i,n){const s=t.data(),a=e.length;t.scan((t=>{n.row(t);for(let r=0;r<a;++r){const i=e[r];n.cell(s[e[r]].get(t),i,r)}}),!0,r,i)}function Du(t,e,r="0"){const i=t+"",n=i.length;return n<e?Array(e-n+1).join(r)+i:i}const Mu=t=>(t<10?"0":"")+t;function Ou(t,e,r,i,n,s,a,o,c){const u=o?"Z":"";return(t=>t<0?"-"+Du(-t,6):t>9999?"+"+Du(t,6):Du(t,4))(t)+"-"+Mu(e+1)+"-"+Mu(r)+(!c||a?"T"+Mu(i)+":"+Mu(n)+":"+Mu(s)+"."+Du(a,3)+u:s?"T"+Mu(i)+":"+Mu(n)+":"+Mu(s)+u:n||i||!o?"T"+Mu(i)+":"+Mu(n)+u:"")}function Nu(t,e){return isNaN(t)?"Invalid Date":Ou(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),!1,e)}function Fu(t,e){return isNaN(t)?"Invalid Date":Ou(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds(),!0,e)}function Uu(t,e={}){if(s(e))return e(t)+"";const r=typeof t;if("object"===r){if(h(t))return e.utc?Fu(t):Nu(t);{const r=JSON.stringify(t,((t,e)=>gu(e)?Array.from(e):e)),i=e.maxlen||30;return r.length>i?r.slice(0,28)+"…"+("["===r[0]?"]":"}"):r}}if("number"===r){const r=e.digits||0;let i;return 0!==t&&((i=Math.abs(t))>=1e18||i<Math.pow(10,-r))?t.toExponential(r):t.toFixed(r)}return t+""}function Vu(t,e,r={}){for(const i in t)r[i]=e(t[i],i);return r}function Pu(t,e={}){const r=ku(t,e.columns),{align:i,format:n}=Cu(t,r,e),a=function(t){return Vu(t.style,(t=>s(t)?t:()=>t))}(e),o=e.null,c=(t,e)=>Uu(t,e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),u=o?(t,e)=>null==t?o(t):c(t,e):c;let h=-1,l=-1;const p=(t,e)=>{const r=l>=0&&e?(t=>"c"===t?"center":"r"===t?"right":"left")(i[e]):"",n=a[t]&&a[t](e,l,h)||"",s=(r?`text-align: ${r};`+(n?" ":""):"")+n;return`<${t}${s?` style="${s}"`:""}>`};let d=p("table")+p("thead")+p("tr",h)+r.map((t=>`${p("th",t)}${t}</th>`)).join("")+"</tr></thead>"+p("tbody");return Lu(t,r,e.limit,e.offset,{row(t){h=t,d+=(++l?"</tr>":"")+p("tr")},cell(t,e){d+=p("td",e)+u(t,n[e])+"</td>"}}),d+"</tr></tbody></table>"}function Ru(t,e=!0,r=!1){return void 0===t||t?e:r}const ju=t=>h(t)?Fu(t,!0):t;function zu(t,e,...r){const i=["_","$"],n=i.slice(0,r.length);return n.push('"use strict"; const '+r.map(((t,e)=>t.map(((t,r)=>`${i[e]}${r} = ${i[e]}[${r}]`)).join(", "))).join(", ")+`; return (${t}) => ${e};`),Function(...n)(...r)}function $u(t,e){return zu("row","({"+(e=e||t.columnNames()).map(((t,e)=>`${JSON.stringify(t)}:_${e}.get(row)`))+"})",e.map((e=>t.column(e))))}class Wu extends o{static from(t,e){return new Wu(f(t,e),e)}constructor(t,e,r,i,n,s){Vu(t,u,t);super(e=e||Object.keys(t),e.length?t[e[0]].length:0,t,r,i,n,s)}create({data:t,names:e,filter:r,groups:i,order:n}){const s=void 0!==r?r:this.mask();return new Wu(t||this._data,e||(t?null:this._names),s,void 0!==i?i:function(t,e){if(!t||!e)return t;const{keys:r,rows:i,size:n}=t,s=new Int32Array(n);e.scan((t=>s[r[t]]=1));const a=s.reduce(((t,e)=>t+e),0);if(a===n)return t;const o=Array(a);let c=0;for(let t=0;t<n;++t)s[t]&&(o[s[t]=c++]=i[t]);const u=new Uint32Array(r.length);return e.scan((t=>u[t]=s[r[t]])),{...t,keys:u,rows:o,size:c}}(this._group,r&&s),void 0!==n?n:this._order,this._params)}assign(...t){const e=this.numRows(),r=g(this.reify());return t.forEach((t=>{t.numRows()!==e&&n("Assign row counts do not match"),(t=t.reify()).columnNames((e=>r.add(e,t.column(e))))})),this.create(r.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}get(t,e){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[e]):r.get(e)}getter(t){const e=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?t=>e.get(r[t]):e?t=>e.get(t):n(`Unrecognized column: ${t}`)}objects(t={}){const e=$u(this),r=[];return this.scan((t=>{r.push(e(t))}),!0,t.limit,t.offset),r}*[Symbol.iterator](){const t=$u(this),e=this.numRows();if(this.isOrdered()||this.isFiltered()){const r=this.indices();for(let i=0;i<e;++i)yield t(r[i])}else for(let r=0;r<e;++r)yield t(r)}reify(t){const e=t?t.length:this.numRows(),r=this._names;let i,n;if(!t&&!this.isOrdered()){if(!this.isFiltered())return this;e===this.totalRows()&&(i=this.data())}if(!i){const a=t?e=>t.forEach(e):t=>this.scan(t,!0),o=r.length;i={};for(let t=0;t<o;++t){const n=r[t],o=this.column(n),c=i[n]=new(gu((s=o).data)?s.data.constructor:Array)(e);let u=-1;a((t=>c[++u]=o.get(t)))}this.isGrouped()&&(n=function(t,e,r,i){const{keys:n,rows:s,size:a}=t;let o=s,c=a,u=null;if(r){u=new Int32Array(a),e((t=>u[n[t]]=1));const t=u.reduce(((t,e)=>t+e),0);if(t!==a){o=Array(t),c=0;for(let t=0;t<a;++t)u[t]&&(o[u[t]=c++]=s[t])}}let h=-1;const l=new Uint32Array(i);return e(c!==a?t=>l[++h]=u[n[t]]:t=>l[++h]=n[t]),{...t,keys:l,rows:o,size:c}}(this.groups(),a,!!t,e))}var s;return this.create({data:i,names:r,groups:n,filter:null,order:null})}toArrow(t){return Bu(this,t)}toArrowBuffer(t){return Bu(this,t).serialize()}toCSV(t){return function(t,e={}){const r=ku(t,e.columns),i=e.format||{},n=e.delimiter||",",s=new RegExp(`["${n}\n\r]`),a=t=>null==t?"":h(t)?Fu(t,!0):s.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t,o=r.map(a);let c="";return Lu(t,r,e.limit,e.offset,{row(){c+=o.join(n)+"\n"},cell(t,e,r){o[r]=a(i[e]?i[e](t):t)}}),c+o.join(n)}(this,t)}toHTML(t){return Pu(this,t)}toJSON(t){return function(t,e={}){const r=Ru(e.schema),i=e.format||{},n=ku(t,e.columns);let s="{";return r&&(s+='"schema":{"fields":'+JSON.stringify(n.map((t=>({name:t}))))+'},"data":{'),n.forEach(((r,n)=>{s+=(n?",":"")+JSON.stringify(r)+":[";const a=t.column(r),o=i[r]||ju;let c=-1;t.scan((t=>{const e=a.get(t);s+=(++c?",":"")+JSON.stringify(o(e))}),!0,e.limit,e.offset),s+="]"})),s+"}"+(r?"}":"")}(this,t)}toMarkdown(t){return function(t,e={}){const r=ku(t,e.columns),{align:i,format:n}=Cu(t,r,e),s=t=>t.replace(/\|/g,"\\|");let a="|"+r.map(s).join("|")+"|\n|"+r.map((t=>{return"c"===(e=i[t])?":-:":"r"===e?"-:":":-";var e})).join("|")+"|";return Lu(t,r,e.limit,e.offset,{row(){a+="\n|"},cell(t,e){a+=s(Uu(t,n[e]))+"|"}}),a+"\n"}(this,t)}}var Hu={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},qu="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Yu={5:qu,"5module":qu+" export import",6:qu+" const class extends export import super"},Gu=/^in(stanceof)?$/,Ku="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࣇऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-鿼ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞿꟂ-ꟊꟵ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Ju="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿᫀᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",Qu=new RegExp("["+Ku+"]"),Zu=new RegExp("["+Ku+Ju+"]");Ku=Ju=null;var Xu=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],th=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function eh(t,e){for(var r=65536,i=0;i<e.length;i+=2){if((r+=e[i])>t)return!1;if((r+=e[i+1])>=t)return!0}}function rh(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&Qu.test(String.fromCharCode(t)):!1!==e&&eh(t,Xu)))}function ih(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&Zu.test(String.fromCharCode(t)):!1!==e&&(eh(t,Xu)||eh(t,th)))))}var nh=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function sh(t,e){return new nh(t,{beforeExpr:!0,binop:e})}var ah={beforeExpr:!0},oh={startsExpr:!0},ch={};function uh(t,e){return void 0===e&&(e={}),e.keyword=t,ch[t]=new nh(t,e)}var hh={num:new nh("num",oh),regexp:new nh("regexp",oh),string:new nh("string",oh),name:new nh("name",oh),eof:new nh("eof"),bracketL:new nh("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new nh("]"),braceL:new nh("{",{beforeExpr:!0,startsExpr:!0}),braceR:new nh("}"),parenL:new nh("(",{beforeExpr:!0,startsExpr:!0}),parenR:new nh(")"),comma:new nh(",",ah),semi:new nh(";",ah),colon:new nh(":",ah),dot:new nh("."),question:new nh("?",ah),questionDot:new nh("?."),arrow:new nh("=>",ah),template:new nh("template"),invalidTemplate:new nh("invalidTemplate"),ellipsis:new nh("...",ah),backQuote:new nh("`",oh),dollarBraceL:new nh("${",{beforeExpr:!0,startsExpr:!0}),eq:new nh("=",{beforeExpr:!0,isAssign:!0}),assign:new nh("_=",{beforeExpr:!0,isAssign:!0}),incDec:new nh("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new nh("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:sh("||",1),logicalAND:sh("&&",2),bitwiseOR:sh("|",3),bitwiseXOR:sh("^",4),bitwiseAND:sh("&",5),equality:sh("==/!=/===/!==",6),relational:sh("</>/<=/>=",7),bitShift:sh("<</>>/>>>",8),plusMin:new nh("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:sh("%",10),star:sh("*",10),slash:sh("/",10),starstar:new nh("**",{beforeExpr:!0}),coalesce:sh("??",1),_break:uh("break"),_case:uh("case",ah),_catch:uh("catch"),_continue:uh("continue"),_debugger:uh("debugger"),_default:uh("default",ah),_do:uh("do",{isLoop:!0,beforeExpr:!0}),_else:uh("else",ah),_finally:uh("finally"),_for:uh("for",{isLoop:!0}),_function:uh("function",oh),_if:uh("if"),_return:uh("return",ah),_switch:uh("switch"),_throw:uh("throw",ah),_try:uh("try"),_var:uh("var"),_const:uh("const"),_while:uh("while",{isLoop:!0}),_with:uh("with"),_new:uh("new",{beforeExpr:!0,startsExpr:!0}),_this:uh("this",oh),_super:uh("super",oh),_class:uh("class",oh),_extends:uh("extends",ah),_export:uh("export"),_import:uh("import",oh),_null:uh("null",oh),_true:uh("true",oh),_false:uh("false",oh),_in:uh("in",{beforeExpr:!0,binop:7}),_instanceof:uh("instanceof",{beforeExpr:!0,binop:7}),_typeof:uh("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:uh("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:uh("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},lh=/\r\n?|\n|\u2028|\u2029/,ph=new RegExp(lh.source,"g");function dh(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var fh=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,yh=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,mh=Object.prototype,bh=mh.hasOwnProperty,gh=mh.toString;function _h(t,e){return bh.call(t,e)}var vh=Array.isArray||function(t){return"[object Array]"===gh.call(t)};function wh(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var xh=function(t,e){this.line=t,this.column=e};xh.prototype.offset=function(t){return new xh(this.line,this.column+t)};var Sh=function(t,e,r){this.start=e,this.end=r,null!==t.sourceFile&&(this.source=t.sourceFile)};function Ih(t,e){for(var r=1,i=0;;){ph.lastIndex=i;var n=ph.exec(t);if(!(n&&n.index<e))return new xh(r,e-i);++r,i=n.index+n[0].length}}var Ah={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Th=!1;function Eh(t){var e={};for(var r in Ah)e[r]=t&&_h(t,r)?t[r]:Ah[r];if("latest"===e.ecmaVersion?e.ecmaVersion=1e8:null==e.ecmaVersion?(!Th&&"object"==typeof console&&console.warn&&(Th=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),vh(e.onToken)){var i=e.onToken;e.onToken=function(t){return i.push(t)}}return vh(e.onComment)&&(e.onComment=function(t,e){return function(r,i,n,s,a,o){var c={type:r?"Block":"Line",value:i,start:n,end:s};t.locations&&(c.loc=new Sh(this,a,o)),t.ranges&&(c.range=[n,s]),e.push(c)}}(e,e.onComment)),e}function Bh(t,e){return 2|(t?4:0)|(e?8:0)}var kh=function(t,e,r){this.options=t=Eh(t),this.sourceFile=t.sourceFile,this.keywords=wh(Yu[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var i="";!0!==t.allowReserved&&(i=Hu[t.ecmaVersion>=6?6:5===t.ecmaVersion?5:3],"module"===t.sourceType&&(i+=" await")),this.reservedWords=wh(i);var n=(i?i+" ":"")+Hu.strict;this.reservedWordsStrict=wh(n),this.reservedWordsStrictBind=wh(n+" "+Hu.strictBind),this.input=String(e),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf("\n",r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(lh).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=hh.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},Ch={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};kh.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},Ch.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},Ch.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},Ch.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},Ch.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},Ch.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},Ch.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},Ch.inNonArrowFunction.get=function(){return(2&this.currentThisScope().flags)>0},kh.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r},kh.parse=function(t,e){return new this(e,t).parse()},kh.parseExpressionAt=function(t,e,r){var i=new this(r,t,e);return i.nextToken(),i.parseExpression()},kh.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(kh.prototype,Ch);var Lh=kh.prototype,Dh=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function Mh(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}Lh.strictDirective=function(t){for(;;){yh.lastIndex=t,t+=yh.exec(this.input)[0].length;var e=Dh.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2])){yh.lastIndex=t+e[0].length;var r=yh.exec(this.input),i=r.index+r[0].length,n=this.input.charAt(i);return";"===n||"}"===n||lh.test(r[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(n)||"!"===n&&"="===this.input.charAt(i+1))}t+=e[0].length,yh.lastIndex=t,t+=yh.exec(this.input)[0].length,";"===this.input[t]&&t++}},Lh.eat=function(t){return this.type===t&&(this.next(),!0)},Lh.isContextual=function(t){return this.type===hh.name&&this.value===t&&!this.containsEsc},Lh.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},Lh.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},Lh.canInsertSemicolon=function(){return this.type===hh.eof||this.type===hh.braceR||lh.test(this.input.slice(this.lastTokEnd,this.start))},Lh.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},Lh.semicolon=function(){this.eat(hh.semi)||this.insertSemicolon()||this.unexpected()},Lh.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},Lh.expect=function(t){this.eat(t)||this.unexpected()},Lh.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},Lh.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var r=e?t.parenthesizedAssign:t.parenthesizedBind;r>-1&&this.raiseRecoverable(r,"Parenthesized pattern")}},Lh.checkExpressionErrors=function(t,e){if(!t)return!1;var r=t.shorthandAssign,i=t.doubleProto;if(!e)return r>=0||i>=0;r>=0&&this.raise(r,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")},Lh.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},Lh.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var Oh=kh.prototype;Oh.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==hh.eof;){var r=this.parseStatement(null,!0,e);t.body.push(r)}if(this.inModule)for(var i=0,n=Object.keys(this.undefinedExports);i<n.length;i+=1){var s=n[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var Nh={kind:"loop"},Fh={kind:"switch"};Oh.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;yh.lastIndex=this.pos;var e=yh.exec(this.input),r=this.pos+e[0].length,i=this.input.charCodeAt(r);if(91===i)return!0;if(t)return!1;if(123===i)return!0;if(rh(i,!0)){for(var n=r+1;ih(this.input.charCodeAt(n),!0);)++n;var s=this.input.slice(r,n);if(!Gu.test(s))return!0}return!1},Oh.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;yh.lastIndex=this.pos;var t=yh.exec(this.input),e=this.pos+t[0].length;return!(lh.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&ih(this.input.charAt(e+8)))},Oh.parseStatement=function(t,e,r){var i,n=this.type,s=this.startNode();switch(this.isLet(t)&&(n=hh._var,i="let"),n){case hh._break:case hh._continue:return this.parseBreakContinueStatement(s,n.keyword);case hh._debugger:return this.parseDebuggerStatement(s);case hh._do:return this.parseDoStatement(s);case hh._for:return this.parseForStatement(s);case hh._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case hh._class:return t&&this.unexpected(),this.parseClass(s,!0);case hh._if:return this.parseIfStatement(s);case hh._return:return this.parseReturnStatement(s);case hh._switch:return this.parseSwitchStatement(s);case hh._throw:return this.parseThrowStatement(s);case hh._try:return this.parseTryStatement(s);case hh._const:case hh._var:return i=i||this.value,t&&"var"!==i&&this.unexpected(),this.parseVarStatement(s,i);case hh._while:return this.parseWhileStatement(s);case hh._with:return this.parseWithStatement(s);case hh.braceL:return this.parseBlock(!0,s);case hh.semi:return this.parseEmptyStatement(s);case hh._export:case hh._import:if(this.options.ecmaVersion>10&&n===hh._import){yh.lastIndex=this.pos;var a=yh.exec(this.input),o=this.pos+a[0].length,c=this.input.charCodeAt(o);if(40===c||46===c)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),n===hh._import?this.parseImport(s):this.parseExport(s,r);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var u=this.value,h=this.parseExpression();return n===hh.name&&"Identifier"===h.type&&this.eat(hh.colon)?this.parseLabeledStatement(s,u,h,t):this.parseExpressionStatement(s,h)}},Oh.parseBreakContinueStatement=function(t,e){var r="break"===e;this.next(),this.eat(hh.semi)||this.insertSemicolon()?t.label=null:this.type!==hh.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var n=this.labels[i];if(null==t.label||n.name===t.label.name){if(null!=n.kind&&(r||"loop"===n.kind))break;if(t.label&&r)break}}return i===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,r?"BreakStatement":"ContinueStatement")},Oh.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},Oh.parseDoStatement=function(t){return this.next(),this.labels.push(Nh),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(hh._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(hh.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},Oh.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Nh),this.enterScope(0),this.expect(hh.parenL),this.type===hh.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var r=this.isLet();if(this.type===hh._var||this.type===hh._const||r){var i=this.startNode(),n=r?"let":this.value;return this.next(),this.parseVar(i,!0,n),this.finishNode(i,"VariableDeclaration"),(this.type===hh._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===i.declarations.length?(this.options.ecmaVersion>=9&&(this.type===hh._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,i)):(e>-1&&this.unexpected(e),this.parseFor(t,i))}var s=new Mh,a=this.parseExpression(!0,s);return this.type===hh._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===hh._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(a,!1,s),this.checkLValPattern(a),this.parseForIn(t,a)):(this.checkExpressionErrors(s,!0),e>-1&&this.unexpected(e),this.parseFor(t,a))},Oh.parseFunctionStatement=function(t,e,r){return this.next(),this.parseFunction(t,Vh|(r?0:Ph),!1,e)},Oh.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(hh._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},Oh.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(hh.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},Oh.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(hh.braceL),this.labels.push(Fh),this.enterScope(0);for(var r=!1;this.type!==hh.braceR;)if(this.type===hh._case||this.type===hh._default){var i=this.type===hh._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(r&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),r=!0,e.test=null),this.expect(hh.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},Oh.parseThrowStatement=function(t){return this.next(),lh.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var Uh=[];Oh.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===hh._catch){var e=this.startNode();if(this.next(),this.eat(hh.parenL)){e.param=this.parseBindingAtom();var r="Identifier"===e.param.type;this.enterScope(r?32:0),this.checkLValPattern(e.param,r?4:2),this.expect(hh.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(hh._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},Oh.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},Oh.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(Nh),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},Oh.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},Oh.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},Oh.parseLabeledStatement=function(t,e,r,i){for(var n=0,s=this.labels;n<s.length;n+=1){s[n].name===e&&this.raise(r.start,"Label '"+e+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===hh._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var c=this.labels[o];if(c.statementStart!==t.start)break;c.statementStart=this.start,c.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(i?-1===i.indexOf("label")?i+"label":i:"label"),this.labels.pop(),t.label=r,this.finishNode(t,"LabeledStatement")},Oh.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},Oh.parseBlock=function(t,e,r){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(hh.braceL),t&&this.enterScope(0);this.type!==hh.braceR;){var i=this.parseStatement(null);e.body.push(i)}return r&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")},Oh.parseFor=function(t,e){return t.init=e,this.expect(hh.semi),t.test=this.type===hh.semi?null:this.parseExpression(),this.expect(hh.semi),t.update=this.type===hh.parenR?null:this.parseExpression(),this.expect(hh.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},Oh.parseForIn=function(t,e){var r=this.type===hh._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!r||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)&&this.raise(e.start,(r?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=r?this.parseExpression():this.parseMaybeAssign(),this.expect(hh.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,r?"ForInStatement":"ForOfStatement")},Oh.parseVar=function(t,e,r){for(t.declarations=[],t.kind=r;;){var i=this.startNode();if(this.parseVarId(i,r),this.eat(hh.eq)?i.init=this.parseMaybeAssign(e):"const"!==r||this.type===hh._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===i.id.type||e&&(this.type===hh._in||this.isContextual("of"))?i.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(hh.comma))break}return t},Oh.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,"var"===e?1:2,!1)};var Vh=1,Ph=2;Oh.parseFunction=function(t,e,r,i){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===hh.star&&e&Ph&&this.unexpected(),t.generator=this.eat(hh.star)),this.options.ecmaVersion>=8&&(t.async=!!i),e&Vh&&(t.id=4&e&&this.type!==hh.name?null:this.parseIdent(),!t.id||e&Ph||this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var n=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Bh(t.async,t.generator)),e&Vh||(t.id=this.type===hh.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,r,!1),this.yieldPos=n,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(t,e&Vh?"FunctionDeclaration":"FunctionExpression")},Oh.parseFunctionParams=function(t){this.expect(hh.parenL),t.params=this.parseBindingList(hh.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Oh.parseClass=function(t,e){this.next();var r=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var i=this.startNode(),n=!1;for(i.body=[],this.expect(hh.braceL);this.type!==hh.braceR;){var s=this.parseClassElement(null!==t.superClass);s&&(i.body.push(s),"MethodDefinition"===s.type&&"constructor"===s.kind&&(n&&this.raise(s.start,"Duplicate constructor in the same class"),n=!0))}return this.strict=r,this.next(),t.body=this.finishNode(i,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},Oh.parseClassElement=function(t){var e=this;if(this.eat(hh.semi))return null;var r=this.startNode(),i=function(t,i){void 0===i&&(i=!1);var n=e.start,s=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===hh.parenL||i&&e.canInsertSemicolon())||(r.key&&e.unexpected(),r.computed=!1,r.key=e.startNodeAt(n,s),r.key.name=t,e.finishNode(r.key,"Identifier"),!1))};r.kind="method",r.static=i("static");var n=this.eat(hh.star),s=!1;n||(this.options.ecmaVersion>=8&&i("async",!0)?(s=!0,n=this.options.ecmaVersion>=9&&this.eat(hh.star)):i("get")?r.kind="get":i("set")&&(r.kind="set")),r.key||this.parsePropertyName(r);var a=r.key,o=!1;return r.computed||r.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?r.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==r.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),n&&this.raise(a.start,"Constructor can't be a generator"),s&&this.raise(a.start,"Constructor can't be an async method"),r.kind="constructor",o=t),this.parseClassMethod(r,n,s,o),"get"===r.kind&&0!==r.value.params.length&&this.raiseRecoverable(r.value.start,"getter should have no params"),"set"===r.kind&&1!==r.value.params.length&&this.raiseRecoverable(r.value.start,"setter should have exactly one param"),"set"===r.kind&&"RestElement"===r.value.params[0].type&&this.raiseRecoverable(r.value.params[0].start,"Setter cannot use rest params"),r},Oh.parseClassMethod=function(t,e,r,i){return t.value=this.parseMethod(e,r,i),this.finishNode(t,"MethodDefinition")},Oh.parseClassId=function(t,e){this.type===hh.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},Oh.parseClassSuper=function(t){t.superClass=this.eat(hh._extends)?this.parseExprSubscripts():null},Oh.parseExport=function(t,e){if(this.next(),this.eat(hh.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseIdent(!0),this.checkExport(e,t.exported.name,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==hh.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(hh._default)){var r;if(this.checkExport(e,"default",this.lastTokStart),this.type===hh._function||(r=this.isAsyncFunction())){var i=this.startNode();this.next(),r&&this.next(),t.declaration=this.parseFunction(i,4|Vh,!1,r)}else if(this.type===hh._class){var n=this.startNode();t.declaration=this.parseClass(n,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==hh.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var s=0,a=t.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},Oh.checkExport=function(t,e,r){t&&(_h(t,e)&&this.raiseRecoverable(r,"Duplicate export '"+e+"'"),t[e]=!0)},Oh.checkPatternExport=function(t,e){var r=e.type;if("Identifier"===r)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===r)for(var i=0,n=e.properties;i<n.length;i+=1){var s=n[i];this.checkPatternExport(t,s)}else if("ArrayPattern"===r)for(var a=0,o=e.elements;a<o.length;a+=1){var c=o[a];c&&this.checkPatternExport(t,c)}else"Property"===r?this.checkPatternExport(t,e.value):"AssignmentPattern"===r?this.checkPatternExport(t,e.left):"RestElement"===r?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===r&&this.checkPatternExport(t,e.expression)},Oh.checkVariableExport=function(t,e){if(t)for(var r=0,i=e;r<i.length;r+=1){var n=i[r];this.checkPatternExport(t,n.id)}},Oh.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},Oh.parseExportSpecifiers=function(t){var e=[],r=!0;for(this.expect(hh.braceL);!this.eat(hh.braceR);){if(r)r=!1;else if(this.expect(hh.comma),this.afterTrailingComma(hh.braceR))break;var i=this.startNode();i.local=this.parseIdent(!0),i.exported=this.eatContextual("as")?this.parseIdent(!0):i.local,this.checkExport(t,i.exported.name,i.exported.start),e.push(this.finishNode(i,"ExportSpecifier"))}return e},Oh.parseImport=function(t){return this.next(),this.type===hh.string?(t.specifiers=Uh,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===hh.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},Oh.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===hh.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLValSimple(r.local,2),t.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(hh.comma))return t}if(this.type===hh.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,2),t.push(this.finishNode(i,"ImportNamespaceSpecifier")),t}for(this.expect(hh.braceL);!this.eat(hh.braceR);){if(e)e=!1;else if(this.expect(hh.comma),this.afterTrailingComma(hh.braceR))break;var n=this.startNode();n.imported=this.parseIdent(!0),this.eatContextual("as")?n.local=this.parseIdent():(this.checkUnreserved(n.imported),n.local=n.imported),this.checkLValSimple(n.local,2),t.push(this.finishNode(n,"ImportSpecifier"))}return t},Oh.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},Oh.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var Rh=kh.prototype;Rh.toAssignable=function(t,e,r){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",r&&this.checkPatternErrors(r,!0);for(var i=0,n=t.properties;i<n.length;i+=1){var s=n[i];this.toAssignable(s,e),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",r&&this.checkPatternErrors(r,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,r);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else r&&this.checkPatternErrors(r,!0);return t},Rh.toAssignableList=function(t,e){for(var r=t.length,i=0;i<r;i++){var n=t[i];n&&this.toAssignable(n,e)}if(r){var s=t[r-1];6===this.options.ecmaVersion&&e&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return t},Rh.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},Rh.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==hh.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},Rh.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case hh.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(hh.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case hh.braceL:return this.parseObj(!0)}return this.parseIdent()},Rh.parseBindingList=function(t,e,r){for(var i=[],n=!0;!this.eat(t);)if(n?n=!1:this.expect(hh.comma),e&&this.type===hh.comma)i.push(null);else{if(r&&this.afterTrailingComma(t))break;if(this.type===hh.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),i.push(s),this.type===hh.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),i.push(a)}return i},Rh.parseBindingListItem=function(t){return t},Rh.parseMaybeDefault=function(t,e,r){if(r=r||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(hh.eq))return r;var i=this.startNodeAt(t,e);return i.left=r,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")},Rh.checkLValSimple=function(t,e,r){void 0===e&&(e=0);var i=0!==e;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(i?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),r&&(_h(r,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),r[t.name]=!0),5!==e&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,r);default:this.raise(t.start,(i?"Binding":"Assigning to")+" rvalue")}},Rh.checkLValPattern=function(t,e,r){switch(void 0===e&&(e=0),t.type){case"ObjectPattern":for(var i=0,n=t.properties;i<n.length;i+=1){var s=n[i];this.checkLValInnerPattern(s,e,r)}break;case"ArrayPattern":for(var a=0,o=t.elements;a<o.length;a+=1){var c=o[a];c&&this.checkLValInnerPattern(c,e,r)}break;default:this.checkLValSimple(t,e,r)}},Rh.checkLValInnerPattern=function(t,e,r){switch(void 0===e&&(e=0),t.type){case"Property":this.checkLValInnerPattern(t.value,e,r);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,r);break;case"RestElement":this.checkLValPattern(t.argument,e,r);break;default:this.checkLValPattern(t,e,r)}};var jh=kh.prototype;jh.checkPropClash=function(t,e,r){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i,n=t.key;switch(n.type){case"Identifier":i=n.name;break;case"Literal":i=String(n.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===i&&"init"===s&&(e.proto&&(r?r.doubleProto<0&&(r.doubleProto=n.start):this.raiseRecoverable(n.start,"Redefinition of __proto__ property")),e.proto=!0);else{var a=e[i="$"+i];if(a)("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(n.start,"Redefinition of property");else a=e[i]={init:!1,get:!1,set:!1};a[s]=!0}}},jh.parseExpression=function(t,e){var r=this.start,i=this.startLoc,n=this.parseMaybeAssign(t,e);if(this.type===hh.comma){var s=this.startNodeAt(r,i);for(s.expressions=[n];this.eat(hh.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return n},jh.parseMaybeAssign=function(t,e,r){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var i=!1,n=-1,s=-1;e?(n=e.parenthesizedAssign,s=e.trailingComma,e.parenthesizedAssign=e.trailingComma=-1):(e=new Mh,i=!0);var a=this.start,o=this.startLoc;this.type!==hh.parenL&&this.type!==hh.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(t,e);if(r&&(c=r.call(this,c,a,o)),this.type.isAssign){var u=this.startNodeAt(a,o);return u.operator=this.value,this.type===hh.eq&&(c=this.toAssignable(c,!1,e)),i||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=c.start&&(e.shorthandAssign=-1),this.type===hh.eq?this.checkLValPattern(c):this.checkLValSimple(c),u.left=c,this.next(),u.right=this.parseMaybeAssign(t),this.finishNode(u,"AssignmentExpression")}return i&&this.checkExpressionErrors(e,!0),n>-1&&(e.parenthesizedAssign=n),s>-1&&(e.trailingComma=s),c},jh.parseMaybeConditional=function(t,e){var r=this.start,i=this.startLoc,n=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return n;if(this.eat(hh.question)){var s=this.startNodeAt(r,i);return s.test=n,s.consequent=this.parseMaybeAssign(),this.expect(hh.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return n},jh.parseExprOps=function(t,e){var r=this.start,i=this.startLoc,n=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)||n.start===r&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,r,i,-1,t)},jh.parseExprOp=function(t,e,r,i,n){var s=this.type.binop;if(null!=s&&(!n||this.type!==hh._in)&&s>i){var a=this.type===hh.logicalOR||this.type===hh.logicalAND,o=this.type===hh.coalesce;o&&(s=hh.logicalAND.binop);var c=this.value;this.next();var u=this.start,h=this.startLoc,l=this.parseExprOp(this.parseMaybeUnary(null,!1),u,h,s,n),p=this.buildBinary(e,r,t,l,c,a||o);return(a&&this.type===hh.coalesce||o&&(this.type===hh.logicalOR||this.type===hh.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(p,e,r,i,n)}return t},jh.buildBinary=function(t,e,r,i,n,s){var a=this.startNodeAt(t,e);return a.left=r,a.operator=n,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},jh.parseMaybeUnary=function(t,e){var r,i=this.start,n=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))r=this.parseAwait(),e=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===hh.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),a?this.checkLValSimple(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):e=!0,r=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(r=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(i,n);o.operator=this.value,o.prefix=!1,o.argument=r,this.checkLValSimple(r),this.next(),r=this.finishNode(o,"UpdateExpression")}}return!e&&this.eat(hh.starstar)?this.buildBinary(i,n,r,this.parseMaybeUnary(null,!1),"**",!1):r},jh.parseExprSubscripts=function(t){var e=this.start,r=this.startLoc,i=this.parseExprAtom(t);if("ArrowFunctionExpression"===i.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return i;var n=this.parseSubscripts(i,e,r);return t&&"MemberExpression"===n.type&&(t.parenthesizedAssign>=n.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=n.start&&(t.parenthesizedBind=-1)),n},jh.parseSubscripts=function(t,e,r,i){for(var n=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start,s=!1;;){var a=this.parseSubscript(t,e,r,i,n,s);if(a.optional&&(s=!0),a===t||"ArrowFunctionExpression"===a.type){if(s){var o=this.startNodeAt(e,r);o.expression=a,a=this.finishNode(o,"ChainExpression")}return a}t=a}},jh.parseSubscript=function(t,e,r,i,n,s){var a=this.options.ecmaVersion>=11,o=a&&this.eat(hh.questionDot);i&&o&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(hh.bracketL);if(c||o&&this.type!==hh.parenL&&this.type!==hh.backQuote||this.eat(hh.dot)){var u=this.startNodeAt(e,r);u.object=t,u.property=c?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),u.computed=!!c,c&&this.expect(hh.bracketR),a&&(u.optional=o),t=this.finishNode(u,"MemberExpression")}else if(!i&&this.eat(hh.parenL)){var h=new Mh,l=this.yieldPos,p=this.awaitPos,d=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var f=this.parseExprList(hh.parenR,this.options.ecmaVersion>=8,!1,h);if(n&&!o&&!this.canInsertSemicolon()&&this.eat(hh.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=p,this.awaitIdentPos=d,this.parseArrowExpression(this.startNodeAt(e,r),f,!0);this.checkExpressionErrors(h,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=d||this.awaitIdentPos;var y=this.startNodeAt(e,r);y.callee=t,y.arguments=f,a&&(y.optional=o),t=this.finishNode(y,"CallExpression")}else if(this.type===hh.backQuote){(o||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var m=this.startNodeAt(e,r);m.tag=t,m.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(m,"TaggedTemplateExpression")}return t},jh.parseExprAtom=function(t){this.type===hh.slash&&this.readRegexp();var e,r=this.potentialArrowAt===this.start;switch(this.type){case hh._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==hh.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==hh.dot&&this.type!==hh.bracketL&&this.type!==hh.parenL&&this.unexpected(),this.finishNode(e,"Super");case hh._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case hh.name:var i=this.start,n=this.startLoc,s=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(hh._function))return this.parseFunction(this.startNodeAt(i,n),0,!1,!0);if(r&&!this.canInsertSemicolon()){if(this.eat(hh.arrow))return this.parseArrowExpression(this.startNodeAt(i,n),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===hh.name&&!s)return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(hh.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,n),[a],!0)}return a;case hh.regexp:var o=this.value;return(e=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},e;case hh.num:case hh.string:return this.parseLiteral(this.value);case hh._null:case hh._true:case hh._false:return(e=this.startNode()).value=this.type===hh._null?null:this.type===hh._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case hh.parenL:var c=this.start,u=this.parseParenAndDistinguishExpression(r);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(t.parenthesizedAssign=c),t.parenthesizedBind<0&&(t.parenthesizedBind=c)),u;case hh.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(hh.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case hh.braceL:return this.parseObj(!1,t);case hh._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case hh._class:return this.parseClass(this.startNode(),!1);case hh._new:return this.parseNew();case hh.backQuote:return this.parseTemplate();case hh._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},jh.parseExprImport=function(){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var e=this.parseIdent(!0);switch(this.type){case hh.parenL:return this.parseDynamicImport(t);case hh.dot:return t.meta=e,this.parseImportMeta(t);default:this.unexpected()}},jh.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(hh.parenR)){var e=this.start;this.eat(hh.comma)&&this.eat(hh.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},jh.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"!==this.options.sourceType&&this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},jh.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},jh.parseParenExpression=function(){this.expect(hh.parenL);var t=this.parseExpression();return this.expect(hh.parenR),t},jh.parseParenAndDistinguishExpression=function(t){var e,r=this.start,i=this.startLoc,n=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,a=this.start,o=this.startLoc,c=[],u=!0,h=!1,l=new Mh,p=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==hh.parenR;){if(u?u=!1:this.expect(hh.comma),n&&this.afterTrailingComma(hh.parenR,!0)){h=!0;break}if(this.type===hh.ellipsis){s=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===hh.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}c.push(this.parseMaybeAssign(!1,l,this.parseParenItem))}var f=this.start,y=this.startLoc;if(this.expect(hh.parenR),t&&!this.canInsertSemicolon()&&this.eat(hh.arrow))return this.checkPatternErrors(l,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=d,this.parseParenArrowList(r,i,c);c.length&&!h||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(l,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=d||this.awaitPos,c.length>1?((e=this.startNodeAt(a,o)).expressions=c,this.finishNodeAt(e,"SequenceExpression",f,y)):e=c[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(r,i);return m.expression=e,this.finishNode(m,"ParenthesizedExpression")}return e},jh.parseParenItem=function(t){return t},jh.parseParenArrowList=function(t,e,r){return this.parseArrowExpression(this.startNodeAt(t,e),r)};var zh=[];jh.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(hh.dot)){t.meta=e;var r=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),r&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(t.start,"'new.target' can only be used in functions"),this.finishNode(t,"MetaProperty")}var i=this.start,n=this.startLoc,s=this.type===hh._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),i,n,!0),s&&"ImportExpression"===t.callee.type&&this.raise(i,"Cannot use new with import()"),this.eat(hh.parenL)?t.arguments=this.parseExprList(hh.parenR,this.options.ecmaVersion>=8,!1):t.arguments=zh,this.finishNode(t,"NewExpression")},jh.parseTemplateElement=function(t){var e=t.isTagged,r=this.startNode();return this.type===hh.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),r.value={raw:this.value,cooked:null}):r.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),r.tail=this.type===hh.backQuote,this.finishNode(r,"TemplateElement")},jh.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var r=this.startNode();this.next(),r.expressions=[];var i=this.parseTemplateElement({isTagged:e});for(r.quasis=[i];!i.tail;)this.type===hh.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(hh.dollarBraceL),r.expressions.push(this.parseExpression()),this.expect(hh.braceR),r.quasis.push(i=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(r,"TemplateLiteral")},jh.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===hh.name||this.type===hh.num||this.type===hh.string||this.type===hh.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===hh.star)&&!lh.test(this.input.slice(this.lastTokEnd,this.start))},jh.parseObj=function(t,e){var r=this.startNode(),i=!0,n={};for(r.properties=[],this.next();!this.eat(hh.braceR);){if(i)i=!1;else if(this.expect(hh.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(hh.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,n,e),r.properties.push(s)}return this.finishNode(r,t?"ObjectPattern":"ObjectExpression")},jh.parseProperty=function(t,e){var r,i,n,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(hh.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===hh.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===hh.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,e),this.type===hh.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(n=this.start,s=this.startLoc),t||(r=this.eat(hh.star)));var o=this.containsEsc;return this.parsePropertyName(a),!t&&!o&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(a)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(hh.star),this.parsePropertyName(a,e)):i=!1,this.parsePropertyValue(a,t,r,i,n,s,e,o),this.finishNode(a,"Property")},jh.parsePropertyValue=function(t,e,r,i,n,s,a,o){if((r||i)&&this.type===hh.colon&&this.unexpected(),this.eat(hh.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===hh.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(r,i);else if(e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===hh.comma||this.type===hh.braceR||this.type===hh.eq)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((r||i)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),t.kind="init",e?t.value=this.parseMaybeDefault(n,s,this.copyNode(t.key)):this.type===hh.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(n,s,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected();else{(r||i)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var c="get"===t.kind?0:1;if(t.value.params.length!==c){var u=t.value.start;"get"===t.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},jh.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(hh.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(hh.bracketR),t.key;t.computed=!1}return t.key=this.type===hh.num||this.type===hh.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},jh.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},jh.parseMethod=function(t,e,r){var i=this.startNode(),n=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|Bh(e,i.generator)|(r?128:0)),this.expect(hh.parenL),i.params=this.parseBindingList(hh.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0),this.yieldPos=n,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")},jh.parseArrowExpression=function(t,e,r){var i=this.yieldPos,n=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(16|Bh(r,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!r),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=i,this.awaitPos=n,this.awaitIdentPos=s,this.finishNode(t,"ArrowFunctionExpression")},jh.parseFunctionBody=function(t,e,r){var i=e&&this.type!==hh.braceL,n=this.strict,s=!1;if(i)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);n&&!a||(s=this.strictDirective(this.end))&&a&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],s&&(this.strict=!0),this.checkParams(t,!n&&!s&&!e&&!r&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,5),t.body=this.parseBlock(!1,void 0,s&&!n),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=o}this.exitScope()},jh.isSimpleParamList=function(t){for(var e=0,r=t;e<r.length;e+=1){if("Identifier"!==r[e].type)return!1}return!0},jh.checkParams=function(t,e){for(var r=Object.create(null),i=0,n=t.params;i<n.length;i+=1){var s=n[i];this.checkLValInnerPattern(s,1,e?null:r)}},jh.parseExprList=function(t,e,r,i){for(var n=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(hh.comma),e&&this.afterTrailingComma(t))break;var a=void 0;r&&this.type===hh.comma?a=null:this.type===hh.ellipsis?(a=this.parseSpread(i),i&&this.type===hh.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),n.push(a)}return n},jh.checkUnreserved=function(t){var e=t.start,r=t.end,i=t.name;(this.inGenerator&&"yield"===i&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===i&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(i)&&this.raise(e,"Unexpected keyword '"+i+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,r).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(i)&&(this.inAsync||"await"!==i||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+i+"' is reserved"))},jh.parseIdent=function(t,e){var r=this.startNode();return this.type===hh.name?r.name=this.value:this.type.keyword?(r.name=this.type.keyword,"class"!==r.name&&"function"!==r.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(r,"Identifier"),t||(this.checkUnreserved(r),"await"!==r.name||this.awaitIdentPos||(this.awaitIdentPos=r.start)),r},jh.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===hh.semi||this.canInsertSemicolon()||this.type!==hh.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(hh.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},jh.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var $h=kh.prototype;$h.raise=function(t,e){var r=Ih(this.input,t);e+=" ("+r.line+":"+r.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=r,i.raisedAt=this.pos,i},$h.raiseRecoverable=$h.raise,$h.curPosition=function(){if(this.options.locations)return new xh(this.curLine,this.pos-this.lineStart)};var Wh=kh.prototype,Hh=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};Wh.enterScope=function(t){this.scopeStack.push(new Hh(t))},Wh.exitScope=function(){this.scopeStack.pop()},Wh.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},Wh.declareName=function(t,e,r){var i=!1;if(2===e){var n=this.currentScope();i=n.lexical.indexOf(t)>-1||n.functions.indexOf(t)>-1||n.var.indexOf(t)>-1,n.lexical.push(t),this.inModule&&1&n.flags&&delete this.undefinedExports[t]}else if(4===e){this.currentScope().lexical.push(t)}else if(3===e){var s=this.currentScope();i=this.treatFunctionsAsVar?s.lexical.indexOf(t)>-1:s.lexical.indexOf(t)>-1||s.var.indexOf(t)>-1,s.functions.push(t)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(t)>-1&&!(32&o.flags&&o.lexical[0]===t)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(t)>-1){i=!0;break}if(o.var.push(t),this.inModule&&1&o.flags&&delete this.undefinedExports[t],3&o.flags)break}i&&this.raiseRecoverable(r,"Identifier '"+t+"' has already been declared")},Wh.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},Wh.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Wh.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags)return e}},Wh.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags&&!(16&e.flags))return e}};var qh=function(t,e,r){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new Sh(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},Yh=kh.prototype;function Gh(t,e,r,i){return t.type=e,t.end=r,this.options.locations&&(t.loc.end=i),this.options.ranges&&(t.range[1]=r),t}Yh.startNode=function(){return new qh(this,this.start,this.startLoc)},Yh.startNodeAt=function(t,e){return new qh(this,t,e)},Yh.finishNode=function(t,e){return Gh.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},Yh.finishNodeAt=function(t,e,r,i){return Gh.call(this,t,e,r,i)},Yh.copyNode=function(t){var e=new qh(this,t.start,this.startLoc);for(var r in t)e[r]=t[r];return e};var Kh=function(t,e,r,i,n){this.token=t,this.isExpr=!!e,this.preserveSpace=!!r,this.override=i,this.generator=!!n},Jh={b_stat:new Kh("{",!1),b_expr:new Kh("{",!0),b_tmpl:new Kh("${",!1),p_stat:new Kh("(",!1),p_expr:new Kh("(",!0),q_tmpl:new Kh("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new Kh("function",!1),f_expr:new Kh("function",!0),f_expr_gen:new Kh("function",!0,!1,null,!0),f_gen:new Kh("function",!1,!1,null,!0)},Qh=kh.prototype;Qh.initialContext=function(){return[Jh.b_stat]},Qh.braceIsBlock=function(t){var e=this.curContext();return e===Jh.f_expr||e===Jh.f_stat||(t!==hh.colon||e!==Jh.b_stat&&e!==Jh.b_expr?t===hh._return||t===hh.name&&this.exprAllowed?lh.test(this.input.slice(this.lastTokEnd,this.start)):t===hh._else||t===hh.semi||t===hh.eof||t===hh.parenR||t===hh.arrow||(t===hh.braceL?e===Jh.b_stat:t!==hh._var&&t!==hh._const&&t!==hh.name&&!this.exprAllowed):!e.isExpr)},Qh.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},Qh.updateContext=function(t){var e,r=this.type;r.keyword&&t===hh.dot?this.exprAllowed=!1:(e=r.updateContext)?e.call(this,t):this.exprAllowed=r.beforeExpr},hh.parenR.updateContext=hh.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===Jh.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},hh.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?Jh.b_stat:Jh.b_expr),this.exprAllowed=!0},hh.dollarBraceL.updateContext=function(){this.context.push(Jh.b_tmpl),this.exprAllowed=!0},hh.parenL.updateContext=function(t){var e=t===hh._if||t===hh._for||t===hh._with||t===hh._while;this.context.push(e?Jh.p_stat:Jh.p_expr),this.exprAllowed=!0},hh.incDec.updateContext=function(){},hh._function.updateContext=hh._class.updateContext=function(t){!t.beforeExpr||t===hh._else||t===hh.semi&&this.curContext()!==Jh.p_stat||t===hh._return&&lh.test(this.input.slice(this.lastTokEnd,this.start))||(t===hh.colon||t===hh.braceL)&&this.curContext()===Jh.b_stat?this.context.push(Jh.f_stat):this.context.push(Jh.f_expr),this.exprAllowed=!1},hh.backQuote.updateContext=function(){this.curContext()===Jh.q_tmpl?this.context.pop():this.context.push(Jh.q_tmpl),this.exprAllowed=!1},hh.star.updateContext=function(t){if(t===hh._function){var e=this.context.length-1;this.context[e]===Jh.f_expr?this.context[e]=Jh.f_expr_gen:this.context[e]=Jh.f_gen}this.exprAllowed=!0},hh.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==hh.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var Zh="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Xh=Zh+" Extended_Pictographic",tl={9:Zh,10:Xh,11:Xh,12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},el="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",rl="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",il=rl+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",nl=il+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",sl={9:rl,10:il,11:nl,12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},al={};function ol(t){var e=al[t]={binary:wh(tl[t]+" "+el),nonBinary:{General_Category:wh(el),Script:wh(sl[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}ol(9),ol(10),ol(11),ol(12);var cl=kh.prototype,ul=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=al[t.options.ecmaVersion>=12?12:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function hl(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function ll(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function pl(t){return t>=65&&t<=90||t>=97&&t<=122}function dl(t){return pl(t)||95===t}function fl(t){return dl(t)||yl(t)}function yl(t){return t>=48&&t<=57}function ml(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function bl(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function gl(t){return t>=48&&t<=55}ul.prototype.reset=function(t,e,r){var i=-1!==r.indexOf("u");this.start=0|t,this.source=e+"",this.flags=r,this.switchU=i&&this.parser.options.ecmaVersion>=6,this.switchN=i&&this.parser.options.ecmaVersion>=9},ul.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},ul.prototype.at=function(t,e){void 0===e&&(e=!1);var r=this.source,i=r.length;if(t>=i)return-1;var n=r.charCodeAt(t);if(!e&&!this.switchU||n<=55295||n>=57344||t+1>=i)return n;var s=r.charCodeAt(t+1);return s>=56320&&s<=57343?(n<<10)+s-56613888:n},ul.prototype.nextIndex=function(t,e){void 0===e&&(e=!1);var r=this.source,i=r.length;if(t>=i)return i;var n,s=r.charCodeAt(t);return!e&&!this.switchU||s<=55295||s>=57344||t+1>=i||(n=r.charCodeAt(t+1))<56320||n>57343?t+1:t+2},ul.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},ul.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},ul.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},ul.prototype.eat=function(t,e){return void 0===e&&(e=!1),this.current(e)===t&&(this.advance(e),!0)},cl.validateRegExpFlags=function(t){for(var e=t.validFlags,r=t.flags,i=0;i<r.length;i++){var n=r.charAt(i);-1===e.indexOf(n)&&this.raise(t.start,"Invalid regular expression flag"),r.indexOf(n,i+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},cl.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},cl.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,r=t.backReferenceNames;e<r.length;e+=1){var i=r[e];-1===t.groupNames.indexOf(i)&&t.raise("Invalid named capture referenced")}},cl.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},cl.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},cl.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},cl.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var r=!1;if(this.options.ecmaVersion>=9&&(r=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!r,!0}return t.pos=e,!1},cl.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},cl.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},cl.regexp_eatBracedQuantifier=function(t,e){var r=t.pos;if(t.eat(123)){var i=0,n=-1;if(this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(n=t.lastIntValue),t.eat(125)))return-1!==n&&n<i&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=r}return!1},cl.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},cl.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},cl.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},cl.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},cl.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},cl.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},cl.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!ll(e)&&(t.lastIntValue=e,t.advance(),!0)},cl.regexp_eatPatternCharacters=function(t){for(var e=t.pos,r=0;-1!==(r=t.current())&&!ll(r);)t.advance();return t.pos!==e},cl.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},cl.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},cl.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},cl.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=hl(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=hl(t.lastIntValue);return!0}return!1},cl.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,r=this.options.ecmaVersion>=11,i=t.current(r);return t.advance(r),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,r)&&(i=t.lastIntValue),function(t){return rh(t,!0)||36===t||95===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},cl.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,r=this.options.ecmaVersion>=11,i=t.current(r);return t.advance(r),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,r)&&(i=t.lastIntValue),function(t){return ih(t,!0)||36===t||95===t||8204===t||8205===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},cl.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},cl.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var r=t.lastIntValue;if(t.switchU)return r>t.maxBackReference&&(t.maxBackReference=r),!0;if(r<=t.numCapturingParens)return!0;t.pos=e}return!1},cl.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},cl.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},cl.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},cl.regexp_eatZero=function(t){return 48===t.current()&&!yl(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},cl.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},cl.regexp_eatControlLetter=function(t){var e=t.current();return!!pl(e)&&(t.lastIntValue=e%32,t.advance(),!0)},cl.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){void 0===e&&(e=!1);var r,i=t.pos,n=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(n&&s>=55296&&s<=56319){var a=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var o=t.lastIntValue;if(o>=56320&&o<=57343)return t.lastIntValue=1024*(s-55296)+(o-56320)+65536,!0}t.pos=a,t.lastIntValue=s}return!0}if(n&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&((r=t.lastIntValue)>=0&&r<=1114111))return!0;n&&t.raise("Invalid unicode escape"),t.pos=i}return!1},cl.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},cl.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},cl.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},cl.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var r=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,r,i),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var n=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,n),!0}return!1},cl.regexp_validateUnicodePropertyNameAndValue=function(t,e,r){_h(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(r)||t.raise("Invalid property value")},cl.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},cl.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";dl(e=t.current());)t.lastStringValue+=hl(e),t.advance();return""!==t.lastStringValue},cl.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";fl(e=t.current());)t.lastStringValue+=hl(e),t.advance();return""!==t.lastStringValue},cl.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},cl.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},cl.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var r=t.lastIntValue;!t.switchU||-1!==e&&-1!==r||t.raise("Invalid character class"),-1!==e&&-1!==r&&e>r&&t.raise("Range out of order in character class")}}},cl.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var r=t.current();(99===r||gl(r))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var i=t.current();return 93!==i&&(t.lastIntValue=i,t.advance(),!0)},cl.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},cl.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!yl(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},cl.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},cl.regexp_eatDecimalDigits=function(t){var e=t.pos,r=0;for(t.lastIntValue=0;yl(r=t.current());)t.lastIntValue=10*t.lastIntValue+(r-48),t.advance();return t.pos!==e},cl.regexp_eatHexDigits=function(t){var e=t.pos,r=0;for(t.lastIntValue=0;ml(r=t.current());)t.lastIntValue=16*t.lastIntValue+bl(r),t.advance();return t.pos!==e},cl.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var r=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*r+t.lastIntValue:t.lastIntValue=8*e+r}else t.lastIntValue=e;return!0}return!1},cl.regexp_eatOctalDigit=function(t){var e=t.current();return gl(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},cl.regexp_eatFixedHexDigits=function(t,e){var r=t.pos;t.lastIntValue=0;for(var i=0;i<e;++i){var n=t.current();if(!ml(n))return t.pos=r,!1;t.lastIntValue=16*t.lastIntValue+bl(n),t.advance()}return!0};var _l=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new Sh(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},vl=kh.prototype;function wl(t){return"function"!=typeof BigInt?null:BigInt(t.replace(/_/g,""))}function xl(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}vl.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new _l(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},vl.getToken=function(){return this.next(),new _l(this)},"undefined"!=typeof Symbol&&(vl[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===hh.eof,value:e}}}}),vl.curContext=function(){return this.context[this.context.length-1]},vl.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(hh.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},vl.readToken=function(t){return rh(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},vl.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},vl.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),r=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(-1===i&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(ph.lastIndex=r;(t=ph.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(r+2,i),r,this.pos,e,this.curPosition())},vl.skipLineComment=function(t){for(var e=this.pos,r=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!dh(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,r,this.curPosition())},vl.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&fh.test(String.fromCharCode(t))))break t;++this.pos}}},vl.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var r=this.type;this.type=t,this.value=e,this.updateContext(r)},vl.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(hh.ellipsis)):(++this.pos,this.finishToken(hh.dot))},vl.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(hh.assign,2):this.finishOp(hh.slash,1)},vl.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),r=1,i=42===t?hh.star:hh.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++r,i=hh.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(hh.assign,r+1):this.finishOp(i,r)},vl.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(hh.assign,3);return this.finishOp(124===t?hh.logicalOR:hh.logicalAND,2)}return 61===e?this.finishOp(hh.assign,2):this.finishOp(124===t?hh.bitwiseOR:hh.bitwiseAND,1)},vl.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(hh.assign,2):this.finishOp(hh.bitwiseXOR,1)},vl.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!lh.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(hh.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(hh.assign,2):this.finishOp(hh.plusMin,1)},vl.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),r=1;return e===t?(r=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+r)?this.finishOp(hh.assign,r+1):this.finishOp(hh.bitShift,r)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(r=2),this.finishOp(hh.relational,r)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},vl.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(hh.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(hh.arrow)):this.finishOp(61===t?hh.eq:hh.prefix,1)},vl.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(46===e){var r=this.input.charCodeAt(this.pos+2);if(r<48||r>57)return this.finishOp(hh.questionDot,2)}if(63===e){if(t>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(hh.assign,3);return this.finishOp(hh.coalesce,2)}}return this.finishOp(hh.question,1)},vl.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(hh.parenL);case 41:return++this.pos,this.finishToken(hh.parenR);case 59:return++this.pos,this.finishToken(hh.semi);case 44:return++this.pos,this.finishToken(hh.comma);case 91:return++this.pos,this.finishToken(hh.bracketL);case 93:return++this.pos,this.finishToken(hh.bracketR);case 123:return++this.pos,this.finishToken(hh.braceL);case 125:return++this.pos,this.finishToken(hh.braceR);case 58:return++this.pos,this.finishToken(hh.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(hh.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(hh.prefix,1)}this.raise(this.pos,"Unexpected character '"+xl(t)+"'")},vl.finishOp=function(t,e){var r=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,r)},vl.readRegexp=function(){for(var t,e,r=this.pos;;){this.pos>=this.input.length&&this.raise(r,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(lh.test(i)&&this.raise(r,"Unterminated regular expression"),t)t=!1;else{if("["===i)e=!0;else if("]"===i&&e)e=!1;else if("/"===i&&!e)break;t="\\"===i}++this.pos}var n=this.input.slice(r,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new ul(this));o.reset(r,n,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var c=null;try{c=new RegExp(n,a)}catch(t){}return this.finishToken(hh.regexp,{pattern:n,flags:a,value:c})},vl.readInt=function(t,e,r){for(var i=this.options.ecmaVersion>=12&&void 0===e,n=r&&48===this.input.charCodeAt(this.pos),s=this.pos,a=0,o=0,c=0,u=null==e?1/0:e;c<u;++c,++this.pos){var h=this.input.charCodeAt(this.pos),l=void 0;if(i&&95===h)n&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===c&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=h;else{if((l=h>=97?h-97+10:h>=65?h-65+10:h>=48&&h<=57?h-48:1/0)>=t)break;o=h,a=a*t+l}}return i&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||null!=e&&this.pos-s!==e?null:a},vl.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var r=this.readInt(t);return null==r&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(r=wl(this.input.slice(e,this.pos)),++this.pos):rh(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(hh.num,r)},vl.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(e,"Invalid number");var r=this.pos-e>=2&&48===this.input.charCodeAt(e);r&&this.strict&&this.raise(e,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!r&&!t&&this.options.ecmaVersion>=11&&110===i){var n=wl(this.input.slice(e,this.pos));return++this.pos,rh(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(hh.num,n)}r&&/[89]/.test(this.input.slice(e,this.pos))&&(r=!1),46!==i||r||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||r||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),rh(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s,a=(s=this.input.slice(e,this.pos),r?parseInt(s,8):parseFloat(s.replace(/_/g,"")));return this.finishToken(hh.num,a)},vl.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},vl.readString=function(t){for(var e="",r=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===t)break;92===i?(e+=this.input.slice(r,this.pos),e+=this.readEscapedChar(!1),r=this.pos):(dh(i,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(r,this.pos++),this.finishToken(hh.string,e)};var Sl={};vl.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Sl)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},vl.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Sl;this.raise(t,e)},vl.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var r=this.input.charCodeAt(this.pos);if(96===r||36===r&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==hh.template&&this.type!==hh.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(hh.template,t)):36===r?(this.pos+=2,this.finishToken(hh.dollarBraceL)):(++this.pos,this.finishToken(hh.backQuote));if(92===r)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(dh(r)){switch(t+=this.input.slice(e,this.pos),++this.pos,r){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(r)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},vl.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(hh.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},vl.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return xl(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var r=this.pos-1;return this.invalidStringToken(r,"Invalid escape sequence in template string"),null}default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],n=parseInt(i,8);return n>255&&(i=i.slice(0,-1),n=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),"0"===i&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-i.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(n)}return dh(e)?"":String.fromCharCode(e)}},vl.readHexChar=function(t){var e=this.pos,r=this.readInt(16,t);return null===r&&this.invalidStringToken(e,"Bad character escape sequence"),r},vl.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,r=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(ih(n,i))this.pos+=n<=65535?1:2;else{if(92!==n)break;this.containsEsc=!0,t+=this.input.slice(r,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?rh:ih)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=xl(a),r=this.pos}e=!1}return t+this.input.slice(r,this.pos)},vl.readWord=function(){var t=this.readWord1(),e=hh.name;return this.keywords.test(t)&&(e=ch[t]),this.finishToken(e,t)};kh.acorn={Parser:kh,version:"8.0.5",defaultOptions:Ah,Position:xh,SourceLocation:Sh,getLineInfo:Ih,Node:qh,TokenType:nh,tokTypes:hh,keywordTypes:ch,TokContext:Kh,tokContexts:Jh,isIdentifierChar:ih,isIdentifierStart:rh,Token:_l,isNewLine:dh,lineBreak:lh,lineBreakG:ph,nonASCIIwhitespace:fh};const Il="Identifier",Al="Literal",Tl="MemberExpression",El="ObjectPattern",Bl="Column",kl="Dictionary",Cl="Function";function Ll(t,e,r,i){const n=r[t.type]||r.Default;if(n&&!1===n(t,e,i))return;const s=Vl[t.type];s&&s(t,e,r)}const Dl=(t,e,r)=>{Ll(t.argument,e,r,t)},Ml=(t,e,r)=>{Ll(t.left,e,r,t),Ll(t.right,e,r,t)},Ol=(t,e,r)=>{Ll(t.test,e,r,t),Ll(t.consequent,e,r,t),t.alternate&&Ll(t.alternate,e,r,t)},Nl=(t,e,r)=>{Ul(t.params,e,r,t),Ll(t.body,e,r,t)},Fl=(t,e,r)=>{Ll(t.callee,e,r,t),Ul(t.arguments,e,r,t)},Ul=(t,e,r,i)=>{t.forEach((t=>Ll(t,e,r,i)))},Vl={TemplateLiteral:(t,e,r)=>{Ul(t.expressions,e,r,t),Ul(t.quasis,e,r,t)},MemberExpression:(t,e,r)=>{Ll(t.object,e,r,t),Ll(t.property,e,r,t)},CallExpression:Fl,NewExpression:Fl,ArrayExpression:(t,e,r)=>{Ul(t.elements,e,r,t)},AssignmentExpression:Ml,AwaitExpression:Dl,BinaryExpression:Ml,LogicalExpression:Ml,UnaryExpression:Dl,UpdateExpression:Dl,ConditionalExpression:Ol,ObjectExpression:(t,e,r)=>{Ul(t.properties,e,r,t)},Property:(t,e,r)=>{Ll(t.key,e,r,t),Ll(t.value,e,r,t)},ArrowFunctionExpression:Nl,FunctionExpression:Nl,FunctionDeclaration:Nl,VariableDeclaration:(t,e,r)=>{Ul(t.declarations,e,r,t)},VariableDeclarator:(t,e,r)=>{Ll(t.id,e,r,t),Ll(t.init,e,r,t)},SpreadElement:(t,e,r)=>{Ll(t.argument,e,r,t)},BlockStatement:(t,e,r)=>{Ul(t.body,e,r,t)},ExpressionStatement:(t,e,r)=>{Ll(t.expression,e,r,t)},IfStatement:Ol,ForStatement:(t,e,r)=>{Ll(t.init,e,r,t),Ll(t.test,e,r,t),Ll(t.update,e,r,t),Ll(t.body,e,r,t)},WhileStatement:(t,e,r)=>{Ll(t.test,e,r,t),Ll(t.body,e,r,t)},DoWhileStatement:(t,e,r)=>{Ll(t.body,e,r,t),Ll(t.test,e,r,t)},SwitchStatement:(t,e,r)=>{Ll(t.discriminant,e,r,t),Ul(t.cases,e,r,t)},SwitchCase:(t,e,r)=>{t.test&&Ll(t.test,e,r,t),Ul(t.consequent,e,r,t)},ReturnStatement:Dl,Program:(t,e,r)=>{Ll(t.body[0],e,r,t)}};function Pl(t){delete t.start,delete t.end,delete t.optional}function Rl(t){Pl(t),delete t.object,delete t.property,delete t.computed,t.table||delete t.table}const jl=(t,e)=>{const r=Gl[t.type];return r?r(t,e):n(`Unsupported expression construct: ${t.type}`)},zl=(t,e)=>"("+jl(t.left,e)+" "+t.operator+" "+jl(t.right,e)+")",$l=(t,e)=>"("+Hl(t.params,e)+")=>"+jl(t.body,e),Wl=(t,e)=>jl(t.callee,e)+"("+Hl(t.arguments,e)+")",Hl=(t,e,r=",")=>t.map((t=>jl(t,e))).join(r),ql=t=>t.computed?`[${yu(t.name)}]`:`.${t.name}`,Yl=(t,e,r)=>{const i=t.table||"";return`data${i}${ql(t)}.${r}(${e.index}${i})`},Gl={Constant:t=>t.raw,Column:(t,e)=>Yl(t,e,"get"),Dictionary:(t,e)=>Yl(t,e,"key"),Function:t=>`fn.${t.name}`,Parameter:t=>`$${ql(t)}`,Op:(t,e)=>`op(${yu(t.name)},${e.op||e.index})`,Literal:t=>t.raw,Identifier:t=>t.name,TemplateLiteral:(t,e)=>{const{quasis:r,expressions:i}=t,n=i.length;let s=r[0].value.raw;for(let t=0;t<n;)s+="${"+jl(i[t],e)+"}"+r[++t].value.raw;return"`"+s+"`"},MemberExpression:(t,e)=>{const r=!t.computed,i=jl(t.object,e),n=jl(t.property,e);return i+(r?"."+n:"["+n+"]")},CallExpression:Wl,NewExpression:(t,e)=>"new "+Wl(t,e),ArrayExpression:(t,e)=>"["+Hl(t.elements,e)+"]",AssignmentExpression:zl,BinaryExpression:zl,LogicalExpression:zl,UnaryExpression:(t,e)=>"("+t.operator+jl(t.argument,e)+")",ConditionalExpression:(t,e)=>"("+jl(t.test,e)+"?"+jl(t.consequent,e)+":"+jl(t.alternate,e)+")",ObjectExpression:(t,e)=>"({"+Hl(t.properties,e)+"})",Property:(t,e)=>jl(t.key,e)+":"+jl(t.value,e),ArrowFunctionExpression:$l,FunctionExpression:$l,FunctionDeclaration:$l,ArrayPattern:(t,e)=>"["+Hl(t.elements,e)+"]",ObjectPattern:(t,e)=>"{"+Hl(t.properties,e)+"}",VariableDeclaration:(t,e)=>t.kind+" "+Hl(t.declarations,e,","),VariableDeclarator:(t,e)=>jl(t.id,e)+"="+jl(t.init,e),SpreadElement:(t,e)=>"..."+jl(t.argument,e),BlockStatement:(t,e)=>"{"+Hl(t.body,e,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(t,e)=>jl(t.expression,e),IfStatement:(t,e)=>"if ("+jl(t.test,e)+")"+jl(t.consequent,e)+(t.alternate?" else "+jl(t.alternate,e):""),SwitchStatement:(t,e)=>"switch ("+jl(t.discriminant,e)+") {"+Hl(t.cases,e,"")+"}",SwitchCase:(t,e)=>(t.test?"case "+jl(t.test,e):"default")+": "+Hl(t.consequent,e,";")+";",ReturnStatement:(t,e)=>"return "+jl(t.argument,e),Program:(t,e)=>jl(t.body[0],e)};function Kl(t,e={index:"row"}){return jl(t,e)}function Jl(e){const r=typeof e;return"string"===r?`"${e}"`:"object"===r&&e?h(e)?+e:t(e)||gu(e)?`[${e.map(Jl)}]`:p(e)?e+"":function(t){let e="{",r=-1;for(const i in t)++r>0&&(e+=","),e+=`"${i}":${Jl(t[i])}`;return e+="}",e}(e):e}function Ql(t,e){const r=t.length;return 1===r?(e,r)=>Jl(t[0](e,r)):(i,n)=>{let s="";for(let a=0;a<r;++a){a>0&&(s+="|");const r=t[a](i,n);if(e&&(null==r||r!=r))return null;s+=Jl(r)}return s}}function Zl(){}var Xl=void 0;function tp(t){return t.init=t.init||Zl,t.add=t.add||Zl,t.rem=t.rem||Zl,t}function ep(t,e){return t.product_v=!1,t.product=e}var rp={count:{create:()=>tp({value:t=>t.count}),param:[]},values:{create:()=>tp({init:t=>t.values=!0,value:t=>t.list.values().slice()}),param:[1]},any:{create:()=>tp({add:(t,e)=>{null==t.any&&(t.any=e)},value:t=>t.valid?t.any:Xl}),param:[1]},valid:{create:()=>tp({value:t=>t.valid}),param:[1]},invalid:{create:()=>tp({value:t=>t.count-t.valid}),param:[1]},distinct:{create:()=>({init:t=>t.distinct=function(){const t=new Map;return{count:()=>t.size,values:()=>Array.from(t.values(),(t=>t.v)),increment(e){const r=Jl(e),i=t.get(r);i?++i.n:t.set(r,{v:e,n:1})},decrement(e){const r=Jl(e),i=t.get(r);1===i.n?t.delete(r):--i.n},forEach(e){t.forEach((({v:t,n:r})=>e(t,r)))}}}(),value:t=>t.distinct.count()+(t.valid===t.count?0:1),add:(t,e)=>t.distinct.increment(e),rem:(t,e)=>t.distinct.decrement(e)}),param:[1]},unique:{create:()=>tp({value:t=>t.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>tp({value:t=>{let e=Xl,r=0;return t.distinct.forEach(((t,i)=>{i>r&&(r=i,e=t)})),e}}),param:[1],req:["distinct"]},sum:{create:()=>({init:t=>t.sum=0,value:t=>t.valid?t.sum:Xl,add:(t,e)=>fu(e)?0===t.sum?t.sum=e:t.sum+=e:t.sum+=+e,rem:(t,e)=>t.sum-=e}),param:[1]},product:{create:()=>({init:t=>ep(t,1),value:t=>t.valid?t.product_v?ep(t,function(t,e=0,r=t.length){let i=t[e++];for(let n=e;n<r;++n)i*=t[n];return i}(t.list.values())):t.product:void 0,add:(t,e)=>fu(e)&&1===t.product?t.product=e:t.product*=e,rem:(t,e)=>0==e||e===1/0||e===-1/0?t.product_v=!0:t.product/=e}),param:[1],stream:["values"]},mean:{create:()=>({init:t=>t.mean=0,value:t=>t.valid?t.mean:Xl,add:(t,e)=>{t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid},rem:(t,e)=>{t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean}}),param:[1]},average:{create:()=>tp({value:t=>t.valid?t.mean:Xl}),param:[1],req:["mean"]},variance:{create:()=>({init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):Xl,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean)}),param:[1],req:["mean"]},variancep:{create:()=>tp({value:t=>t.valid>1?t.dev/t.valid:Xl}),param:[1],req:["variance"]},stdev:{create:()=>tp({value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):Xl}),param:[1],req:["variance"]},stdevp:{create:()=>tp({value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):Xl}),param:[1],req:["variance"]},min:{create:()=>({init:t=>t.min=Xl,value:t=>t.min=Number.isNaN(t.min)?t.list.min():t.min,add:(t,e)=>{(e<t.min||t.min===Xl)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)}}),param:[1],stream:["values"]},max:{create:()=>({init:t=>t.max=Xl,value:t=>t.max=Number.isNaN(t.max)?t.list.max():t.max,add:(t,e)=>{(e>t.max||t.max===Xl)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)}}),param:[1],stream:["values"]},quantile:{create:t=>tp({value:e=>e.list.quantile(t)}),param:[1,1],req:["values"]},median:{create:()=>tp({value:t=>t.list.quantile(.5)}),param:[1],req:["values"]},covariance:{create:()=>({init:t=>{t.cov=t.mean_x=t.mean_y=t.dev_x=t.dev_y=0},value:t=>t.valid>1?t.cov/(t.valid-1):Xl,add:(t,e,r)=>{const i=e-t.mean_x,n=r-t.mean_y;t.mean_x+=i/t.valid,t.mean_y+=n/t.valid;const s=r-t.mean_y;t.dev_x+=i*(e-t.mean_x),t.dev_y+=n*s,t.cov+=i*s},rem:(t,e,r)=>{const i=e-t.mean_x,n=r-t.mean_y;t.mean_x-=t.valid?i/t.valid:t.mean_x,t.mean_y-=t.valid?n/t.valid:t.mean_y;const s=r-t.mean_y;t.dev_x-=i*(e-t.mean_x),t.dev_y-=n*s,t.cov-=i*s}}),param:[2]},covariancep:{create:()=>tp({value:t=>t.valid>1?t.cov/t.valid:Xl}),param:[2],req:["covariance"]},corr:{create:()=>tp({value:t=>t.valid>1?t.cov/(Math.sqrt(t.dev_x)*Math.sqrt(t.dev_y)):Xl}),param:[2],req:["covariance"]},bins:{create:(t,e,r)=>tp({value:i=>function(t,e,r=15,i=!0,n=0){const s=[5,2],a=Math.LN10,o=Math.ceil(Math.log(r)/a),c=e-t||Math.abs(t)||1;let u=Math.max(n,Math.pow(10,Math.round(Math.log(c)/a)-o));for(;Math.ceil(c/u)>r;)u*=10;const h=s.length;for(let t=0;t<h;++t){const e=u/s[t];e>=n&&c/e<=r&&(u=e)}if(i){let r=Math.log(u);const i=r>=0?0:1+~~(-r/a),n=Math.pow(10,-i-1);r=Math.floor(t/u+n)*u,t=t<r?r-u:r,e=Math.ceil(e/u)*u}return[t,e===t?t+u:e,u]}(i.min,i.max,t,e,r)}),param:[1,3],req:["min","max"]}};function ip(t){return null!=t&&t==t}const np={create(){let t;return{init:()=>t=1,value:e=>{const r=e.index;return r&&!e.peer(r)?t=r+1:t}}},param:[]},sp={create(){let t;return{init:()=>t=0,value:e=>{const{index:r,peer:i,size:n}=e;let s=r;if(t<s){for(;s+1<n&&i(s+1);)++s;t=s}return(1+t)/n}}},param:[]};var ap={row_number:{create:()=>({init:Zl,value:t=>t.index+1}),param:[]},rank:np,avg_rank:{create(){let t,e;return{init:()=>(t=-1,e=1),value:r=>{const i=r.index;if(i>=t){for(e=t=i+1;r.peer(t);e+=++t);e/=t-i}return e}}},param:[]},dense_rank:{create(){let t;return{init:()=>t=1,value:e=>{const r=e.index;return r&&!e.peer(r)?++t:t}}},param:[]},percent_rank:{create(){const{init:t,value:e}=np.create();return{init:t,value:t=>(e(t)-1)/(t.size-1)}},param:[]},cume_dist:sp,ntile:{create(t){(t=+t)>0||n("ntile num must be greater than zero.");const{init:e,value:r}=sp.create();return{init:e,value:e=>Math.ceil(t*r(e))}},param:[0,1]},lag:{create:(t,e)=>(t=+t||1,{init:Zl,value:(r,i)=>{const n=r.index-t;return n>=0?r.value(n,i):e}}),param:[1,2]},lead:{create:(t,e)=>(t=+t||1,{init:Zl,value:(r,i)=>{const n=r.index+t;return n<r.size?r.value(n,i):e}}),param:[1,2]},first_value:{create:()=>({init:Zl,value:(t,e)=>t.value(t.i0,e)}),param:[1]},last_value:{create:()=>({init:Zl,value:(t,e)=>t.value(t.i1-1,e)}),param:[1]},nth_value:{create:t=>((t=+t)>0||n("nth_value nth must be greater than zero."),{init:Zl,value:(e,r)=>{const i=e.i0+(t-1);return i<e.i1?e.value(i,r):Xl}}),param:[1,1]},fill_down:{create(t){let e;return{init:()=>e=t,value:(t,r)=>{const i=t.value(t.index,r);return ip(i)?e=i:e}}},param:[1,1]},fill_up:{create(t){let e,r;return{init:()=>(e=t,r=-1),value:(i,n)=>i.index<=r?e:(r=function(t,e,r){for(const i=t.size;r<i;++r)if(ip(t.value(r,e)))return r;return-1}(i,n,i.index))>=0?e=i.value(r,n):(r=i.size,e=t)}},param:[1,1]}};const op=t=>_u(t)?t:null,cp=t=>_u(t)||d(t)?t:null;var up={concat:(...t)=>[].concat(...t),includes:(t,e,r)=>cp(t).includes(e,r),indexof:(t,e)=>cp(t).indexOf(e),join:(t,e)=>op(t).join(e),lastindexof:(t,e)=>cp(t).lastIndexOf(e),length:t=>t.length,pluck:(t,e)=>op(t).map((t=>ip(t)?t[e]:Xl)),reverse:t=>op(t).slice().reverse(),slice:(t,e,r)=>cp(t).slice(e,r)};const hp=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function lp(t){return t.match(hp)}const pp=864e5,dp=6048e5,fp=new Date,yp=new Date,mp=t=>(fp.setTime("string"==typeof t?function(t,e=Date.parse){return lp(t)?e(t):t}(t):t),fp);var bp={format_date:(t,e)=>Nu(mp(t),!e),format_utcdate:(t,e)=>Fu(mp(t),!e),timestamp:t=>+mp(t),year:t=>mp(t).getFullYear(),quarter:t=>Math.floor(mp(t).getMonth()/3),month:t=>mp(t).getMonth(),date:t=>mp(t).getDate(),dayofweek:t=>mp(t).getDay(),hours:t=>mp(t).getHours(),minutes:t=>mp(t).getMinutes(),seconds:t=>mp(t).getSeconds(),milliseconds:t=>mp(t).getMilliseconds(),utcyear:t=>mp(t).getUTCFullYear(),utcquarter:t=>Math.floor(mp(t).getUTCMonth()/3),utcmonth:t=>mp(t).getUTCMonth(),utcdate:t=>mp(t).getUTCDate(),utcdayofweek:t=>mp(t).getUTCDay(),utchours:t=>mp(t).getUTCHours(),utcminutes:t=>mp(t).getUTCMinutes(),utcseconds:t=>mp(t).getUTCSeconds(),utcmilliseconds:t=>mp(t).getUTCMilliseconds(),datetime:function(t,e,r,i,n,s,a){return arguments.length?new Date(t,e||0,null==r?1:r,i||0,n||0,s||0,a||0):new Date(Date.now())},dayofyear:function(t){yp.setTime(+t),yp.setHours(0,0,0,0),fp.setTime(+yp),fp.setMonth(0),fp.setDate(1);const e=6e4*(yp.getTimezoneOffset()-fp.getTimezoneOffset());return Math.floor(1+(yp-fp-e)/pp)},week:function(t,e){const r=e||0;yp.setTime(+t),yp.setDate(yp.getDate()-(yp.getDay()+7-r)%7),yp.setHours(0,0,0,0),fp.setTime(+t),fp.setMonth(0),fp.setDate(1),fp.setDate(1-(fp.getDay()+7-r)%7),fp.setHours(0,0,0,0);const i=6e4*(yp.getTimezoneOffset()-fp.getTimezoneOffset());return Math.floor((yp-fp+1-i)/dp)},utcdatetime:function(t,e,r,i,n,s,a){return arguments.length?new Date(Date.UTC(t,e||0,null==r?1:r,i||0,n||0,s||0,a||0)):new Date(Date.now())},utcdayofyear:function(t){yp.setTime(+t),yp.setUTCHours(0,0,0,0);const e=Date.UTC(yp.getUTCFullYear(),0,1);return Math.floor(1+(yp-e)/pp)},utcweek:function(t,e){const r=e||0;return yp.setTime(+t),yp.setUTCDate(yp.getUTCDate()-(yp.getUTCDay()+7-r)%7),yp.setUTCHours(0,0,0,0),fp.setTime(+t),fp.setUTCMonth(0),fp.setUTCDate(1),fp.setUTCDate(1-(fp.getUTCDay()+7-r)%7),fp.setUTCHours(0,0,0,0),Math.floor((yp-fp+1)/dp)},now:Date.now};function gp(t,e){return null!=t&&null!=e&&t==t&&e==e&&(t===e||(h(t)||h(e)?+t==+e:p(t)&&p(e)?t+""==e+"":!(!l(t)||!l(e))&&function(t,e){if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;if(t.length||e.length)return _p(t,e);const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(r.sort(),i.sort(),!_p(r,i,((t,e)=>t===e)))return!1;const n=r.length;for(let i=0;i<n;++i){const n=r[i];if(!gp(t[n],e[n]))return!1}return!0}(t,e)))}function _p(t,e,r=gp){const i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;++n)if(!r(t[n],e[n]))return!1;return!0}let vp=Math.random;function wp(){return vp()}function xp(t){vp=ip(t)&&isFinite(t=+t)?function(t){const e=1664525,r=1013904223,i=1/4294967296;return t=0|(0<=t&&t<1?t/i:Math.abs(t)),()=>i*((t=e*t+r|0)>>>0)}(t):Math.random}function Sp(t,e,r){let i=arguments.length;t=+t,e=+e,r=i<2?(e=t,t=0,1):i<3?1:+r,i=0|Math.max(0,Math.ceil((e-t)/r));const n=new Array(i);for(let e=0;e<i;++e)n[e]=t+e*r;return n}var Ip={bin:function(t,e,r,i,n){return null==t?null:t<e?-1/0:t>r?1/0:(t=Math.max(e,Math.min(t,r)),e+i*Math.floor(1e-14+(t-e)/i+(n||0)))},equal:gp,recode:function(t,e,r){if(e instanceof Map){if(e.has(t))return e.get(t)}else if(b(e,t))return e[t];return void 0!==r?r:t},sequence:Sp,...up,...bp,...{random:wp,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,max:Math.max,min:Math.min,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:t=>180*t/Math.PI,radians:t=>Math.PI*t/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh},...{has:(t,e)=>b(t,e),keys:t=>Object.keys(t),values:t=>Object.values(t)},...{parse_date:t=>new Date(t),parse_float:t=>Number.parseFloat(t),parse_int:(t,e)=>Number.parseInt(t,e),endswith:(t,e,r)=>String(t).endsWith(e,r),match:(t,e,r)=>{const i=String(t).match(e);return null==r||null==i?i:"number"==typeof r?i[r]:i.groups?i.groups[r]:null},normalize:(t,e)=>String(t).normalize(e),padend:(t,e,r)=>String(t).padEnd(e,r),padstart:(t,e,r)=>String(t).padStart(e,r),upper:t=>String(t).toUpperCase(),lower:t=>String(t).toLowerCase(),repeat:(t,e)=>String(t).repeat(e),replace:(t,e,r)=>String(t).replace(e,String(r)),substring:(t,e,r)=>String(t).substring(e,r),split:(t,e,r)=>String(t).split(e,r),startswith:(t,e,r)=>String(t).startsWith(e,r),trim:t=>String(t).trim()}};function Ap(t){return b(rp,t)}function Tp(t){return b(ap,t)}function Ep(t){return Ap(t)&&rp[t]}function Bp(t){return Tp(t)&&ap[t]}function kp(t){return b(Ip,t)&&Ip[t]}function Cp(t,e){return t=`"use strict"; return ${t};`,Function("fn","$",t)(Ip,e)}var Lp={expr:(t,e)=>Cp(`(row,data,op)=>${t}`,e),expr2:(t,e)=>Cp(`(row0,data0,row,data)=>${t}`,e),join:(t,e)=>Cp(`(row1,data1,row2,data2)=>${t}`,e),param:(t,e)=>Cp(t,e)},Dp={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"};const Mp={"==":1,"!=":1,"===":1,"!==":1};function Op(t,e,r,i,n){if(t.type=Bl,t.name=r,t.table=i,!(e&&n&&s(n.keyFor)))return;const a=Mp[e.operator]?e.left===t?e.right:e.left:e.callee&&"equal"===e.callee.name?e.arguments[e.arguments[0]===t?1:0]:null;a&&a.type===Al&&function(t,e,r,i){i<0?(t.type=Al,t.value=!1,t.raw="false"):(e.type=kl,r.value=i,r.raw=i+"")}(e,t,a,n.keyFor(a.value))}function Np(e){return t(e)?e:function(t){return t instanceof Map}(e)?e.entries():e?Object.entries(e):[]}const Fp={ecmaVersion:11},Up=t=>(e,r)=>r.error(t+" not allowed",e),Vp=Up("Aggregate function"),Pp=Up("Aggregate function"),Rp="Invalid column reference",jp="Invalid function call",zp="Invalid operator parameter",$p={[Bl]:1,Op:1},Wp=(t,e)=>e&&e.type===t;function Hp(t,e={}){const r=e.generate||Kl,i=e.compiler||Lp,s=qp(e),a={},o={},c=[],u=[];let h=0,p=-1;const d=e.join?i.join:1==e.index?i.expr2:i.expr,f={op(t){const e=`${t.name}(${t.fields.concat(t.params).join(",")})`;return o[e]||(t.id=++p,o[e]=t)},field(t){const e=r(t);return a[e]||(a[e]=++h)},param:t=>Wp(Al,t)?t.value:i.param(r(t),s),value(t,i){c.push(t);const n=e.ast?function(t){return Ll(t,null,{Column:Rl,Constant:Rl,Default:Pl}),t}(i):d(r(i),s);u.push(n),$p[i.type]&&n!==i&&l(n)&&(n.field=i.name)},error(t,e){const r=e.start-6,i=e.end-6;n(`${t}: "${String(f.spec).slice(r,i)}"`)}};Object.assign(f,e,{params:s});for(const[e,r]of Np(t))ad(f,e+"",r);if(e.ast)return{names:c,exprs:u};const y=[];for(const t in a)y[a[t]]=i.expr(t,s);const m=Object.values(o);return m.forEach((t=>t.fields=t.fields.map((t=>y[t])))),{names:c,exprs:u,ops:m}}const qp=t=>(t.table?Yp(t.table):t.join?{...Yp(t.join[1]),...Yp(t.join[0])}:{})||{},Yp=t=>t&&s(t.params)?t.params():{},Gp=(t,e)=>Wp(Il,e)?e.name:Wp(Tl,e)?e.property.name:null;function Kp(t,e,r){const{name:i}=t;if(Wp(Tl,r)&&r.property===t);else if(Wp("Property",r)&&r.key===t);else if(e.paramsRef.has(i))Xp(t,e.paramsRef.get(i));else if(e.columnRef.has(i))Qp(t,i,e,r);else if(b(e.params,i))Xp(t,i);else{if(!b(Dp,i))return!0;td(t,i)}}function Jp(t,e,r,i,n){const s=0===r?i.table:r>0?i.join[r-1]:null,a=s&&s.column(e);s&&!a&&i.error(Rp,t),i.aggronly&&!i.$op&&(i.$op||i.error("Invalid column reference (must be input to an aggregate function)",t)),Op(t,n,e,r,a)}function Qp(t,e,r,i){const[n,s]=r.columnRef.get(e);Jp(t,n,s,r,i)}function Zp(t,e,r,i){i.params&&!b(i.params,e)&&i.error("Invalid param reference",t),Xp(t,e)}function Xp(t,e){t.type="Parameter",t.name=e}function td(t,e){t.type="Constant",t.name=e,t.raw=Dp[e]}function ed(t,e){Wp(Il,t)?e.scope.add(t.name):Wp("ArrayPattern",t)?t.elements.forEach((t=>ed(t,e))):Wp(El,t)?t.properties.forEach((t=>ed(t.value,e))):e.error("Unsupported variable declaration",t.id)}const rd={FunctionDeclaration:Up("Function definitions"),ForStatement:Up("For loops"),ForOfStatement:Up("For-of loops"),ForInStatement:Up("For-in loops"),WhileStatement:Up("While loops"),DoWhileStatement:Up("Do-while loops"),AwaitExpression:Up("Await expressions"),ArrowFunctionExpression:Up("Function definitions"),AssignmentExpression:Up("Assignments"),FunctionExpression:Up("Function definitions"),NewExpression:Up('Use of "new"'),UpdateExpression:Up("Update expressions"),VariableDeclarator(t,e){ed(t.id,e)},Identifier(t,e,r){Kp(t,e,r)&&!e.scope.has(t.name)&&e.error("Invalid variable reference",t)},CallExpression(t,e){const r=Gp(0,t.callee),i=Ep(r)||Bp(r);if(i){if((e.join||!1===e.aggregate)&&Ap(i)&&Vp(t,e),(e.join||!1===e.window)&&Tp(i)&&Pp(t,e),e.$op=1,e.ast)t.callee={type:Cl,name:r},t.arguments.forEach((t=>Ll(t,e,nd)));else{const n=e.op(function(t,e,r,i){const n=[],s=[],a=e.param[0]||0,o=a+(e.param[1]||0);return i.forEach(((e,r)=>{r<a?(Ll(e,t,nd),n.push(t.field(e))):r<o?(Ll(e,t,nd),s.push(t.param(e))):t.error(zp,e)})),{name:r,fields:n,params:s,...t.spec.window||{}}}(e,i,r,t.arguments));Object.assign(t,{type:"Op",name:n.id})}return e.$op=0,!1}kp(r)?t.callee={type:Cl,name:r}:e.error(jp,t)},MemberExpression(t,e,r){const{object:i,property:n}=t;if(!Wp(Il,i))return;const{name:s}=i;if("Math"===s&&Wp(Il,n)&&b(Dp,n.name))return void td(t,n.name);const a=s===e.tuple?0:s===e.tuple1?1:s===e.tuple2?2:-1;return a>=0?id(t,a,e,Jp,r):s===e.$param?id(t,a,e,Zp):void(e.paramsRef.has(s)?Xp(t,e.paramsRef.get(s)):e.columnRef.has(s)?Qp(i,s,e,t):b(e.params,s)&&Xp(i,s))}};function id(t,e,r,i,n){const{property:s,computed:a}=t;let o;if(a)if(Wp(Al,s))o=s.value;else try{o=r.param(s)}catch(e){r.error("Invalid member expression",t)}else o=s.name;return i(t,o,e,r,n),!1}const nd={...rd,VariableDeclarator:Up("Variable declaration in operator call"),Identifier(t,e,r){Kp(t,e,r)&&e.error("Variable not accessible in operator call",t)},CallExpression(t,e){const r=Gp(0,t.callee);kp(r)?t.callee={type:Cl,name:r}:e.error(jp,t)}};function sd(t){try{const i=t.field?(t=>{const e=JSON.stringify(t+"");return t.table?`(a,b)=>b[${e}]`:`d=>d[${e}]`})(t):t;return(e=`expr=(${i})`,r=Fp,kh.parse(e,r)).body[0].expression.right}catch(e){n("Expression parse error: "+(t+""))}var e,r}function ad(t,e,r){const i=sd(r);let n=t.root=i;t.spec=r,t.tuple=null,t.tuple1=null,t.tuple2=null,t.$param=null,t.$op=0,t.scope=new Set,t.paramsRef=new Map,t.columnRef=new Map,(t=>Wp("FunctionExpression",t)||Wp("ArrowFunctionExpression",t))(n)?(!function(t,e){t.generator&&Up("Generator functions")(t,e);t.async&&Up("Async functions")(t,e);const{params:r}=t,i=r.length,n=t=>(r,i)=>e.columnRef.set(r,[i,t]),s=(t,r)=>e.paramsRef.set(t,r);i&&(e.join?(od(e,r[0],"tuple1",n(1)),i>1&&od(e,r[1],"tuple2",n(2)),i>2&&od(e,r[2],"$param",s)):(od(e,r[0],"tuple",n(0)),i>1&&od(e,r[1],"$param",s)));e.root=t.body}(n,t),n=n.body):t.join?(t.scope.add(t.tuple1="d1"),t.scope.add(t.tuple2="d2"),t.scope.add(t.$param="$")):(t.scope.add(t.tuple="d"),t.scope.add(t.$param="$")),Ll(n,t,rd),t.value(e,t.root)}function od(t,e,r,i){Wp(Il,e)?(t.scope.add(e.name),t[r]=e.name):Wp(El,e)&&e.properties.forEach((e=>{const r=Wp(Il,e.key)?e.key.name:Wp(Al,e.key)?e.key.value:t.error("Invalid argument",e);Wp(Il,e.value)||t.error("Unsupported destructuring pattern",e.value),i(e.value.name,r)}))}const cd="Expr",ud="ExprList",hd="ExprNumber",ld="ExprObject",pd="JoinKeys",dd="JoinValues",fd="Options",yd="OrderKeys",md="SelectionList",bd="TableRef",gd="TableRefList";function _d(t,e){return t&&t.expr?new vd({...t,...e}):new vd(e,t)}class vd{constructor(t,e){this.expr=e,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...s(this.expr)?{func:!0}:{}}}}function wd(t,e,r=0){const i=r?{field:!0,table:r}:{field:!0};return _d(t,e?{expr:e,...i}:i)}function xd(t,e){for(const[r,i]of Np(e))t.set(r,i);return t}function Sd(t){return"number"==typeof t}function Id(e,r,i=new Map){return d(r=Sd(r)?e.columnName(r):r)?i.set(r,r):t(r)?r.forEach((t=>Id(e,t,i))):s(r)?Id(e,r(e),i):l(r)?xd(i,r):n(`Invalid column selection: ${yu(r)}`),i}function Ad(t,e){return t.toObject=e,t}function Td(e){return t(e)?e.map(Td):e&&e.toObject?e.toObject():e}function Ed(){return Ad((t=>t.columnNames()),(()=>({all:[]})))}function Bd(...t){return t=t.flat(),Ad((e=>{const r=Id(e,t);return e.columnNames((t=>!r.has(t)))}),(()=>({not:Td(t)})))}function kd(t,e){return(e=e&&s(e.query)?e.query():e)&&s(e.evaluate)?e.evaluate(null,t):t(e)}function Cd(e){return l(e)&&(t(e.all)||t(e.matches)||t(e.not)||t(e.range))}function Ld(e){return e&&s(e.toObject)?e.toObject():s(e)?{expr:String(e),func:!0}:t(e)?e.map(Ld):l(e)?Vu(e,(t=>Ld(t))):e}function Dd(e){return t(e)?e.map(Dd):l(e)?t(e.verbs)?Gd.from(e):t(e.all)?Ed():t(e.range)?function(t,e){return Ad((r=>{let i=Sd(t)?t:r.columnIndex(t),n=Sd(e)?e:r.columnIndex(e);if(n<i){const t=n;n=i,i=t}return r.columnNames().slice(i,n+1)}),(()=>({range:[t,e]})))}(...e.range):t(e.match)?(d(r=RegExp(...e.match))&&(r=RegExp(r.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"))),Ad((t=>t.columnNames((t=>r.test(t)))),(()=>({matches:[r.source,r.flags]})))):t(e.not)?Bd(e.not.map(Ld)):function(t){let e=t,r=t.expr;if(null!=r){if(!0===t.field?e=r=wd(r):!0===t.func&&(e=r=function(t){const e=t=>t;return e.toString=()=>t,e}(r)),l(t.window)){const{frame:i,peers:n}=t.window;e=r=function(t,e,r){return _d(t,{window:{frame:e||[-1/0,0],peers:!!r}})}(r,i,n)}!0===t.desc&&(e=function(t){return _d(t,{desc:!0})}(r))}return t===e?Vu(t,(t=>Dd(t))):e}(e):e;var r}function Md(t){const r=[];return e(t).forEach((t=>{Sd(t)?r.push(t):d(t)?r.push(wd(t,null)):l(t)&&t.expr||s(t)?r.push(t):n("Invalid key value: "+(t+""))})),r}function Od(t,r){return r<2?e(t):t}const Nd={[cd]:zd,[ud]:$d,[hd]:function(t){return Sd(t)?t:Pd(t)},[ld]:Pd,[pd]:function(e){return t(e)?e.map($d):Pd(e,{join:!0})},[dd]:function(e){return t(e)?e.map(((t,e)=>e<2?$d(t):Pd(t,{join:!0}))):Pd(e,{join:!0})},[yd]:$d,[md]:function(t){return e(t).map(jd).flat()}};function Fd(t,e,r){return e===fd?t?function(t,e={}){const r={};for(const i in t){const n=t[i];r[i]=e[i]?Fd(n,e[i]):n}return r}(t,r):t:Nd[e](t)}function Ud(t){return{type:Bl,name:t}}function Vd(t){return{type:Bl,index:t}}function Pd(t,e){if(d(t))return function(t,e){return Hp({expr:t},{...e,ast:!0}).exprs[0]}(t,e);if(t.expr){let r;if(!0===t.field?r=Ud(t.expr):!0===t.func&&(r=Pd(t.expr,e)),r)return t.desc&&(r={type:"Descending",expr:r}),t.window&&(r={type:"Window",expr:r,...t.window}),r}return Object.keys(t).map((r=>({...Pd(t[r],e),as:r})))}function Rd(t){const e="Selection";return t.all?{type:e,operator:"all"}:t.not?{type:e,operator:"not",arguments:$d(t.not)}:t.range?{type:e,operator:"range",arguments:$d(t.range)}:t.matches?{type:e,operator:"matches",arguments:t.matches}:n("Invalid input")}function jd(t){return Cd(t)?Rd(t):Sd(t)?Vd(t):d(t)?Ud(t):l(t)?Object.keys(t).map((e=>({type:Bl,name:e,as:t[e]}))):n("Invalid input")}function zd(t){return Cd(t)?Rd(t):Sd(t)?Vd(t):d(t)?Ud(t):l(t)?Pd(t):n("Invalid input")}function $d(t){return e(t).map(zd).flat()}function Wd(t){return t&&s(t.toAST)?t.toAST():t}class Hd{constructor(e,r=[],i=[]){this.verb=e,this.schema=r,r.forEach(((e,r)=>{const a=e.type,o=i[r],c=a===pd?t(u=o)?u.map(Md):u:a===dd?function(e){return t(e)?e.map(Od):e}(o):a===yd?function(t){const e=[];return t.forEach((t=>{const r=null!=t.expr?t.expr:t;if(l(r)&&!s(r))for(const t in r)e.push(r[t]);else t=Sd(r)?r:d(r)?wd(t):s(r)?t:n("Invalid orderby field: "+t),e.push(t)})),e}(o):o;var u;this[e.name]=void 0!==c?c:e.default}))}static from(t){const e=Yd[t.verb];return e(...(e.schema||[]).map((({name:e})=>Dd(t[e]))))}evaluate(t,e){const r=this.schema.map((({name:t,type:r})=>{const i=this[t];return r===bd?kd(e,i):r===gd?i.map((t=>kd(e,t))):i}));return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach((({name:e})=>{t[e]=Ld(this[e])})),t}toAST(){const t={type:"Verb",verb:this.verb};return this.schema.forEach((({name:e,type:r,props:i})=>{t[e]=function(t,e,r){return e===bd?Wd(t):e===gd?t.map(Wd):Fd(Ld(t),e,r)}(this[e],r,i)})),t}}function qd(t,e){return Object.assign(((...r)=>new Hd(t,e,r)),{schema:e})}const Yd={count:qd("count",[{name:"options",type:fd}]),derive:qd("derive",[{name:"values",type:ld},{name:"options",type:fd,props:{before:md,after:md}}]),filter:qd("filter",[{name:"criteria",type:ld}]),groupby:qd("groupby",[{name:"keys",type:ud}]),orderby:qd("orderby",[{name:"keys",type:yd}]),relocate:qd("relocate",[{name:"columns",type:md},{name:"options",type:fd,props:{before:md,after:md}}]),rollup:qd("rollup",[{name:"values",type:ld}]),sample:qd("sample",[{name:"size",type:hd},{name:"options",type:fd,props:{weight:cd}}]),select:qd("select",[{name:"columns",type:md}]),ungroup:qd("ungroup"),unorder:qd("unorder"),reify:qd("reify"),dedupe:qd("dedupe",[{name:"keys",type:ud,default:[]}]),impute:qd("impute",[{name:"values",type:ld},{name:"options",type:fd,props:{expand:ud}}]),fold:qd("fold",[{name:"values",type:ud},{name:"options",type:fd}]),pivot:qd("pivot",[{name:"keys",type:ud},{name:"values",type:ud},{name:"options",type:fd}]),spread:qd("spread",[{name:"values",type:ud},{name:"options",type:fd}]),unroll:qd("unroll",[{name:"values",type:ud},{name:"options",type:fd,props:{drop:ud}}]),lookup:qd("lookup",[{name:"table",type:bd},{name:"on",type:pd},{name:"values",type:ud}]),join:qd("join",[{name:"table",type:bd},{name:"on",type:pd},{name:"values",type:dd},{name:"options",type:fd}]),cross:qd("cross",[{name:"table",type:bd},{name:"values",type:dd},{name:"options",type:fd}]),semijoin:qd("semijoin",[{name:"table",type:bd},{name:"on",type:pd}]),antijoin:qd("antijoin",[{name:"table",type:bd},{name:"on",type:pd}]),concat:qd("concat",[{name:"tables",type:gd}]),union:qd("union",[{name:"tables",type:gd}]),intersect:qd("intersect",[{name:"tables",type:gd}]),except:qd("except",[{name:"tables",type:gd}])};class Gd extends i{constructor(t,e,r){super(e),this._verbs=t||[],this._table=r}static from({verbs:t,table:e,params:r}){return new Gd(t.map(Hd.from),r,e)}get[Symbol.toStringTag](){if(!this._verbs)return"Object";return`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:"")}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,e){t=t||e(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),e);return t}toObject(){return Kd(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Kd(this,"toAST",{type:"Query"})}}function Kd(t,e,r){return{...r,verbs:t._verbs.map((t=>t[e]())),...t._params?{params:t._params}:null,...t._table?{table:t._table}:null}}function Jd(t,e){return new Gd(t._verbs.concat(e),t._params,t._table)}for(const t in Yd){const e=Yd[t];Gd.prototype["__"+t]=function(t,...r){return Jd(t,e(...r))}}function Qd(t){const{chunks:e,dictionary:r,length:i,nullCount:n}=t,s=r.length,a=function(t,e,r,i){const n=t.length>1||r?function(t,e,r){const i=new r.ArrayType(e),n=t.length;for(let e,r=0,s=0;r<n;++r)e=t[r].length,i.set(t[r].values.subarray(0,e),s),s+=e;return i}(t,e,t[0].type.indices):t[0].values;return r?function(t,e,r){const i=t.length;for(let n,s,a,o,c=0,u=0;c<i;++c){if(a=t[c].nullBitmap,n=t[c].length>>3,a&&a.length)for(let t=0;t<=n;++t)255!==(o=a[t])&&(s=u+(t<<3),0==(1&o)&&(e[s+0]=r),0==(2&o)&&(e[s+1]=r),0==(4&o)&&(e[s+2]=r),0==(8&o)&&(e[s+3]=r),0==(16&o)&&(e[s+4]=r),0==(32&o)&&(e[s+5]=r),0==(64&o)&&(e[s+6]=r),0==(128&o)&&(e[s+7]=r));u+=t[c].length}return e}(t,n,i):n}(e||[t],i,n,s),o=Array(s),c=t=>null==t||t<0||t>=s?null:void 0!==o[t]?o[t]:o[t]=r.get(t);return{vector:t,length:i,get:t=>c(a[t]),key:t=>a[t],keyFor(t){if(null===t)return n?s:-1;for(let e=0;e<s;++e)if(void 0===o[e]&&(o[e]=r.get(e)),o[e]===t)return e;return-1},groups(t){const e=s+(n?1:0);return{keys:a,get:[c],names:t,rows:Sp(0,e),size:e}},[Symbol.iterator]:()=>t[Symbol.iterator]()}}function Zd(t,e){if(t.dictionary)return Qd(t);const{typeId:r,chunks:i,length:n,numChildren:s}=t,a=i&&1===i.length?i[0]:t,o=s&&e?ef(a):s?Xd(ef(a)):r===I?Xd((t=>a.get(t))):null;return o?{vector:a,length:n,get:o,[Symbol.iterator]:()=>function*(t,e){for(let r=0;r<t;++r)yield e(r)}(n,o)}:a}function Xd(t){const e=[];return r=>{const i=e[r];return void 0!==i?i:e[r]=t(r)}}const tf=t=>t.numChildren?a(t.length,ef(t)):t.nullCount?[...t]:t.toArray(),ef=t=>{return(e=t.typeId)===k||e===L?rf(t):t.typeId===C?function(t){const e=[],r=[];t.type.children.forEach(((i,n)=>{e.push(Zd(t.getChildAt(n),!0)),r.push(`${yu(i.name)}:_${n}.get(row)`)}));const i=zu("row","({"+r+"})",e);return t.nullCount?e=>t.isValid(e)?i(e):null:i}(t):n(`Unsupported Arrow type: ${yu(t.VectorName)}`);var e},rf=t=>t.nullCount?e=>t.isValid(e)?tf(t.get(e)):null:e=>tf(t.get(e));const nf=2147483648;class sf{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let e=0;for(let r=0;r<t;++r)for(let t=this._bits[r];t;++e)t&=t-1;return e}get(t){return this._bits[t>>5]&nf>>>t}set(t){this._bits[t>>5]|=nf>>>t}clear(t){this._bits[t>>5]&=~(nf>>>t)}scan(t){for(let e=this.next(0);e>=0;e=this.next(e+1))t(e)}next(t){const e=this._bits,r=e.length;let i=t>>5,n=e[i]&4294967295>>>t;for(;i<r;n=e[++i])if(0!==n)return(i<<5)+Math.clz32(n);return-1}nth(t){let e=this.next(0);for(;t--&&e>=0;)e=this.next(e+1);return e}not(){const t=this._bits,e=t.length;for(let r=0;r<e;++r)t[r]=~t[r];const r=this._size%32;return r&&(t[e-1]&=nf>>r-1),this}and(t){if(t){const e=this._bits,r=t._bits,i=e.length;for(let t=0;t<i;++t)e[t]&=r[t]}return this}or(t){if(t){const e=this._bits,r=t._bits,i=e.length;for(let t=0;t<i;++t)e[t]|=r[t]}return this}}function af(t,e={}){t=function(t){return t&&t.chunks?t:Eu().from(t)}(t);const{chunks:r,length:i,schema:n}=t,s=n.fields.map((t=>t.name)),a=Id({columnNames:t=>t?s.filter(t):s.slice(),columnIndex:t=>s.indexOf(t)},e.columns||Ed()),o=g();a.forEach(((e,r)=>{o.add(e,Zd(t.getColumn(r)))}));const c=t.count()!==i?new sf(i):null;if(c){let e=0,i=0;t.scan((t=>c.set(e+t)),(t=>{for(;r[i]!==t;)e+=r[i++].length}))}return new Wu(o.data,o.names,c)}var of=t=>t;const cf={},uf={};const hf=[[t=>"true"===t||"false"===t,t=>"false"!==t],[t=>"NaN"===t||(t=+t)===t,t=>+t],[lp,t=>new Date(Date.parse(t))]];function lf(t,e){const r=t.length;for(let i=0;i<r;++i){const r=t[i];if(null!=r&&!e(r))return!1}return!0}function pf(t,e={}){const r=null==e.delimiter?",":e.delimiter,i=!1!==e.header,o=+e.autoMax||1e3;r.length>1&&n("CSV delimiter should be a single character.");const c=function(t,e){let r,i=t.length,n=0,s=i<=0,a=!1;function o(){if(s)return uf;if(a)return a=!1,cf;const r=n;let o,c;if(34===t.charCodeAt(r)){for(;n++<i&&34!==t.charCodeAt(n)||34===t.charCodeAt(++n););return(o=n)>=i?s=!0:10===(c=t.charCodeAt(n++))?a=!0:13===c&&(a=!0,10===t.charCodeAt(n)&&++n),t.slice(r+1,o-1).replace(/""/g,'"')}for(;n<i;){if(10===(c=t.charCodeAt(o=n++)))a=!0;else if(13===c)a=!0,10===t.charCodeAt(n)&&++n;else if(c!==e)continue;return t.slice(r,o)}return s=!0,t.slice(r,i)}return 10===t.charCodeAt(i-1)&&--i,13===t.charCodeAt(i-1)&&--i,{next(){if((r=o())!==uf){const t=[];for(;r!==cf&&r!==uf;)t.push(r),r=o();return t}}}}(t,(r+"").charCodeAt(0));let u=c.next()||[];const h=u.length,l=a(h,(()=>[])),p=i?u:a(h,(t=>`col${t+1}`));let d=0;for(u=i?c.next():u;d<o&&u;++d,u=c.next())for(let t=0;t<h;++t)l[t].push(""===u[t]?null:u[t]);const f=!1===e.autoType?Array(h).fill(of):function(t,e,r={}){return t.map(((t,i)=>s(r[t])?r[t]:function(t){const e=hf.length;for(let r=0;r<e;++r){const[e,i]=hf[r];if(lf(t,e))return i}return of}(e[i])))}(p,l,e.parse);for(f.forEach(((t,e)=>{if(t===of)return;const r=l[e];for(let e=0;e<d;++e)null!=r[e]&&(r[e]=t(r[e]))}));u;u=c.next())for(let t=0;t<h;++t)l[t].push(""===u[t]?null:f[t](u[t]));const y={};return p.forEach(((t,e)=>y[t]=l[e])),new Wu(y,p)}function df(t){const e=t.length;for(let r=0;r<e;++r){const e=t.charCodeAt(r);if(e<48||e>57)return!1}return!0}function ff(t,e={}){const r=Ru(e.autoType);d(t)&&(t=JSON.parse(t));let i,n=t.data;if(l(n)&&!_u(n)?t.schema&&t.schema.fields&&(i=t.schema.fields.map((t=>t.name))):n=t,r||e.parse){const t=e.parse||{};for(const e in n){const i=n[e],s=i.length;if(t[e])for(let r=0;r<s;++r)i[r]=t[e](i[r]);else if(r)for(let t=0;t<s;++t){const e=i[t];d(e)&&lp(e)&&!df(e)&&(i[t]=new Date(e))}}}return new Wu(n,i)}function yf(t,e){const r=g();return e.forEach(((e,i)=>{const s=d(e)?e:i;if(s){const e=t.column(i)||n(`Unrecognized column: ${i}`);r.add(s,e)}})),t.create(r)}function mf(t,e,{before:r,after:i}={}){const s=null!=r,a=null!=i;s||a||n("relocate requires a before or after option."),s&&a&&n("relocate accepts only one of the before or after options."),e=Id(t,e);const o=[...Id(t,s?r:i).keys()],c=s?o[0]:o.pop(),u=new Map;return t.columnNames().forEach((t=>{const r=!e.has(t);if(t===c){a&&r&&u.set(t,t);for(const[t,r]of e)u.set(t,r);if(a)return}r&&u.set(t,t)})),yf(t,u)}function bf(t,e=(t=>t),r=""){const i=t.length;if(!i)return"";let n=e(t[0],0);for(let s=1;s<i;++s)n+=r+e(t[s],s);return n}function gf(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function _f(t){return fu(t)?t:+t}class vf{constructor(t){this.values(t||[])}values(t){if(!arguments.length)return this._start&&(this._values=this._values.slice(this._start),this._start=0),this._values;this._values=t,this._sorted=null,this._start=0}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:function(t,e=0,r=t.length){let i=r?t[e++]:Xl;for(let n=e;n<r;++n)i>t[n]&&(i=t[n]);return i}(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:function(t,e=0,r=t.length){let i=r?t[e++]:Xl;for(let n=e;n<r;++n)i<t[n]&&(i=t[n]);return i}(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values().slice(),this._sorted.sort(gf)),function(t,e){const r=t.length;if(!r)return Xl;if((e=+e)<=0||r<2)return _f(t[0]);if(e>=1)return _f(t[r-1]);const i=(r-1)*e,n=Math.floor(i),s=_f(t[n]);return fu(s)?s:s+(_f(t[n+1])-s)*(i-n)}(this._sorted,t)}}const wf=(t,e,r)=>zu(e,"{"+bf(t,((t,i)=>`_${i}.${r}(${e});`))+"}",t);function xf(t,e){const{ops:r,output:i}=function(t,e){const r={},i=[];function n(t,s=[]){const a=t+":"+s;if(r[a])return r[a];const o=Ep(t),c=o.create(...s);return e&&o.stream&&o.stream.forEach((t=>n(t,[]))),o.req&&o.req.forEach((t=>n(t,[]))),r[a]=c,i.push(c),c}const s=t.map((t=>{const e=n(t.name,t.params);return e.output=t.id,e}));return{ops:i,output:s}}(t,e),s=t[0].fields,a=s.length;return new(0===a?Sf:1===a?If:2===a?Af:n("Unsupported field count: "+a))(s,r,i)}class Sf extends class{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}{constructor(t,e,r){super(r),this._op=e,this._fields=t}init(){const t={count:0,valid:0};return this._op.forEach((e=>e.init(t))),t.values&&(t.list=new vf),t}write(t,e,r){const i=this._outputs,n=i.length;for(let s=0;s<n;++s)e[i[s].output][r]=i[s].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class If extends Sf{constructor(t,e,r){super(t,e,r);const i=["state","v1","v2"];this._add=wf(e,i,"add"),this._rem=wf(e,i,"rem")}add(t,e,r){const i=this._fields[0](e,r);++t.count,ip(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,e,r){const i=this._fields[0](e,r);--t.count,ip(i)&&(--t.valid,t.list&&t.list.rem(i),this._rem(t,i))}}class Af extends Sf{constructor(t,e,r){super(t,e,r);const i=["state","v1","v2"];this._add=wf(e,i,"add"),this._rem=wf(e,i,"rem")}add(t,e,r){const i=this._fields[0](e,r),n=this._fields[1](e,r);++t.count,ip(i)&&ip(n)&&(++t.valid,this._add(t,i,n))}rem(t,e,r){const i=this._fields[0](e,r),n=this._fields[1](e,r);--t.count,ip(i)&&ip(n)&&(--t.valid,this._rem(t,i,n))}}function Tf(t,e,r){if(e.length){const i=t.data(),{keys:n}=t.groups()||{},s=Ef(t,e),a=n?(t,e)=>s[t][n[e]]:t=>s[t][0];r=r.map((t=>e=>t(e,i,a)))}return r}function Ef(t,e,r){if(!e.length)return r;const i=Bf(e),n=t.groups(),s=n?n.size:1;return r=r||a(e.length,(()=>Array(s))),s>1?i.forEach((e=>{const i=Cf(t,e,n);for(let t=0;t<s;++t)e.write(i[t],r,t)})):i.forEach((e=>{const i=kf(t,e);e.write(i,r,0)})),r}function Bf(t,e){const r=[],i={};for(const e of t){const t=e.fields.map((t=>t+"")).join(",");(i[t]||(i[t]=[])).push(e)}for(const t in i)r.push(xf(i[t],e));return r}function kf(t,e){const r=e.init(),i=t.totalRows(),n=t.data(),s=t.mask();if(s)for(let t=s.next(0);t>=0;t=s.next(t+1))e.add(r,t,n);else for(let t=0;t<i;++t)e.add(r,t,n);return r}function Cf(t,e,r){const{keys:i,size:n}=r,s=a(n,(()=>e.init())),o=t.totalRows(),c=t.data(),u=t.mask();if(u)for(let t=u.next(0);t>=0;t=u.next(t+1))e.add(s[i[t]],t,c);else for(let t=0;t<o;++t)e.add(s[i[t]],t,c);return s}function Lf(t,e){const{get:r,names:i,rows:n,size:s}=e,a=i.length;for(let e=0;e<a;++e){const a=t.add(i[e],Array(s)),o=r[e];for(let t=0;t<s;++t)a[t]=o(n[t])}}function Df(t){return{left(e,r,i,n){for(null==i&&(i=0),null==n&&(n=e.length);i<n;){const s=i+n>>>1;t(e[s],r)<0?i=s+1:n=s}return i},right(e,r,i,n){for(null==i&&(i=0),null==n&&(n=e.length);i<n;){const s=i+n>>>1;t(e[s],r)>0?n=s:i=s+1}return i}}}const Mf=Df(gf);function Of(t,e,r,i={},n){const s=t.data(),a=function(t,e){const r={};return t.forEach((t=>{const e=(t=>(t.frame||[null,null]).map((t=>Number.isFinite(t)?t:null)))(t),i=(t=>!!t.peers)(t),n=`${e},${i}`,{aggOps:s,winOps:a}=r[n]||(r[n]={frame:e,peers:i,aggOps:[],winOps:[]});Ap(t.name)?s.push(t):a.push(function(t){const{id:e,name:r,fields:i=[],params:n=[]}=t,s=Bp(r).create(...n);return i.length&&(s.get=i[0]),s.id=e,s}(t))})),Object.values(r).map((t=>function(t,e,r,i,n){let s,a,o,c,u;const h=t=>a[t-1]===a[t],l=i.length,p=n.length,d=i.length?zu(["w","r","k"],"{"+bf(i,((t,e)=>`r[_${e}.id][k]=_${e}.value(w,_${e}.get);`))+"}",i):()=>{},f={i0:0,i1:0,index:0,size:0,peer:h,init(t,e,r,h){f.index=f.i0=f.i1=0,f.size=e.length,s=t,a=e,c=r,u=h,o=n?n.map((t=>t.init())):null;for(let t=0;t<l;++t)i[t].init();return f},value:(e,r)=>r(s[e],t),step(i){const[l,y]=e,m=f.size,b=f.i0,g=f.i1;f.i0=null!=l?Math.max(0,i-Math.abs(l)):0,f.i1=null!=y?Math.min(m,i+Math.abs(y)+1):m,f.index=i,r&&(f.i0>0&&h(f.i0)&&(f.i0=Mf.left(a,a[f.i0])),f.i1<m&&h(f.i1)&&(f.i1=Mf.right(a,a[f.i1-1])));for(let e=0;e<p;++e){const r=n[e],i=o[e];for(let e=b;e<f.i0;++e)r.rem(i,s[e],t);for(let e=g;e<f.i1;++e)r.add(i,s[e],t);r.write(i,c,u)}return d(f,c,u),c}};return f}(e,t.frame,t.peers,t.winOps,Bf(t.aggOps,null!=t.frame[0]))))}(n,s),o=a.length,c=zu(["r","d","op"],"{"+bf(e,((t,e)=>`_${e}[r] = $${e}(r, d, op);`))+"}",e,r);t.partitions().forEach(((e,r)=>{const n=e.length,u=function(t,e){if(t.isOrdered()){const r=t.comparator(),i=t.data(),n=e.length,s=new Uint32Array(n);for(let t=1,a=0;t<n;++t)s[t]=r(e[t-1],e[t],i)?++a:a;return s}return e}(t,e);for(let t=0;t<o;++t)a[t].init(e,u,i,r);const h=t=>i[t][r];for(let t=0;t<n;++t){for(let e=0;e<o;++e)a[e].step(t);c(e[t],s,h)}}))}function Nf(t){return Tp(t.name)||t.frame&&(Number.isFinite(t.frame[0])||Number.isFinite(t.frame[1]))}function Ff(t,{names:e,exprs:r,ops:i},n={}){const s=t.totalRows(),o=g(n.drop?null:t),c=e.map((t=>o.add(t,Array(s)))),[u,h]=function(t){const e=[],r=[],i=t.length;for(let n=0;n<i;++n){const i=t[n];i.id=n,(Nf(i)?r:e).push(i)}return[e,r]}(i),l=t.isGrouped()?t.groups().size:1,p=Ef(t,u,a(i.length,(()=>Array(l))));return h.length?Of(t,c,r,p,h):function(t,e,r,i){const n=t.mask(),s=t.data(),{keys:a}=t.groups()||{},o=a?(t,e)=>i[t][a[e]]:t=>i[t][0],c=e.length;for(let i=0;i<c;++i){const a=r[i],c=e[i];if(n)for(let t=n.next(0);t>=0;t=n.next(t+1))c[t]=a(t,s,o);else{const e=t.totalRows();for(let t=0;t<e;++t)c[t]=a(t,s,o)}}}(t,c,r,p),t.create(o)}function Uf(t,{names:r=[],exprs:i=[],ops:n=[]},s={}){if(!r.length)return t;const a=s.limit>0?+s.limit:1/0,o=s.index?!0===s.index?"index":s.index+"":null,c=new Set(s.drop),u=Tf(t,n,i),h=g(),l=new Set(r),p=[],d=[],f=[];t.columnNames().forEach((e=>{if(!c.has(e)){const r=h.add(e,[]);l.has(e)||(p.push(t.column(e)),d.push(r))}})),r.forEach((t=>{c.has(t)||(h.has(t)||h.add(t,[]),f.push(h.data[t]))}));const y=o?h.add(o,[]):null;let m=0;const b=p.length,_=f.length,v=(t,e)=>{for(let r=0;r<b;++r)d[r].length=m+e,d[r].fill(p[r].get(t),m,m+e)},w=y?(t,e)=>{for(let r=0;r<e;++r)y[t+r]=r}:()=>{};if(1===_){const r=u[0],i=f[0];t.scan(((t,n)=>{const s=e(r(t,n)),o=Math.min(s.length,a);v(t,o);for(let t=0;t<o;++t)i[m+t]=s[t];w(m,o),m+=o}))}else t.scan(((t,r)=>{let i=0;const n=u.map((n=>{const s=e(n(t,r));return i=Math.min(Math.max(i,s.length),a),s}));v(t,i);for(let t=0;t<_;++t){const e=f[t],r=n[t];for(let t=0;t<i;++t)e[m+t]=r[t]}w(m,i),m+=i}));return t.create(h.new())}function Vf(t,r,i,a={window:!1}){const o=new Map,c=e=>{d(e=Sd(e)?r.columnName(e):e)?o.set(e,wd(e)):s(e)?Id(r,e).forEach(c):l(e)?xd(o,e):n(`Invalid ${t} value: ${e+""}`)};return e(i).forEach(c),a.preparse&&a.preparse(o),Hp(o,{table:r,...a})}function Pf(t,e,r,i){const n=r&&r.length;return function(t,{names:e,exprs:r,ops:i},n){const s=Tf(t,i,r),a=n?null:g(t),o=t.totalRows();return e.forEach(((e,r)=>{const i=t.column(e),c=n?i.data:a.add(e,Array(o)),u=s[r];t.scan((t=>{const e=i.get(t);c[t]=ip(e)?e:u(t)}))})),n?t:t.create(a)}(n?function(t,e,r){const i=t.groups(),n=t.data(),s=(i?i.names:[]).concat(e),a=(i?i.get:[]).concat(e.map((e=>t.getter(e)))),o=new Set,c=Ql(a);t.scan(((t,e)=>o.add(c(t,e))));const u=t.columnNames(),h=g(),l=u.map((t=>h.add(t,[])));u.forEach(((e,r)=>{const i=n[e],s=l[r];t.scan((t=>s.push(i.get(t))))}));const p=Ql(a.map(((t,e)=>t=>t[e]))),d=zu("v","{"+l.map(((t,e)=>`_${e}.push(v[$${e}]);`)).join("")+"}",l,u.map((t=>s.indexOf(t))));if(i){let t=i.keys.length;const e=r.reduce(((t,e)=>t*e.length),i.size),n=new Uint32Array(e+(t-o.size));n.set(i.keys),Rf(i,r,((e,r)=>{o.has(p(e))||(d(e),n[t++]=r[0])})),h.groupby({...i,keys:n})}else Rf(i,r,(t=>{o.has(p(t))||d(t)}));return t.create(h.new())}(t,r,i):t,e,n)}function Rf(t,e,r){const i=t?t.get.length:0,n=t?1:0,s=n+e.length,a=new Int32Array(s),o=new Int32Array(s),c=[];if(t){const{get:e,rows:r,size:n}=t;a[0]=n,c.push(((t,n)=>{const s=r[n];for(let r=0;r<i;++r)t[r]=e[r](s)}))}e.forEach(((t,e)=>{const r=e+i;a[e+n]=t.length,c.push(((e,i)=>e[r]=t[i]))}));const u=Array(i+e.length);for(let t=0;t<s;++t)c[t](u,0);r(u,o);for(let t=s-1;t>=0;){const e=++o[t];e<a[t]?(c[t](u,e),r(u,o),t=s-1):(o[t]=0,c[t](u,0),--t)}}function jf(t,{names:e,exprs:r,ops:i}){const n=g(),s=t.groups();return s&&Lf(n,s),function(t,e,r,i=[],n){if(!i.length)return;const s=r?r.size:1,a=(t,e)=>i[t][e],o=t.length;for(let r=0;r<o;++r){const o=e[r];if(null!=o.field)n.add(t[r],i[o.field]);else if(s>1){const e=n.add(t[r],Array(s));for(let t=0;t<s;++t)e[t]=o(t,null,a)}else n.add(t[r],[o(0,null,a)])}}(e,r,s,Ef(t,i),n),t.create(n.new())}function zf(t,r=[],i=[]){return new $f(t,e(r),e(i))}class $f{constructor(t,e,r){this.name=t,this.fields=e,this.params=r}toString(){const t=[...this.fields.map((t=>`d[${yu(t)}]`)),...this.params.map(yu)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}}function Wf(t){t.forEach(((e,r)=>e.field?t.set(r,(t=>zf("unique",t))(e+"")):0))}function Hf(e,r,i,{names:n,exprs:s},a={}){const o=e.data(),c=e.indices(!1),u=c.length,h=new Int32Array(u),l=r.data(),p=r.indices(!1),d=p.length,f=new Int32Array(d),y=n.length,m=g(),b=Array(y),_=Array(y);for(let t=0;t<n.length;++t)b[t]=m.add(n[t],[]),_[t]=s[t];const v=function(t,e){const r=["i","a","j","b"];return zu(r,"{"+bf(t,((t,e)=>`_${e}.push($${e}(${r}));`))+"}",t,e)}(b,_);if((t(i)?Yf:qf)(v,i,o,l,c,p,h,f,u,d),a.left)for(let t=0;t<u;++t)h[t]||v(c[t],o,-1,l);if(a.right)for(let t=0;t<d;++t)f[t]||v(-1,o,p[t],l);return e.create(m.new())}function qf(t,e,r,i,n,s,a,o,c,u){for(let h=0;h<c;++h){const c=n[h];for(let n=0;n<u;++n){const u=s[n];e(c,r,u,i)&&(t(c,r,u,i),a[h]=1,o[n]=1)}}}function Yf(t,[e,r],i,n,s,a,o,c,u,h){let l,p,d,f,y,m,b,g,_,v,w=t;u>=h?(l=i,p=e,d=o,f=s,y=u,m=n,b=r,g=c,_=a,v=h):(l=n,p=r,d=c,f=a,y=h,m=i,b=e,g=o,_=s,v=u,w=(e,r,i,n)=>t(i,n,e,r));const x=new Map;for(let t=0;t<v;++t){const e=b(_[t],m);null!=e&&e==e&&(x.has(e)||x.set(e,[]),x.get(e).push(t))}for(let t=0;t<y;++t){const e=f[t],r=x.get(p(e,l));if(r){const i=r.length;for(let t=0;t<i;++t){const i=r[t];w(e,l,_[i],m),g[i]=1}d[t]=1}}}function Gf(t,r,i){const a=new Map;e(i).forEach(((e,i)=>{d(e=Sd(e)?r.columnName(e):e)?a.set(i,wd(e)):s(e)||l(e)&&e.expr?a.set(i,e):n(`Invalid ${t} key value: ${e+""}`)}));return Ql(Hp(a,{table:r,aggregate:!1,window:!1}).exprs,!0)}const Kf={aggregate:!1,window:!1,index:1};function Jf(r,i,s,a,o={}){s=Qf(r,i,s);const c={join:[r,i]};let u;if(t(s)){const[t,c]=s.map(e);t.length!==c.length&&n("Mismatched number of join keys"),u=[Gf("join",r,t),Gf("join",i,c)],a||(a=function(t,e,r,i){const n=[];e.forEach(((t,e)=>d(t)&&t===r[e]?n.push(t):0));const s=Bd(n);if(i.left&&i.right){const e=new Set(n);return[t.columnNames().map((t=>{const r=`[${yu(t)}]`;return e.has(t)?{[t]:`(a, b) => a${r} == null ? b${r} : a${r}`}:t})),s]}return i.right?[s,Ed()]:[Ed(),s]}(r,t,c,o))}else u=Hp({on:s},c).exprs[0],a||(a=[Ed(),Ed()]);return Hf(r,i,u,function(e,r,i,n,s=[]){if(t(i)){let t,a,o,c=i.length;t=a=o={names:[],exprs:[]},c--&&(t=Vf("join",e,i[0],n)),c--&&(a=Vf("join",r,i[1],Kf)),c--&&(o=Hp(i[2],n));const u=new Set,h=new Set(t.names);return a.names.forEach((t=>{h.has(t)&&u.add(t)})),u.size&&(Zf(t.names,u,s[0]||"_1"),Zf(a.names,u,s[1]||"_2")),{names:t.names.concat(a.names,o.names),exprs:t.exprs.concat(a.exprs,o.exprs)}}return Hp(i,n)}(r,i,a,c,o&&o.suffix),o)}function Qf(e,r,i){if(i)d(i)?i=[i,i]:t(i)&&1===i.length&&(i=[i[0],i[0]]);else{const t=function(t,e){const r=new Set(e);return t.filter((t=>r.has(t)))}(e.columnNames(),r.columnNames());t.length||n("Natural join requires shared column names."),i=[t,t]}return i}function Zf(t,e,r){t.forEach(((i,n)=>e.has(i)?t[n]=i+r:0))}function Xf(e,r,i,n){var s,a;return i=Qf(e,r,i),function(t,e,r,i={}){const n=new sf(t.totalRows()),s=t.numRows(),a=e.numRows(),o=t.data(),c=e.data();if(t.isFiltered()||e.isFiltered()){const i=t.indices(!1),u=e.indices(!1);for(let t=0;t<s;++t){const e=i[t];for(let t=0;t<a;++t)if(r(e,o,u[t],c)){n.set(e);break}}}else for(let t=0;t<s;++t)for(let e=0;e<a;++e)if(r(t,o,e,c)){n.set(t);break}return i.anti&&n.not().and(t.mask()),t.create({filter:n})}(e,r,i=t(i)?(s=Gf("join",e,i[0]),a=Gf("join",r,i[1]),(t,e,r,i)=>{const n=s(t,e),o=a(r,i);return n===o&&null!=n&&null!=o}):Hp({on:i},{join:[e,r]}).exprs[0],n)}const ty=(t,e)=>null!=t?t:e;function ey(t,e,r,i={}){const{keys:n,keyColumn:s}=function(t,e,r){const i=r.limit>0?+r.limit:1/0,n=ty(r.sort,!0),s=ty(r.keySeparator,"_"),a=Tf(t,e.ops,e.exprs),o=1===a.length?a[0]:(t,e)=>a.map((r=>r(t,e))).join(s),c=Array(t.totalRows());t.scan(((t,e)=>c[t]=o(t,e)));const u=Ef(t.ungroup(),[{id:0,name:"unique",fields:[t=>c[t]],params:[]}])[0][0],h=n?u.sort():u;return{keys:Number.isFinite(i)?h.slice(0,i):h,keyColumn:c}}(t,e,i),a=ty(i.valueSeparator,"_"),o=r.names.length>1?(t,e)=>e+a+n[t]:t=>n[t],c=n.map((e=>Ef(t,r.ops.map((t=>{const r=t.fields.map((t=>{const r=(r,i)=>e===s[r]?t(r,i):NaN;return r.toString=()=>e+":"+t,r}));return{...t,fields:r}})))));return t.create(function({names:t,exprs:e},r,i,n){const s=i?i.size:1,a=g(),o=n.length,c=t.length;let u;const h=(t,e)=>u[t][e];i&&Lf(a,i);for(let i=0;i<c;++i){const c=e[i];if(null!=c.field)for(let e=0;e<o;++e)a.add(r(e,t[i]),n[e][c.field]);else if(s>1)for(let e=0;e<o;++e){u=n[e];const o=a.add(r(e,t[i]),Array(s));for(let t=0;t<s;++t)o[t]=c(t,null,h)}else for(let e=0;e<o;++e)u=n[e],a.add(r(e,t[i]),[c(0,null,h)])}return a.new()}(r,o,t.groups(),c))}function ry(t){t.forEach(((e,r)=>e.field?t.set(r,(t=>zf("any",t))(e+"")):0))}function iy(t,e){return jf(t,Hp(e,{table:t,aggronly:!0}))}function ny(t,e,r,i){return(e?i?ay:sy:i?cy:oy)(t.length,t,r,i)}function sy(t,e,r){const i=r.length;for(let n=0;n<t;++n)e[n]=r[i*wp()|0];return e}function ay(t,e,r,i){const n=r.length,s=new Float64Array(n);let a=0;for(let t=0;t<n;++t)s[t]=a+=i(r[t]);const o=Df(gf).right;for(let i=0;i<t;++i)e[i]=r[o(s,a*wp())];return e}function oy(t,e,r){const i=r.length;if(t>=i)return r;for(let i=0;i<t;++i)e[i]=r[i];for(let n=t;n<i;++n){const i=n*wp();i<t&&(e[0|i]=r[n])}return e}function cy(t,e,r,i){const n=r.length;if(t>=n)return r;const s=new Float32Array(n),a=new Uint32Array(n);for(let t=0;t<n;++t)a[t]=t,s[t]=-Math.log(wp())/i(r[t]);a.sort(((t,e)=>s[t]-s[e]));for(let i=0;i<t;++i)e[i]=r[a[i]];return e}const uy=t=>e=>t.get(e)||0;function hy(t,{names:r,exprs:i,ops:n=[]},s={}){if(0===r.length)return t;const a=1===r.length&&s.as||[],o=null==s.drop||!!s.drop,c=null==s.limit?a.length||1/0:Math.max(1,+s.limit||1),u=Tf(t,n,i),h=g(),l=r.reduce(((t,e,r)=>t.set(e,r)),new Map),p=(r,i)=>{const n=function(t,r,i){const n=t.totalRows(),s=[];return t.scan(((t,a)=>{const o=e(r(t,a)),c=Math.min(o.length,i);for(let e=0;e<c;++e){(s[e]||(s[e]=Array(n).fill(Xl)))[t]=o[e]}})),s}(t,u[r],c),s=n.length;for(let t=0;t<s;++t)h.add(a[t]||`${i}_${t+1}`,n[t])};return t.columnNames().forEach((e=>{l.has(e)?(o||h.add(e,t.column(e)),p(l.get(e),e),l.delete(e)):h.add(e,t.column(e))})),l.forEach(p),t.create(h)}function ly(t,{names:e=[],exprs:r=[],ops:i=[]}){const n=e.length;if(0===n)return null;if(1===n&&!t.isFiltered()&&r[0].field){const i=t.column(r[0].field);if(i.groups)return i.groups(e)}let s=Tf(t,i,r);const a=Ql(s),o=t.totalRows(),c=new Uint32Array(o),u={},h=[],l=t.data(),p=t.mask();if(p)for(let t=p.next(0);t>=0;t=p.next(t+1)){const e=a(t,l)+"",r=u[e];c[t]=null!=r?r:u[e]=h.push(t)-1}else for(let t=0;t<o;++t){const e=a(t,l)+"",r=u[e];c[t]=null!=r?r:u[e]=h.push(t)-1}return i.length||(s=s.map((t=>e=>t(e,l)))),{keys:c,get:s,names:e,rows:h,size:h.length}}const py=(t,e,r,i)=>`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${r}\n    : (u > v || v == null) && u != null ? ${i}\n    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${r}\n    : v !== v && u === u ? ${i} : `;var dy={__antijoin:(t,e,r)=>Xf(t,e,r,{anti:!0}),__count:(t,e={})=>iy(t,{[e.as||"count"]:zf("count")}),__cross:(t,e,r,i)=>Jf(t,e,(()=>!0),r,{...i,left:!0,right:!0}),__concat:function(t,e){const r=t.numRows(),i=r+e.reduce(((t,e)=>t+e.numRows()),0);if(r===i)return t;const n=[t,...e],s=g();return t.columnNames().forEach((t=>{const e=Array(i);let r=0;n.forEach((i=>{const n=i.column(t)||{get:()=>Xl};i.scan((t=>e[r++]=n.get(t)))})),s.add(t,e)})),t.create(s.new())},__dedupe:function(t,e=[]){return t.groupby(e.length?e:t.columnNames()).filter("row_number() === 1").reify()},__derive:function(t,e,r={}){const i=Ff(t,Hp(e,{table:t}),r);return r.drop||null==r.before&&null==r.after?i:mf(i,Object.keys(e).filter((e=>!t.column(e))),r)},__except:function(t,e){if(0===e.length)return t;const r=t.columnNames();return e.reduce(((t,e)=>t.antijoin(e.select(r))),t).dedupe()},__filter:function(t,e){const r=Hp({p:e},{table:t});let i=r.exprs[0];if(r.ops.length){const{data:e}=Ff(t,r,{drop:!0}).column("p");i=t=>e[t]}return function(t,e){const r=t.totalRows(),i=t.mask(),n=t.data(),s=new sf(r);if(i)for(let t=i.next(0);t>=0;t=i.next(t+1))e(t,n)&&s.set(t);else for(let t=0;t<r;++t)e(t,n)&&s.set(t);return t.create({filter:s})}(t,i)},__fold:function(t,e,r){return function(t,{names:e=[],exprs:r=[],ops:i=[]},n={}){if(0===e.length)return t;const[s="key",a="value"]=n.as||[],o=Tf(t,i,r);return Uf(t,{names:[s,a],exprs:[()=>e,(t,e)=>o.map((r=>r(t,e)))]},{...n,drop:e})}(t,Vf("fold",t,e),r)},__impute:function(t,e,r={}){if((e=Hp(e,{table:t})).names.forEach((e=>t.column(e)?0:n(`Invalid impute column ${yu(e)}`))),r.expand){const i=Vf("impute",t,r.expand,{preparse:Wf}),n=jf(t.ungroup(),i);return Pf(t,e,i.names,i.names.map((t=>n.get(t,0))))}return Pf(t,e)},__intersect:function(t,e){const r=t.columnNames();return e.length?e.reduce(((t,e)=>t.semijoin(e.select(r))),t).dedupe():t.reify([])},__join:Jf,__lookup:function(t,e,r,i){return function(t,e,[r,i],{names:n,exprs:s,ops:a}){const o=g(t),c=t.totalRows();n.forEach((t=>o.add(t,Array(c))));const u=new Map;e.scan(((t,e)=>{const r=i(t,e);null!=r&&r==r&&u.set(i(t,e),t)}));const h=new Int32Array(t.numRows()),l=new Int32Array(t.numRows());let p=0;t.scan(((t,e)=>{const i=u.get(r(t,e));h[p]=t,l[p]=null==i?-1:i,++p}));const d=e.data(),f=Tf(e,a,s),y=f.length;for(let t=0;t<y;++t){const e=o.data[n[t]],r=f[t];for(let t=0;t<p;++t){const i=l[t];e[h[t]]=i>=0?r(i,d):Xl}}return t.create(o)}(t,e,[Gf("lookup",t,(r=Qf(t,e,r))[0]),Gf("lookup",e,r[1])],Vf("lookup",e,i))},__pivot:function(t,e,r,i){return ey(t,Vf("fold",t,e),Vf("fold",t,r,{preparse:ry,aggronly:!0}),i)},__relocate:mf,__rollup:iy,__sample:function(t,e,r={}){return function(t,e,r,i={}){const n=!!i.replace,s=t.partitions(!1);let a=0;e=s.map(((t,r)=>{let i=e(r);return a+=i=n?i:Math.min(t.length,i),i}));const o=new Uint32Array(a);let c=0;return s.forEach(((t,i)=>{const s=e[i],a=o.subarray(c,c+=s);n||s!==t.length?ny(a,n,t,r):a.set(t)})),t.reify(o)}(t,function(t,e){return Sd(e)?()=>e:uy(jf(t,Hp({size:e},{table:t})).column("size"))}(t,e),function(t,e){return null==e?null:(e=Sd(e)?t.columnName(e):e,uy(d(e)?t.column(e):Ff(t,Hp({w:e},{table:t}),{drop:!0}).column("w")))}(t,r.weight),r)},__select:function(t,e){return yf(t,Id(t,e))},__semijoin:Xf,__spread:function(t,e,r){return hy(t,Vf("spread",t,e),r)},__union:function(t,e){return t.concat(e).dedupe()},__unroll:function(t,e,r){return Uf(t,Vf("unroll",t,e),r&&r.drop?{...r,drop:Vf("unroll",t,r.drop).names}:r)},__groupby:function(t,e){return function(t,e){return t.create({groups:ly(t,e)})}(t,Vf("groupby",t,e))},__orderby:function(t,e){return function(t,e){return t.create({order:e})}(t,function(t,e){let r=-1;const i=new Map,a=t=>i.set(++r+"",t);return e.forEach((e=>{const r=null!=e.expr?e.expr:e;if(l(r)&&!s(r))for(const t in r)a(r[t]);else a(Sd(r)?wd(e,t.columnName(r)):d(r)?wd(e):s(r)?e:n("Invalid orderby field: "+(e+"")))})),function(t,e){const r=[],i=[];let n=null,s="0",a="0";t.isGrouped()&&(n=t.groups().keys,s="ka",a="kb");const{ops:o}=Hp(e,{table:t,value:(t,e)=>{r.push(t),i.push([Kl(e,{index:"a",op:s}),Kl(e,{index:"b",op:a})])},window:!1}),c=Ef(t,o),u=(t,e)=>c[t][e],h=r.length;let l="return (a, b) => {"+(u&&t.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let t=0;t<h;++t){const n=e.get(r[t]).desc?-1:1,[s,a]=i[t];l+=py(s,a,-n,n)}return l+="0;};",Function("op","keys","data",l)(u,n,t.data())}(t,i)}(t,e))},__ungroup:function(t){return t.isGrouped()?t.create({groups:null}):t},__unorder:function(t){return t.isOrdered()?t.create({order:null}):t},__reduce:function(t,e){const r=g(),i=t.groups(),{get:n,names:s=[],rows:a,size:o=1}=i||{},c=new Uint32Array(o+1);s.forEach((t=>r.add(t,null)));const u=i?Cf(t,e,i):[kf(t,e)];e.outputs().map((t=>r.add(t,[])));const h=c.length-1;let l=0;for(let t=0;t<h;++t)l+=c[t+1]=e.write(u[t],r.data,c[t]);if(i){const e=t.data();s.forEach(((t,i)=>{const s=r.data[t]=Array(l),u=n[i];for(let t=0,r=0;t<o;++t)s.fill(u(a[t],e),r,r+=c[t+1])}))}return t.create(r.new())}};function fy(t,e){return Wu.from(t,e)}function yy(t,e={}){const r=e.using||pf;return fetch(t,e.fetch).then((t=>t[e.as||"text"]())).then((t=>r(t,e)))}function my(e,r){return t(e)?fy(e):ff(e,r)}Object.assign(Wu.prototype,dy);function by(t,e,r){switch(t){case"csv":return function(t,e){return yy(t,{...e,as:"text",using:pf})}(e,r);case"json":return function(t,e){return yy(t,{...e,as:"json",using:my})}(e,r);case"arrow":return function(t,e){return yy(t,{...e,as:"arrayBuffer",using:af})}(e,r);default:!function(t){throw Error(t)}(`Unsupported file format: ${JSON.stringify(t)}`)}}const gy=new class{constructor(){this._tables=new Map}get(t){return this._tables.get(t)}set(t,e){this._tables.set(t,e)}list(){return[...this._tables.keys()]}add(t,e){if(this._tables.has(t))throw`Table already exists: "${t}"`;this.set(t,e)}drop(t){return this._tables.delete(t)}append(t,e){this.set(t,this.get(t).concat(e))}query(t,e){return e.evaluate(t?this.get(t):null,(t=>this.get(t)))}},_y=(new Map).set("add",(function({name:t,append:e,data:r}){const i=function(t){const e=typeof t;return ArrayBuffer.isView(t)?af(t):Array.isArray(t)?fy(t):"string"===e?ff(t):function(t,e){const r=Np(t);return new Wu(r.reduce(((t,[e,r])=>(t[e]=r,t)),{}),e||r.map((t=>t[0])))}(t)}(r);return wy(t,i,e)})).set("drop",(function({name:t}){return{type:"table",name:t,drop:gy.drop(t)}})).set("fetch",(function({name:t,format:e,options:r}){return xy(gy.get(t),e,r)})).set("list",(function(){return{type:"list",list:gy.list()}})).set("load",(async function({name:t,append:e,url:r,format:i,options:n}){const s=await by(i,r,n);return wy(t,s,e)})).set("query",(function({query:t,as:e,format:r,options:i}){const n=gy.query(t.name,function(t){return Gd.from(t)}(t));return e?wy(e,n):xy(n,r,i)})).set("seed",(function({seed:t}){return xp(t),{type:"seed",seed:t}}));function vy(t,e,r={}){switch(e){case"arrow":return t.toArrowBuffer(r);case"json":default:return t.toJSON(r)}}function wy(t,e,r=!1){return r?gy.append(t,e):gy.add(t,e),{type:"table",table:t}}function xy(t,e,r){return{type:"data",data:vy(t,e,r)}}onmessage=async function(t){const e=t.data;!async function(t,e){const{method:r,params:i}=t;if(_y.has(r))try{const t=_y.get(r),n=await t(i),s=ArrayBuffer.isView(n.data)?[n.data.buffer]:null;e.send(n,s)}catch(t){e.error(t)}else e.error(`Unknown method: ${r}`)}(e,Sy(e))};const Sy=t=>{const e={id:t.id,method:t.method};return{error(t){postMessage({status:"error",request:e,error:t&&t.message||String(t)})},send(t,r){postMessage({status:"result",request:e,result:t},r)}}}}();
//# sourceMappingURL=arquero-worker.min.js.map
